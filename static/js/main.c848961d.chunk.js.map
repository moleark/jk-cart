{"version":3,"sources":["../node_modules/pdfh5/js sync","css/style.css","css/rst.css","serviceWorker.ts","global.ts","tapp/CBase.ts","home/VSearchHeader.tsx","images/logo_mobi.png","home/VSiteHeader.tsx","home/VSlider.tsx","tools/browser.ts","images/AnalyticalChemistry.png","images/LabSupplies.png","images/LifeScience.png","images/MaterialScience.png","images/OrganicChemistry.png","images/AnalyticalChemistry.jpg","images/LabSupplies.jpg","images/LifeScience.jpg","images/MaterialScience.jpg","images/OrganicChemistry.jpg","home/VHome.tsx","tools/CustomHeaderTemplate.tsx","home/VScanCode.tsx","home/CHome.tsx","cart/VCartLabel.tsx","cart/VCartLabelWeb.tsx","tools/minusPlusWidget.tsx","tools/elasticSearchPager.ts","cart/VCart.tsx","cart/CCart.tsx","tools/productImage.tsx","product/renders.tsx","product/views/VChemicalInfo.tsx","product/views/VFavorite.tsx","product/views/VDelivery.tsx","product/views/VProductView.tsx","product/views/VInCart.tsx","product/views/VPrice.tsx","product/views/VProductView2.tsx","product/views/VWithPrice.tsx","tools/randomColor.ts","images/logo_pointShop.png","images/signInIcon.png","images/exChangeIcon.png","images/homeTopicMap.jpg","images/TriangleShadingO.png","images/TriangleShadingT.png","images/signTopicMap.png","images/Homemadelogo.png","images/signViceMap.png","images/point.png","pointMarket/view/VModalC.tsx","pointMarket/VExchangeOrder.tsx","tools/pageHeaderTitle.tsx","pointMarket/view/VPointRule.tsx","pointMarket/basicRefer.ts","pointMarket/VMyPoint.tsx","tools/inputValidations.ts","customer/VContact.tsx","customer/VContactList.tsx","customer/VAddress.tsx","customer/CAddress.tsx","customer/CSelectContact.tsx","pointMarket/OrderSuccess.tsx","pointMarket/pointOrder.ts","pointMarket/VExchangeHistoryDetail.tsx","tools/listTable.tsx","pointMarket/VExchangeHistory.tsx","pointMarket/VRevenueExpenditure.tsx","images/giftPlate.png","images/已下架.png","pointMarket/VPointProductDetail.tsx","pointMarket/VSelectedLable.tsx","images/infb.jpg","pointMarket/view/VDefaultPost.tsx","pointMarket/view/VShopSideBar.tsx","tools/VError.tsx","pointMarket/CPointProduct.tsx","pointMarket/VPointProduct.tsx","product/VPageProduct.tsx","product/VPageList.tsx","product/VPagePDF.tsx","product/VPageCoa.tsx","product/VPageSkillSearch.tsx","product/CProduct.ts","order/VModelByCreateOrder.tsx","order/VCreateOrder.tsx","order/Order.ts","order/OrderSuccess.tsx","order/VMyOrders.tsx","order/VOrderDetail.tsx","customer/VInvoiceInfo.tsx","customer/CInvoiceInfo.tsx","tools/groupByProduct.ts","coupon/Coupon.ts","coupon/VVIPCard.tsx","coupon/VCouponAvailable.tsx","order/VEpecOrderError.tsx","order/VOrderTrans.tsx","order/ActivePushOrder.tsx","order/COrder.tsx","productCategory/VRootCategory.tsx","productCategory/VRootCategorySideBar.tsx","productCategory/VBreadCrumbs.tsx","productCategory/VCategoryPage.tsx","images/J&K triangle combinations 5.png","images/J&K triangle combinations4.png","productCategory/VCategoryHome.tsx","productCategory/CProductCategory.tsx","images/pig.png","member/VMember.tsx","member/CMember.tsx","me/contactUs.tsx","me/aboutThisApp.tsx","images/welcome.png","me/VMeSideBar.tsx","me/VMe.tsx","me/EditMeInfo.tsx","me/EditMeInfoFirstOrder.tsx","customer/VFavorites.tsx","customer/CFavorites.tsx","me/VLoginState.tsx","me/about.tsx","me/CMe.tsx","tapp/main.tsx","coupon/VSharedCoupon.tsx","coupon/VVIPCardDiscount.tsx","coupon/VCouponManage.tsx","coupon/VModelCardDiscount.tsx","coupon/CCoupon.tsx","ync/VYncProjects.tsx","ync/CYncProjects.tsx","pointMarket/lottery/VLottery.tsx","pointMarket/lottery/VMyLotteryPrize.tsx","pointMarket/lottery/prizeOrder.ts","pointMarket/lottery/CLottery.tsx","images/已签到.png","pointMarket/signIn/VPointSign.tsx","images/积分图标P.png","pointMarket/signIn/CSignIn.tsx","store/Cart.ts","store/Product.ts","store/store.ts","CurrentUser.ts","order/VQuickOrder.tsx","order/CQuickOrder.tsx","tapp/CApp.ts","tapp/webNav.tsx","tapp/CWeb.tsx","uq-app/uqs/JkDeliver/Carrier.ui.tsx","uq-app/uqs/JkDeliver/OrderMain.ui.tsx","uq-app/uqs/JkDeliver/OrderDetail.ui.tsx","uq-app/uqs/JkDeliver/DeliverMain.ui.tsx","uq-app/uqs/JkDeliver/DeliverDetail.ui.tsx","uq-app/uqs/JkDeliver/DeliverMainEx.ui.tsx","uq-app/uqs/JkDeliver/DxDeliverMain.ui.tsx","uq-app/uqs/JkDeliver/DxDeliverDetail.ui.tsx","uq-app/uqs/JkOrder/Coupon.ui.tsx","uq-app/uqs/JkOrder/Chemical.ui.tsx","uq-app/uqs/JkOrder/SalesRegion.ui.tsx","uq-app/uqs/JkOrder/Currency.ui.tsx","uq-app/uqs/JkOrder/PackType.ui.tsx","uq-app/uqs/JkOrder/Address.ui.tsx","uq-app/uqs/JkOrder/Country.ui.tsx","uq-app/uqs/JkOrder/Province.ui.tsx","uq-app/uqs/JkOrder/City.ui.tsx","uq-app/uqs/JkOrder/County.ui.tsx","uq-app/uqs/JkOrder/InvoiceType.ui.tsx","uq-app/uqs/JkOrder/Customer.ui.tsx","uq-app/uqs/JkOrder/Organization.ui.tsx","uq-app/uqs/JkOrder/Contact.ui.tsx","uq-app/uqs/JkOrder/InvoiceInfo.ui.tsx","uq-app/uqs/JkOrder/Brand.ui.tsx","uq-app/uqs/JkOrder/ProductX.ui.tsx","uq-app/uqs/JkOrder/Warehouse.ui.tsx","uq-app/uqs/JkOrder/WebUser.ui.tsx","uq-app/uqs/JkOrder/BuyerAccount.ui.tsx","uq-app/uqs/JkOrder/CommonText.ui.tsx","uq-app/uqs/JkOrder/ExpressLogistics.ui.tsx","uq-app/uqs/JkOrder/OrderDetail.ui.tsx","uq-app/uqs/JkOrder/OrderMain.ui.tsx","uq-app/uqs/JkOrder/OrderMainEx.ui.tsx","uq-app/uqs/JkOrder/OrderDetailEx.ui.tsx","uq-app/uqs/JkOrder/DxOrderDetail.ui.tsx","uq-app/uqs/JkOrder/DxOrderMainState.ui.tsx","uq-app/uqs/JkOrder/IxOrderDetailFee.ui.tsx","uq-app/uqs/JkOrder/IxOrderMainFee.ui.tsx","uq-app/uqs/JkOrder/IxOrderDetailCoupon.ui.tsx","uq-app/uqs/JkOrder/IxOrderMainCustomerCoupon.ui.tsx","uq-app/uqs/JkOrder/JkOrder.ts","uq-app/uqs/JkCollectPayment/Organization.ui.tsx","uq-app/uqs/JkCollectPayment/Customer.ui.tsx","uq-app/uqs/JkCollectPayment/Currency.ui.tsx","uq-app/uqs/JkCollectPayment/OrderDetail.ui.tsx","uq-app/uqs/JkCollectPayment/OrderMain.ui.tsx","uq-app/uqs/JkCollectPayment/ReceiveDetail.ui.tsx","uq-app/uqs/JkCollectPayment/ReceiveMain.ui.tsx","uq-app/uqs/JkCollectPayment/DxOrderDetail.ui.tsx","uq-app/uqs/JkCollectPayment/DxOrderDetailReturn.ui.tsx","uq-app/uqs/JkCollectPayment/DxReceiveMain.ui.tsx","uq-app/uqs/JkCollectPayment/JkCollectPayment.ts","uq-app/uqs/JkProduct/Chemical.ui.tsx","uq-app/uqs/JkProduct/SalesRegion.ui.tsx","uq-app/uqs/JkProduct/Currency.ui.tsx","uq-app/uqs/JkProduct/PackType.ui.tsx","uq-app/uqs/JkProduct/Language.ui.tsx","uq-app/uqs/JkProduct/Brand.ui.tsx","uq-app/uqs/JkProduct/Stuff.ui.tsx","uq-app/uqs/JkProduct/ProductX.ui.tsx","uq-app/uqs/JkProduct/ProductCategory.ui.tsx","uq-app/uqs/JkProduct/Lot.ui.tsx","uq-app/uqs/JkProduct/PackSalesLevel.ui.tsx","uq-app/uqs/JkCustomer/Currency.ui.tsx","uq-app/uqs/JkCustomer/Contact.ui.tsx","uq-app/uqs/JkCustomer/Customer.ui.tsx","uq-app/uqs/JkCustomer/InvoiceType.ui.tsx","uq-app/uqs/JkCustomer/Research.ui.tsx","uq-app/uqs/JkCustomer/Province.ui.tsx","uq-app/uqs/JkCustomer/Department.ui.tsx","uq-app/uqs/JkCustomer/BuyerAccount.ui.tsx","uq-app/uqs/JkCustomer/Organization.ui.tsx","uq-app/uqs/JkCustomer/Country.ui.tsx","uq-app/uqs/JkCustomer/InvoiceInfo.ui.tsx","uq-app/uqs/JkCustomer/City.ui.tsx","uq-app/uqs/JkCustomer/Post.ui.tsx","uq-app/uqs/JkCustomer/County.ui.tsx","uq-app/uqs/JkCustomer/SalesRegion.ui.tsx","uq-app/uqs/JkCustomer/Employee.ui.tsx","uq-app/uqs/JkCustomer/Address.ui.tsx","uq-app/uqs/JkCustomer/Domain.ui.tsx","uq-app/uqs/JkCustomer/ProductX.ui.tsx","uq-app/uqs/JkCustomer/Brand.ui.tsx","uq-app/uqs/JkCustomer/CustomerSettingType.ui.tsx","uq-app/uqs/JkCustomer/VIPCardType.ui.tsx","me/loginTop.tsx","tvs/common.tsx","tvs/product.tsx","tvs/customer.tsx","uq-app/appConfig.ts","tvs/index.tsx","tvs/warehouse.tsx","tvs/order.tsx","index.tsx"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","options","locals","Boolean","window","location","hostname","match","EnumCategory","CUqBase","CBase","CUqApp","CSub","type","c","this","init","CAppBase","VSearchHeader","onSearch","key","param","a","controller","cApp","cProduct","topKey","nav","popTo","start","size","className","allowEmptySearch","placeholder","View","VSiteHeader","left","src","logo","alt","style","height","width","right","undefined","renderSearchHeader","VSlider","banners","length","random","Math","floor","path","browser","versions","u","navigator","userAgent","appVersion","trident","indexOf","presto","webKit","gecko","mobile","ios","android","uc","iPhone","iPad","webApp","html5Plus","xs","w","innerWidth","h","innerHeight","d","document","compatMode","documentElement","clientWidth","clientHeight","body","getViewportSize","xsOrIpad","categoryIdRes","CategoryIds_Production","OrganicChemistry","AnalyticalChemistry","LifeScience","MaterialScience","LabSupplies","CategoryIds_Test","RootCategoryRes","viceSrc","OrganicChemistry_j","labelColor","bgClass","AnalyticalChemistry_j","LifeScience_j","MaterialScience_j","LabSupplies_j","GLOABLE","env","testing","CHINA","CHINESE","SALESREGION_CN","ANDROIDAPPADDRESS","PIRVACYURL","CONTENTSITE","EPEC","AUTOLOGIN","PUSHORDERURL","PUNCHOUT","PUNCHOUTXML","LOGISTIC","ORDERTRANS","rootCategroyResFromId","categoryId","categoryIds","VHome","downloadApp","open","pageContent","siteHeader","isWebNav","renderCategoryRootList","renderVm","header","onClick","VPage","CustomHeaderTemplate","content","bg","textC","back","classNames","background","minHeight","cursor","color","name","minWidth","padding","ScanCodeTip","VScanCode","scan","media","plus","barcode","Barcode","onmarked","result","text","QR","EAN13","EAN8","console","log","reg","verArr","test","Ver","charAt","shiftArr","split","includes","Number","scanCodetoProductDetail","scanClose","alert","close","closePage","page","observer","setTimeout","role","openPage","CHome","PageItems","homeSections","sectionTuid","openScanCode","openVPage","renderView","cProductCategory","renderRootList","getSlideShow","uqs","webBuilder","GetSlideShow","table","list","map","v","origin","currentSalesRegion","product","GetProductByOrigin","obj","salesRegion","productByOrigin","showProductDetail","tab","VCartLabel","React","badge","pointer","count","store","cart","showCart","VCartLabelWeb","vCount","top","fontSize","backgroundColor","borderRadius","href","MinusPlusWidget","minusClick","getValue","setValue","plusClick","ref","input","p","parentElement","tagName","disabled","renderContent","renderTemplet","cn","hasError","itemSchema","required","cursorPointer","minusColor","plusColor","hasFocus","hasAction","readOnly","hasValue","isNaN","value","minus","invisible","defaultValue","onChange","onKeyDown","onFocus","evt","onBlur","maxLength","renderErrors","find","UpdownWidget","MinusPlusWidgetTable","ElasticSearchPager","searchUrl","urlGen","pageSize","firstSize","itemObservable","idFieldName","pageNumber","appendPosition","sortOrder","pageStart","keyWord","salesregion","url","generateUrl","fetch","method","headers","resp","json","ret","items","hits","$page","UrlGen","productUrlGen","productCatalogUrlGen","productStandardUrlGen","cartSchema","arr","VCart","punchOutXML","punchOutUrl","punchOutSubmit","generatePunchOutXML","cxmlBase64","CheckOutButton","checkOut","strikeOut","cartBtnMatch","amount","check","getCartButtonTip","action","onSubmit","CartButtonClick","encType","visibility","position","message","addEventListener","preventDefault","renderCartItem","item","renderCartProduct","onItemClick","packsRow","pack","price","tv","uiSchema","selectable","deletable","restorable","widget","Templet","ArrContainer","label","RowContainer","packs","RowSeperator","quantity","WidgetClass","onChanged","onQuantityChanged","onDeleted","onRemoveCartItem","cartForm","data","cartItems","textIndent","schema","formData","whetherToEdit","empty","footer","renderQuickOrder","cQuickOrder","openQuickOrder","makeObservable","observable","params","displayBtn","CCart","editButton","CartBtnMatch","selectedCartItems","navigate","currentUser","thirdPartyOrg","webuserId","ok","context","prev","parentData","retail","currency","changeQuantity","row","packsToDeleted","forEach","each","push","productId","packId","removeItem","onRowStateChanged","selected","deleted","cartItem","isDeleted","getSelectedItems","removeStrike","punchOut","assureLogin","doFirstOrderChecking","cMe","allowOrdering","toPersonalAccountInfo","doCheckOut","cOrder","createOrderFromCart","renderDeliveryTime","tabPage","res","organization","cCart","altimagePath","ProductImage","props","chemicalId","t","Date","getTime","substr","imagePath","altImage","PointProductImage","pointProductImagePath","renderBrand","brand","renderPropItem","caption","captionClass","capClass","valClass","VChemicalInfoInCart","chemical","purity","CAS","molecularFomula","molecularWeight","VFavorite","callback","curPack","favorite","favoriteOrCancel","stopPropagation","imgSrc","zIndex","VDelivery","getProduct","owner","futureDeliveryTimeDescription","inventoryAllocation","getInventoryAllocation","restrict","some","index","warehouse","deliveryTimeDescription","defColor","values","String","replace","VInCart","cName","description","descriptionC","imageUrl","dangerouslySetInnerHTML","__html","VPrice","isShowTable","vipPrice","promotionPrice","minPrice","visible","retailUI","min","Infinity","prices","renderPrice","VPriceWithTr","VPriceQuickOrder","selectPack","changeProductQuantity","QPacks","noPackTip","selectedPack","pricesByPackUI","i","target","hidden","radiox","radioy","unit","VProuductView2","onProductClick","dataSource","productListSource","eName","wordWrap","maxHeight","event","renderPropItemC","marginBottom","paddingLeft","paddingRight","CutLine","cutLine","VProductWithPrice","randomColor","VModalC","medalOnClick","footerUI","title","children","onClose","onOk","onCancel","setAttribute","display","VExchangeOrder","shippingAddressIsBlank","box","pageDesc","OrderSource","EXCHANGEORDER","disBtn","nullContact","renderPointProduct","pointProduct","border","pointIcon","point","onSubmitOwn","submitOrder","orderData","cLottery","prizeOrderData","shippingContact","set","renderContact","onSelectShippingContact","changeVisible","autoHideTips","pointProductsSelected","pointsSum","pointToExchanging","vModel","renderContnet","render","VMyPrizeExchangeOrder","PRIZEORDER","myPrizeLib","pageHTitle","CrPageHeaderTitle","VPointRule","maxWidth","RevenueExpenditure","VMyPoint","pointRules","pointblock","icon","recommendOrHot","theme","imgArr","slice","clm","none","UINoExchangeTip","myEffectivePoints","myPointTobeExpired","myTotalPoints","pointProductGenre","newPointProducts","hotPointProducts","openRevenueExpenditure","openExchangeHistory","openPointSign","cSignIn","dateYear","getFullYear","nowPoint","nowPointTip","actions","hasCustomer","renderMeSideBar","renderDropdownActions","homeTopicMap","backgroundSize","logo_pointShop","flex","signInIcon","exChangeIcon","renderGenreItem","triangleShadingO","triangleShadingT","topicClumps","renderPointRecord","comments","date","telephoneValidation","mobileValidation","emailValidation","faxValidation","addressDetailValidation","zipCodeValidation","organizationNameValidation","nameValidation","VContact","userContactData","form","rules","organizationName","telephone","email","address","pickId","pickAddress","addressValue","country","province","city","county","chineseName","addressString","isDefault","isDefaultInvoice","submit","onSaveContact","buttonClick","onFormButtonClick","saveContact","onDelContact","contact","vCall","VConfirmDeleteContact","delContact","ContactDataP","defaultOrganizationName","defaultName","defaultMobile","saveButton","isSave","btnContent","fromOrderCreation","buttonDel","contactData","_","clone","titleH","onButtonClick","fieldLabelSize","onConfirm","returnCall","confirm","Modal","VContactList","contactSelectSource","onContactRender","onEditContact","onContactSelected","okText","okType","cancelText","onNewContact","userContacts","contactList","VAddress","provinceId","cityId","countyId","backLevel","titleHeader","provinces","renderPCC","onProvinceClick","pcc","marginRight","getProvinceCities","cities","len","onCityClick","openPageElement","saveAddress","getCityCounties","counties","onCountyClick","getCountryProvince","VAddressRW","cAddress","modalTitleS","preLevel","modalTitle","VProvince","VCity","VCounty","CAddress","countryId","common","GetCountryProvinces","GetProvinceCities","GetCityCounties","Address","save","newAddress","addressId","boxId","CSelectContact","renderContentList","userContact","userContactId","customer","Contact","load","getSetting","userSetting","cSelectShippingContact","getIsDefault","cSelectInvoiceContact","setDefaultContact","findIndex","splice","saveContactData","contactBox","backPage","contactTuid","newContact","newContactId","addContact","source","cPointProduct","newC","call","getContactList","getContacts","userContactMaps","CSelectShippingContact","contactId","setDefaultShippingContact","CSelectInvoiceContact","invoiceContact","setDefaultInvoiceContact","OrderSuccess","orderCreateResult","afterBack","no","pointOrder","webUser","exchangeItems","computed","reduce","pv","cv","subAmount","oi","exchangeitems","OrderItem","VExchangeHistoryDetail","renderexchangeItem","orderItem","grade","order","brief","state","UI_CON_state","ListTable","columns","VExchangeHistory","exchangeHistory","renderExchangeHistory","openOrderDetail","historyListTable","VRevenueExpenditure","showList","tipNone","matchData","pagePointHistory","signinPageHistory","onScrollBottom","scroller","more","headerT","sources","VPointProductDetail","renderVDefaultPost","OffShelf","OffShelfTip","已下架","pointProductsDetail","renderShopSideBar","giftPlate","renderSelectedLable","availablePoints","pointsInsuffTip","VSelectedLable","openSelectedPointProduct","VDefaultPost","infb","VShopSideBar","Gengres","Object","el","VError","contentView","topicClump","Arrtoobj","typeName","PointIntervals","startPoint","endPoint","CPointProduct","myPoints","pointProducts","couponId","platformOrderId","platformOrder","refreshMypoint","getPoints","effectiveLeftPoint","totalLeftPoint","pointYear","initPointProducts","clearSelectedPointsProducts","openMyPoint","getPointProductGenre","getNewPointProducts","getHotPointProducts","openPointProduct","积分商城","Genre","getPointProductByDifferentPlot","VPointProduct","openPointProductDetail","PointProductLib","fm","getPointProductLibLoad","findProduct","moment","endDate","setPointProductVisits","getPointProductDetailFragment","topic","getPointHistory","promises","PointExchangeSheet","mySheets","Promise","all","presult","concat","orderId","getSheet","user","filter","VSelectedPointProduct","openExchangeOrder","getDefaultShippingContact","SetPointProductVisits","QueryPager","GetPointHistory","first","currentCustomer","plot","productGenre","newRecommend","hotProduct","filterByProductGenre","currentGenre","GetPointProductByGenre","genre","pointProductFromGenre","getProductsFromGenre","PointProductGenre","pointproduct","GetNewPointProducts","sort","b","GetHotPointProducts","getPointsIntervalProducts","pointInterval","GetPointProduct","getProductSources","PointProductSource","sourceId","IsContain","nowQuantity","element","getDataForSave","flow","IsCouponCanUse","couponCode","salesTask","IsCanUseCoupon","validationResult","types","openMeInfoOptions","userInfoCompletedChecking","openMeInfoFirstOrder","addUsedCoupon","defaultSetting","contact0","selectContact","cSelect","contactArr","getDefaultSetting","getContact","renderHr","HRCL","HRST","styleObj","isShowSelectForm","productIsNull","pointIsEnough","currentInterval","themeName","tabs","rankInterval","borderC","getTabs","TabCaptionComponent","renderList","isSelected","isToDetail","cProductUI","ProductUI","getRelatedUI","tabPosition","languageCaptions","SymbolSrcs","basicInfoKey","insideKey","webKey","securityInfoKey","VPageProduct","renderAssistInfo","basicInfoUI","securityInfoUI","descriptionPostUI","productCrumbsUI","standardSampleUI","extention","descriptionPost","productCrumbs","standardSample","JSON","parse","allContent","o","ind","basicInfos","securityInfos","tableInfo","components","matrix","thead","tds","descriptionCC","descriptionc","cas","concentration","material","showMob","productDocs","effectArr","renderProduct","warnings","mdlnumber","arrTemplet","renderPack","cartLabel","CL","ST","cHome","renderCartLabel","lineHeight","VPageList","onPageScrollBottom","scrollToBottom","productsPager","esproductsPager","Array","searchKey","esProductsPagerMore","esProductsTotal","currentPage","renderRootSideBarByMob","renderRootSideBar","before","scrollIntoView","behavior","block","inline","defaultCurrent","hideOnSinglePage","total","showSizeChanger","VPagePDF","pdfh5","fileName","fileUrl","isFoundFile","fileContent","parsRenderPDF","Pdfh5","rel","overflowY","BrandImg","VPageCoa","COAContent","version","issueDate","lot","format","arr1","OtherArr","print","borderTopStyle","renderCOAItem","lotnumber","cont","prototype","toString","iframeLists","querySelectorAll","materialCaptions","CName","EName","defLangs","language","docTypeWithCaptcha","VPageSkillSearch","productOrigin","productLot","captchaInput","selectVal","productOriginTip","productLotTip","productLotTipNone","captchaTip","buttonDisable","materialType","assistContent","captchaUI","lots","tip","langUI","captcha","productMscuVersions","getCaptcha","langArr","currtCaptcha","getPDFFileUrl","lang","status","msg","CProduct","currentFileName","currentLanguage","currentProduct","showFavorites","productConverter","queryResults","loadListItem","searchAction","setItemConverter","JumpSource","loadDetail","renderProductWithPrice","ToVerifyPdf","fileInfo","toLocaleUpperCase","fetchPdf","getLotByOrigin","getLot","getCoaByOrigin","lotNumber","COA","GetLotByLotnumber","credentials","arrayBuffer","statusText","timer","openMaterial","toLowerCase","loadBase","searchByKey","encodeURIComponent","SearchProduct","productCategory","VModelByCreateOrder","renderModelContent","showBack","overflowX","VCreateOrder","useShippingAddress","shippingAddressTip","invoiceAddressTip","invoiceTip","comBininvoiceTip","orderNotes","submitOrderEd","parseFloat","toFixed","renderOrderItem","renderOrderItemProduct","orderItemKey","packID","renderCoupon","couponAppliedData","hasAnyCoupon","removeCoupon","offsetUI","remittedUI","noOffsetUI","couponOffsetAmount","couponRemitted","cancelCouponUI","onBuyerAccountChanged","renderBuyerAccount","buyerAccount","renderBuyerAccounts","buyerAccounts","onSelect","activePushOrder","invoiceType","invoiceInfo","combinTip","assure","invoiceInfoO","taxNo","bank","accountNo","endComments","maxAmount","saveShowModal","replyToContactType","renderTip","onSelectInvoiceContact","onInvoiceInfoEdit","onCouponEdit","getValidCardForWebUser","get","chevronRight","divInvoiceContact","labeled","contentClass","invoiceContactUI","defaultChecked","currentTarget","checked","invoiceInfoUI","freightFeeUI","freightFeeRemittedUI","freightFee","freightFeeRemitted","couponUI","orderItems","productAmounts","outline","resize","borderColor","rows","Order","coupon","productAmount","subListAmount","pk","orderitems","textAlign","paddingTop","VMyOrders","listAll","currentState","toRepeat","orderListTable","stateA","os","colSpan","renderOrder","changeShowOrders","getMyOrders","flat","searchMyOrders","loadList","searchOrderByKey","toSearchOrdersUI","onShown","paginationUI","current","tabBg","VOrderDetail","againCreatOrder","initialData","transportation","orderTransUI","carrier","waybillNumber","transNumber","expressLogistics","openOrderTrans","orderAgainUI","userSelect","commentsUI","infoArr","isShow","invoiceTemplate","invoiceTypeUI","trim","regArr","j","commonRequired","valueAddedRequired","commonVisible","valueAddedVisible","VInvoiceInfo","saveTip","invoiceInfoData","origInvoice","invoice","saveInvoiceInfo","onSaveInvoice","onInvoiceTypeClick","parseInt","buildForm","renderInvoiceContent","InvoiceTypeChecked","frm","htmlFor","requiredFields","visibleFields","CInvoiceInfo","saveInvoiceInfoData","invoiceBox","InvoiceInfo","newInvoiceInfo","newInvoiceInfoId","InvoiceType","setDefaultInvoice","groupByProduct1","packItems","packItem","cpi","cparam","activityTime","CouponBase","expiredDate","isValid","codeShow","now","createOrderPriceStrategy","couponData","discount","preferential","validitydate","discountSetting","VIPCard","Coupon","CouponSale","Credits","isAvaliable","BottomDiscount","brandDiscountMap","lastDiscount","discountPrice","round","thisDiscountSetting","Tuid","equ","priceInit","max","multiple","IsInActivePeriod","startDate","newDate","getTips","invalidTip","COUPONBASE","VCoupon","renderRight","showDiscountSetting","vipCardId","renderCardDescription","cardDescription","discountShow","renderActivityDescription","renderCardReveal","CardReveal","isOpenMyCouponManage","useddate","expireddate","getEasyDate","getCodeShow","p1","p2","couponUi","tipUI","showModelCardDiscount","VVIPCard","VCredits","VCouponUsed","year","VCoupleAvailable","couponInput","vipCardForWebUser","coupons","tips","applyCoupon","applySelectedCoupon","vipCardUI","renderModelCardDiscount","couponsForWebUser","creditsForWebUser","cCoupon","VEpecOrderError","error","VOrderTrans","orderTrans","orderTrackUI","orderTrackRult","resTime","time","step","remark","steps","ina","dYear","dTime","ActivePushOrder","agtCustomerType","PushOrderEpec","PushOrder","pushOrder","orderRes","openOrderSuccess","epecOrder","getDataForSave2","mode","stringify","rep","repContent","openEpecOrderError","COrder","orderPageStart","getUserOrders","editContact","validCardForWebUser","initOrderFreightFee","FREIGHTFEEFIXED","hasCoupons","webuser","WebUserBuyerAccount","query","buyerAccountQResult","getDefaultInvoiceContact","getDefaultInvoiceType","getDefaultInvoiceInfo","webUserVIPCard","getCouponValidationResult","vipCardCode","getValidDiscounts","orderAgain","$isDeleted","$isSelected","createdate","nowDate","usedDate","getMonth","getDate","customerId","CustomerCoupon","del","couponType","CustomerCouponUsed","add","WebUserCoupon","WebUserCouponUsed","CustomerCredits","credits","CustomerCreditsUsed","saleOrderItem","WebUserCredits","WebUserCreditsUsed","saleOrder","getValidCredits","getValidCoupons","validCoupons","applyTo","openMyOrders","GetPendingPayment","result3","result2","result1","SearchOrders","cInvoiceInfo","newInvoice","salesRegionId","JkOrder","productx","deliver","IDDetailGet","main","OrderMain","detail","OrderDetail","getOrderDetail","ID","IDX","OrderMainEx","getOrderMainEx","DxOrderMainState","getOrderMainState","mainArr","createDate","sumAmount","Currency","promise1","utcOffset","assign","commentsAboutDeliver","orderItemsn","promise","ProductX","GetProductPrices","then","pricex","GetOrderDetailTransportation","orderDetail","inteLogistics","getOrderTransportation","orderTransportation","getOrderTrackByTransNum","transCompany","currTransBoxId","transCompanyId","transCompanyIdTest","response","pickProvince","pickCity","pickCounty","renderInvoice","renderValidCard","vipCard","applyCoupon1","couponRet","applyTip","VRootCategory","renderRootCategory","parent","renderSubCategory","renderThirdCategory","rootCategories","root","join","VRootCategorySideBar","pcId","menuId","renderChildren","renderCategoryItem","VRootCategorySideBarToSelect","VBrandCrumbs","allAncestors","jL","productcategorylanguage","jl","VCategoryPage","getBgClass","productCategoryId","breadcrumbs","instruction","instructionUi","renderSubcategory","titleBgClass","vItem","renderCategory","VCategoryHome","combinations5","combinations4","CProductCategory","getCategoryInstruction","onClickCategory","pc","showCategoryPage","loadRoot","ProductCategory","GetRootCategory","stopCache","results","secend","third","buildChildren","getCategoryChildren","pcTuid","getAllAncestors","ProductCategoryLoad","unshift","pcCurrentLanguage","GetChildrenCategory","subCategories","secendSubCategory","sub","subProductCategory","subParent","subName","subTotal","VP","searchByCategory","stylePig","backgroundImage","pig","opacity","VMember","recommendationCodeRef","member","recommendationCode","im","inviteCode","divPoints","pointThisWeek","pointAll","fansTitle","fansDetail","setReferrer","CMember","referrer","loginCallback","pop","internalStart","isLogined","showLogin","currentUserId","MemberAction","MemberRecommender","fans","sections","post","phones","number","fax","Row","ContactUs","phone","phoneIndex","eIndex","AboutThisApp","links","margin","appConfig","resetAll","checkVersion","MeLib","image","belongs","component","iconClass","VMeSideBar","pathname","VMe","contactUs","privacy","openPrivacy","aboutThisApp","changePassword","openContactList","openInvoice","openCouponManage","openFavorites","meInfo","nick","openMeInfo","userSpan","orderStates","aboutRows","openAbout","logOutRows","bk","exit","welcome","meLib","showLogout","EditMeInfo","webUserData","webUserContactData","onItemChanged","newValue","preValue","userApi","userSetProp","saveLocalUser","onWebUserChanged","changeWebUser","onWebUserContactChanged","changeWebUserContact","webUserSchema","webUserUiSchema","webUserContactSchema","webUserContactUiSchema","firstName","gender","salutation","departmentName","zipCode","EditMeInfoFirstOrder","f","merge","webUserContacts","addContactFromAccount","actionButton","onCompleted","onlyRequired","note","schemaArr","VFavorites","productsFavorites","CFavorites","myFavorites","searchByFavorites","getMyFavirates","VLoginState","Avatar","imgStyle","VAbout","CMe","pick","openMyCouponManage","cMyFavorites","fn","showPrivacyPage","getCommonText","textId","CommonText","showLoginOut","webUserContact","VMain","notify","cartCount","VSharedCoupon","tipsAfterDawed","products","drawCouponUI","sharedCouponValidationResult","couponDrawed","loginWhenDrawCoupon","countDown","showTips","waitingSeconds","setInterval","renderCouponBase","VVIPCardDiscount","renderVIPCardDiscountSetting","VCouponManage","currentStatus","oss","toolTip","getCoupons","receiveCoupon","drawCoupon","conductReveal","CouponViewOrUse","tipsUI","VModelCardDiscount","CardDiscount","renderCardDiscount","couponTips","CCoupon","curCardDiscount","couponPager","rtn","getCouponDiscountSetting","getValidMusterForWebUser","getUserdCoupon","getExpiredCoupon","shift","getValidVipCardForWebUser","validVIPCardForWebUser","validCouponsForWebUser","validCreditsForWebUser","creditsCode","WebUserVIPCard","getValidCouponsForWebUser","getValidCreditsForWebUser","VIPCardDiscount","showSharedVIPCard","vipcard","productids","autoDrawCouponBase","getProducts","showSharedCoupon","showSharedCredits","couponBaseCode","allowCurrentUser","creditsId","drawedResult","pramArr","drawedResult3","vipCardType","VYncProjects","YncProjectsItems","headerClassName","renderItem","model","returnYncProject","ProjectName","CYncProjects","OrganCode","UserId","YncProjectsResponse","getYncProjects","FormData","append","VLottery","currIndex","winning","isLottery","lotterySuccess","aDeg","prize","lottery","lotteryProducts","productsLib","decreasingNumberOfDraws","winningProduct","speed","indexMR","mR","roll","clearTimeout","totalCount","renderLotteryBtn","remainingNumOfDraws","renderPrizesBlock","transform","borderRight","borderLeft","transformOrigin","openMyLotteryPrize","bottom","VMyLotteryPrize","renderMyPrize","myPrize","openMyPrizeOrder","prizeOrder","CLottery","totalNumPrizes","openLotteryProduct","getLotteryProducts","getLotteryNumOfDraws","basedChanceHandlePrizes","getMyPrizes","addMyPrize","PR","base","from","k","VPointSign","rulesNum","renderRule","ruleContent","boxShadow","padStart","demandBlock","isSignin","signinval","signTopicMap","已签到","Homemadelogo","CSignIn","signinConsecutiveDays","isSignined","addSigninSheet","getSigninConsecutiveDays","getSigninHistory","checkIsSignin","Signin","GetPointSigninHistory","Cart","cartData","cartStore","disposer","calcSum","cp","pi","NaN","againOrderCart","findRepeatData","PriceX","productPromises","filtPacksByProductId","discountinued","expireDate","findPack","autorun","CartRemote","CartLocal","buildItem2","ci","storeCart","priceMap","cps","cpp","cartItemExists","packExists","pe","cartItemIndex","removeFromCart","CartStore","GetCart","SetCart","RemoveFromCart","LOCALCARTNAME","productTuid","packTuid","div","cartstring","localStorage","getItem","cartDataBoxed","productbox","packbox","TuidDiv","setItem","Product","msds","spec","coa","um","getProductPacks","currentSalesRegionId","salesLevel","loadFavorite","delProductFavorites","addProductFavorites","getProductAndDiscount","customerDiscount","GetDiscount","getProductExtention","ProductExtention","loadDescriptionPost","loadStandardSample","Productstandardsample","loadProductCrumbs","ProductProductCategory","getProductCategorys","category","keyArr","productCategoryByParent","loadProductWarnings","getProductWarningSigns","getProductEmbargo","ChemicalJNKRestrict","JNKRestrictByChemical","chemicalSecurity","JNKRestrict","jnkRestrict","warningSign","ProductEmbargo","beginDate","packDescription","dateTime","getVerifyCode","shallow","loadBrand","loadChemical","loadPrices","loadMSDSFile","loadSpecFile","loadCOAFile","loadUserManualFile","loadFDTimeDescription","GetAvailableProductById","Brand","ProductChemical","ProductMSDSFile","productMSDSFiles","ProductSpecFile","specFiles","getProductLotNumber","coaFile","ProductUserManualFile","userManualFile","promotion","Discounts","brandDiscounts","VIPDiscount","brandDiscount","getQuantity","promises1","GetPromotionPack","GetInventoryAllocation","results2","newPacks","ProductDeliveryTime","futureDeliveryTime","GetFutureDeliveryTime","minValue","maxValue","Store","cache","Map","buildItems","dispose","WebUser","_user","epecUser","webUserSettings","setUser","loadWebUser","webUserTuid","platformjoint","WebUserContact","WebUserSetting","WebUserCustomer","RecordLogin","ip","app","NeoTridentUser","EpecUser","Customer","accountValue","WebUserContacts","newContactBox","saveDefaultSettings","invoiceTypeId","invoiceInfoId","getMyUsedCoupon","getMyExpiredCoupon","customerSettings","Contractor","Organization","CustomerContacts","CustomerDiscount","discounts","OrganizationDiscount","getcustomerDiscount","getOrganizationDiscount","CustomerBuyerAccount","customerBuyerAccount","Buyeraccount","getBuyerAccountID","BuyerAccountName","search","getBuyerAccountCustomerRes","CustomerSetting","customerContactorMap","contractor","getCustomerOrganization","customerOrganization","getcustomerDiscountArr","setDefaultSettings","VQuickOrder","directOrderType","excelData","execlFileName","excelTip","inputStorageToOrigin","quickOrderProducts","iptValue","productContent","noProductTip","rightUI","renProduct","renderPriceQuickOrderView","excelUpload","reads","FileReader","files","readAsBinaryString","onload","workbook","XLSX","read","firstSheet","SheetNames","worksheet","Sheets","csv1","csv","idx","csv2table","utils","sheet_to_csv","readExcelFile","accept","UploadExcel","overOrder","quickOrderDised","every","addMoreProducts","getProductByOriginOrPack","leng","newArr","radioyArr","unitArr","QueryProductsByOriginOrPack","origins","CQuickOrder","initProduct","queryProductByOrigin","nOrigin","GetProductPackByOrigin","resultArr","productExists","packArr","promises2","packExistsFormPrices","findOriginById","getProductByOrigin","finddefaultPack","getPriceByPackID","CApp","cMember","cFavorites","cYncProjects","navHome","showMain","navSearch","qs","buildCartItems","navProduct","navProductMSCU","navCart","navProductCategory","navProductCategoryHome","showCategoryHome","navPointShop","navAbout","navMe","navContactList","navInvoice","navMyOrders","navOrderDetail","navCouponManage","navFavorites","navPassword","navMeInfo","navQuickOrder","navPointProduct","navPointProductDetail","navPointProductOrder","navPointProductOrderDetail","initCart","prouductBoxId","onChangeLogin","resolveRoute","webNav","getWebNav","navHeader","navRawHeader","navFooter","navRawFooter","VNavHeader","VNavRawHeader","VNavFooter","VNavRawFooter","renderPageHeader","initTabName","routes","onNavRoutes","setHomeRoute","onNavRoute","reject","history","initLogined","initNotLogined","initUQs","ProductCategorys","id_test","VMainWebNav","tabContent","NavHeaderView","searchType","searchPhlder","searchClick","keyValue","vLogin","vCartLabel","searchPhlderVal","searchTypeUI","NavFooterView","CWeb","renderLogin","ReactDOM","renderLoginState","renderHomeCart","renderCartLabel_web","setIsWebNav","isMobile","pageWebNav","hookElements","onfocus","reloadUser","elements","login","homeCart","elRoot","getElementById","setRes","$zh","$en","str","uqStringify","fields","ui","fieldArr","$create","deliverId","warehouseName","staff","pickRows","deliverTime","deliverDone","sumQuanity","couponNo","sheetId","seller","salesman","poNumber","orderItemId","endUser","retailCurrency","bottomPrice","bottomPriceCurrency","costPrice","costPriceCurrency","poItemNumber","mark","tradeType","taxRate","promotionId","deliverReturn","deliverReturnDone","receive","receiveDone","receiveTime","receiveReturn","receiveReturnDone","invoiceDone","invoiceTime","invoiceReturn","invoiceReturnDone","ix","xi","fee","ixx","EnumFeeType","EnumOrderState","direction","receiveWay","receiveNr","receiveDate","receiver","usedAmount","returnAmount","leftAmount","EnumReceiveDirection","EnumReceiveWay","desc","descVice","tvAddress","tvCountry","tvCurrency","tvProduct","tvContact","jk","alias","dev","noUnit","tvs","packx","oem","loginTop","loadQQScript","createElement","appendChild","loadBaiduTongji","hm","s","getElementsByTagName","parentNode","insertBefore","setSettings","endsWith","require","onLogined","startPage","userPassword","startsWith","lgtk","App","notLogined","StrictMode","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c848961d.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 259;","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!../../node_modules/postcss-loader/src/index.js??postcss!./style.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!../../node_modules/postcss-loader/src/index.js??postcss!./rst.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import AnalyticalChemistry from './images/AnalyticalChemistry.png';\r\nimport LabSupplies from './images/LabSupplies.png';\r\nimport LifeScience from './images/LifeScience.png';\r\nimport MaterialScience from './images/MaterialScience.png';\r\nimport OrganicChemistry from './images/OrganicChemistry.png';\r\n\r\nimport AnalyticalChemistry_j from './images/AnalyticalChemistry.jpg';\r\nimport LabSupplies_j from './images/LabSupplies.jpg';\r\nimport LifeScience_j from './images/LifeScience.jpg';\r\nimport MaterialScience_j from './images/MaterialScience.jpg';\r\nimport OrganicChemistry_j from './images/OrganicChemistry.jpg';\r\n\r\nimport { env } from 'tonva-react';\r\n\r\nenum EnumCategory { OrganicChemistry = 1, AnalyticalChemistry = 2, LifeScience = 3, MaterialScience = 4, LabSupplies = 5 };\r\nconst CategoryIds_Production: { [id: number]: EnumCategory } = {\r\n\t47: EnumCategory.OrganicChemistry,\r\n\t470: EnumCategory.AnalyticalChemistry,\r\n\t1013: EnumCategory.LifeScience,\r\n\t1219: EnumCategory.MaterialScience,\r\n\t1545: EnumCategory.LabSupplies,\r\n};\r\nconst CategoryIds_Test: { [id: number]: EnumCategory } = {\r\n\t7: EnumCategory.OrganicChemistry,\r\n\t430: EnumCategory.AnalyticalChemistry,\r\n\t986: EnumCategory.LifeScience,\r\n\t1214: EnumCategory.MaterialScience,\r\n\t1545: EnumCategory.LabSupplies,\r\n};\r\n\r\ninterface CategoryRes {\r\n\tsrc: string;\t\t// 所用图片的src \r\n\tviceSrc: string;    // 副图片的src \r\n\tlabelColor: string;\r\n\tbgClass: string;\r\n}\r\n\r\nconst RootCategoryRes: { [key in EnumCategory]: CategoryRes } = {\r\n\t[EnumCategory.OrganicChemistry]: {\r\n\t\tsrc: OrganicChemistry,\r\n\t\tviceSrc: OrganicChemistry_j,\r\n\t\tlabelColor: 'text-info',\r\n\t\tbgClass: \"mint-bg\",\r\n\t},\r\n\t[EnumCategory.AnalyticalChemistry]: {\r\n\t\tsrc: AnalyticalChemistry,\r\n\t\tviceSrc: AnalyticalChemistry_j,\r\n\t\tlabelColor: 'text-success',\r\n\t\tbgClass: \"green-bg\",\r\n\t},\r\n\t[EnumCategory.LifeScience]: {\r\n\t\tsrc: LifeScience,\r\n\t\tviceSrc: LifeScience_j,\r\n\t\tlabelColor: 'text-danger',\r\n\t\tbgClass: \"red-bg\",\r\n\t},\r\n\t[EnumCategory.MaterialScience]: {\r\n\t\tsrc: MaterialScience,\r\n\t\tviceSrc: MaterialScience_j,\r\n\t\tlabelColor: 'text-warning',\r\n\t\tbgClass: \"purple-bg\",\r\n\t},\r\n\t[EnumCategory.LabSupplies]: {\r\n\t\tsrc: LabSupplies,\r\n\t\tviceSrc: LabSupplies_j,\r\n\t\tlabelColor: 'text-primary',\r\n\t\tbgClass: \"blue-bg\",\r\n\t},\r\n};\r\n\r\ninterface Language {\r\n\tid: number;\r\n\tno: \"zh-CN\";\r\n\tdescription: \"华 -中国\";\r\n};\r\n\r\ninterface SaleRegion {\r\n\tid: number;\r\n\tname: string;\r\n\tcurrency: 5;\r\n\tno: \"CN\";\r\n};\r\n\r\ninterface Global {\r\n\tCHINA: number;\r\n\tCHINESE: Language;\r\n\tSALESREGION_CN: SaleRegion;\r\n\t//TIPDISPLAYTIME: 3000;\r\n\tANDROIDAPPADDRESS: string;\r\n\tPIRVACYURL: string;\r\n\tCONTENTSITE: string;\r\n\tEPEC: {\r\n\t\tAUTOLOGIN: string;\r\n\t\tPUSHORDERURL: string;\r\n\t},\r\n\tPUNCHOUT: {\r\n\t\tPUNCHOUTXML: string;\r\n\t},\r\n\tLOGISTIC: {\r\n\t\tORDERTRANS: string;\r\n\t},\r\n};\r\n\r\n// 生产配置\r\nconst GLOABLE_PRODUCTION: Global = {\r\n\tCHINA: 44,\r\n\tCHINESE: { \"id\": 196, \"no\": \"zh-CN\", \"description\": \"华 -中国\" },\r\n\tSALESREGION_CN: { \"id\": 1, \"name\": \"中国大陆\", \"currency\": 5, \"no\": \"CN\" },\r\n\t//TIPDISPLAYTIME: 3000,\r\n\tANDROIDAPPADDRESS: \"https://shop.jkchemical.com/download/jk-shop.apk\",\r\n\tPIRVACYURL: \"https://shop.jkchemical.com/privacy/shop.txt\",\r\n\tCONTENTSITE: \"https://web.jkchemical.com\",\r\n\tEPEC: {\r\n\t\tAUTOLOGIN: \"https://web.jkchemical.com/api/joint/clientLogin\",\r\n\t\tPUSHORDERURL: \"https://joint.jkchemical.com/epec/pushOrder\"\r\n\t},\r\n\tPUNCHOUT: {\r\n\t\tPUNCHOUTXML: \"https://joint.jkchemical.com/punchout/generatePunchOutXML\"\r\n\t},\r\n\tLOGISTIC: {\r\n\t\tORDERTRANS: \"https://joint.jkchemical.com/logistics/getTravelInformation\"\r\n\t},\r\n\t// CONTENTSITE: \"http://localhost:6061\",\r\n}\r\n\r\n// 测试环境配置\r\nconst GLOABLE_TEST: Global = {\r\n\tCHINA: 43,\r\n\tCHINESE: { \"id\": 197, \"no\": \"zh-CN\", \"description\": \"华 -中国\" },\r\n\tSALESREGION_CN: { \"id\": 4, \"name\": \"中国大陆\", \"currency\": 5, \"no\": \"CN\" },\r\n\tANDROIDAPPADDRESS: \"https://shop.jkchemical.com/download/jk-shop.apk\",\r\n\tPIRVACYURL: \"https://test.jkchemical.com/privacy/shop.txt\",\r\n\tCONTENTSITE: \"https://test.jkchemical.com\",\r\n\tEPEC: {\r\n\t\tAUTOLOGIN: \"https://test.jkchemical.com/api/joint/clientLogin\",\r\n\t\tPUSHORDERURL: \"https://test.jkchemical.com/joint/epec/pushOrder\"\r\n\t},\r\n\tPUNCHOUT: {\r\n\t\tPUNCHOUTXML: \"https://test.jkchemical.com/joint/punchout/generatePunchOutXML\"\r\n\t},\r\n\tLOGISTIC: {\r\n\t\tORDERTRANS: \"https://test.jkchemical.com/joint/logistics/getTravelInformation\"\r\n\t},\r\n}\r\n\r\nexport const GLOABLE = env.testing === true ? GLOABLE_TEST : GLOABLE_PRODUCTION;\r\n//export { GLOABLE_PRODUCTION as GLOABLE };\r\n//export { GLOABLE_TEST as GLOABLE };\r\n\r\nlet categoryIdRes: { [id: number]: CategoryRes };\r\n(function () {\r\n\tcategoryIdRes = {};\r\n\tlet categoryIds = env.testing === true ? CategoryIds_Test : CategoryIds_Production;\r\n\tfor (let id in categoryIds) {\r\n\t\tcategoryIdRes[id] = RootCategoryRes[categoryIds[id]];\r\n\t}\r\n})();\r\n\r\nexport function rootCategroyResFromId(categoryId: number): CategoryRes {\r\n\treturn categoryIdRes[categoryId];\r\n}\r\n","// import { CSub, CBase, CAppBase, IConstructor, PageWebNav } from 'tonva-react';\r\n// import { UQs } from '../uqs';\r\n// import { CApp } from './CApp';\r\n\r\n// export abstract class CUqBase extends CBase {\r\n//     get cApp(): CApp { return this._cApp; }\r\n//     protected get uqs(): UQs { return this._uqs as UQs };\r\n//     getPageWebNav(): PageWebNav { return this.cApp.getPageWebNav(); }\r\n// }\r\n\r\n// export abstract class CUqSub<T extends CUqBase> extends CSub<T> {\r\n//     get cApp(): CApp { return this.cApp; }\r\n//     protected get uqs(): UQs { return this._uqs as UQs };\r\n//     protected get owner(): T { return this._owner as T }\r\n//     getPageWebNav(): PageWebNav { return this.cApp.getPageWebNav(); }\r\n// }\r\n\r\n// export abstract class CUqApp extends CAppBase {\r\n//     get uqs(): UQs { return this._uqs };\r\n\r\n//     protected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n//         let c = new type(this);\r\n//         c.init();\r\n//         return c;\r\n//     }\r\n// }\r\n\r\n//=== UqApp builder created on Fri Jul 16 2021 23:47:57 GMT-0400 (北美东部夏令时间) ===//\r\nimport { CSub, CBase, CAppBase, IConstructor } from 'tonva-react';\r\nimport { UQs } from 'uq-app';\r\nimport { CApp } from './CApp';\r\n\r\nexport abstract class CUqBase extends CBase<CApp, UQs> {\r\n}\r\n\r\nexport abstract class CUqSub<A extends CAppBase<U>, U, T extends CBase<A, U>> extends CSub<A, U, T> {\r\n}\r\n\r\nexport abstract class CUqApp extends CAppBase<UQs> {\r\n    protected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n        let c = new type(this);\r\n        c.init();\r\n        return c;\r\n    }\r\n}\r\n","import { View, nav, SearchBox } from 'tonva-react';\r\nimport { CHome } from './CHome';\r\n\r\n\r\nexport class VSearchHeader extends View<CHome> {\r\n\r\n    private onSearch = async (key: string, param: 'home' | 'insearch' | 'productdetail') => {\r\n        let { cProduct, topKey } = this.controller.cApp;\r\n        if (param !== 'home') {\r\n            nav.popTo(topKey);\r\n        }\r\n        cProduct.start({ key: key, type: 1 });\r\n    }\r\n\r\n    render(param: 'home' | 'insearch' | 'productdetail') {\r\n        let size: any = param === 'home' ? \"md\" : 'sm';\r\n        return <SearchBox className=\"w-100\"\r\n            size={size}\r\n            allowEmptySearch = {true}\r\n            onSearch={(key: string) => this.onSearch(key, param)}\r\n            placeholder=\"搜索品名、编号、CAS、MDL等\" />\r\n    }\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABGCAYAAACQRffVAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAF8mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDUtMjlUMTU6MDY6MzgtMDQ6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA1LTI5VDE3OjE4OjM2LTA0OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA1LTI5VDE3OjE4OjM2LTA0OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmE3ZjJlZGZmLTlkMzUtNDBiNy1hNmRhLTNlNDZjZWMwOWJiZiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3ZmY0N2IxZC1mZmYwLTQ3ZWMtYjVhNS1hZDZkOGNkY2Y2MzEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3ZmY0N2IxZC1mZmYwLTQ3ZWMtYjVhNS1hZDZkOGNkY2Y2MzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdmZjQ3YjFkLWZmZjAtNDdlYy1iNWE1LWFkNmQ4Y2RjZjYzMSIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0yOVQxNTowNjozOC0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmE3ZjJlZGZmLTlkMzUtNDBiNy1hNmRhLTNlNDZjZWMwOWJiZiIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0yOVQxNzoxODozNi0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BVuKlQAACWlJREFUeJzlm32QVlUdxz/Pw8MuLAgIsiAvusKAxC6p1JBoYhKCVtSgGGSWOaKCFjKppJjNOFraCxVaEwUiE5ZCmQahEVC8hLptqEWstpBAA4jBKiDs6i672x/fe3nuc577cu7zXJxl+MzsPPece86553vvefmd3zmbqq6o5OQiVWjGjwK3ZhKsyQdEGwWKXggMTydbmXbLIOA8YMmpIvi7zu8rp4LgjwCTnesXTwXBjzi/e4EtJ6ngNtuEVwAXOdcvAE0nqWBrFnuuVwHEmZY6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\"","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport { LMR, FA, View } from 'tonva-react';\r\nimport logo from '../images/logo_mobi.png';\r\nimport { CHome } from './CHome';\r\nimport 扫一扫 from 'images/扫一扫.png';\r\n\r\nexport class VSiteHeader extends View<CHome> {\r\n    render() {\r\n        let currentSalesRegion = <FA name=\"globe\" />\r\n        let left = <img className=\"m-1 ml-2\" src={logo} alt=\"logo\" style={{ height: \"3rem\", width: \"2.5rem\" }} />;\r\n        //let cart = this.controller.cApp.cCart.renderCartLabel();\r\n        // let right = undefined; // \r\n        let right = undefined;\r\n        /* if (navigator.userAgent.indexOf(\"Html5Plus\") > -1) {\r\n            right = <img src={扫一扫} alt=\"\" className=\"mr-2\" style={{ width: 24 }} onClick={this.controller.openScanCode} />;\r\n        } */\r\n        /*\r\n        <div className=\"d-flex flex-row mr-1 align-items-center\">\r\n            {currentSalesRegion} &nbsp;\r\n            <button onClick={()=>nav.start()}>Try</button>\r\n        </div>;*/\r\n        return <LMR\r\n            className=\"mb-1 align-items-center bg-white reset-z-header-boxS\"\r\n            left={left} right={right}>\r\n            <div className=\"px-3 py-4\">\r\n                {this.controller.renderSearchHeader('md')}\r\n            </div>\r\n        </LMR>\r\n        //<div className=\"h4 px-3 mb-0\">百灵威科技</div>\r\n    }\r\n}","/* eslint-disable */\r\nimport { View } from 'tonva-react';\r\nimport { CHome } from './CHome';\r\nimport Slider from \"react-slick\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nconst sliderSetting = {\r\n    dots: false,\r\n    infinite: true,\r\n    speed: 500,\r\n    autoplay: true,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n    arrows: false,\r\n    isArrows: true,\r\n    isDots: true\r\n};\r\n\r\nexport class VSlider extends View<CHome> {\r\n\r\n    public render(param: any) {\r\n\r\n        let { banners } = this.controller;\r\n        if (banners.length > 0) {\r\n            let random = Math.floor(Math.random() * 10 % banners.length);\r\n            return <img src={banners[random].path} className=\"d-block w-100\" alt=\"...\"></img>\r\n        }\r\n\r\n        /**\r\n        return <Slider {...sliderSetting} className=\"bg-white\" >\r\n            {this.controller.banners.map((banner, index) => <div key={index} >\r\n                <img src={banner.path} className=\"d-block w-100\" alt=\"...\"></img>\r\n            </div>)}\r\n        </Slider>\r\n        **/\r\n    }\r\n}\r\n","/* eslint-disable */\r\nexport let browser = {\r\n    versions: function () {\r\n        var u = navigator.userAgent, app = navigator.appVersion;\r\n        return {\r\n            trident: u.indexOf('Trident') > -1,                            //IE内核\r\n            presto: u.indexOf('Presto') > -1,                              //opera内核\r\n            webKit: u.indexOf('AppleWebKit') > -1,                         //苹果、谷歌内核\r\n            gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') === -1,    //火狐内核\r\n            mobile: !!u.match(/AppleWebKit.*Mobile.*/),                    //是否为移动终端\r\n            ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),               //ios终端\r\n            android: u.indexOf('Android') > -1, //android终端或者uc浏览器\r\n            uc: u.indexOf('Linux') > -1, //android终端或者uc浏览器\r\n            iPhone: u.indexOf('iPhone') > -1,                              //是否为iPhone或者QQHD浏览器\r\n            iPad: u.indexOf('iPad') > -1,                                  //是否iPad\r\n            webApp: u.indexOf('Safari') === -1,                             //是否web应该程序，没有头部与底部\r\n            html5Plus: u.indexOf('Html5Plus') > -1                      //是否微信 （2015-01-22新增）\r\n        };\r\n    }()\r\n};\r\n\r\nexport let xs = (function () {\r\n\r\n    function getViewportSize(w?: any) {\r\n        w = w || window;\r\n        if (w.innerWidth != null) return { w: w.innerWidth, h: w.innerHeight };\r\n        var d = w.document;\r\n        if (document.compatMode === \"CSS1Compat\")\r\n            return { w: d.documentElement.clientWidth, h: d.documentElement.clientHeight };\r\n        return { w: d.body.clientWidth, h: d.body.clientHeight };\r\n    }\r\n    return getViewportSize().w < 576;\r\n})();\r\n\r\nexport let xsOrIpad = xs || browser.versions.iPad;","export default __webpack_public_path__ + \"static/media/AnalyticalChemistry.91620b99.png\";","export default __webpack_public_path__ + \"static/media/LabSupplies.7d2d3bf7.png\";","export default __webpack_public_path__ + \"static/media/LifeScience.c1c493a6.png\";","export default __webpack_public_path__ + \"static/media/MaterialScience.2c3ee8eb.png\";","export default __webpack_public_path__ + \"static/media/OrganicChemistry.5d7b018f.png\";","export default __webpack_public_path__ + \"static/media/AnalyticalChemistry.0cf78cfd.jpg\";","export default __webpack_public_path__ + \"static/media/LabSupplies.1b21a99f.jpg\";","export default __webpack_public_path__ + \"static/media/LifeScience.1d393df4.jpg\";","export default __webpack_public_path__ + \"static/media/MaterialScience.02f0c8a4.jpg\";","export default __webpack_public_path__ + \"static/media/OrganicChemistry.f9e01928.jpg\";","import { VPage } from 'tonva-react';\r\nimport { CHome } from './CHome';\r\nimport { VSiteHeader } from './VSiteHeader';\r\nimport { VSlider } from './VSlider';\r\nimport { browser } from 'tools/browser';\r\nimport { GLOABLE } from 'global';\r\n\r\nexport class VHome extends VPage<CHome> {\r\n\r\n    async open(param?: any) {\r\n        // this.openPage(this.page);\r\n    }\r\n\r\n    /*\r\n    render(param: any): JSX.Element {\r\n        return <this.pageContent />\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header={false}>\r\n            <this.pageContent />\r\n        </Page>;\r\n    };\r\n    */\r\n\r\n    downloadApp = () => {\r\n        if (browser.versions.android)\r\n            window.open(GLOABLE.ANDROIDAPPADDRESS);\r\n    }\r\n\r\n    header() {\r\n        let header = <></>;\r\n        if (!browser.versions.html5Plus && browser.versions.android) {\r\n            header = <div className=\"bg-warning d-flex align-items-center\"\r\n                onClick={this.downloadApp}>\r\n                <span className=\"small text-danger ml-3\">\r\n                    APP购物更方便\r\n                </span>\r\n                <button type=\"button\" className=\"btn btn-primary btn-sm ml-auto m-1\">立即安装</button>\r\n            </div>\r\n        }\r\n        return header;\r\n    }\r\n\r\n    content() {\r\n        return <this.pageContent />\r\n    }\r\n\r\n    private pageContent = () => {\r\n        let { controller, isWebNav } = this;\r\n        let { renderCategoryRootList } = controller;\r\n        let siteHeader: any;\r\n\t\tif (isWebNav) {\r\n\t\t\tsiteHeader = <div className=\"mt-3\"></div>;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsiteHeader = this.renderVm(VSiteHeader);\r\n\t\t}\r\n        return <>\r\n            {siteHeader}\r\n            <div className=\"mb-3\">\r\n                {this.renderVm(VSlider)}\r\n            </div>\r\n            {renderCategoryRootList()}\r\n        </>\r\n    };\r\n}","import * as React from 'react';\r\nimport { FA, nav } from 'tonva-react';\r\nimport classNames from 'classnames';\r\n\r\nexport const CustomHeaderTemplate = (content?: any, right?: any, bg?: any, textC?: any, back?: any) => {\r\n    return <header className={classNames('d-flex align-items-center p-0 justify-content-between', bg ? bg : 'bg-white')} style={{ background: bg, minHeight: '3rem' }}>\r\n        <nav className={`d-flex align-items-center justify-content-center ${textC ? textC : 'text-white'}`}\r\n            style={{ cursor: 'pointer', width: \"2.5rem\", height: \"2.3rem\", color: textC, }}\r\n            onClick={() => { nav.back(); if (back) back() }}>\r\n            <FA name=\"angle-left\" />\r\n        </nav>\r\n        <div className=\"flex-fill\">{content}</div>\r\n        <aside className=\"d-flex justify-content-end align-items-stretch\" style={{ minWidth: '2.3rem', padding: 2 }}>{right}</aside>\r\n    </header>\r\n}","import { observer } from 'mobx-react';\r\nimport * as React from 'react';\r\nimport { VPage } from 'tonva-react';\r\nimport { CustomHeaderTemplate } from 'tools/CustomHeaderTemplate';\r\nimport { CHome } from './CHome';\r\n\r\nconst ScanCodeTip: string = '只可扫本司产品二维码';\r\n\r\nexport class VScanCode extends VPage<CHome> {\r\n\r\n    scan: any;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    media = () => {\r\n        if (navigator.userAgent.indexOf(\"Html5Plus\") > -1) {\r\n            // @ts-ignore \r\n            this.scan = new plus.barcode.Barcode('bcid');\r\n            this.scan.onmarked = this.onmarked;\r\n            this.scan.start();\r\n        }\r\n    }\r\n\r\n    onmarked = async (type: any, result: any) => {\r\n        var text = '未知: ';\r\n        switch (type) {\r\n            // @ts-ignore \r\n            case plus.barcode.QR:\r\n                text = 'QR';\r\n                break;\r\n            // @ts-ignore \r\n            case plus.barcode.EAN13:\r\n                text = 'EAN13';\r\n                break;\r\n            // @ts-ignore \r\n            case plus.barcode.EAN8:\r\n                text = 'EAN8';\r\n                break;\r\n        }\r\n        console.log('result==>', result);// '912152 LT40U57 Jkchemical 1'   \r\n        let reg = /(Jkchemical)/, verArr = [1];\r\n        if (text === 'QR' && reg.test(result)) {\r\n            let Ver = result.charAt(result.length - 1);\r\n            let shiftArr = result.split(' ');\r\n            if (verArr.includes(Number(Ver))) {\r\n                let { scanCodetoProductDetail } = this.controller;\r\n                this.scanClose();\r\n                await scanCodetoProductDetail(shiftArr[0]);\r\n            }\r\n        } else {\r\n            alert('此码无法解析额');\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    scanClose = () => {\r\n        if (navigator.userAgent.indexOf(\"Html5Plus\") > -1) {\r\n            // @ts-ignore \r\n            this.scan.close();\r\n        }\r\n    }\r\n\r\n    close = () => {\r\n        this.scanClose();\r\n        this.closePage();\r\n    }\r\n\r\n    private page = observer(() => {\r\n        this.media();\r\n        setTimeout(() => {\r\n            this.media();\r\n        }, 5);\r\n        let header = <div className='w-100 text-center text-light'>扫一扫</div>;\r\n        return <div className=\"w-100 h-100 d-flex flex-column\">\r\n            <div className=\"w-100\">\r\n                {CustomHeaderTemplate(header, '', '#555555', '', this.close)}\r\n            </div>\r\n            <div className=\"alert alert-warning py-0 w-100 rounded-0 m-0 text-center\" role=\"alert\">{ScanCodeTip}</div>\r\n            <main className=\"flex-fill\">\r\n                <div id='bcid' className=\"w-100 h-100\" style={{ background: '#F5F5F5' }}></div>\r\n            </main>\r\n        </div>;\r\n    });\r\n}\r\n","import { Tuid, PageItems } from 'tonva-react';\r\nimport { VSearchHeader } from './VSearchHeader';\r\nimport { VHome } from './VHome';\r\nimport { VScanCode } from './VScanCode';\r\nimport { CUqBase } from 'tapp';\r\n\r\nclass HomeSections extends PageItems<any> {\r\n\r\n    private sectionTuid: Tuid;\r\n\r\n    constructor(sectionTuid: Tuid) {\r\n        super();\r\n        this.firstSize = this.pageSize = 13;\r\n        this.sectionTuid = sectionTuid;\r\n    }\r\n\r\n    protected async loadResults(param: any, pageStart: any, pageSize: number): Promise<{ [name: string]: any[] }> {\r\n        let ret = await this.sectionTuid.search(\"\", pageStart, pageSize);\r\n        return { $page: ret };\r\n    }\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.sectionTuid.search(\"\", pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        if (item === undefined) return 0;\r\n        return item.id;\r\n    }\r\n}\r\n\r\nexport class CHome extends CUqBase {\r\n\r\n    homeSections: HomeSections;\r\n    sectionTuid: Tuid;\r\n\r\n    banners: any[];\r\n    async internalStart(param: any) {\r\n\r\n        /*\r\n        let { cProductCategory } = this.cApp;\r\n        await cProductCategory.start();\r\n        this.openVPage(VHome);\r\n        */\r\n    }\r\n\r\n    openScanCode = () => {\r\n        this.openVPage(VScanCode)\r\n    }\r\n\r\n    renderSearchHeader = (size?: string) => {\r\n        return this.renderView(VSearchHeader, size);\r\n    }\r\n\r\n    renderCategoryRootList = () => {\r\n        let { cProductCategory } = this.cApp;\r\n        return cProductCategory.renderRootList();\r\n    }\r\n\r\n    getSlideShow = async () => {\r\n\t\tif (this.banners) return;\r\n\t\tlet list = await this.uqs.webBuilder.GetSlideShow.table({});\r\n\t\tthis.banners = list.map(v => ({ path: v.path, src: v.src }));\r\n\t\t/*\r\n        list.forEach(v => {\r\n            this.banners.push({ path: v.path, src: v.src });\r\n\t\t})\r\n\t\t*/\r\n    }\r\n\r\n    scanCodetoProductDetail = async (origin: any) => {\r\n        let { cProduct, currentSalesRegion } = this.cApp;\r\n        let productByOrigin = await this.uqs.product.GetProductByOrigin.obj({ origin, salesRegion: currentSalesRegion.id });\r\n        await cProduct.showProductDetail(productByOrigin.id, 'ScanCode');\r\n    }\r\n\r\n    tab = () => this.renderView(VHome);\r\n    tabContent() {return new VHome(this).content();}\r\n}","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View, nav } from 'tonva-react';\r\nimport { CCart } from './CCart';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VCartLabel extends View<CCart> {\r\n    render(): JSX.Element {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\tlet { cApp } = this.controller;\r\n\t\t\tlet { cart } = cApp.store;\r\n\t\t\tlet count: any = cart.count;\r\n\t\t\tlet badge, onClick, pointer;\r\n\t\t\tif (count > 0) {\r\n\t\t\t\tonClick = this.controller.showCart;\r\n\t\t\t\tpointer = 'cursor-pointer';\r\n\t\t\t\tif (count < 100) badge = <u style={{right:0}}>{count}</u>;\r\n\t\t\t\telse badge = <u style={{right:0}}>99+</u>;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn <div className={classNames('jk-cart ', pointer)} onClick={onClick}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<span className=\"fa-stack w-auto h-auto\">\r\n\t\t\t\t\t\t<i className=\"fa fa-square fa-stack-2x text-white d-none\"></i>\r\n\t\t\t\t\t\t<span className=\"shopping-cart\"></span>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t{badge}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t}));\r\n\t}\r\n}","import * as React from 'react';\r\nimport { View, FA } from 'tonva-react';\r\nimport { CCart } from './CCart';\r\n\r\nexport class VCartLabelWeb extends View<CCart> {\r\n\r\n    render() {\r\n        let { cApp } = this.controller;\r\n\t\tlet { cart } = cApp.store;\r\n        if (!cart) return null;\r\n        let count = cart.count;\r\n        let vCount: any;\r\n        if (count) vCount = <u className=\"position-absolute d-flex align-items-center justify-content-center text-white text-right text-decoration-none ml-2\"\r\n            style={{ top: \"0.2rem\", fontSize: \"0.6rem\", backgroundColor: \"red\", minWidth: \"1rem\", padding: \"0 3px\", height: \"1.0rem\", borderRadius: '0.6rem' }}>{count}</u>;\r\n        //if (!count) count = undefined;\r\n        return <a className=\"text-primary position-relative\" href=\"/cart\">\r\n            <span className=\"text-primary small\">\r\n                <FA name=\"shopping-cart\" />\r\n            </span>\r\n            {vCount}\r\n        </a>\r\n    }\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\n//import { observable, makeObservable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { UpdownWidget } from 'tonva-react';\r\n//import { Context, ItemSchema, UpdownWidget, FieldProps } from 'tonva-react';\r\n\r\nconst keys = [107, 109, 110, 187, 189];\r\n\r\nexport class MinusPlusWidget extends UpdownWidget {\r\n    // @observable protected value: any;\r\n    // @observable protected disabled: boolean;\r\n    // @observable protected hasFocus: boolean;\r\n\r\n    protected isValidKey(key: number): boolean {\r\n        if (keys.find(v => v === key) !== undefined) return false;\r\n        return super.isValidKey(key);\r\n    }\r\n\r\n\t/*\r\n    protected onBlur = (evt: React.FocusEvent<any>) => {\r\n        super.onBlur(evt);\r\n        this.hasFocus = false;\r\n    }\r\n\r\n    protected onFocus(evt: React.FocusEvent<any>) {\r\n        super.onFocus(evt);\r\n        this.hasFocus = true;\r\n\t}\r\n\t*/\r\n\r\n    protected onChange(evt: React.ChangeEvent<any>) {\r\n    }\r\n\r\n    private minusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v - 1);\r\n    }\r\n    private plusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v + 1);\r\n    }\r\n\r\n    private ref = (input: HTMLInputElement) => {\r\n        this.input = input;\r\n        if (this.input === null) return;\r\n        let p: HTMLElement;\r\n        for (p = this.input; ; p = p.parentElement) {\r\n            if (!p) break;\r\n            if (p.tagName !== 'FIELDSET') continue;\r\n            if ((p as any)['disabled'] === true) {\r\n                this.disabled = true;\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    private renderContent = observer((): JSX.Element => {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn: any = {\r\n            //'form-control': true,\r\n        };\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        let hasFocus = this.hasFocus; // document.hasFocus() && document.activeElement === this.input;\r\n        let hasAction = this.readOnly !== true && this.disabled !== true;\r\n        let hasValue = isNaN(this.value) === false && this.value !== undefined && this.value > 0;\r\n        let cursorPointer: string,\r\n            minusColor: string, minusClick: any,\r\n            plusColor: string, plusClick: any;\r\n        if (this.disabled === true) {\r\n            cursorPointer = 'cursor-pointer';\r\n            minusColor = plusColor = 'text-light';\r\n        }\r\n        else {\r\n            minusClick = this.minusClick;\r\n            plusClick = this.plusClick;\r\n            // minusColor = 'text-danger-2'; //'text-black-50';\r\n            // plusColor = 'text-danger';\r\n            minusColor = 'text-info';\r\n            plusColor = 'text-info';\r\n        }\r\n        let minus = <i className={classNames('fa',\r\n            'fa-minus-square', 'fa-lg', minusColor, cursorPointer,\r\n            { invisible: !(hasFocus === true || (hasAction === true && hasValue === true)) })}\r\n            onClick={minusClick} />;/* fa-minus-circle */\r\n        let input = <input ref={this.ref}\r\n            className={classNames(this.className, cn, 'mx-1 w-4c form-control',\r\n                { invisible: !(hasFocus === true || hasValue === true) })}\r\n            type=\"text\"\r\n            defaultValue={this.value}\r\n            onChange={this.onChange}\r\n            // placeholder={this.placeholder}\r\n            readOnly={this.readOnly}\r\n            disabled={this.disabled}\r\n            onKeyDown={this.onKeyDown}\r\n            onFocus={(evt: React.FocusEvent<any>) => this.onFocus(evt)}\r\n            onBlur={(evt: React.FocusEvent<any>) => this.onBlur(evt)}\r\n            maxLength={10} />;\r\n\r\n        let plus = <i className={classNames('fa fa-plus-square fa-lg',\r\n            plusColor, cursorPointer,\r\n            { invisible: !(hasAction === true) })}\r\n            onClick={plusClick} />;\r\n        return <div className=\"d-flex align-items-center\">{minus}{input}{plus}\r\n            {this.renderErrors()}\r\n        </div>;\r\n    });\r\n\r\n    render() {\r\n        return <this.renderContent />;\r\n    }\r\n}\r\n\r\nexport class MinusPlusWidgetTable extends UpdownWidget {\r\n    // @observable protected value: any;\r\n    // @observable protected disabled: boolean;\r\n    // @observable protected hasFocus: boolean;\r\n\r\n    protected isValidKey(key: number): boolean {\r\n        if (keys.find(v => v === key) !== undefined) return false;\r\n        return super.isValidKey(key);\r\n    }\r\n\r\n    protected onChange(evt: React.ChangeEvent<any>) {\r\n    }\r\n\r\n    private minusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v - 1);\r\n    }\r\n    private plusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v + 1);\r\n    }\r\n\r\n    private ref = (input: HTMLInputElement) => {\r\n        this.input = input;\r\n        if (this.input === null) return;\r\n        let p: HTMLElement;\r\n        for (p = this.input; ; p = p.parentElement) {\r\n            if (!p) break;\r\n            if (p.tagName !== 'FIELDSET') continue;\r\n            if ((p as any)['disabled'] === true) {\r\n                this.disabled = true;\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    private renderContent = observer((): JSX.Element => {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn: any = {\r\n            //'form-control': true,\r\n        };\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        let hasFocus = this.hasFocus; // document.hasFocus() && document.activeElement === this.input;\r\n        let hasAction = this.readOnly !== true && this.disabled !== true;\r\n        let hasValue = isNaN(this.value) === false && this.value !== undefined && this.value > 0;\r\n        let cursorPointer: string,\r\n            minusColor: string, minusClick: any,\r\n            plusColor: string, plusClick: any;\r\n        if (this.disabled === true) {\r\n            cursorPointer = 'cursor-pointer';\r\n            minusColor = plusColor = 'text-light';\r\n        }\r\n        else {\r\n            minusClick = this.minusClick;\r\n            plusClick = this.plusClick;\r\n            minusColor = 'text-info'; //'text-black-50';\r\n            plusColor = 'text-info';\r\n        }\r\n        let minus = <i className={classNames('fa',\r\n            'fa-minus-square', 'fa-lg', minusColor, cursorPointer,\r\n            { invisible: !(hasFocus === true || (hasAction === true && hasValue === true)) })}\r\n            onClick={minusClick} />;\r\n        let input = <input ref={this.ref}\r\n            className={classNames(this.className, cn, 'mx-1 w-4c form-control',\r\n                { invisible: !(hasFocus === true || hasValue === true) })}\r\n            type=\"text\"\r\n            defaultValue={this.value}\r\n            onChange={this.onChange}\r\n            // placeholder={this.placeholder}\r\n            readOnly={this.readOnly}\r\n            disabled={this.disabled}\r\n            onKeyDown={this.onKeyDown}\r\n            onFocus={(evt: React.FocusEvent<any>) => this.onFocus(evt)}\r\n            onBlur={(evt: React.FocusEvent<any>) => this.onBlur(evt)}\r\n            maxLength={10} />;\r\n\r\n        let plus = <i className={classNames('fa fa-plus-square fa-lg',\r\n            plusColor, cursorPointer,\r\n            { invisible: !(hasAction === true) })}\r\n            onClick={plusClick} />;\r\n        return <div className=\"d-flex align-items-center\">{minus}{input}{plus}\r\n            {this.renderErrors()}\r\n        </div>;\r\n    });\r\n\r\n    render() {\r\n        return <this.renderContent />;\r\n    }\r\n}\r\n","import { PageItems } from 'tonva-react';\r\n\r\nexport class ElasticSearchPager<T extends any> extends PageItems<T>{\r\n\r\n    private searchUrl: string;\r\n    private urlGen: UrlGen;\r\n    protected idFieldName: any;\r\n    private pageNumber: number;\r\n    constructor(searchUrl: string, urlGen: UrlGen, pageSize?: number, firstSize?: number, itemObservable?: boolean) {\r\n        super(itemObservable);\r\n        this.searchUrl = searchUrl;\r\n        if (pageSize !== undefined) this.pageSize = pageSize;\r\n        if (firstSize !== undefined) this.firstSize = firstSize;\r\n        this.pageNumber = 1;\r\n        this.urlGen = urlGen;\r\n    }\r\n\r\n    setReverse() {\r\n        this.appendPosition = 'head';\r\n    }\r\n\r\n    protected async onLoad() {\r\n        if (this.idFieldName) return;\r\n        this.sortOrder = 'asc';\r\n    }\r\n\r\n    protected async loadResults(param: any, pageStart: number, pageSize: number): Promise<{ [name: string]: any[] }> {\r\n\r\n        let { keyWord, salesregion } = param;\r\n        /*\r\n        let url = this.searchUrl + '/' + keyWord;\r\n        if (this.pageNumber > 1) {\r\n            url += \"&pageNumber=\" + this.pageNumber;\r\n            url += \"/\" + this.pageNumber;\r\n        }\r\n        */\r\n        let url = this.searchUrl + this.urlGen.generateUrl(keyWord, this.pageNumber);\r\n        try {\r\n            let resp = await fetch(url, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n            });\r\n            let ret = await resp.json();\r\n            let items = ret.hits;\r\n            // 做数据变换，返回items\r\n            return { $page: items };\r\n        } catch (error) {\r\n            return { $page: [] };\r\n        }\r\n    }\r\n\r\n    protected async onLoaded(): Promise<void> {\r\n        this.pageNumber += 1;\r\n    }\r\n}\r\n\r\n\r\nexport abstract class UrlGen {\r\n    abstract generateUrl(keyWord: string, pageNumber: number): string;\r\n}\r\n\r\nexport class productUrlGen extends UrlGen {\r\n\r\n    generateUrl(keyWord: string, pageNumber: number): string {\r\n        let url = '?key=' + keyWord;\r\n        if (pageNumber > 1) {\r\n            url += \"&pageNumber=\" + pageNumber;\r\n        }\r\n        return url;\r\n    }\r\n}\r\n\r\nexport class productCatalogUrlGen extends UrlGen {\r\n\r\n    generateUrl(keyWord: string, pageNumber: number): string {\r\n        let url = '/' + keyWord;\r\n        if (pageNumber > 1) {\r\n            url += \"/\" + pageNumber;\r\n        }\r\n        return url;\r\n    }\r\n}\r\n\r\nexport class productStandardUrlGen extends UrlGen {\r\n\r\n    generateUrl(keyWord: string, pageNumber: number): string {\r\n        let url = '/' + keyWord;\r\n        if (pageNumber > 1) {\r\n            url += \"/\" + pageNumber;\r\n        }\r\n        return url;\r\n    }\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Form, ObjectSchema, NumSchema, ArrSchema, UiSchema, UiArr, FormField, UiCustom, FA, tv, Ax } from 'tonva-react';\r\nimport { MinusPlusWidget } from '../tools';\r\nimport { CCart } from './CCart';\r\nimport { CartPackRow, CartItem } from '../store';\r\nimport { xs } from 'tools/browser';\r\nimport { makeObservable, observable } from 'mobx';\r\n\r\nconst cartSchema = [\r\n    {\r\n        name: 'list',\r\n        type: 'arr',\r\n        arr: [\r\n            { name: 'checked', type: 'boolean' },\r\n            { name: 'product', type: 'object' } as ObjectSchema,\r\n            {\r\n                name: 'packs', type: 'arr', arr: [\r\n                    { name: 'pack', type: 'object' } as ObjectSchema,\r\n                    { name: 'price', type: 'number' } as NumSchema,\r\n                    { name: 'retail', type: 'number' } as NumSchema,\r\n                    { name: 'quantity', type: 'number' } as NumSchema,\r\n                    { name: 'currency', type: 'object' } as ObjectSchema\r\n                ]\r\n            }\r\n        ],\r\n    } as ArrSchema\r\n];\r\n\r\nexport class VCart extends VPage<CCart> {\r\n    punchOutXML: any;\r\n    punchOutUrl: boolean = false;\r\n    /*\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n    */\r\n    \r\n    constructor(c: CCart) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            punchOutXML: observable,\r\n            punchOutUrl: observable,\r\n        });\r\n    }\r\n\r\n    /* init(param?: any) {\r\n        this.punchOutXML = undefined;\r\n    } */\r\n\r\n    punchOutSubmit = async ()=>{\r\n        this.punchOutXML = await this.controller.generatePunchOutXML();\r\n        if (!this.punchOutXML?.cxmlBase64) { this.punchOutUrl = false; return false; };\r\n        this.punchOutUrl = true;\r\n        return true;\r\n    }\r\n\r\n    protected CheckOutButton = observer(() => {\r\n        let { checkOut, strikeOut, cApp, cartBtnMatch } = this.controller;\r\n\t\tlet { cart } = cApp.store;\r\n        let amount = cart.amount;\r\n        let check = cartBtnMatch.getCartButtonTip();\r\n        let content = amount > 0 ?\r\n            <>{check} (¥{amount})</> :\r\n            <>{check}</>;\r\n        if (check === \"punchOut\")\r\n            return <form action={this.punchOutXML?.url || \"*\"}\r\n                onSubmit={() => { this.punchOutSubmit(); if (this.punchOutUrl) cartBtnMatch.CartButtonClick(); return this.punchOutUrl; }}\r\n                encType=\"application/x-www-form-urlencoded\" method=\"post\">\r\n                <input name=\"cxml-base64\" defaultValue={this.punchOutXML?.cxmlBase64 || \"\"} style={{ visibility: \"hidden\", position: \"absolute\" }} type=\"text\" />\r\n                {this.punchOutXML?.message && <div className=\"text-center text-danger py-2\" >{this.punchOutXML?.message}</div>}\r\n                <div className=\"d-flex justify-content-center\">\r\n                    <button className=\"btn btn-success mx-5\" style={{ background: '#28a745' }} onClick={() => {\r\n                        document.addEventListener('submit', (e) => { if (!this.punchOutUrl) e.preventDefault(); });\r\n                    }}\r\n                        type=\"submit\" disabled={amount <= 0 /* || !this.punchOutXML?.cxmlBase64 */}>\r\n                        {content}\r\n                    </button>\r\n                </div>\r\n            </form>;\r\n        return <div className=\"d-flex justify-content-center\">\r\n            <button className=\"btn btn-success mx-5\" style={{ background: '#28a745' }} type=\"button\"\r\n                onClick={cartBtnMatch.CartButtonClick} disabled={amount <= 0}>\r\n                {content}\r\n            </button>\r\n        </div>;\r\n    });\r\n\r\n    render(params: any): JSX.Element {\r\n        return <this.tab />;\r\n    }\r\n\r\n    private renderCartItem = (item: CartItem) => {\r\n        let { product } = item;\r\n        let { controller } = this;\r\n        let { onItemClick, renderCartProduct } = controller;\r\n        return <div className=\"row justify-content-between\">\r\n            <div className=\"col-lg-5 px-0\" >{/* onClick={() => onItemClick(item)} */}\r\n                <Ax href={'/product/' + product.id}>\r\n                    {renderCartProduct(product)}\r\n                </Ax>\r\n            </div>\r\n            <div className=\"col-lg-6 px-0 mt-2\"><FormField name=\"packs\" /></div>\r\n        </div>\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow) => {\r\n        let { pack, price } = item;\r\n        return <>\r\n            <div className=\"px-2 d-flex align-items-center\">\r\n                <div className=\"col-4 px-0\"><b>{tv(pack)}</b></div>\r\n                <div className=\"col-4 px-0\"><span className=\"text-danger h5\">¥{price}</span></div>\r\n                <div className=\"col-4 px-0\"><FormField name=\"quantity\" /></div>\r\n            </div>\r\n            {/* <div>{this.controller.renderDeliveryTime(pack)}</div> */}\r\n        </>\r\n        /* return <div className=\"px-2\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-6c mr-4 text-right\"><span className=\"text-danger h5\">¥{price}</span></div>\r\n                <FormField name=\"quantity\" />\r\n            </div>\r\n            <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n        </div>; */\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        selectable: true,\r\n        deletable: true,\r\n        restorable: false,\r\n        items: {\r\n            list: {\r\n                widget: 'arr',\r\n                Templet: this.renderCartItem,\r\n                ArrContainer: (label: any, content: JSX.Element) => content,\r\n                RowContainer: (content: JSX.Element) => <div className=\"py-3\">{content}</div>,\r\n                items: {\r\n                    packs: {\r\n                        widget: 'arr',\r\n                        Templet: this.packsRow,\r\n                        selectable: false,\r\n                        deletable: false,\r\n                        ArrContainer: (label: any, content: JSX.Element) => content,\r\n                        RowContainer: (content: JSX.Element) => content,\r\n                        RowSeperator: <div className=\"border border-gray border-top my-3\" />,\r\n                        items: {\r\n                            quantity: {\r\n                                widget: 'custom',\r\n                                className: 'text-center',\r\n                                WidgetClass: MinusPlusWidget as any,\r\n                                onChanged: this.controller.onQuantityChanged\r\n                            } as UiCustom\r\n                        },\r\n                    } as UiArr\r\n                },\r\n                onDeleted: this.controller.onRemoveCartItem,\r\n            } as UiArr\r\n        }\r\n    }\r\n\r\n    protected cartForm = observer(() => {\r\n        let { cApp } = this.controller;\r\n\t\tlet { cart } = cApp.store;\r\n        let { cartItems } = cart;\r\n        let data = { list: cartItems };\r\n        return <>\r\n            {!xs ? <div className=\"col-lg-12 px-3\"><h1 className=\"mt-4 mb-3\">购物车</h1></div> : null}\r\n            <div className=\"d-none d-lg-block\">\r\n                <div className=\"w-100 border-bottom \">\r\n                    <div className=\"col-lg-6 d-flex ml-auto mr-0 mb-2 px-2 font-weight-bolder h6\">\r\n                        <div className=\"col-4\">包装</div>\r\n                        <div className=\"col-4\">单价</div>\r\n                        <div className=\"col-4 text-left pl-0\" style={{ textIndent: '2em' }}>数量</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <Form className=\"bg-white flex-fill overflow-auto reset-z-fieldset\"\r\n                schema={cartSchema} uiSchema={this.uiSchema} formData={data} />\r\n        </>\r\n    });\r\n\r\n    private empty() {\r\n        return <div className=\"mt-1 py-5 text-center bg-white\">你的购物车空空如也</div>\r\n    }\r\n\r\n    /**\r\n     * 是否编辑\r\n     */\r\n    private whetherToEdit = () => {\r\n        // let { cart } = this.controller.cApp;\r\n        // cart.editButton.set(!cart.editButton.get());\r\n    }\r\n\r\n    /*\r\n    private page = observer((params: any): JSX.Element => {\r\n        let { cart } = this.controller.cApp;\r\n        let footer: any, content: any;\r\n        let cancel = cart.editButton.get() ? '取消' : '编辑';\r\n        let right = <small className=\"mr-3\" onClick={this.whetherToEdit}>{cancel}</small>\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            content = this.empty();\r\n            footer = undefined;\r\n        }\r\n        else {\r\n            content = React.createElement(this.cartForm);\r\n            footer = React.createElement(this.CheckOutButton);\r\n        }\r\n        // return <Page header=\"购物车\" right={right} footer={footer}>\r\n        //     {content}\r\n        // </Page>;\r\n        return <Page header=\"购物车\" footer={footer}>\r\n            {content}\r\n        </Page>;\r\n    })\r\n    */\r\n\r\n    // header() {return <div className=\"navheader\">购物车</div>}\r\n    header() {\r\n        if (!xs) return null;\r\n        return <div className=\"navheader\">购物车</div>;\r\n    }\r\n    footer() {\r\n        return  React.createElement(observer(() => {\r\n            let { cApp, cartBtnMatch } = this.controller;\r\n\t\t\tlet { cart } = cApp.store;\r\n            let footer: any;\r\n            if (cart.count === 0 && cart.cartItems && cart.cartItems.length === 0 && cartBtnMatch.displayBtn) {\r\n                footer = null;\r\n            }\r\n            else {\r\n                footer = React.createElement(this.CheckOutButton);\r\n            }\r\n            return footer;\r\n        }));\r\n    }\r\n\r\n    content() {\r\n        return  React.createElement(observer(() => {\r\n            let { cApp } = this.controller;\r\n\t\t\tlet { cart } = cApp.store;\r\n            let content: any;\r\n            if (cart.count === 0 && cart.cartItems && cart.cartItems.length === 0) {\r\n                content = this.empty();\r\n            }\r\n            else {\r\n                content = React.createElement(this.cartForm);\r\n            }\r\n            return <>\r\n                {content}\r\n                {this.renderQuickOrder()}\r\n            </>;\r\n        }));\r\n    }\r\n\r\n    private tab = observer(() => {\r\n        let { cApp } = this.controller;\r\n\t\tlet { cart } = cApp.store;\r\n        let header = <header className=\"py-2 text-center bg-info text-white\">\r\n            <FA className=\"align-middle\" name=\"shopping-cart\" size=\"2x\" /> &nbsp; <span className=\"h5 align-middle\">购物车</span>\r\n        </header>;\r\n        if (cart.count === 0 && cart.cartItems.length === 0) {\r\n            return <>\r\n                {header}\r\n                {this.empty()}\r\n            </>;\r\n        }\r\n\r\n        let content = React.createElement(this.cartForm);\r\n        let footer = React.createElement(this.CheckOutButton);\r\n        return <>\r\n            {content}\r\n            {footer}\r\n        </>;\r\n    });\r\n\r\n    renderQuickOrder = () => {\r\n        let { cQuickOrder } = this.controller.cApp;\r\n        return <div className=\"row mx-0 px-2 my-2\">\r\n                <div className=\"border rounded col-12 col-lg-6 p-2\" style={{ background: \"#f5f5f5\" }}>\r\n                <div className=\"font-weight-bolder\">批量订购</div>\r\n                <div className=\"small\">按产品编号订购或上传您自己的产品列表，以快速将多个产品添加到购物车。</div>\r\n                <Ax className=\"text-primary small ml-1\" onClick={() => { cQuickOrder.openQuickOrder() }} href=\"/quickOrder\">批量订购 &gt;&gt; </Ax>\r\n            </div>\r\n        </div>\r\n    };\r\n\r\n    /*\r\n    header() {\r\n        let { cart } = this.controller.cApp;\r\n        let cancel = cart.editButton.get() ? '取消' : '编辑';\r\n        let header = <header className=\"py-2 text-center bg-info text-white position-relative\">\r\n            <FA className=\"mr-3\" name=\"shopping-cart\" size=\"lg\" />\r\n            <span>购物车</span>\r\n        </header>;\r\n        return header;\r\n    }\r\n    */\r\n    /*\r\n    footer() {\r\n        return <div className=\"p-3 d-flex justify-content-center\"><this.CheckOutButton /></div>;\r\n    }\r\n    */\r\n    /*\r\n    content() {\r\n        return <this.tab />\r\n    }\r\n    */\r\n}","import { observable, makeObservable } from 'mobx';\r\nimport { RowContext, BoxId, nav } from 'tonva-react';\r\nimport { VCartLabel } from './VCartLabel';\r\nimport { VCartLabelWeb } from './VCartLabelWeb';\r\nimport { VCart } from './VCart';\r\nimport { Product, CartPackRow, CartItem } from '../store';\r\nimport { CApp, CUqBase } from 'tapp';\r\nimport { GLOABLE } from '../global';\r\n\r\nexport class CCart extends CUqBase {\r\n\t//cart: Cart;\r\n    editButton: boolean = false; // = observable.box<boolean>(false);\r\n    cartBtnMatch: CartBtnMatch = new CartBtnMatch(this.cApp);\r\n    private selectedCartItems: CartItem[];\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            editButton: observable,\r\n            cartBtnMatch: observable\r\n        });\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        this.cartBtnMatch = new CartBtnMatch(this.cApp);\r\n        this.openVPage(VCart);\r\n    }\r\n\r\n\tshowCart = async () => {\r\n\t\tthis.editButton = false;\r\n        nav.navigate(\"/cart\");\r\n    }\r\n\r\n    generatePunchOutXML = async () => {\r\n        let { currentUser } = this.cApp;\r\n        let punchOutXML: any;\r\n        try {\r\n            if (currentUser && currentUser.thirdPartyOrg) {\r\n                if (currentUser.thirdPartyOrg === \"3\") {\r\n                    let webuserId = currentUser.id;\r\n                    let result = await fetch(GLOABLE.PUNCHOUT.PUNCHOUTXML + \"?webuser=\" + webuserId, {\r\n                        method: \"post\",\r\n                        headers: { \"Content-Type\":\"application/json\" }\r\n                    });\r\n                    let content: any = await result.json();\r\n                    if (result.ok) {\r\n                        // let content: any = await result.json();\r\n                        punchOutXML = {\r\n                            url: content?.url,\r\n                            cxmlBase64: content[\"cxml-base64\"]\r\n                        };\r\n                    } else {\r\n                        punchOutXML = content;\r\n                    }\r\n                };\r\n            };\r\n            return punchOutXML;\r\n        } catch (error) {\r\n            return undefined;\r\n        };\r\n    }\r\n\r\n\t//get count(): number {return this.cart?.count.get();}\r\n\r\n\t/*\r\n\tgetQuantity(productId: number, packId: number): number {\r\n\t\treturn this.cApp.store.cart.getQuantity(productId, packId);\r\n\t}\r\n\t*/\r\n\t/*\r\n\tasync add(product: Product, pack: BoxId, quantity: number, price: number, retail: number, currency: any) {\r\n\t\tawait this.cApp.store.cart.add(product, pack, quantity, price, retail, currency);\r\n\t}\r\n\r\n\tasync removeItem(rows: [{ productId: number, packId: number }]) {\r\n\t\tawait this.cApp.store.cart.removeItem(rows);\r\n\t}\r\n\t*/\r\n\t/*\r\n\tasync againOrderCart(data: CartItem[]) {\r\n\t\tawait this.cApp.store.cart.againOrderCart(data);\r\n\t}\r\n\t*/\r\n\r\n    /**\r\n     *\r\n     * 显示购物车图标\r\n     */\r\n    renderCartLabel() {\r\n        return this.renderView(VCartLabel);\r\n    }\r\n\r\n    renderCartLabel_web() {\r\n        return this.renderView(VCartLabelWeb);\r\n    }\r\n\r\n    /**\r\n     * 修改购物车中产品数量 \r\n     * @param context \r\n     * @param value \r\n     * @param prev \r\n     */\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data, parentData } = context;\r\n        let { product } = parentData;\r\n        let { pack, price, retail, currency } = data as CartPackRow;\r\n        let { cart } = this.cApp.store;\r\n\t\tawait cart.changeQuantity(product, pack, value, price, retail, currency);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param row \r\n     */\r\n    onRemoveCartItem = (row: any) => {\r\n        let { product, packs } = row;\r\n        //let { cart } = this.cApp;\r\n        let packsToDeleted: any = [];\r\n        packs.forEach((each: any) => {\r\n            packsToDeleted.push({ productId: product.id, packId: each.pack.id });\r\n        });\r\n        this.cApp.store.cart.removeItem(packsToDeleted);\r\n    }\r\n\r\n    onRowStateChanged = async (context: RowContext, selected: boolean, deleted: boolean) => {\r\n        alert('onRowStateChanged')\r\n    }\r\n\r\n    /*\r\n    private loginCallback = async (user: User): Promise<void> => {\r\n        let { cApp } = this;\r\n        await cApp.currentUser.setUser(user);\r\n        await cApp.loginCallBack(user);\r\n        this.closePage(1);\r\n        await this.doFirstOrderChecking();\r\n    };\r\n    */\r\n\r\n    onItemClick = (cartItem: CartItem) => {\r\n        let { store, cProduct } = this.cApp;\r\n        let { product } = cartItem;\r\n        if (!store.cart.isDeleted(product.id)) {\r\n            cProduct.showProductDetail(product.id);\r\n        }\r\n    }\r\n    /**\r\n     * 商品从购物车永久性删除\r\n     */\r\n    strikeOut = async () => {\r\n        let { cart } = this.cApp.store;\r\n        this.selectedCartItems = cart.getSelectedItems();\r\n        await cart.removeStrike(this.selectedCartItems)\r\n\r\n\r\n        // let combinedData = this.selectedCartItems.map((el: CartItem2) => {\r\n        //     return el.packs.map((v: any) => {\r\n        //         return {\r\n        //             productId: el.product, packId: v.pack\r\n        //         }\r\n        //     })\r\n        // }).flat();\r\n        // combinedData.forEach(async (el: any) => {\r\n        //     await cart.removeFromCart(el);\r\n        // })\r\n    }\r\n\r\n    punchOut = async () => {\r\n        /* 清除购物车 */\r\n        let param: [{ productId: number, packId: number }] = [] as any;\r\n        this.cApp.store.cart.cartItems.forEach((e: any) => {\r\n            e.packs.forEach((v: any) => {\r\n                param.push({ productId: e.product.id, packId: v.pack.id });\r\n            });\r\n        });\r\n        await this.cApp.store.cart.removeItem(param);\r\n        return true;\r\n    }\r\n\r\n    checkOut = async () => {\r\n        let { cart } = this.cApp.store;\r\n        this.selectedCartItems = cart.getSelectedItems();\r\n        if (this.selectedCartItems === undefined) return;\r\n        /*\r\n        if (!this.isLogined) {\r\n            nav.showLogin(this.loginCallback, true);\r\n        } else {\r\n            await this.doFirstOrderChecking();\r\n        }\r\n        */\r\n        await this.cApp.assureLogin();\r\n        await this.doFirstOrderChecking();\r\n    }\r\n\r\n    private doFirstOrderChecking = async () => {\r\n        let { cMe, currentUser } = this.cApp;\r\n        if (!currentUser || !currentUser.allowOrdering) {\r\n            cMe.toPersonalAccountInfo(this.doCheckOut);\r\n            // cMe.openMeInfoFirstOrder({\r\n            //     onlyRequired: false,\r\n            //     caption: \"请补充账户信息\",\r\n            //     note: <>\r\n            //         化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。\r\n            //     为此，需要您重新提供非虚拟的、可核查的信息。这些信息包括下面所有带有 <span className=\"text-danger\">*</span> 的信息。\r\n            //     </>,\r\n            //     actionButton: {\r\n            //         value: \"下一步\",\r\n            //         action: this.doCheckOut\r\n            //     }\r\n            // });\r\n        } else {\r\n            await this.doCheckOut();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 导航到CheckOut界面\r\n     */\r\n    doCheckOut = async () => {\r\n\r\n        let { cOrder } = this.cApp;\r\n        let { selectedCartItems } = this;\r\n        if (selectedCartItems === undefined) return;\r\n        await cOrder.createOrderFromCart(selectedCartItems);\r\n        // await cOrder.start(this.selectedCartItems);\r\n    }\r\n\r\n    //tab = () => this.renderView(VCart);\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    renderCartProduct = (product: Product) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderCartProduct(product);\r\n    }\r\n\r\n    // tabPage: VCart = new VCart(this);\r\n    tabPage = () => this.renderView(VCart);\r\n}\r\n\r\nexport class CartBtnMatch {\r\n    private cApp: CApp;\r\n    private organization: any;\r\n\r\n    constructor(res: any) {\r\n        this.cApp = res;\r\n        this.organization = this.cApp.currentUser?.thirdPartyOrg;\r\n    }\r\n\r\n    get displayBtn(): boolean {\r\n        return this.organization && ![\"3\"].includes(this.organization);\r\n    }\r\n\r\n    getCartButtonTip = () => {\r\n        switch (this.organization) {\r\n            case \"3\":\r\n                return \"punchOut\";\r\n            default:\r\n                return \"去结算\";\r\n        };\r\n    }\r\n\r\n    CartButtonClick = async () => {\r\n        let { cCart } = this.cApp;\r\n        switch (this.organization) {\r\n            case \"3\":\r\n                await cCart.punchOut();\r\n                break;\r\n            default:\r\n                await cCart.checkOut();\r\n                break;\r\n        };\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Image } from 'tonva-react';\r\n\r\nconst imagePath = \"https://static.jkchemical.com/Structure/\";\r\nconst pointProductImagePath = \"https://static.jkchemical.com/images/pointshop\";\r\nconst altimagePath = \"https://static.jkchemical.com/Structure/999.png\";\r\n\r\ninterface ProductImageProps {\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    chemicalId: string;\r\n}\r\n\r\nexport function ProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    let t = new Date().getTime();\r\n    return <Image src={chemicalId && (imagePath + chemicalId.substr(0, 3) + '/' + chemicalId + '.png'+ \"?t=\" + t)}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}\r\n\r\n// export function PointProductImage(props: ProductImageProps) {\r\n\r\n//     let { style, className, chemicalId } = props;\r\n//     return <Image src={chemicalId && (pointProductImagePath + '/' + chemicalId + '.png')}\r\n//         style={style} className={className} altImage={altimagePath} />;\r\n// }\r\n\r\nexport function PointProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    if (chemicalId && /[0-9]$/.test(chemicalId))\r\n        chemicalId = pointProductImagePath + '/' + chemicalId + '.png';\r\n\r\n    return <Image src={chemicalId && chemicalId}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nexport function renderBrand(brand: any) {\r\n\tif (!brand) return;\r\n    return renderPropItem('品牌', brand.name);\r\n}\r\n\r\nexport function renderPropItem(caption: string, value: any, captionClass?: string) {\r\n    if (value === null || value === undefined || value === '0') return null;\r\n    let capClass = captionClass ? classNames(captionClass) : classNames(\"text-muted\");\r\n    let valClass = captionClass ? classNames(captionClass) : \"\";\r\n    return <>\r\n        <div className={classNames(\"col-6 col-sm-2 pr-0 small\", capClass)}> {caption}</div>\r\n        <div className={classNames(\"col-6 col-sm-4\", valClass)}>{value}</div>\r\n    </>;\r\n}\r\n\r\n/**\r\n * 产品未售提示UI\r\n */\r\nexport function renderUnsold(discountinued: number) {\r\n    if (discountinued && discountinued === 1)\r\n        return <div onClick={(e: any) => e.stopPropagation()} className='w-100 carousel-control-prev'><b className=\"alert-primary alert\">该产品已下架！</b></div>\r\n    else\r\n        return <></>\r\n}\r\n","import * as React from 'react';\r\nimport { View } from 'tonva-react';\r\nimport { CProduct } from '../CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { renderPropItem } from '../renders';\r\nimport { Product } from '../../store';\r\n\r\nexport class VChemicalInfoInCart extends View<CProduct> {\r\n    render(product: Product): JSX.Element {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\tlet {chemical} = product;\r\n\t\t\tif (!chemical) return;\r\n\t\t\tlet { purity, CAS, molecularFomula, molecularWeight } = chemical;\r\n\t\t\treturn <>\r\n\t\t\t\t{renderPropItem('CAS', CAS)}\r\n\t\t\t\t{renderPropItem('纯度', purity)}\r\n\t\t\t\t{renderPropItem('分子式', molecularFomula)}\r\n\t\t\t\t{renderPropItem('分子量', molecularWeight)}\r\n\t\t\t</>\r\n\t\t}));\r\n    }\r\n\r\n\t/*\r\n    private content = observer((param: any) => {\r\n\r\n        let { productId } = param;\r\n        let { chemicalInfoContainer } = this.controller;\r\n        let chemicalInfo = chemicalInfoContainer[productId];\r\n        if (chemicalInfo !== undefined) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = chemicalInfo;\r\n            return <>\r\n                {productPropItem('CAS', CAS)}\r\n                {productPropItem('纯度', purity)}\r\n                {productPropItem('分子式', molecularFomula)}\r\n                {productPropItem('分子量', molecularWeight)}\r\n            </>\r\n        }\r\n        return <></>;\r\n\t})\r\n\t*/\r\n}\r\n","import * as React from 'react';\r\nimport { View, A } from 'tonva-react';\r\nimport { CProduct } from '../CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { Product } from '../../store';\r\n\r\nexport class VFavorite extends View<CProduct> {\r\n\t/*\r\n    @observable private isProductFarirates: boolean = false;\r\n    private favoriteOrCancel = async (product: number) => {\r\n        let { cApp } = this.controller;\r\n\t\tlet { cFavorites, cMe } = cApp;\r\n\t\tawait cApp.assureLogin();\r\n        //const { user } = nav;\r\n        //if (user !== undefined) {\r\n            if (this.isProductFarirates)\r\n                await cFavorites.delProductFavorites(product);\r\n            else\r\n                await cFavorites.addProductFavorites(product);\r\n            await this.initInventoryAllocation(product);\r\n        //} else {\r\n        //    cMe.showLogin();\r\n        //}\r\n    }\r\n\r\n    private isMyFarirates = async (id: number) => {\r\n        let { cFavorites } = this.controller.cApp;\r\n        // let customerFavoritesProducts = await cFavorites.getMyFavorites();\r\n        // return customerFavoritesProducts.some((el: any) => el.product.id === id);\r\n        return await cFavorites.getProductIsFavorites(id);\r\n    }\r\n\r\n    private initInventoryAllocation = async (id: number) => {\r\n        let { currentUser } = this.controller.cApp;\r\n        if (currentUser)\r\n            this.isProductFarirates = await this.isMyFarirates(id);\r\n    }\r\n\t*/\r\n    render(param: any): JSX.Element {\r\n        let { product, curPack, callback } = param;\r\n    \treturn React.createElement(observer(() => {\r\n            let { favorite, favoriteOrCancel } = product as Product;\r\n\t\t\t//let { currentUser } = this.controller.cApp;\r\n\t\t\t//if (currentUser)\r\n\t\t\t//    this.initInventoryAllocation(productId);\r\n\t\t\tlet icon = favorite === true ? \"heart\" : 'heart-o';\r\n\t\t\tlet onClick = async (evt: React.MouseEvent) => {\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t\tawait this.controller.cApp.assureLogin();\r\n                favoriteOrCancel();\r\n                if (callback) callback();\r\n\t\t\t}\r\n            let imgSrc = favorite === true ? \"/images/icon/favorite-icon-choose.svg\" : \"/images/icon/favorite-icon.svg\";\r\n\t\t\treturn <div className=\"d-flex justify-content-end\">\r\n                <small onClick={onClick} style={{ zIndex: 9 }}>\r\n                    <img src={imgSrc} width=\"25px\" className=\"favorite\" />\r\n\t\t\t\t\t{/* <FA className=\"mr-3 text-danger\" name={icon} size=\"lg\" /> */}\r\n\t\t\t\t</small>\r\n\t\t\t</div>;\r\n\t\t}));\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { tv, View } from 'tonva-react';\r\nimport { CProduct } from '../CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport className from 'classnames';\r\n\r\nexport class VDelivery extends View<CProduct> {\r\n\t/*\r\n    @observable private inventoryAllocation: any[];\r\n    @observable private futureDeliveryTimeDescription: string;\r\n\t*/\r\n    render(param: any): JSX.Element {\r\n        let { pack } = param;\r\n        let { id: packId, obj } = pack;\r\n        //let { obj: packObj } = param;\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\t//let { packId, productId } = param;\r\n            let { product, cApp } = this.controller;\r\n            product = cApp.getProduct(obj?.owner);\r\n            if (!product) return null;\r\n            let { futureDeliveryTimeDescription } = product;\r\n            let inventoryAllocation = product.getInventoryAllocation(packId);\r\n\t\t\t// if (!inventoryAllocation || !futureDeliveryTimeDescription) return null;\r\n\t\t\tif (!inventoryAllocation || inventoryAllocation.length === 0) {\r\n\t\t\t\tif (!futureDeliveryTimeDescription) return null;\r\n\t\t\t\treturn <div>{'期货: ' + futureDeliveryTimeDescription}</div>;\r\n\t\t\t}\r\n            let restrict = inventoryAllocation.some(v=> v?.quantity !== 0) ? 1:  0;\r\n\t\t\treturn <>{inventoryAllocation.map((v, index) => {\r\n\t\t\t\tlet { warehouse, quantity, deliveryTimeDescription } = v;\r\n\t\t\t\tif (quantity > 0) {\r\n                    restrict += 1;\r\n\t\t\t\t\treturn <div key={index} className={className(param?.defColor ? param?.defColor : \"text-success\" )}>\r\n\t\t\t\t\t\t{tv(warehouse, (values: any) => <span>{values?.name ? String(values.name).replace('库房','') : null}</span>)}: {(quantity > 10 ? '>10' : quantity)}{/* small */}\r\n\t\t\t\t\t\t{deliveryTimeDescription}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t} else {\r\n                    if (restrict === 0) {\r\n                        if (!futureDeliveryTimeDescription) return null;\r\n                        restrict += 1;\r\n\t\t\t\t        return <div key={index}>{'期货: ' + futureDeliveryTimeDescription}</div>;\r\n                    }\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t})}</>;\r\n\t\t}));\r\n    }\r\n\r\n\t/*\r\n    private initInventoryAllocation = async (productId: number, packId: number, salesRegionId: number) => {\r\n        if (this.inventoryAllocation === undefined)\r\n            this.inventoryAllocation = await this.controller.getInventoryAllocation(productId, packId, salesRegionId);\r\n    }\r\n\r\n    private initFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n        if (this.futureDeliveryTimeDescription === undefined)\r\n            this.futureDeliveryTimeDescription = await this.controller.getFutureDeliveryTimeDescription(productId, salesRegionId);\r\n\t}\r\n\r\n    private content = observer((param: any): any => {\r\n        let deliveryTimeUI;\r\n\t\tlet { packId, productId, currentSalesRegion } = param;\r\n        if (productId) {\r\n            this.initInventoryAllocation(productId, packId, currentSalesRegion);\r\n            this.initFutureDeliveryTimeDescription(productId, currentSalesRegion);\r\n        }\r\n        if (this.inventoryAllocation === undefined || this.futureDeliveryTimeDescription === undefined)\r\n\t\t\treturn null;\r\n\r\n        if (this.inventoryAllocation && this.inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = this.inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                if (quantity > 0) {\r\n                    return <div key={index} className=\"text-success\">\r\n                        {tv(warehouse, (values: any) => <span className=\"small\">{values.name}</span>)}: {(quantity > 10 ? '>10' : quantity)}\r\n                        {deliveryTimeDescription}\r\n                    </div>\r\n                } else {\r\n                    return undefined;\r\n                }\r\n            });\r\n        } else {\r\n            deliveryTimeUI = <div>{this.futureDeliveryTimeDescription && '期货: ' + this.futureDeliveryTimeDescription}</div>;\r\n        }\r\n\t\treturn deliveryTimeUI;\r\n\t})\r\n\t*/\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { View } from 'tonva-react';\r\nimport { CProduct } from '../CProduct';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport {renderBrand, renderPropItem} from '../renders';\r\nimport { VChemicalInfoInCart } from './VChemicalInfo';\r\nimport { Product } from '../../store';\r\nimport { VFavorite } from './VFavorite';\r\n/*\r\nimport { VProductFavorateLabel } from 'customer/VProductFavorateLabel';\r\nimport { Link } from 'react-router-dom';\r\n*/\r\n\r\n/**\r\n *\r\n */\r\nexport class VProuductView extends View<CProduct> {\r\n    render(product: Product): JSX.Element {\r\n        return React.createElement(observer(() => {\r\n\t\t\tlet { brand, props } = product;\r\n\t\t\tlet { description, descriptionC, origin, imageUrl } = props;\r\n\t\t\treturn <div className=\"d-block mb-4 px-3\">\r\n\t\t\t\t<div className=\"d-flex py-2\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div><strong>{description}</strong></div>\r\n\t\t\t\t\t\t<div>{descriptionC}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>{this.renderVm(VFavorite, {product})}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-3\">\r\n\t\t\t\t\t\t<ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-9\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t{renderPropItem('产品编号', origin)}\r\n\t\t\t\t\t\t\t{this.renderVm(VChemicalInfoInCart, product) /*renderChemicalInfoInCart(productBox)*/}\r\n\t\t\t\t\t\t\t{renderBrand(brand)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>;\r\n\t\t}));\r\n\t}\r\n\r\n\t/*\r\n    private async getProudct(product: BoxId) {\r\n        if (this.product === undefined) {\r\n            let ret = await this.controller.getProductAndDiscount(product);\r\n            this.product = ret.product;\r\n            this.discount = ret.discount;\r\n        }\r\n\t}\r\n\t*/\r\n}\r\n","import * as React from 'react';\r\nimport { View, tv } from 'tonva-react';\r\nimport { CProduct } from '../CProduct';\r\nimport {renderBrand, renderPropItem} from '../renders';\r\nimport { ProductImage } from '../../tools/productImage';\r\n\r\nexport class VInCart extends View<CProduct> {\r\n    render(param: any): JSX.Element {\r\n        return <>{tv(param, this.renderCartProduct)}</>;\r\n    }\r\n\r\n    private renderCartProduct = (product: any) => {\r\n        let { props, brand } = product;\r\n\t\t// if (!props) return;\r\n        let { description, descriptionC, origin, imageUrl } = props || product;\r\n        if (!brand.name) brand = brand.obj;\r\n\t\tlet cName:any;\r\n\t\tif (descriptionC !== description) {\r\n\t\t\tcName = <div className=\"pb-2\"><strong dangerouslySetInnerHTML={{__html:descriptionC || ''}}></strong></div>;\r\n        }\r\n        return <div className=\"row mx-0\">\r\n                    <div className=\"col-lg-3\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-5c h-5c\" />\r\n                    </div>\r\n                    <div className=\"col-lg-9\">\r\n                        <div className=\"py-2 text-truncate\">\r\n                            <strong dangerouslySetInnerHTML={{__html:description|| ''}}></strong>\r\n                        </div>\r\n                        {cName}\r\n                        <div className=\"row mx-0\">\r\n                            {renderPropItem('编号', origin)}\r\n                            {renderBrand(brand)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n        // return <div className=\"row d-flex mb-3 px-2\">\r\n        //     <div className=\"col-12\">\r\n        //         <div className=\"py-2\">\r\n        //             <strong>{description}</strong>\r\n        //         </div>\r\n\t\t// \t\t{cName}\r\n        //         <div className=\"row\">\r\n        //             <div className=\"col-3\">\r\n        //                 <ProductImage chemicalId={imageUrl} className=\"w-4c h-4c\" />\r\n        //             </div>\r\n        //             <div className=\"col-9\">\r\n        //                 <div className=\"row\">\r\n        //                     {renderPropItem('编号', origin)}\r\n        //                     {this.renderVm(VChemicalInfoInCart, product) /*this.controller.renderChemicalInfoInCart(product)*/}\r\n        //                     {renderBrand(brand)}\r\n        //                 </div>\r\n        //             </div>\r\n        //         </div>\r\n        //     </div>\r\n        // </div>\r\n    };\r\n}\r\n","import * as React from 'react';\r\nimport { View, tv, ObjectSchema, NumSchema, UiSchema, UiCustom, Context, Form, ItemSchema } from 'tonva-react';\r\nimport { CProduct } from '../CProduct';\r\nimport { MinusPlusWidget } from 'tools';\r\nimport { Product } from '../../store';\r\nimport { observer } from 'mobx-react';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { MinusPlusWidgetTable } from 'tools/minusPlusWidget';\r\n/**\r\n * 显示产品包装价格，配合CProduct.renderProductPrice使用\r\n * 需要的参数product必须是BoxId(或者object?)\r\n */\r\nexport class VPrice extends View<CProduct> {\r\n    isShowTable: boolean = false;\r\n    protected schema: ItemSchema[] = [\r\n        { name: 'pack', type: 'object' } as ObjectSchema,\r\n        { name: 'quantity', type: 'number' } as NumSchema,\r\n        { name: 'retail', type: 'number' } as NumSchema,\r\n        { name: 'vipPrice', type: 'number' } as NumSchema,\r\n        { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n        { name: 'currency', type: 'string' },\r\n    ];\r\n\r\n\t/*\r\n    @observable private prices: any;\r\n    private initPrices = async (product: BoxId, salesRegionId: number, discount: number) => {\r\n        if (this.prices === undefined)\r\n            this.prices = await this.controller.getProductPrice(product, salesRegionId, discount);\r\n\t}\r\n\t*/\r\n\r\n    protected renderPrice(product:Product, item: any) {\r\n\t\tlet onQuantityChanged = async (context: Context, value: any, prev: any):Promise<void> => {\r\n\t\t\tlet { data } = context;\r\n\t\t\tlet { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n\t\t\tlet price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n\t\t\tawait this.controller.cApp.store.cart.changeQuantity(product, pack, value, price, retail, currency);\r\n\t\t\t/*\r\n\t\t\tlet { cApp } = this.controller;\r\n\t\t\tlet { cCart } = cApp;\r\n\t\t\tif (value > 0)\r\n\t\t\t\tawait cCart.add(product, pack, value, price, retail, currency);\r\n\t\t\telse\r\n\t\t\t\tawait cCart.removeItem([{ productId: product.id, packId: pack.id }]);\r\n\t\t\t*/\r\n\t\t}\r\n\r\n\t\tlet uiSchema: UiSchema = {\r\n\t\t\titems: {\r\n\t\t\t\tpack: { visible: false },\r\n\t\t\t\tretail: { visible: false },\r\n\t\t\t\tvipPrice: { visible: false },\r\n\t\t\t\tpromotionPrice: { visible: false },\r\n\t\t\t\tcurrency: { visible: false },\r\n\t\t\t\tquantity: {\r\n\t\t\t\t\twidget: 'custom',\r\n\t\t\t\t\tlabel: null,\r\n\t\t\t\t\tclassName: `text-center ${this.isShowTable ? \"form-control-sm\" :\"\"}`,\r\n\t\t\t\t\tWidgetClass: !this.isShowTable ? MinusPlusWidget : MinusPlusWidgetTable,\r\n\t\t\t\t\tonChanged: onQuantityChanged\r\n\t\t\t\t} as UiCustom\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n        let { retail, vipPrice, promotionPrice } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                if (this.isShowTable) {\r\n                    retailUI = <del className=\"text-danger\"><span className=\"text-muted\">{retail}</span></del>;\r\n                } else {\r\n                    retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n                }\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 mb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 mb-0 d-flex justify-content-end align-items-center\">\r\n                    <Form schema={this.schema} uiSchema={uiSchema} formData={item} />\r\n                </div>\r\n            </div >\r\n\r\n            if (this.isShowTable) \r\n                right = <>\r\n                <td data-title=\"价格\" className=\" red\">\r\n                    <div className=\"item-product-price\">\r\n                        <small className=\"text-muted\">{retailUI}</small>&nbsp;{retailUI ? '/' : ''}\r\n                        <span className=\"text-danger\"> <span>{price}</span></span>\r\n                    </div>\r\n                </td>\r\n                <td data-title=\"数量\">\r\n                    <div className=\"d-flex justify-content-end input-group-sm\">{/* d-flex justify-content-md-center justify-content-sm-end justify-content-end */}\r\n                        <Form schema={this.schema} uiSchema={uiSchema} formData={item} />\r\n                    </div>\r\n                </td>\r\n            </ >\r\n        } else {\r\n            right = <small>请询价</small>\r\n            if (this.isShowTable) right = <><td className=\"py-3\">请询价</td><td></td></>;\r\n        }\r\n        return right;\r\n    }\r\n\r\n    protected minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    render(product: Product): JSX.Element {\r\n        //let { currentSalesRegion } = this.controller.cApp;\r\n        //return <this.content product={product} SalesRegionId={currentSalesRegion} discount={discount} />;\r\n        let { renderDeliveryTime } = this.controller;\r\n\t\t//this.initPrices(product, SalesRegionId, discount);\r\n\t\tlet {prices} = product;\r\n\t\treturn <>{prices?.map((v: any, index: number) => {\r\n\t\t\tlet { pack, retail } = v;\r\n\t\t\tif (!retail) return <small key={0}>请询价</small>;\r\n\t\t\treturn <div className=\"\" key={pack.id}>\r\n\t\t\t\t<div className=\"row mx-0 w-100\">\r\n\t\t\t\t\t<div className=\"col-5 d-flex flex-column mb-2 pb-1 pl-0\">\r\n\t\t\t\t\t\t<div><b>{tv(pack)}</b></div>\r\n\t\t\t\t\t\t<div>{renderDeliveryTime(pack)}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-7 mb-0 pr-0\">\r\n\t\t\t\t\t\t{this.renderPrice(product, v)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>;\r\n\t\t})}</>;\r\n\t\t/*\r\n        return <>\r\n            {priceUI}\r\n\t\t</>;\r\n\t\t*/\r\n    }\r\n\r\n\t/*\r\n    private content = observer((param?: any) => {\r\n        let priceUI;\r\n        let { product, SalesRegionId, discount } = param;\r\n\r\n        let { renderDeliveryTime } = this.controller;\r\n        this.initPrices(product, SalesRegionId, discount);\r\n        if (this.prices && this.prices.length > 0) {\r\n            priceUI = this.prices.map((v: any, index: number) => {\r\n                let { pack, retail } = v;\r\n                if (retail) {\r\n                    return <div className=\"px-2\" key={pack.id}>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <div><b>{tv(pack)}</b></div>\r\n                                <div>{renderDeliveryTime(pack)}</div>\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                {this.renderPrice(v)}\r\n                            </div>\r\n                        </div>\r\n                    </div>;\r\n                } else {\r\n                    return <small>请询价</small>\r\n                }\r\n            });\r\n        }\r\n        return <>\r\n            {priceUI}\r\n        </>;\r\n\t})\r\n\t*/\r\n}\r\n\r\n/**\r\n * 应用场景 产品列表显示包装 table\r\n */\r\nexport class VPriceWithTr extends VPrice {\r\n    isShowTable: boolean = true;\r\n\r\n    render(product: Product): JSX.Element {\r\n        let { prices } = product;\r\n        if (!prices) return null;\r\n        return React.createElement(observer(() => {\r\n            return  <>{prices?.map((v: any, index: number) => {\r\n            let { pack } = v;\r\n            \r\n            return <tr className=\"article-product-list text-right\">\r\n                    <td data-title=\"包装\">\r\n                        {tv(pack)}\r\n                    </td>\r\n                <td data-title=\"库存\"> <span>{this.controller.renderDeliveryTime(pack,\"dark-333\")}</span></td>\r\n                {this.renderPrice(product, v)}\r\n            </tr>\r\n            })}</>;\r\n        }))\r\n    }\r\n}\r\n\r\n/**\r\n * 根据产品编号/包装规格查询产品，在客户手动输入或提交excel表格下单的场景下使用\r\n */\r\nexport class VPriceQuickOrder extends VPrice {\r\n    selectPack: any;\r\n\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            selectPack: observable\r\n        });\r\n    }\r\n\r\n    renderPrice(param: any, item: any) {\r\n        let onQuantityChanged = async (context: Context, value: any, prev: any):Promise<void> => {\r\n            let { data } = context;\r\n            //let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n\t\t\tlet { pack } = data;\r\n            let { cApp } = this.controller;\r\n            let { cQuickOrder } = cApp;\r\n            await cQuickOrder.changeProductQuantity(param, pack, value);\r\n        }\r\n\r\n\t\tlet uiSchema: UiSchema = {\r\n\t\t\titems: {\r\n\t\t\t\tpack: { visible: false },\r\n\t\t\t\tretail: { visible: false },\r\n\t\t\t\tvipPrice: { visible: false },\r\n\t\t\t\tpromotionPrice: { visible: false },\r\n\t\t\t\tcurrency: { visible: false },\r\n\t\t\t\tquantity: {\r\n\t\t\t\t\twidget: 'custom',\r\n\t\t\t\t\tlabel: null,\r\n\t\t\t\t\tclassName: 'text-center',\r\n\t\t\t\t\tWidgetClass: MinusPlusWidget,\r\n\t\t\t\t\tonChanged: onQuantityChanged\r\n\t\t\t\t} as UiCustom\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n        let { retail, vipPrice, promotionPrice, /* quantity */ } = item;\r\n        // if (!quantity) return;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 mb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 mb-0 d-flex justify-content-end align-items-center\">\r\n                    <Form schema={this.schema} uiSchema={uiSchema} formData={item} />\r\n                </div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n            if (this.isShowTable) right = <><td className=\"py-3\">请询价</td><td></td></>;\r\n        }\r\n        return right;\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return React.createElement(observer(() => {\r\n\r\n        let { id, product, QPacks, noPackTip, selectedPack } = param;\r\n        if (!product) return <></>;\r\n        if (QPacks && !QPacks.length) return <div className=\"text-danger small align-self-center col-6\">{noPackTip}</div>;\r\n        let { cApp } = this.controller;\r\n        let { cQuickOrder } = cApp;\r\n        this.selectPack = selectedPack;\r\n        let { renderDeliveryTime } = this.controller;\r\n        let pricesByPackUI = this.selectPack ? <div className=\"px-2 col-6 col-sm-7 mb-0\" key={this.selectPack?.pack?.id + 1}>\r\n            {this.renderPrice(param, this.selectPack)}\r\n        </div> : null;\r\n        return <>\r\n            <div className=\"row mx-0\">\r\n                <div className=\"col-6 col-sm-5 d-flex flex-column justify-content-center\">\r\n                    <div>\r\n                        <select defaultValue={this.selectPack?.pack?.id || ''} onChange={(e: any) => {\r\n                            this.selectPack = QPacks.find((i: any) => i.pack.id == e.target.value);\r\n                            cQuickOrder.selectedPack(param, this.selectPack);\r\n                        }} name=\"\" id=\"\" className=\"form-control\" >\r\n                            <option hidden value=\"\">选择包装</option>\r\n                            {\r\n                                QPacks?.map((v: any,index:number) => {\r\n                                    return <option key={index} value={v.pack.id}>{v.pack.obj?.radiox !==1 ? v.pack.obj?.radiox + \"*\" : \"\"} {v.pack.obj?.radioy}{v.pack.obj?.unit}</option>\r\n                                })\r\n                            }\r\n                        </select>\r\n                    </div>\r\n                    {this.selectPack && <div className=\"small\">{renderDeliveryTime(this.selectPack?.pack)}</div>}\r\n                </div>\r\n                {\r\n                    this.selectPack && this.selectPack.pack\r\n                        ? <>{pricesByPackUI}</>\r\n                    :null\r\n                }\r\n            </div>\r\n            </>        \r\n        }))\r\n    }\r\n}","import * as React from 'react';\r\nimport { Ax, nav, View } from 'tonva-react';\r\nimport { CProduct } from '../CProduct';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { observer } from 'mobx-react';\r\nimport { renderBrand, renderPropItem } from '../renders';\r\nimport { VFavorite } from './VFavorite';\r\nimport { VPriceWithTr } from './VPrice';\r\nimport classNames from 'classnames';\r\nimport { Product } from 'store';\r\n\r\nexport class VProuductView2 extends View<CProduct> {\r\n\t// @observable product: any;\r\n\t// @observable discount: number;\r\n\tonProductClick = async (product: Product) => {\r\n        let { id } = product;\r\n        let url = \"/product/\" + id;\r\n        this.navigate(url);\r\n    }\r\n\r\n\trender(param: any): JSX.Element {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\tlet { product, dataSource, callback } = param;\r\n\t\t\tlet productListSource = dataSource ? true : false;\r\n\t\t\tlet { brand, chemical, props, id } = product;\r\n\t\t\tlet { description, descriptionC, origin, imageUrl } = props;\r\n\t\t\tlet { CAS, purity, molecularFomula, molecularWeight } = chemical || {};\r\n\t\t\tlet eName = <div className=\"pr-5 en-font-family\" style={{wordWrap:'break-word'}}><strong className=\"cursor-pointer\" onClick={()=> this.onProductClick(product)}   dangerouslySetInnerHTML={{__html:description|| ''}}></strong></div>;\r\n\t\t\tlet cName: any;\r\n\t\t\tif (descriptionC !== description) {\r\n\t\t\t\tcName = <div className=\"d-inline-block cursor-pointer\" onClick={()=> this.onProductClick(product)} dangerouslySetInnerHTML={{__html:descriptionC || ''}}></div>;\r\n\t\t\t}\r\n\t\t\treturn <div className=\"row mx-0 my-lg-2 w-100\">\r\n\t\t\t\t<div className=\"col-lg-2\">\r\n\t\t\t\t\t<div className=\"img-wrap\">\r\n\t\t\t\t\t\t<ProductImage chemicalId={imageUrl} className=\"mx-auto\" style={{ maxHeight: 192 }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"col-lg-10 each-product\">\r\n\t\t\t\t\t<div onClick={(event: React.MouseEvent) => { event.stopPropagation(); }}>\r\n\t\t\t\t\t\t<div>{this.renderVm(VFavorite, { product, callback: callback })}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h3 className=\"ml-lg-3\">\r\n\t\t\t\t\t\t{eName}\r\n\t\t\t\t\t\t{cName}\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t!productListSource\r\n\t\t\t\t\t\t\t? <div className=\"row p-0 mx-0\">\r\n\t\t\t\t\t\t\t\t{renderPropItem('产品编号', origin)}\r\n\t\t\t\t\t\t\t\t{renderPropItem('CAS', <Ax onClick={(e) => { e.stopPropagation();nav.navigate(`/search/${ CAS || props.CAS }`);}}  href={`/search/${ CAS || props.CAS }` } className=\"text-primary\">{CAS || props.CAS}</Ax>)}\r\n\t\t\t\t\t\t\t\t{renderPropItem('纯度', purity || props.purity)}\r\n\t\t\t\t\t\t\t\t{renderPropItem('分子式', molecularFomula || props.molecularFomula)}\r\n\t\t\t\t\t\t\t\t{renderPropItem('分子量', molecularWeight || props.molecularWeight)}\r\n\t\t\t\t\t\t\t\t{renderBrand(brand)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t: <p className=\"ml-lg-3\">\r\n\t\t\t\t\t\t\t\t{renderPropItemC('产品编号', origin, null, false)}\r\n\t\t\t\t\t\t\t\t{renderPropItemC('CAS', <Ax onClick={(e) => { e.stopPropagation();nav.navigate(`/search/${ CAS || props.CAS }`);}} href={`/search/${ CAS || props.CAS }` } className=\"text-primary\">{CAS || props.CAS}</Ax>)}\r\n\t\t\t\t\t\t\t\t{brand && renderPropItemC('品牌', brand.name)}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<div className=\"text-right pt-3\">\r\n\t\t\t\t\t\t<a className=\"button collapsed\" data-toggle=\"collapse\" href={`#description${id}`} role=\"button\"\r\n\t\t\t\t\t\t\taria-expanded=\"false\" aria-controls=\"collapseExample\" /* target=\"_blank\" */\r\n\t\t\t\t\t\t\tstyle={{position:\"absolute\",marginBottom:\"-10px\"}}\r\n\t\t\t\t\t\t\t// onClick={(event: React.MouseEvent) => { event.stopPropagation(); }}\r\n\t\t\t\t\t\t>{''}</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"col-lg-12 mt-lg-2 collapse\" id={`description${id}`}\r\n\t\t\t\t\tonClick={(event: React.MouseEvent) => { event.stopPropagation(); }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"table-responsive-vertical shadow-z-1\">\r\n\t\t\t\t\t\t<table id=\"table\" className=\"table article-product-table\" style={{marginBottom:2}}>\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr className=\"article-product-list text-right\">\r\n\t\t\t\t\t\t\t\t\t<th style={{paddingLeft:8,paddingRight:8}}>包装</th>\r\n\t\t\t\t\t\t\t\t\t<th style={{paddingLeft:8,paddingRight:8}}>库存</th>\r\n\t\t\t\t\t\t\t\t\t<th style={{paddingLeft:8,paddingRight:8}}>价格(RMB)</th>\r\n\t\t\t\t\t\t\t\t\t<th style={{paddingLeft:8,paddingRight:8}}>数量</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{this.renderVm(VPriceWithTr, product)}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* <hr style={{width: \"97%\",height: \"1px\",marginBottom: \"35px\"}}></hr> */}\r\n\t\t\t</div>;\r\n\r\n\t\t\t// return <div className=\"row mx-0 my-3 bg-white\">\r\n\t\t\t// \t<div className=\"col-lg-4 d-flex\">\r\n\t\t\t// \t\t<ProductImage chemicalId={imageUrl} className=\"mx-auto\" style={{ maxHeight: 192 }} />\r\n\t\t\t// \t\t{/* <ProductImage chemicalId={imageUrl} className=\"w-100\" /> */}\r\n\t\t\t// \t</div>\r\n\t\t\t// \t<div className=\"col-lg-8 each-product\">\r\n\t\t\t// \t\t<div className=\"details\">\r\n\t\t\t// \t\t\t{eName}\r\n\t\t\t// \t\t\t{cName}\r\n\t\t\t// \t\t\t<div>{this.renderVm(VFavorite, { product, callback: callback })}</div>\r\n\t\t\t// \t\t\t{\r\n\t\t\t// \t\t\t\t!productListSource\r\n\t\t\t// \t\t\t\t\t? <div className=\"row p-0 mx-0\">\r\n\t\t\t// \t\t\t\t\t\t{renderPropItem('产品编号', origin)}\r\n\t\t\t// \t\t\t\t\t\t{renderPropItem('CAS', CAS || props.CAS)}\r\n\t\t\t// \t\t\t\t\t\t{renderPropItem('纯度', purity || props.purity)}\r\n\t\t\t// \t\t\t\t\t\t{renderPropItem('分子式', molecularFomula || props.molecularFomula)}\r\n\t\t\t// \t\t\t\t\t\t{renderPropItem('分子量', molecularWeight || props.molecularWeight)}\r\n\t\t\t// \t\t\t\t\t\t{renderBrand(brand)}\r\n\t\t\t// \t\t\t\t\t</div>\r\n\t\t\t// \t\t\t\t\t: <div className=\"row p-0 mx-0\">\r\n\t\t\t// \t\t\t\t\t\t{renderPropItemCustom('产品编号', origin, null, false)}\r\n\t\t\t// \t\t\t\t\t\t{renderPropItemCustom('CAS', CAS || props.CAS)}\r\n\t\t\t// \t\t\t\t\t\t{brand && renderPropItemCustom('品牌', brand.name)}\r\n\t\t\t// \t\t\t\t\t</div>\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t</div>\r\n\t\t\t// \t\t{!this.controller.showFavorites &&\r\n\t\t\t// \t\t\t<div>\r\n\t\t\t// \t\t\t\t<a className=\"button display-desktop collapsed\" data-toggle=\"collapse\" href={`#description${id}`} role=\"button\" aria-expanded=\"false\" aria-controls=\"jk\" target=\"_blank\"\r\n\t\t\t// \t\t\t\t\tonClick={(event: React.MouseEvent) => { event.stopPropagation(); }}>详情\r\n\t\t\t// \t\t\t\t</a>\r\n\t\t\t// \t\t\t</div>\r\n\t\t\t// \t\t}\r\n\t\t\t// \t</div>\r\n\t\t\t// \t<div className=\"container collapse col-lg-12 pt-2 px-0 border-top-0\"\r\n\t\t\t// \t\tonClick={(event: React.MouseEvent) => { event.stopPropagation(); }} id={`description${id}`}>\r\n\t\t\t// \t\t<table id=\"table\" className=\"table article-product-table table-striped\">\r\n\t\t\t// \t\t\t<thead>\r\n\t\t\t// \t\t\t\t<tr className=\"article-product-list\">\r\n\t\t\t// \t\t\t\t\t<th>包装</th>\r\n\t\t\t// \t\t\t\t\t<th>价格</th>\r\n\t\t\t// \t\t\t\t\t<th>数量</th>\r\n\t\t\t// \t\t\t\t\t{/* <th>收藏夹</th> */}\r\n\t\t\t// \t\t\t\t</tr>\r\n\t\t\t// \t\t\t</thead>\r\n\t\t\t// \t\t\t<tbody>\r\n\t\t\t// \t\t\t\t<>{this.renderVm(VPriceWithTr, product)}</>\r\n\t\t\t// \t\t\t</tbody>\r\n\t\t\t// \t\t</table>\r\n\t\t\t// \t</div>\r\n\t\t\t// </div>\r\n\r\n\t\t\t// return <div className=\"d-block mb-4 px-3 bg-white\">\r\n\t\t\t// \t<div className=\"py-2\">\r\n\t\t\t// \t\t{eName}\r\n\t\t\t// \t\t{cName}\r\n\t\t\t// \t\t<div>{this.renderVm(VFavorite, product)}</div>\r\n\t\t\t// \t</div>\r\n\t\t\t// \t<div className=\"row\">\r\n\t\t\t// \t\t<div className=\"col-3\">\r\n\t\t\t// \t\t\t<ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n\t\t\t// \t\t</div>\r\n\t\t\t// \t\t<div className=\"col-9\">\r\n\t\t\t// \t\t\t<div className=\"row\">\r\n\t\t\t// \t\t\t\t{renderPropItem('产品编号', origin)}\r\n\t\t\t// \t\t\t\t{renderPropItem('CAS', CAS)}\r\n\t\t\t// \t\t\t\t{renderPropItem('纯度', purity)}\r\n\t\t\t// \t\t\t\t{renderPropItem('分子式', molecularFomula)}\r\n\t\t\t// \t\t\t\t{renderPropItem('分子量', molecularWeight)}\r\n\t\t\t// \t\t\t\t{renderBrand(brand) /*tv(brand, renderBrand)*/ /* 这个地方会在调试器报警告 */}\r\n\t\t\t// \t\t\t</div>\r\n\t\t\t// \t\t</div>\r\n\t\t\t// \t</div>\r\n\t\t\t// \t{renderUnsold(discountinued)}\r\n\t\t\t// </div>\r\n\t\t}));\r\n\t}\r\n}\r\n\r\nfunction renderPropItemC(caption: string, value: any, captionClass?: string, CutLine?: Boolean) {\r\n\tif (value === null || value === undefined || value === '0') return null;\r\n\tlet capClass = captionClass ? classNames(captionClass) : classNames(\"\");\r\n\tlet valClass = captionClass ? classNames(captionClass) : \"\";\r\n\tlet cutLine: JSX.Element = <span className=\"mx-2\" style={{color:\"#333\"}}>|</span>;\r\n\tif (!CutLine && CutLine !== undefined) cutLine = null;\r\n\treturn <>\r\n\t\t{cutLine}\r\n\t\t<span className={classNames('', capClass)}>{caption}:</span>\r\n\t\t<span className={classNames('', valClass)}>{value}</span>\r\n\r\n\t</>\r\n}\r\n/* function renderPropItemCustom(caption: string, value: any, captionClass?: string, CutLine?: Boolean) {\r\n\tif (value === null || value === undefined || value === '0') return null;\r\n\tlet capClass = captionClass ? classNames(captionClass) : classNames(\"text-muted\");\r\n\tlet valClass = captionClass ? classNames(captionClass) : \"\";\r\n\tlet cutLine: JSX.Element = <span className=\"h-1c align-self-center mx-2\" style={{ borderRight: '1px solid #333' }}></span>;\r\n\tif (!CutLine && CutLine !== undefined) cutLine = null;\r\n\treturn <div className=\"col-6 col-lg-4 col-sm-6 px-0\">\r\n\t\t<span className={classNames('small', capClass)}> {caption}： </span>\r\n\t\t<span className={classNames('small', valClass)}>{value}</span>\r\n\t</div>;\r\n} */\r\n\r\n/**\r\n * 收藏列表（有收藏与取消功能）\r\n */\r\n/* export class VProductCarryFavorites extends View<CProduct>{\r\n\trender(param: any): JSX.Element {\r\n\t\tlet { product } = param;\r\n\t\treturn <div className='position-relative'>\r\n\t\t\t{renderProduct(product)}\r\n\t\t\t<div className='position-absolute' style={{ top: 20, right: -10 }}>\r\n\t\t\t\t{this.renderVm(VProductFavorateLabel, product.id)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t}\r\n} */\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { View } from 'tonva-react';\r\nimport { CProduct } from '../CProduct';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { renderBrand, renderPropItem } from '../renders';\r\nimport { Product } from '../../store';\r\nimport { VChemicalInfoInCart } from './VChemicalInfo';\r\nimport { VPrice } from './VPrice';\r\n\r\n\r\nexport class VProductWithPrice extends View<CProduct> {\r\n\t/*\r\n    @observable product: any;\r\n    @observable discount: number;\r\n\r\n    private async getProudct(product: BoxId) {\r\n        if (this.product === undefined) {\r\n            let ret = await this.controller.getProductAndDiscount(product);\r\n            this.product = ret.product;\r\n            this.discount = ret.discount;\r\n        }\r\n    }\r\n\t*/\r\n    render(product: Product): JSX.Element {\r\n        return React.createElement(observer(() => {\r\n\t\t\tlet { brand, props } = product;\r\n\t\t\tlet { description, descriptionC, origin, imageUrl } = props;\r\n\t\t\treturn <div className=\"d-block mb-2 px-3\">\r\n\t\t\t\t<div className=\"py-2\">\r\n\t\t\t\t\t<div><strong>{description}</strong></div>\r\n\t\t\t\t\t<div>{descriptionC}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row py-2\">\r\n\t\t\t\t\t<div className=\"col-3\">\r\n\t\t\t\t\t\t<ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-9\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t{renderPropItem('产品编号', origin)}\r\n\t\t\t\t\t\t\t{this.renderVm(VChemicalInfoInCart, product)}\r\n\t\t\t\t\t\t\t{renderBrand(brand)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"border-top pt-2\">\r\n\t\t\t\t\t{this.renderVm(VPrice, product) /*renderProductPrice(product, discount)*/}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t}));\r\n\t}\r\n    /*\r\n    render(product: BoxId): JSX.Element {\r\n        let { renderProduct, renderProductPrice } = this.controller;\r\n        return <div className=\"d-flex flex-column\">\r\n            <div>{renderProduct(product)}</div>\r\n            <div className=\"p-2 border-top\">{renderProductPrice(product, 1)}</div>\r\n        </div>\r\n    }\r\n    */\r\n}\r\n\r\n/**\r\n * 显示产品信息（不包含包装价格），特定于参数包含相关的CAS/Purity等信息），现应用于产品列表\r\n * @param product\r\n */\r\n/* export function renderProduct(product: any) {\r\n    let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl, discountinued } = product;\r\n    return <div className=\"d-block mb-4 px-3 bg-white\">\r\n        <div className=\"py-2\">\r\n            <div className=\"mr-3\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n        </div>\r\n        <div className=\"row\">\r\n            <div className=\"col-3\">\r\n                <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n            </div>\r\n            <div className=\"col-9\">\r\n                <div className=\"row\">\r\n                    {productPropItem('产品编号', origin)}\r\n                    {productPropItem('CAS', CAS)}\r\n                    {productPropItem('纯度', purity)}\r\n                    {productPropItem('分子式', molecularFomula)}\r\n                    {productPropItem('分子量', molecularWeight)}\r\n                    {tv(brand, renderBrand)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        {unsoldProductsUI(discountinued)}\r\n    </div>\r\n} */\r\n","export function randomColor() {\r\n    let arr = ['#ad2031', '#239ab7', '#80a040', '#811f63', '#1B12AC'];\r\n    let i = Math.floor(Math.random() * arr.length);\r\n    return arr[i];\r\n    // return '#' + Math.random().toString(16).substr(-6);\r\n}","export default __webpack_public_path__ + \"static/media/logo_pointShop.14c48c64.png\";","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/homeTopicMap.2d38ac6a.jpg\";","export default __webpack_public_path__ + \"static/media/TriangleShadingO.4d691031.png\";","export default __webpack_public_path__ + \"static/media/TriangleShadingT.be0b38d7.png\";","export default __webpack_public_path__ + \"static/media/signTopicMap.7b9d1979.png\";","export default __webpack_public_path__ + \"static/media/Homemadelogo.72aca280.png\";","export default __webpack_public_path__ + \"static/media/signViceMap.4c375827.png\";","export default \"data:image/png;base64,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\"","import * as React from 'react';\r\nimport { FA, View } from 'tonva-react';\r\nimport { observer } from 'mobx-react';\r\nimport { observable, makeObservable } from 'mobx';\r\n\r\nexport class VModalC extends React.Component<any,any> {\r\n    visible: boolean = true;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        let { visible } = this.props;\r\n        this.visible = visible;\r\n        makeObservable(this, {\r\n            visible: observable\r\n        });\r\n    }\r\n\r\n    medalOnClick = () => {\r\n        this.visible = false;\r\n    }\r\n\r\n    render() {\r\n        let { title, children, width, footer, onClose,onOk,onCancel } = this.props;\r\n\r\n        width = width || \"auto\";\r\n        if (footer === undefined) footer = <><button className=\"btn btn-sm btn-light\" onClick={onCancel} >cancel</button>\r\n            <button className=\"btn btn-sm btn-outline-success ml-2\"  onClick={onOk} >ok</button></>;\r\n        let footerUI: JSX.Element;\r\n        if (footer !== null) footerUI = <div className=\"px-3 py-2 border-top text-right\" >{footer}</div>;\r\n        document.body.setAttribute(\"style\", `overflow: ${this.visible ? \"hidden\" : \"auto\"};`);\r\n        return React.createElement(observer(() => {\r\n            if (!this.visible) return null;\r\n            return <div className=\"modal\" style={{ background: \"rgba(0,0,0,.3)\", display: \"block\" }}>\r\n              <div onClick={onCancel} className=\"d-flex justify-content-center align-content-center w-100 h-100 \" >\r\n                    <div onClick={(e: any) => { e.stopPropagation(); }}\r\n                        className=\"bg-white m-auto position-relative rounded\" style={{ minWidth: \"200px\", width: width }} >\r\n                        <div className=\"px-3 py-2 font-weight-bold border-bottom\">{title}</div>\r\n                        <div className=\"px-3 py-2\">{children}</div>\r\n                        {footerUI}\r\n                        <div onClick={onClose} className=\"position-absolute cursor-pointer\" style={{ right: 5, top: 0 }}>\r\n                            <FA name=\"times-circle-o\" size=\"lg\" className=\"text-secondary\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>;\r\n        }))\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, LMR, FA, tv, List, autoHideTips } from 'tonva-react';\r\nimport { CPointProduct, OrderSource } from './CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { randomColor } from 'tools/randomColor';\r\nimport { pointIcon } from 'tools/images';\r\nimport { xs } from 'tools/browser';\r\nimport { VModalC } from './view/VModalC';\r\n\r\nexport class VExchangeOrder extends VPage<CPointProduct> {\r\n\t//@observable protected shippingAddressIsBlank: boolean = false;\r\n\tprotected shippingAddressIsBlank = observable.box<boolean>();\r\n    protected pageDesc: string = OrderSource.EXCHANGEORDER;\r\n    disBtn: boolean = false;\r\n\r\n    constructor(c: CPointProduct) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            disBtn: observable\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private nullContact = () => {\r\n        return <span className=\"text-primary\">选择收货地址</span>;\r\n    }\r\n\r\n    protected renderPointProduct = (pointProduct: any) => {\r\n        let { product, quantity } = pointProduct;\r\n\t\tif (quantity <= 0) return;\r\n\t\tlet style:React.CSSProperties = { border:`2px solid ${randomColor()}` };\r\n\t\t// let style:React.CSSProperties = { height: '35vw',border:`2px solid ${randomColor()}` };\r\n\t\treturn tv(product, (v) => {\r\n\t\t\treturn <div className=\"w-100 d-flex flex-column mb-4\">{/* 20vh  */}\r\n\t\t\t\t<div title={v.description} className=\"w-100 z-height\" style={style} >\r\n\t\t\t\t\t<PointProductImage chemicalId={v.imageUrl} className=\"w-100 h-100\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"small w-100\">\r\n\t\t\t\t\t<div className=\"text-truncate w-100 my-1\">{v.descriptionC}</div>\r\n\t\t\t\t\t<div className=\"d-flex justify-content-between\">\r\n\t\t\t\t\t\t{/*  <div>\r\n\t\t\t\t\t\t\t<FA name='database' className=\"text-warning\" />\r\n\t\t\t\t\t\t\t<span className=\"text-danger h5\"> {point}</span>\r\n\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t\t\t<img src={pointIcon} alt=\"\" style={{ height: 24 }} />\r\n\t\t\t\t\t\t\t<span className=\"text-danger h5 m-0 ml-1 align-self-end\"> {v.point}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>*{quantity}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t});\r\n    }\r\n\r\n    protected onSubmitOwn = async () => {\r\n        let { submitOrder } = this.controller;\r\n        await submitOrder();\r\n    }\r\n\r\n    protected onSubmit = async () => {\r\n        let { orderData, cApp } = this.controller;\r\n        let { cLottery } = cApp;\r\n        // 必填项验证\r\n        let { shippingContact } = this.pageDesc === OrderSource.EXCHANGEORDER ? orderData : cLottery.prizeOrderData;\r\n        if (!shippingContact) {\r\n            this.shippingAddressIsBlank.set(true);\r\n            //setTimeout(() => this.shippingAddressIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        };\r\n        await this.onSubmitOwn();\r\n        this.disBtn = true;\r\n    }\r\n\r\n\t/*\r\n    protected renderTipsUI = () => {\r\n        let chevronRight = <FA name=\"chevron-right\" className=\"cursor-pointer\" />\r\n        let shippingAddressBlankTip = this.shippingAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>\r\n            : null;\r\n        return {\r\n            chevronRight,\r\n            shippingAddressBlankTip\r\n        }\r\n\t}\r\n\t*/\r\n\r\n    protected renderContact = () => {\r\n        //let { chevronRight, shippingAddressBlankTip } = this.renderTipsUI();\r\n        let { orderData, onSelectShippingContact, cApp } = this.controller;\r\n        let data = this.pageDesc === OrderSource.EXCHANGEORDER ? orderData.shippingContact : cApp.cLottery.prizeOrderData.shippingContact;\r\n        return <div className=\"px-2\">\r\n            <div className=\"row py-3 bg-white mb-1\" onClick={() => { xs ? onSelectShippingContact() : this.changeVisible(true) }}>\r\n                <div className=\"col-3 text-muted pr-0\">收货地址:</div>\r\n                <div className=\"col-9\">\r\n\t\t\t\t\t<LMR className=\"w-100 align-items-center\"\r\n\t\t\t\t\t\tright={<FA name=\"chevron-right\" className=\"cursor-pointer\" />}>\r\n\t\t\t\t\t\t{tv(data, undefined, undefined, this.nullContact)}\r\n\t\t\t\t\t</LMR>\r\n                    {/*shippingAddressBlankTip*/}\r\n\t\t\t\t\t{autoHideTips(this.shippingAddressIsBlank, ()=><div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    changeVisible = (visible?: boolean) => {\r\n        this.controller.visible = visible || false;\r\n    };\r\n\r\n    protected page = observer(() => {\r\n        let { pointProductsSelected, pointToExchanging: pointsSum ,visible} = this.controller;\r\n        let header = <div className=\"w-100 text-center\">兑换确认</div>;\r\n        let footer = <div className=\"d-block\">\r\n            <div className=\"w-100 px-3 d-flex justify-content-between\">\r\n                <div>总计:<span className=\"text-danger ml-2 mr-1 h2\" >{pointsSum}</span>分</div>\r\n                <button disabled={this.disBtn} type=\"button\" className=\"btn btn-danger m-1\" style={{backgroundColor:'#dc3545'}} onClick={this.onSubmit}>确认兑换</button>\r\n            </div>\r\n        </div>;\r\n        let vModel = React.createElement(observer(() => {\r\n            return <VModalC title=\"地址管理\" visible={visible} width={520}\r\n                onCancel={()=>{this.changeVisible()}} onClose={()=>{this.changeVisible()}} footer={null}>\r\n                {this.controller.renderContnet()}\r\n            </VModalC>\r\n        }))\r\n        return <Page header={header} right={<></>} footer={footer}>\r\n            {this.renderContact()}\r\n            {vModel}\r\n            <List items={pointProductsSelected} item={{\r\n                render: this.renderPointProduct,\r\n                className: 'col-6 col-md-4 col-lg-3 px-3 bg-transparent'\r\n                // className: 'w-50 px-3'\r\n            }}\r\n                className=\"row mx-0 mt-2 bg-transparent\"\r\n                // className=\"d-flex flex-wrap bg-transparent mt-2\"\r\n            ></List>\r\n        </Page>\r\n    })\r\n}\r\n\r\n\r\n/**\r\n * 领取奖品页面\r\n */\r\nexport class VMyPrizeExchangeOrder extends VExchangeOrder {\r\n    //@observable shippingAddressIsBlank: boolean = false;\r\n    protected pageDesc: string = OrderSource.PRIZEORDER;\r\n\r\n    renderPointProduct = (pointProduct: any) => {\r\n        return <div>11111</div>\r\n    }\r\n\r\n    /*  protected onSubmitOwn = async () => {\r\n         let { cLottery } = this.controller.cApp;\r\n         await cLottery.submitOrder();\r\n     } */\r\n\r\n    protected page = observer(() => {\r\n        let { cApp } = this.controller;\r\n        let { cLottery } = cApp;\r\n        let footer = <div className=\"d-block\">\r\n            <div className=\"w-100 px-3 d-flex justify-content-end\">\r\n                <button type=\"button\" className=\"btn btn-danger m-1\" onClick={this.onSubmit}>确认领取</button>\r\n            </div>\r\n        </div>;\r\n\r\n        return <Page header=\"奖品领取预览\" footer={footer}>\r\n            {this.renderContact()}\r\n            <List items={cLottery.myPrizeLib} item={{ render: this.renderPointProduct }}\r\n\r\n            ></List>\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { xsOrIpad, xs } from './browser';\r\n\r\n\r\nexport function pageHTitle(title:any) {\r\n    if (!xsOrIpad)  return <div className=\"text-center mt-5\"><h1>{title}</h1></div>;\r\n    return null;\r\n}\r\n\r\nexport function CrPageHeaderTitle(title:string) {\r\n    if (xs) return title;\r\n    return '';\r\n}","import * as React from 'react';\r\nimport { Page } from 'tonva-react';\r\nimport { CrPageHeaderTitle, pageHTitle } from 'tools/pageHeaderTitle';\r\nimport { xs } from '../../tools/browser';\r\n\r\nexport class VPointRule extends React.Component {\r\n\r\n    render() {\r\n         let header = CrPageHeaderTitle('积分规则');\r\n        return <Page header={header}>\r\n            {pageHTitle('积分规则')}\r\n            <div className='bg-white p-2 mx-auto' style={{maxWidth: !xs ? 800 :'none'}}>\r\n                {/* <ol className=\"mb-3\">\r\n                    <li>订购产品满1元积1分（活动期间积分按活动规则执行），积分按消费额累计；付款后，积分变为有效积分，可以使用；</li>\r\n                    <li>特价产品、产业型产品等不产生积分；</li>\r\n                    <li>积分有效期为自然年三年，过期作废（示例：2010年1-12月份产生的积分在2012年12月31日作废清零，以此类推）；</li>\r\n                    <li>积分目前仅限兑换百灵威积分商城中的产品使用，不兑换现金；</li>\r\n                    <li>此积分政策只针对百灵威终端客户，经销商等不产生积分；</li>\r\n                </ol> */}\r\n                <div className=\" text-muted small\">\r\n                    <p className=\"m-0 pb-1\"><b>1，订购产品满1元积1分（活动期间积分按活动规则执行），积分按消费额累计；付款后，积分变为有效积分，可以使用；</b></p>\r\n                    <p className=\"m-0 pb-1\"><b>2，特价产品、产业型产品等不产生积分；</b></p>\r\n                    <p className=\"m-0 pb-1\"><b>3，积分有效期为自然年三年，过期作废（示例：2010年1-12月份产生的积分在2012年12月31日作废清零，以此类推）；</b></p>\r\n                    <p className=\"m-0 pb-1\"><b>4，积分目前仅限兑换百灵威积分商城中的产品使用，不兑换现金；</b></p>\r\n                    <p><b>5，此积分政策只针对百灵威终端客户，经销商等不产生积分；</b></p>\r\n                </div >\r\n                <div className=\"text-muted small py-2\">\r\n                    <p>百灵威保留本积分活动中条款的解释权利，并有根据需要取消本活动或增删、修订本规定的权利，并于百灵威官网、邮件、报纸或其他途径公告后生效。</p>\r\n                    <p>如有疑问，请致电百灵威客服中心：400-666-7788</p>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n","export const RevenueExpenditure = {\r\n    POINTHISTORY: '收支明细',\r\n    SIGNINHISTORY: '签到明细',\r\n}","import * as React from 'react';\r\nimport { VPage, Page, nav, List, FA, DropdownActions, DropdownAction, EasyDate, tv, Ax } from 'tonva-react';\r\nimport { CPointProduct, topicClump, topicClumps } from \"./CPointProduct\";\r\nimport { observer } from 'mobx-react-lite';\r\nimport { VPointRule } from './view/VPointRule';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport classNames from 'classnames';\r\nimport { logo_pointShop, signInIcon, exChangeIcon, homeTopicMap, triangleShadingO, triangleShadingT } from 'tools/images';\r\nimport { RevenueExpenditure } from './basicRefer';\r\nimport { randomColor } from 'tools/randomColor';\r\nimport { CrPageHeaderTitle, pageHTitle } from 'tools/pageHeaderTitle';\r\nimport { xs } from '../tools/browser';\r\n\r\nexport class VMyPoint extends VPage<CPointProduct> {\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    /**\r\n     * 积分规则页面\r\n     */\r\n    private pointRules = () => nav.push(<VPointRule />);\r\n\r\n    /* 积分详情页面 \r\n    private getPointHistory = async () => {\r\n        this.controller.pointDetails();\r\n    }*/\r\n\r\n    private pointblock = (name: any, action: any, icon: any, width?: any) => {\r\n        return <div className={`text-center mx-2 mb-2 ${width}`} onClick={() => action()}>\r\n            <img src={icon} alt=\"\" className=\"w-2c h-2c\" />\r\n            <div className={`text-light small`}>{name}</div>\r\n        </div>\r\n    }\r\n\r\n    private recommendOrHot = (type: any, theme?: string, imgArr?: any[], action?: any) => {\r\n        if (!imgArr || !imgArr.length) return null;\r\n        let { id, name } = type;\r\n        let pointProductImage = (pointProduct: any, index: any) => {            \r\n            let { product } = pointProduct;\r\n            let clm = index !== 0 ? (index === 1 ? 'justify-content-center' : 'justify-content-end') : '';\r\n            return <div className={`d-flex align-items-center ${clm}`}>\r\n                <Ax style={{width: '91.6%'}} className=\"h-100\" href={\"/pointshop/product/\" + product?.id} >{tv(product, (v) => {\r\n                    return <PointProductImage chemicalId={v.imageUrl} className=\"bg-transparent p-0 z-height-more w-100\"\r\n                        style={{/*  width: '91.6%', */ border: `2px solid ${randomColor()}` }} />\r\n                })}</Ax>\r\n            </div>\r\n        }\r\n        return <div className=\"mb-4\" style={{ zIndex: 9 }}>\r\n            <h6 className='d-flex justify-content-between align-content-end bg-transparent '>\r\n                <small className={classNames(theme ? theme : '', 'align-self-end')} style={{ color: theme ? theme : '' }}>{name}</small>\r\n                <Ax href={\"/pointshop/productLine/\" + id} >\r\n                    <span style={{ color: '#808080' }} className=\"pl-2\"><small >更多 </small><FA name='angle-right' /></span>\r\n                </Ax>\r\n            </h6>\r\n            <List\r\n                className=\"row mx-0 bg-transparent justify-content-between\"\r\n                items={imgArr.slice(0, 3)}\r\n                item={{ render:pointProductImage, className: \"col-4 p-0 bg-transparent\" }}\r\n                none='暂无产品' />\r\n        </div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { myEffectivePoints, myPointTobeExpired, myTotalPoints, pointProductGenre, newPointProducts, hotPointProducts,\r\n            openExchangeHistory, openRevenueExpenditure, cApp } = this.controller;\r\n        let { currentUser } = cApp;\r\n        let { openPointSign } = cApp.cSignIn;\r\n        var date = new Date();\r\n        let dateYear = date.getFullYear();\r\n\r\n        let nowPoint = myPointTobeExpired;\r\n        let nowPointTip = nowPoint > 0 ?\r\n            <div className=\"alert alert-warning py-0 w-100 small rounded-0 m-0\" role=\"alert\">\r\n                <span className=\"text-muted\">友情提示: 将有{nowPoint}积分于{dateYear}-12-31过期</span>\r\n            </div>\r\n            : null;\r\n\r\n        let actions: DropdownAction[] = [\r\n            {\r\n                icon: 'get-pocket',\r\n                caption: RevenueExpenditure.POINTHISTORY,\r\n                action: () => openRevenueExpenditure(RevenueExpenditure.POINTHISTORY)\r\n            },\r\n            {\r\n                icon: 'history',\r\n                caption: '兑换记录',\r\n                action: ()=> nav.navigate(\"/pointshop/order\")  /* openExchangeHistory */\r\n            },\r\n            {\r\n                icon: 'book',\r\n                caption: '积分规则',\r\n                action: this.pointRules\r\n            }\r\n        ];\r\n        let right = <DropdownActions className=\"align-self-center mr-1 bg-transparent border-0 text-light\" icon=\"navicon\" actions={actions} />;\r\n\r\n        let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">『 无任何类型 』</div>;\r\n        let UINoExchangeTip: JSX.Element;\r\n        if (!currentUser?.hasCustomer) UINoExchangeTip = <div className=\"alert alert-warning m-0\">\r\n            您的个人信息不完善，无法兑换礼品.<br />\r\n            请完善您的<Ax href=\"/meInfo\" className=\"text-primary\" > 账户信息 </Ax>.\r\n            <br />完善后需要一点审核时间,请您耐心等待.\r\n        </div>;\r\n        if (!currentUser) {\r\n            UINoExchangeTip = <div className=\"alert alert-warning m-0\">\r\n                请登录后进行礼品兑换.<br />\r\n            </div>;\r\n        };\r\n        let header = CrPageHeaderTitle('积分商城');\r\n        if (!xs) right = null;\r\n        return <Page header={header} right={right} className=\"h-100 bg-white\">\r\n            <div className=\"row mx-0 mt-0 mt-sm-1\">\r\n                <div className=\"col-lg-3 d-none d-lg-block\">\r\n                    {this.controller.cApp.cMe.renderMeSideBar()}\r\n                </div>\r\n                <div className=\"col-lg-9 px-0 px-sm-1\">\r\n                    {pageHTitle(<div className=\"text-left\">积分商城</div>)}\r\n                    {renderDropdownActions(actions)}\r\n                    {UINoExchangeTip && <div className=\"d-none d-lg-block mb-2\">{UINoExchangeTip}</div>}\r\n                    <div>\r\n                        <div className=\"d-flex flex-column pb-4 w-100\" style={{ background: `url(${homeTopicMap}) no-repeat`, backgroundSize: 'cover' }}>{/* cover contain */}\r\n                            <>{nowPointTip}</>\r\n                            <img src={logo_pointShop} alt=\"img\" className=\"w-8c mt-4 ml-4 mb-3\" />\r\n                            < div className=\"d-flex mx-3 mt-2 ml-4 text-light justify-content-between\" >\r\n                                <div>\r\n                                    <div><small>当前</small> <span className=\"h5\">{myEffectivePoints}</span> <small>分可用</small></div>\r\n                                    <div className=\"mt-2\">{myTotalPoints > 0 ? <small>总分: {myTotalPoints}</small> : null}</div>\r\n                                </div>\r\n                                <div className=\"d-flex justify-content-end mt-1\" style={{ flex: 1 }}>\r\n                                    {this.pointblock(\"签到\", openPointSign, signInIcon)}\r\n                                    {this.pointblock(\"兑换\", ()=>{ nav.navigate(\"/pointshop/productLine/5002\") }, exChangeIcon)}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {UINoExchangeTip && <div className=\"d-block d-lg-none mt-2\">{UINoExchangeTip}</div>}\r\n                    <div className=\"pt-3\">\r\n                        {/* 产品类别 */}\r\n                        {\r\n                            pointProductGenre.length\r\n                                ? <div>\r\n                                    <List className=\"d-flex flex-wrap pt-2 text-center px-2 bg-transparent justify-content-between\"\r\n                                        items={pointProductGenre}\r\n                                        item={{ render: this.renderGenreItem, className: 'w-25 bg-transparent' }} none={none} />\r\n                                    <p className=\"d-flex m-0 justify-content-end pr-1\"><img src={triangleShadingO} alt=\"\" className=\"h-3c\" /></p>\r\n                                </div>\r\n                                : null\r\n                        }\r\n                        {/* 新品推荐 热门产品 */}\r\n                        <div className='mb-2 px-4 bg-transparent position-relative' style={{ background: `url(${triangleShadingT}) no-repeat 2% 50% `, backgroundSize: '38px' }}>\r\n                            {this.recommendOrHot(topicClumps[5000], undefined, newPointProducts)}\r\n                            {this.recommendOrHot(topicClumps[5001], undefined, hotPointProducts)}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"d-none d-lg-block py-md-5 my-md-5\"></div>\r\n                </div>\r\n            </div>\r\n        </Page >;\r\n    });\r\n\r\n    private renderGenreItem = (item: any) => {\r\n        let { name, imageUrl, id } = item;\r\n        return <div>\r\n            <label className=\"w-100 d-flex flex-column justify-content-center\">\r\n                <Ax href={\"/pointshop/productLine/\" + id} >\r\n                    {\r\n                        imageUrl\r\n                            ? <div className=\"m-auto\"><PointProductImage chemicalId={imageUrl ? imageUrl : ':0-0268.png'} className=\"w-2c\" /></div>\r\n                            : <FA name=\"leaf\" className='mt-2 text-success mb-2' size='lg' />\r\n                    }\r\n                    <div className='text-dark small'>{name}</div>\r\n                    </Ax>\r\n                </label>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport function renderPointRecord(item: any) {\r\n    let { comments, point, date } = item;\r\n    return <div className=\"d-flex w-100 justify-content-between align-content-center small px-3 py-2\">\r\n        <div>\r\n            <div className=\"text-muted\">{comments}</div>\r\n            <div className=\"text-muted small\"><EasyDate date={date} /></div>\r\n        </div>\r\n        <div className=\"d-table h-100\">\r\n            <div className=\"font-weight-bolder h-100 d-table-cell align-middle text-danger\">{point >= 0 ? '+' : ''}{point}</div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport function renderDropdownActions(actions: any) {\r\n    if (xs) return null;\r\n    return <div className=\"row mx-0 justify-content-end mb-2\">\r\n        {actions.map((v: any,index:number) => {\r\n            return <div className='m-1 cursor-pointer' key={index} onClick={v.action}>\r\n                <FA name={v.icon} className=\"text-info\"></FA>\r\n                <span> {v.caption}</span>\r\n            </div>\r\n        })}\r\n    </div>\r\n}","\r\nexport function telephoneValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}(-\\d{3,4})?$/.test(value))\r\n        return \"固定电话格式不正确，请重新输入！(例: 0100109999;010-0109999;010-0109999-100...)\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function mobileValidation(value: string) {\r\n    if (value && !/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(value))\r\n        return \"手机号格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function emailValidation(value: string) {\r\n    if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n        return \"Email格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function faxValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"传真号码格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function addressDetailValidation(value: string) {\r\n    return (value && value.length > 200) ? \"详细地址最多200个字！\" : undefined;\r\n}\r\n\r\nexport function zipCodeValidation(value: string) {\r\n    return (value && value.length > 15) ? \"邮编过长，请修改后录入！\" : undefined;\r\n}\r\n\r\n\r\nexport function organizationNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function departmentNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"部门名称名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function salutationValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function nameValidation(value: string) {\r\n    return (value && value.length > 50) ? \"姓名最多50个字！\" : undefined;\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { VPage, Page, Form, Schema, UiSchema, Context, UiInputItem, UiIdItem, BoxId } from 'tonva-react';\r\nimport { tv } from 'tonva-react';\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { addressDetailValidation, emailValidation, telephoneValidation, mobileValidation, organizationNameValidation, nameValidation } from 'tools/inputValidations';\r\nimport { observer } from 'mobx-react';\r\nimport { xsOrIpad } from '../tools/browser';\r\nimport { pageHTitle } from 'tools/pageHeaderTitle';\r\nimport classNames from 'classnames';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'name', type: 'string', required: true },\r\n    { name: 'organizationName', type: 'string', required: true },\r\n    { name: 'mobile', type: 'string', required: true },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'email', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: true },\r\n    { name: 'addressString', type: 'string', required: true },\r\n    { name: 'isDefault', type: 'boolean', required: false },\r\n    { name: 'isDefaultInvoice', type: 'boolean', required: false },\r\n];\r\n\r\nexport class VContact extends VPage<CSelectContact> {\r\n\r\n    private userContactData: any;\r\n    private form: Form;\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            name: { widget: 'text', label: '姓名', placeholder: '姓名', rules: nameValidation } as UiInputItem,\r\n            organizationName: { widget: 'text', label: '单位名称', placeholder: '单位名称', rules: organizationNameValidation } as UiInputItem,\r\n            mobile: { widget: 'text', label: '手机号', placeholder: '手机号', rules: mobileValidation } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '电话', rules: telephoneValidation } as UiInputItem,\r\n            email: { widget: 'email', label: 'Email', placeholder: 'Email', rules: emailValidation } as UiInputItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区', placeholder: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await this.controller.pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <div className=\"text-truncate\">\r\n                            {country && country.id && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province && province.id && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city && city.id && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county && county.id && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </div>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', placeholder: '详细地址', className: \"text-truncate\", rules: addressDetailValidation } as UiInputItem,\r\n            isDefault: { widget: 'checkbox', label: '默认收货地址', className:\"w-auto border-0\" },\r\n            isDefaultInvoice: { widget: 'checkbox', label: '默认发票地址', className:\"w-auto border-0\" },\r\n            submit: { widget: 'button', label: '提交' },\r\n        }\r\n    }\r\n\r\n    async open(userContactData: any) {\r\n        this.userContactData = userContactData;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onSaveContact = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.saveContact(context.form.data);\r\n        // await this.controller.cApp.cSelectShippingContact.saveContact(context.form.data);\r\n    }\r\n\r\n    private onDelContact = async () => {\r\n        let { contact } = this.userContactData;\r\n        if (await this.vCall(VConfirmDeleteContact, contact) === true) {\r\n            await this.controller.delContact(contact);\r\n            this.closePage();\r\n        };\r\n    }\r\n\r\n    ContactDataP = () => {\r\n        let { currentUser } = this.controller.cApp;\r\n        if (!currentUser) return;\r\n        let { defaultOrganizationName, defaultName, defaultMobile, address, addressString } = currentUser;\r\n        return {\r\n            'organizationName': defaultOrganizationName,\r\n            'name': defaultName,\r\n            'mobile': defaultMobile,\r\n            'address': address,\r\n            'addressString': addressString\r\n        };\r\n    }\r\n    saveButton = (isSave?: boolean) => {\r\n        let btnContent: string;\r\n        if (isSave === undefined || !isSave) {\r\n            let { fromOrderCreation } = this.controller;\r\n            btnContent = fromOrderCreation ? '保存并使用' : '保存';\r\n        } else {\r\n            btnContent = '保存并使用';\r\n        };\r\n        return <button type=\"button\" className=\"btn btn-primary w-100\" onClick={this.onSaveContact}>{btnContent}</button>\r\n    }\r\n\r\n    private page = () => {\r\n        let contactData = _.clone(this.userContactData.contact);\r\n        let titleH: string = `${contactData !== undefined ? \"编辑\" : '添加'}地址`;\r\n        let buttonDel: any;\r\n        if (contactData !== undefined) {\r\n            buttonDel = <button className=\"btn btn-sm btn-info\" onClick={this.onDelContact}>删除</button>;\r\n        } else {\r\n            contactData = this.ContactDataP();\r\n        };\r\n        let footer = <div className={classNames(!xsOrIpad ? 'w-25 mx-auto' : '')}>\r\n            {this.saveButton()}\r\n        </div>;\r\n        let header: any;\r\n        if (xsOrIpad) {\r\n            header = titleH;\r\n        } else {\r\n            buttonDel = null;\r\n        }\r\n        return <Page header={header} footer={footer} right={buttonDel}>\r\n            <div className=\"App-container container text-left position-relative\">\r\n                {pageHTitle(titleH)}\r\n                <div className=\"postion-img\" style={{ left: \"-33%\", top: 200 }}>\r\n                    <img src='/images/triangle.svg' />\r\n                </div>\r\n                <Form ref={v => this.form = v} className={classNames(\"my-3\", !xsOrIpad ? 'w-50 mx-auto' : '')}\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    formData={contactData}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n        </Page>\r\n    }\r\n\r\n    render(param?: any): JSX.Element {\r\n        this.userContactData = param;\r\n        let contactData = _.clone(this.userContactData.contact);\r\n        if (contactData === undefined) contactData = this.ContactDataP();\r\n        let footer = this.saveButton(true);\r\n        /* 选择后的地址无法渲染  存在问题 后续处理  完成后处理保存问题 */\r\n        /* if (this.controller.cApp.cSelectShippingContact.TIT) {\r\n            let itemsAddress = this.uiSchema.items.address as UiIdItem;\r\n            itemsAddress = {\r\n                ...itemsAddress,\r\n                pickId:async (context: Context, name: string, value: number) => await this.controller.pickAddress(context, name, value),\r\n            }\r\n        } */\r\n        return React.createElement(observer(() => {\r\n            return <div className=\"App-container container text-left\" >\r\n                <Form ref={v => this.form = v} className=\"my-3 w-min-30c h-max-20c overflow-auto scroll-S\"\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    formData={contactData}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n                {footer}\r\n            </div>\r\n        }));\r\n    }\r\n}\r\n\r\nexport class VConfirmDeleteContact extends VPage<CSelectContact> {\r\n    async open(contact: any) {\r\n        this.openPage(this.page, contact);\r\n    }\r\n\r\n    private onConfirm = async () => {\r\n        await this.returnCall(true);\r\n        this.closePage();\r\n    }\r\n\r\n    private onCancel = async () => {\r\n        await this.returnCall(false);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = (contact: any) => {\r\n        return <Page header=\"删除地址\" back=\"close\">\r\n            <div className=\"w-75 mx-auto border border-primary rounded my-3 p-3 bg-white\">\r\n                <div className=\"p-4 position-relative\">\r\n                    <i className=\"fa fa-question-circle position-absolute fa-2x text-warning\" style={{ left: 0, top: 0 }} />\r\n                    <b className=\"\">是否删除该地址？</b>\r\n                </div>\r\n                <div className=\"d-flex mt-3 justify-content-end\">\r\n                    <button className=\"btn btn-danger mr-3\" onClick={this.onConfirm}>删除地址</button>\r\n                    <button className=\"btn btn-outline-info mr-3\" onClick={this.onCancel}>取消</button>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, List, LMR, FA, tv } from 'tonva-react';\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { observer } from 'mobx-react';\r\nimport { xs, xsOrIpad } from '../tools/browser';\r\nimport classNames from 'classnames';\r\nimport { Modal } from 'antd';\r\nimport { VContact } from './VContact';\r\nconst { confirm } = Modal;\r\n\r\nexport class VContactList extends VPage<CSelectContact> {\r\n    protected contactSelectSource: string;\r\n    async open() {\r\n\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onContactRender = (contact: any) => {\r\n        let { onEditContact, onContactSelected, delContact } = this.controller;\r\n        let right = <>\r\n            {\r\n                !xsOrIpad && <div className=\"p-2 cursor-pointer text-info\" onClick={() => this.onDelContact(contact)}>\r\n                    <FA name=\"trash-o\" />\r\n                </div>\r\n            }\r\n            <div className=\"p-2 cursor-pointer text-info\" onClick={() => onEditContact(contact)}>\r\n                <FA name=\"edit\" />\r\n            </div>\r\n        </>;\r\n        return <LMR right={right} className=\"px-3 py-2\">\r\n            <div onClick={() => onContactSelected(contact, this.contactSelectSource || undefined)}>\r\n                {tv(contact)}\r\n            </div>\r\n        </LMR>\r\n    }\r\n\r\n    private onDelContact = async (contact: any) => {\r\n        let { delContact } = this.controller;\r\n        confirm({\r\n            title: <div className=\"text-center pb-2 h5\">提示</div>,\r\n            content: '是否删除该地址？',\r\n            okText: '删除地址',\r\n            okType: 'danger',\r\n            cancelText: '取消',\r\n            style: { top: '35%' },\r\n            onOk() { delContact(contact); },\r\n            onCancel() { },\r\n        });\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { onNewContact, userContacts } = this.controller;\r\n        let footer = <div className=\"d-flex justify-content-center\">\r\n            <button type=\"button\" className={classNames(\"btn btn-primary\", !xs ? 'w-25' : ' w-100')} onClick={() => onNewContact()} >新增地址</button>\r\n        </div>;\r\n        let contactList = <List items={userContacts} item={{ render: this.onContactRender }} none=\"无地址\" />;\r\n        let header: any, title = '地址管理';\r\n        if (xsOrIpad) header = title;\r\n        return <Page footer={footer} header={header}>\r\n            <div className=\"row mx-0\">\r\n                <div className=\"col-lg-3 d-none d-lg-block\">\r\n                    {this.controller.cApp.cMe.renderMeSideBar()}\r\n                </div>\r\n                <div className=\"col-lg-9 px-0 mx-auto\" style={{ maxWidth: !xs ? 600 : 'none' }}>\r\n                    {!xsOrIpad && <div className=\"text-left mt-5 px-3\"><h1>{title}</h1></div>}\r\n                    {contactList}\r\n                </div>\r\n            </div>\r\n        </Page>\r\n    })\r\n\r\n\r\n    render(param?: any): JSX.Element {\r\n        this.contactSelectSource = param;\r\n        let { userContacts } = this.controller;\r\n        let footer = <button className=\"btn btn-primary mt-2 mx-auto w-50\"\r\n            onClick={() => {\r\n                this.openVPage(VContact, {});\r\n                /*\r\n                this.controller.cApp.cOrder.modalTitle = 'contactInfo';\r\n                this.controller.cApp.cOrder.editContact = undefined;\r\n                */\r\n            }} >添加新地址</button>;\r\n        let contactList = <List items={userContacts} item={{ render: this.onContactRender }} className=\"h-max-20c overflow-auto border-bottom scroll-S\"\r\n            none={<div className=\"w-100 d-flex justify-content-center text-secondary my-3\">您现未有任何地址信息，请添加</div>} />;\r\n        return React.createElement(observer(() => {\r\n            return <div className=\"d-flex flex-column px-2\" style={{minWidth:300}}>\r\n                {contactList}\r\n                {footer}\r\n            </div>;\r\n        }));\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, BoxId, tv, FA } from 'tonva-react';\r\n\r\nimport { CAddress } from './CAddress';\r\nimport { observer } from 'mobx-react';\r\nimport { xsOrIpad } from '../tools/browser';\r\nimport { pageHTitle } from 'tools/pageHeaderTitle';\r\nimport { GLOABLE } from 'global';\r\n\r\nexport class VAddress extends VPage<CAddress> {\r\n    protected provinceId: number;\r\n    protected cityId: number;\r\n    protected countyId: number;\r\n    protected backLevel = 0;\r\n\r\n    async open(param: any) {\r\n        let provinces = await this.controller.getCountryProvince(GLOABLE.CHINA);\r\n        this.openPage(this.page, { provinces: provinces });\r\n    }\r\n\r\n    private page = (param: any) => {\r\n        this.backLevel++;\r\n        let header = this.titleHeader('选择所在省市');\r\n        return <Page header={header}>\r\n            <>\r\n                {pageHTitle('选择所在省市')}\r\n                <div className=\"row no-gutters pb-5\">\r\n                    {param.provinces.map((v: any) => this.renderPCC(v.province, this.onProvinceClick))}\r\n                </div>\r\n            </>\r\n        </Page>\r\n    }\r\n\r\n    titleHeader = (title:string) => {\r\n        if (xsOrIpad) return title;\r\n        return '';\r\n    }\r\n\r\n    renderPCC = (pcc: BoxId, onClick: any) => {\r\n        return <div key={pcc.id} className=\"col-6 col-md-4 col-lg-3 cursor-pointer\">\r\n            {tv(pcc, (value) => {\r\n                let { id, chineseName } = value;\r\n                return <>\r\n                    <div className=\"pt-1 pb-1 px-2\" onClick={() => onClick(id)}\r\n                        style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n                    >\r\n                        <span className=\"ml-1 align-middle\">\r\n                            <FA name=\"chevron-right\" className=\"text-info small\" />\r\n                            &nbsp; {chineseName}\r\n                        </span>\r\n                    </div>\r\n                </>;\r\n            })}\r\n        </div>\r\n    }\r\n\r\n    onProvinceClick = async (provinceId: any) => {\r\n        this.provinceId = provinceId;\r\n        let cities = await this.controller.getProvinceCities(provinceId);\r\n        if (cities) {\r\n            let len = cities.length;\r\n            if (len === 1) {\r\n                await this.onCityClick(cities[0].city.id);\r\n                return;\r\n            }\r\n            if (len > 1) {\r\n                this.backLevel++;\r\n                let header = this.titleHeader('选择所在城市');\r\n                this.openPageElement(<Page header={header}>\r\n                    <>\r\n                        {pageHTitle('选择所在城市')}\r\n                        <div className=\"row no-gutters pb-5\">\r\n                            {cities.map(v => this.renderPCC(v.city, this.onCityClick))}\r\n                        </div>\r\n                    </>\r\n                </Page>);\r\n                return;\r\n            }\r\n        } else {\r\n            this.closePage(this.backLevel);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    onCityClick = async (cityId: any) => {\r\n        this.cityId = cityId;\r\n        let counties = await this.controller.getCityCounties(cityId);\r\n        if (counties && counties.length > 0) {\r\n            this.backLevel++;\r\n            let header = this.titleHeader('选择所在区县');\r\n            this.openPageElement(<Page header={header}>\r\n                <>\r\n                    {pageHTitle('选择所在区县')}\r\n                    <div className=\"row no-gutters pb-5\">\r\n                        {counties.map(v => this.renderPCC(v.county, this.onCountyClick))}\r\n                    </div>\r\n                </>\r\n            </Page>);\r\n        } else {\r\n            this.closePage(this.backLevel);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    onCountyClick = async (countyId: any) => {\r\n        this.countyId = countyId;\r\n        console.log('this.backLevel',this.backLevel);\r\n        \r\n        this.closePage(this.backLevel);\r\n        this.saveAddress();\r\n    }\r\n\r\n    saveAddress = async () => {\r\n        await this.controller.saveAddress(GLOABLE.CHINA, this.provinceId, this.cityId, this.countyId);\r\n        // await this.controller.cApp.cAddress.saveAddress(GLOABLE.CHINA, this.provinceId, this.cityId, this.countyId);\r\n    }\r\n}\r\n\r\n\r\nexport class VAddressRW extends VAddress {\r\n    onProvinceClick = async (provinceId: any) => {\r\n        this.provinceId = provinceId;\r\n        let cities = await this.controller.cApp.cAddress.getProvinceCities(provinceId);\r\n        if (cities) {\r\n            let { cOrder } = this.controller.cApp;\r\n            let len = cities.length;\r\n            if (len === 1) {\r\n                cOrder.modalTitleS['countyChoice'].preLevel = 'provinceChoice';\r\n                await this.onCityClick(cities[0].city.id);\r\n                return;\r\n            }\r\n            if (len > 1) {\r\n                this.backLevel++;\r\n                cOrder.cities = cities;\r\n                cOrder.modalTitle = 'cityChoice';\r\n                cOrder.modalTitleS['countyChoice'].preLevel = 'cityChoice';\r\n                return;\r\n            }\r\n        } else {\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    onCityClick = async (cityId: any) => {\r\n        this.cityId = cityId;\r\n        let counties = await this.controller.cApp.cAddress.getCityCounties(cityId);\r\n        if (counties && counties.length > 0) {\r\n            this.backLevel++;\r\n            this.controller.cApp.cOrder.counties = counties;\r\n            this.controller.cApp.cOrder.modalTitle = 'countyChoice';\r\n        } else {\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    onCountyClick = async (countyId: any) => {\r\n        this.countyId = countyId;\r\n        this.saveAddress();\r\n    }\r\n\r\n    saveAddress = async () => {\r\n        await this.controller.cApp.cOrder.saveAddress(GLOABLE.CHINA, this.provinceId, this.cityId, this.countyId);\r\n    }\r\n}\r\n\r\nexport class VProvince extends VAddressRW{\r\n    render(param?: any): JSX.Element {\r\n        return <div className=\"row no-gutters\">\r\n                {param.provinces.map((v: any) => this.renderPCC(v.province, this.onProvinceClick))}\r\n            </div>\r\n    }\r\n}\r\n\r\nexport class VCity extends VAddressRW{\r\n    render(param?: any): JSX.Element {\r\n        return React.createElement(observer(() => {\r\n            return <div className=\"row no-gutters\">\r\n                {param?.cities.map((v:any) => this.renderPCC(v.city, this.onCityClick))}\r\n            </div>\r\n        }))\r\n    }\r\n}\r\n\r\nexport class VCounty extends VAddressRW{\r\n    render(param?: any): JSX.Element {\r\n        return React.createElement(observer(() => {\r\n            return <div className=\"row no-gutters\">\r\n                {param?.counties.map((v: any) => this.renderPCC(v.county, this.onCountyClick))}\r\n            </div>\r\n        }))\r\n    }\r\n}","import { VAddress } from './VAddress';\r\nimport { CUqBase } from 'tapp';\r\n\r\nexport class CAddress extends CUqBase {\r\n    protected async internalStart() {\r\n        this.openVPage(VAddress);\r\n    }\r\n\r\n    getCountryProvince = async (countryId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetCountryProvinces.table({ country: countryId });\r\n    }\r\n\r\n    getProvinceCities = async (provinceId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetProvinceCities.table({ province: provinceId });\r\n    }\r\n\r\n    getCityCounties = async (cityId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetCityCounties.table({ city: cityId });\r\n    }\r\n\r\n    saveAddress = async (countryId: number, provinceId: number, cityId?: number, countyId?: number): Promise<any> => {\r\n        let { Address } = this.uqs.common;\r\n        let newAddress = await Address.save(undefined, { country: countryId, province: provinceId, city: cityId, county: countyId });\r\n        let addressId = newAddress && Address.boxId(newAddress.id);\r\n        this.returnCall(addressId);\r\n    }\r\n}\r\n","import { observable, makeObservable } from 'mobx';\r\nimport { Context, BoxId } from 'tonva-react';\r\nimport { CApp, CUqBase } from 'tapp';\r\nimport { VContactList } from './VContactList';\r\nimport { VContact } from './VContact';\r\nimport { CAddress } from './CAddress';\r\n\r\nexport abstract class CSelectContact extends CUqBase {\r\n    fromOrderCreation: boolean;\r\n    userContacts: BoxId[] = [];\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n        makeObservable(this, {\r\n            userContacts: observable\r\n        });\r\n    }\r\n\r\n    async internalStart(fromOrderCreation: boolean/*contactType: ContactType*/) {\r\n        this.fromOrderCreation = fromOrderCreation;\r\n        let userContactMaps = await this.cApp.currentUser?.getContacts();\r\n        this.userContacts = userContactMaps.map((v: any) => v.contact);\r\n        this.openVPage(VContactList);\r\n        if (this.fromOrderCreation && (!this.userContacts || this.userContacts.length === 0)) {\r\n            this.onNewContact();\r\n        }\r\n    }\r\n\r\n    protected abstract getIsDefault(userSetting: any, userContactId: number): Promise<boolean>;\r\n\r\n    renderContentList = (param?: any) => {\r\n        return this.renderView(VContactList, param);\r\n    }\r\n\r\n    /**\r\n     * 打开地址新建界面\r\n     */\r\n    onNewContact = async () => {\r\n        this.openVPage(VContact, { contact: undefined });\r\n    }\r\n\r\n    /**\r\n     * 打开地址编辑界面\r\n     */\r\n    onEditContact = async (userContact: BoxId) => {\r\n        let userContactId = userContact.id;\r\n        let contact = await this.uqs.customer.Contact.load(userContactId);\r\n        let userSetting = await this.cApp.currentUser?.getSetting();\r\n        contact.isDefault = await this.cApp.cSelectShippingContact.getIsDefault(userSetting, userContactId);\r\n        contact.isDefaultInvoice = await this.cApp.cSelectInvoiceContact.getIsDefault(userSetting, userContactId);\r\n        let userContactData: any = { contact: contact };\r\n        this.openVPage(VContact, userContactData);\r\n    }\r\n\r\n    delContact = async (contact: any) => {\r\n        let { id } = contact;\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        if (contact.isDefault === undefined || contact.isDefaultInvoice=== undefined) {\r\n            let userSetting = await currentUser.getSetting();\r\n            if (contact.isDefault === undefined) {\r\n                contact.isDefault = await this.cApp.cSelectShippingContact.getIsDefault(userSetting, id);\r\n            };\r\n            if (contact.isDefaultInvoice === undefined) {\r\n                contact.isDefaultInvoice = await this.cApp.cSelectInvoiceContact.getIsDefault(userSetting, id);\r\n            };\r\n        };\r\n        await currentUser.delContact(id);\r\n        if (contact.isDefault) {\r\n            this.cApp.cSelectShippingContact.setDefaultContact(undefined);\r\n        };\r\n        if (contact.isDefaultInvoice) {\r\n            this.cApp.cSelectInvoiceContact.setDefaultContact(undefined);\r\n        };\r\n        let index = this.userContacts.findIndex(v => v.id === id);\r\n        if (index > -1)\r\n            this.userContacts.splice(index, 1);\r\n    }\r\n\r\n    saveContact = async (contact: any) => {\r\n        let contactBox = await this.saveContactData(contact);\r\n        this.backPage();\r\n        if (this.fromOrderCreation) {\r\n            this.onContactSelected(contactBox);\r\n        }\r\n        /* let { Contact: contactTuid } = this.uqs.customer;\r\n        let newContact = await contactTuid.save(undefined, contact);\r\n        let { id: newContactId } = newContact;\r\n        let contactBox = contactTuid.boxId(newContactId);\r\n\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.addContact(newContactId);\r\n        this.userContacts.push(contactBox);\r\n        let { id, isDefault } = contact;\r\n        if (isDefault === true || this.userContacts.length === 1) {\r\n            await this.setDefaultContact(contactBox);\r\n        }\r\n        // contact.id !== undefined表示是修改了已有的contact(我们只能用“替换”表示“修改”，所以此时需要删除原contact)\r\n        if (id !== undefined) {\r\n            await currentUser.delContact(id);\r\n            let index = this.userContacts.findIndex(v => v.id === id);\r\n            if (index > -1)\r\n                this.userContacts.splice(index, 1);\r\n        }\r\n        this.backPage();\r\n        if (this.fromOrderCreation) {\r\n            this.onContactSelected(contactBox);\r\n        } */\r\n    }\r\n\r\n    saveContactData = async (contact: any) => {\r\n        let { Contact: contactTuid } = this.uqs.customer;\r\n        let newContact = await contactTuid.save(undefined, contact);\r\n        let { id: newContactId } = newContact;\r\n        let contactBox = contactTuid.boxId(newContactId);\r\n\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        await currentUser.addContact(newContactId);\r\n        this.userContacts.push(contactBox);\r\n        let { id, isDefault, isDefaultInvoice } = contact;\r\n        if (isDefault === true || this.userContacts.length === 1) {\r\n            await this.cApp.cSelectShippingContact.setDefaultContact(contactBox);\r\n        };\r\n        if (isDefaultInvoice === true || this.userContacts.length === 1) {\r\n            await this.cApp.cSelectInvoiceContact.setDefaultContact(contactBox);\r\n        };\r\n        // contact.id !== undefined表示是修改了已有的contact(我们只能用“替换”表示“修改”，所以此时需要删除原contact)\r\n        if (id !== undefined) {\r\n            await currentUser.delContact(id);\r\n            let index = this.userContacts.findIndex(v => v.id === id);\r\n            if (index > -1)\r\n                this.userContacts.splice(index, 1);\r\n        };\r\n        return contactBox;\r\n    }\r\n\r\n    protected abstract setDefaultContact(contactId: BoxId): Promise<any>;\r\n\r\n    onContactSelected = async (contact: BoxId, source?: string) => {\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(contact);\r\n        }\r\n        if (source === 'createOrder') {\r\n            await this.cApp.cOrder.onContactSelected(contact);\r\n        }\r\n\r\n        if (source === 'pointOrder') {\r\n            await this.cApp.cPointProduct.onContactSelected(contact);\r\n        }\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = this.newC(CAddress); // new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n\r\n    getContactList = async () => {\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        let userContactMaps = await currentUser.getContacts();\r\n        this.userContacts = userContactMaps.map((v: any) => v.contact);\r\n    }\r\n}\r\n\r\nexport class CSelectShippingContact extends CSelectContact {\r\n    async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        if (userSetting !== undefined) {\r\n            let { shippingContact } = userSetting;\r\n            return shippingContact && shippingContact.id === userContactId;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        await currentUser.setDefaultShippingContact(contactId);\r\n    }\r\n}\r\n\r\nexport class CSelectInvoiceContact extends CSelectContact {\r\n    async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        if (userSetting !== undefined) {\r\n            let { invoiceContact } = userSetting;\r\n            return invoiceContact && invoiceContact.id === userContactId;\r\n        }\r\n        return false;\r\n    }\r\n\r\n     async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        await currentUser.setDefaultInvoiceContact(contactId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, nav } from 'tonva-react';\r\nimport { CPointProduct } from './CPointProduct';\r\n\r\nexport class OrderSuccess extends VPage<CPointProduct> {\r\n\r\n    async open(orderCreateResult: any) {\r\n        this.openPage(this.page, orderCreateResult);\r\n    }\r\n\r\n    private page = (orderCreateResult: any) => {\r\n        return <Page header=\"兑换成功\" afterBack={()=>{ nav.navigate(\"/pointshop\") }} back=\"close\">\r\n            <div className=\"p-3 bg-white mb-3\">\r\n                <div className=\"mb-3\">兑换成功，感谢您对百灵威的厚爱！</div>\r\n                <p className=\"\">\r\n                    订单: <span className=\"h5 text-info\">{orderCreateResult.no}</span><br /><br />\r\n                    我们将立刻处理您的订单，请注意查收到货短信。\r\n                </p>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import { BoxId } from 'tonva-react';\r\nimport { observable, computed, makeObservable } from 'mobx';\r\n\r\nexport class pointOrder {\r\n    webUser: any;   // OK\r\n    organization: BoxId;\r\n    customer: any;  //OK\r\n    salesRegion: BoxId;   // OK\r\n\r\n    shippingContact: BoxId; //OK\r\n    exchangeItems: OrderItem[] = [];\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            shippingContact: observable,\r\n            exchangeItems: observable,\r\n            amount: computed\r\n        });\r\n    }\r\n\r\n    get amount() {\r\n        return this.exchangeItems.reduce((pv, cv) => (pv + cv.subAmount), 0);\r\n    };\r\n\r\n    getDataForSave() {\r\n        let exchangeItems: any[] = [];\r\n        this.exchangeItems.forEach(oi => {\r\n            exchangeItems.push({\r\n                product: oi.product, point: oi.point, quantity: oi.quantity //, pack: oi.pack,\r\n                , subAmount: oi.quantity * oi.point\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            amount: this.amount,\r\n            exchangeitems: exchangeItems, // 前面的必须是小写的\r\n            salesRegion: this.salesRegion\r\n        }\r\n    }\r\n}\r\n\r\nexport class OrderItem {\r\n    product: BoxId;\r\n    pack: BoxId;\r\n    quantity: any;\r\n    point: any;\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            pack: observable,\r\n            quantity: observable,\r\n            point: observable,\r\n            subAmount: computed\r\n        });\r\n    }\r\n\r\n    get subAmount() {\r\n        return this.quantity * this.point;\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, EasyDate, tv, List } from 'tonva-react';\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { OrderItem } from './pointOrder';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { xs } from 'tools/browser';\r\n\r\nexport class VExchangeHistoryDetail extends VPage<CPointProduct> {\r\n\r\n    async open(order: any) {\r\n\r\n        this.openPage(this.page, order);\r\n    }\r\n\r\n    private renderexchangeItem = (orderItem: OrderItem) => {\r\n        let { product, pack, quantity, point } = orderItem;\r\n        return <>\r\n            {tv(product, (v) => {\r\n                return <div className=\"row m-1 w-100\">\r\n                    <div title={v.description} className=\"col-4 col-sm-3 col-lg-2 m-0 p-0\"><PointProductImage chemicalId={v.imageUrl} className=\"w-100\"  /></div>\r\n                    <div className=\"col-8 col-sm-9 col-lg-10 small\">\r\n                        <div><label>{v.descriptionC}</label></div>\r\n                        <div className=\"d-flex justify-content-between my-3\">\r\n                            <div className=\"mt-1\"><b>{pack ? <>{tv(pack, (c) => <>{c.radioy}{c.unit}</>)}</> : v.grade}</b></div>\r\n                            <div>\r\n                                <span className=\"text-danger h6\">{(point * quantity)}</span>\r\n                                <small className=\"text-muted\">分 ({point} × {quantity})</small>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </>;\r\n    }\r\n\r\n    private page = (order: any) => {\r\n        let { brief, data } = order;\r\n        let { no, date, state } = brief;/* state: \"canceled\" */\r\n        let { exchangeItems, shippingContact, amount } = data;\r\n        let header: any = <>订单详情: {no} {state === \"canceled\" ? '(已取消)' : \"\" }</>\r\n        if (!xs) header = '';\r\n        let UI_CON_state = state === \"canceled\" ? <b className=\"float-right h4 text-danger\">兑换单已取消</b> : <></>;\r\n        return <Page header={header}>\r\n            { !xs && <div className=\"alert alert-info alert-signin mt-3\">订单编号 <a href=\"#\" className=\"alert-link\">{no}</a>  {UI_CON_state}</div>}\r\n            <List items={exchangeItems} item={{ render: this.renderexchangeItem }} />\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">收货地址:</div>\r\n                <div className=\"col-9\">{tv(shippingContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">下单时间:</div>\r\n                <div className=\"col-9 text-right\"><EasyDate date={date} /></div>\r\n            </div>\r\n            <div className=\"bg-white p-3 my-1 text-right\">\r\n                <span className=\"text-danger font-weight-bold\">总积分: {amount}</span>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n","import { observer } from 'mobx-react';\r\nimport * as React from 'react';\r\n\r\nexport interface PColumnsItem{\r\n    id: number,\r\n    name:string,\r\n}\r\n\r\nexport interface PListTableProps{\r\n    columns: PColumnsItem[],\r\n    content?: any,\r\n}\r\n\r\nexport class ListTable extends React.Component<PListTableProps>{\r\n    /* constructor(props:any) {\r\n        super(props);\r\n    } */\r\n\r\n    render() {\r\n        let { columns, content } = this.props;\r\n        return  React.createElement(observer(() => {\r\n            return <div className=\"tab-pane fade show active mt-3\" id=\"nav-order-1\" role=\"tabpanel\">\r\n\t\t\t\t<div className=\"table-responsive-vertical shadow-z-1\">\r\n\t\t\t\t\t<table id=\"table\" className=\"table article-product-table order-wrap\">\r\n\t\t\t\t\t\t<thead style={{background:'#D8D8D8'}}>\r\n                            <tr>\r\n                                {columns.map((v: any) =>(<th key={v.id} className=\"py-2\">{v.name}</th>))}\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{content}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t</div>    \r\n\t\t}));\r\n    }\r\n}","import { VPage, Page, EasyDate, Ax, nav } from 'tonva-react';\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { CrPageHeaderTitle, pageHTitle } from 'tools/pageHeaderTitle';\r\nimport { ListTable } from 'tools/listTable';\r\n\r\nexport class VExchangeHistory extends VPage<CPointProduct> {\r\n\r\n    private exchangeHistory: any[] = [];        /*积分产品列表 */\r\n    async open(param?: any) {\r\n        this.exchangeHistory = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderExchangeHistory = (pointProduct: any, index: number) => {\r\n        let { openOrderDetail } = this.controller;\r\n        let { id, no, date } = pointProduct;\r\n        return <div className=\"p-3 justify-content-between\">\r\n            <div className=\"mr-5\" onClick={() => openOrderDetail(id)}><span className=\"small text-muted\">兑换单号: </span><strong>{no}</strong></div>\r\n            <div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n        </div>;\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let header = CrPageHeaderTitle('兑换历史记录');\r\n        return <Page header={header}>\r\n            {pageHTitle('兑换历史记录')}\r\n            <div className=\"d-none d-lg-block p-2 mt-2 breadcrumbs\"><Ax href=\"/pointshop\" >商城首页 </Ax> 兑换记录</div>\r\n            {/* <List items={this.exchangeHistory} item={{ render: this.renderExchangeHistory }} none=\"暂无记录\"></List> */}\r\n            {this.historyListTable()}\r\n        </Page>;\r\n    });\r\n\r\n    historyListTable = () => {\r\n        if (!this.exchangeHistory.length)\r\n            return <div className=\"my-5 text-secondary d-flex justify-content-center\">暂无记录</div>;\r\n        let columns = [{ id: 1, name: '兑换单号' },{ id: 2, name: '日期' },{ id: 3, name: '详情' }];\r\n        let content = <>{\r\n            this.exchangeHistory.map((v: any) => {\r\n                let { id, date, no } = v;\r\n                return <tr className=\"article-product-list order-wrap-list\" key={id}>\r\n                    <td data-title={columns[0].name}>{no}</td>\r\n                    <td data-title={columns[1].name}><EasyDate date={date} /></td>\r\n                    <td data-title={columns[2].name}>\r\n                        <button onClick={() => nav.navigate(\"/pointshop/orderDetail/\" + id) /* this.controller.openOrderDetail(id) */}\r\n                            type='button' className=\"btn-primary w-4c\">详情</button>\r\n                    </td>\r\n                </tr>\r\n            })\r\n        }</>;\r\n        return <ListTable columns={columns} content={content} ></ListTable>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Scroller, EasyDate, List } from 'tonva-react';\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { renderPointRecord } from './VMyPoint';\r\nimport { RevenueExpenditure } from './basicRefer';\r\nimport { xs } from 'tools/browser';\r\nimport { CrPageHeaderTitle, pageHTitle } from 'tools/pageHeaderTitle';\r\nimport { ListTable } from 'tools/listTable';\r\n\r\nexport class VRevenueExpenditure extends VPage<CPointProduct> {\r\n    private showList: any = [];\r\n    private tipNone: string = '『 无 』';\r\n    async open(param?: any) {\r\n        this.openPage(this.page, { header: param });\r\n    }\r\n\r\n    private matchData = (header: string) => {\r\n        let { pagePointHistory, cApp } = this.controller;\r\n        let { POINTHISTORY, SIGNINHISTORY } = RevenueExpenditure;\r\n        switch (header) {\r\n            case POINTHISTORY:\r\n                this.showList = pagePointHistory;\r\n                this.tipNone = '『 未曾拥有过 不曾失去过 』';\r\n                return;\r\n            case SIGNINHISTORY:\r\n                this.showList = cApp.cSignIn.signinPageHistory;\r\n                this.tipNone = '『 从未得到过 开启首签之旅 』';\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    protected onScrollBottom = async (scroller: Scroller) => {\r\n        this.showList.more();\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { header } = param;\r\n        let headerT = header;\r\n        this.matchData(header);\r\n        let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">{this.tipNone}</div>;\r\n        header = CrPageHeaderTitle(header);\r\n        return <Page header={header} onScrollBottom={this.onScrollBottom}>\r\n            {pageHTitle(headerT)}\r\n            <div className=\"mx-auto\">\r\n                {\r\n                    xs \r\n                        ? <List items={this.showList} item={{ render: renderPointRecord }} none={none} />\r\n                        : this.historyListTable()\r\n                }\r\n            </div>\r\n        </Page>;\r\n    });\r\n\r\n    private historyListTable = (): JSX.Element => {\r\n        if (this.showList && this.showList.items && !this.showList.items.length)\r\n            return <div className=\"my-5 text-secondary d-flex justify-content-center\">{this.tipNone}</div>;\r\n        let columns = [{ id: 1, name: '简述' }, { id: 2, name: '积分说明' }, { id: 3, name: '日期' }, { id: 4, name: '收支' }];\r\n        let sources: { [s: number]: string } = {\r\n            1: \"积分券下单\",\r\n            2: \"签到\",\r\n            3: \"兑换\",\r\n            5: \"下单\",\r\n            8: \"抽奖\",\r\n            9: \"退货\"\r\n        };\r\n        let content = <>{\r\n            this.showList && this.showList.items && this.showList.items.map((v: any) => {\r\n                let { id, date, comments, point, source } = v;\r\n                return <tr className=\"article-product-list order-wrap-list\" key={id}>\r\n                    <td data-title={columns[0].name}>{comments}</td>\r\n                    <td data-title={columns[1].name}>{sources[source]}</td>\r\n                    <td data-title={columns[2].name}><EasyDate date={date} /></td>\r\n                    <td data-title={columns[3].name} className=\"text-danger font-weight-bolder\">{point >= 0 ? '+' : ''}{point}</td>\r\n                </tr>\r\n            })\r\n        }</>;\r\n        return <ListTable columns={columns} content={content} ></ListTable>;\r\n\t}\r\n}\r\n","export default __webpack_public_path__ + \"static/media/giftPlate.c5dd75b1.png\";","export default \"data:image/png;base64,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\"","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport { VPage, Page, FA, tv, Form, UiSchema, UiCustom } from 'tonva-react';\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { MinusPlusWidget } from 'tools';\r\nimport { schema, TopicDivision } from './VPointProduct';\r\nimport giftPlate from 'images/giftPlate.png';\r\nimport { observable } from 'mobx';\r\nimport 已下架 from 'images/已下架.png';\r\n\r\nexport class VPointProductDetail extends VPage<CPointProduct> {\r\n    /* async open(param?: any) {\r\n        this.openPage(this.page);\r\n    } */\r\n\r\n    header() {\r\n        return \"产品详情\";\r\n    }\r\n\r\n    right() {\r\n        return this.controller.renderSelectedLable();\r\n    }\r\n\r\n    footer() {\r\n        return React.createElement(observer(() => {\r\n            let { pointToExchanging, myEffectivePoints } = this.controller;\r\n            let availablePoints = (myEffectivePoints - pointToExchanging) >= 0 ? (myEffectivePoints - pointToExchanging) : 0;\r\n            let pointsInsuffTip = availablePoints === 0 ? <span className=\"text-danger small\">( <FA name=\"exclamation-circle\" />积分不足 )</span> : null;\r\n            return <div className=\"d-flex justify-content-between m-2\">\r\n                <div className=\"align-self-center\">当前可用:<span className=\"text-danger h4\" >{availablePoints}</span>分 {pointsInsuffTip}</div>\r\n            </div>;\r\n        }));\r\n    }\r\n\r\n    content() {\r\n        return <this.page />;\r\n    };\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            product: { visible: false },\r\n            // pack: { visible: false },\r\n            quantity: {\r\n                widget: 'custom',\r\n                label: null,\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget,\r\n                onChanged: this.controller.onQuantityChanged as any\r\n            } as UiCustom,\r\n            // point: { visible: false },\r\n            // imageUrl: { visible: false },\r\n        }\r\n    }\r\n\r\n    private renderVDefaultPost = () => {\r\n        return this.controller.renderVDefaultPost();\r\n    }\r\n\r\n    protected renderPointProduct = (pointProduct: any) => {\r\n        let { cApp } = this.controller;\r\n        let { currentUser } = cApp;\r\n        let { product, OffShelf } = pointProduct;\r\n        let OffShelfTip: any = undefined;\r\n        if (OffShelf) OffShelfTip = <div className=\"position-absolute w-25\" style={{ top: 0, left: 15 }}>\r\n            <img src={已下架} alt=\"\" className=\"w-100\" />\r\n        </div>\r\n        return <>\r\n            {tv(product, (v) => {\r\n                return <div className=\"w-100 row mx-0\">\r\n                    <div title={v.description} className=\"col-12 col-sm-6 position-relative\">\r\n                        <PointProductImage chemicalId={v.imageUrl} className=\"w-100 h-min-12c\" style={{}} />\r\n                        {OffShelfTip}\r\n                    </div>\r\n                    <div className=\"small col-12 col-sm-6 pt-sm-4\">\r\n                        <div className=\"mt-2\">{v.descriptionC}</div>\r\n                        <div className=\"my-2\">{v.grade}</div>\r\n                        <div className=\"row m-0 p-0\">\r\n                            <div className=\"col-5 m-0 p-0\">\r\n                                <span className=\"text-danger h5\">{v.point}</span>\r\n                                <small>分</small>\r\n                            </div>\r\n                            <div className=\"col-7 d-flex justify-content-end align-items-right m-0 p-0\">\r\n                                {\r\n                                    !OffShelf && currentUser?.hasCustomer\r\n                                        ? <Form schema={schema} uiSchema={this.uiSchema} formData={pointProduct} className=\"mr-2\" />\r\n                                        : null\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { pointProductsDetail } = this.controller;\r\n        return <div className=\"row mx-0 mt-1\">\r\n            <div className=\"col-md-3 d-none d-md-block py-0 py-md-2 mb-0 mb-md-4\">\r\n                {this.controller.renderShopSideBar()}\r\n            </div>\r\n            <div className=\"col-md-9 px-0 px-md-1\">\r\n                <div className=\"\">{this.renderPointProduct(pointProductsDetail)}</div>\r\n                <div className=\"d-flex mt-2\"><img src={giftPlate} alt=\"\" className=\"m-auto w-75\" /></div>\r\n            </div>\r\n        </div>\r\n        // return <Page header='产品详情' right={right} footer={footer} className=\"bg-white\">\r\n        //     <div className=\"\">{this.renderPointProduct(pointProductsDetail)}</div>{/* nav-tabs */}\r\n        //     <div className=\"d-flex mt-2\"><img src={giftPlate} alt=\"\" className=\"m-auto w-75\" /></div>\r\n        //     {/* {pointProductsDetail.htmlFragment\r\n        //         ? <div className=\"mx-2 mt-1\">\r\n        //             {TopicDivision('产品介绍')}\r\n        //             <div dangerouslySetInnerHTML={{ __html: pointProductsDetail.htmlFragment }} className=\"w-100\"></div>\r\n        //         </div>\r\n        //         : <>{this.renderVDefaultPost()}</>\r\n        //     } */}\r\n        // </Page>;\r\n    });\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from 'tonva-react';\r\nimport { observer } from 'mobx-react';\r\nimport { CPointProduct } from './CPointProduct';\r\n\r\nexport class VSelectedLable extends View<CPointProduct> {\r\n\r\n    render(): JSX.Element { \r\n        return <this.content />\r\n    };\r\n\r\n    private content = observer(() => {\r\n        let { pointProductsSelected, openSelectedPointProduct } = this.controller;\r\n        let { length } = pointProductsSelected;\r\n        let count = 0\r\n        let badge, onClick:any, pointer;\r\n        if (length) {\r\n            for (let i of pointProductsSelected) {\r\n                count += i.quantity;\r\n            }\r\n        }\r\n        if (count > 0) {\r\n            onClick = openSelectedPointProduct;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={()=>{if(onClick){onClick()}}}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","export default __webpack_public_path__ + \"static/media/infb.a542e5de.jpg\";","import * as React from 'react';\r\nimport { View } from 'tonva-react';\r\nimport { CPointProduct } from '../CPointProduct';\r\nimport infb from 'images/infb.jpg'\r\n\r\nexport class VDefaultPost extends View<CPointProduct> {\r\n\r\n    render(): JSX.Element {\r\n        return <this.content />;\r\n    }\r\n\r\n    private content = (): any => {\r\n        return <div className=\"pt-2 px-2 bg-white\">\r\n            {/* <div className=\"border-bottom border-danger h5 py-1 mb-2\">公司概况</div> */}\r\n            <div style={{ textIndent: '2em' }}>\r\n                <p>百灵威科技有限公司是一家致力于研发和生产化学及相关产品，集敏捷制造、全球营销和现代物流为一体的高科技企业。百灵威在中国内地、香港，欧洲及北美等多个国家和地区设有物流中心，实行专业化、个性化的一站式服务，为全球超过200,000 名科技和工业领域的客户提供产品资源及配套技术服务。</p>\r\n                <p>百灵威现代化的研发制造基地拥有一支富有创造天赋的专业团队，新技术、新产品层出不穷，J&K®、Amethyst®、J&K Scientific® 产品已多达30,000 种以上，并呈几何级数增长。作为国际化的资源平台公司，百灵威致力于促进全球产业链的合作，不断推进集约式发展，集成资源600,000 余种，包括高纯有机试剂、无机试剂、生化试剂、分析试剂、标准品、金属有机催化剂、医药中间体、超精细材料、以及实验室仪器、耗材等众多产品。百灵威的柔性生产线能够快速提供小批量、多品种的原料，满足实验、中试以至规模化生产的需要。</p>\r\n                <p>百灵威秉承“诚实守信、开拓创新、合作共赢、实现卓越”的价值观，致力于与化学、生物医药、精细化工、食品工业、现代农业、电子、日化、石化、纺织、生命科学、环境保护、疾病控制、新能源、新材料、航空航天等领域的客户建立互信、长久的合作关系，为实现“促进科技与工业发展，造福人类”的使命而不懈努力！</p>\r\n                <img alt=\"\" src={infb} className=\"w-100\" />\r\n            </div>\r\n        </div >\r\n    };\r\n}\r\n","import * as React from 'react';\r\nimport { View, Ax, List } from 'tonva-react';\r\nimport { CPointProduct, topicClumps } from '../CPointProduct';\r\n\r\nexport class VShopSideBar extends View<CPointProduct> {\r\n\r\n    render(): JSX.Element {\r\n        let { pointProductGenre } = this.controller;\r\n        let  Gengres = [{ id: null, name: \"商城首页\" },{ id: 5002, name: \"积分商城\" }, ...pointProductGenre, ...Object.values(topicClumps)];\r\n        return <List items={Gengres}\r\n            item={{\r\n                render: (el: any) => {\r\n                    let { id, name } = el;\r\n                    let url = id ? `/pointshop/productLine/${id}` : \"/pointshop\";\r\n                    return <><Ax href={url} className=\"w-100 text-center\" >{name}</Ax></>\r\n                },\r\n                className: \"py-2\"\r\n            }}\r\n            className=\"cus-list border rounded\"\r\n        />;\r\n\t}\r\n}\r\n","/* eslint-disable */\r\nimport { VPage } from 'tonva-react';\r\nimport { observer } from 'mobx-react';\r\nimport { CApp } from 'tapp';\r\n\r\nexport class VError extends VPage<CApp> {\r\n\r\n    header() {\r\n        return this.isWebNav === true ? null : <></>;\r\n    }\r\n\r\n    right() {\r\n        return this.isWebNav === true ? null : <></>;\r\n    }\r\n\r\n    content() {\r\n        return <this.contentView />\r\n    }\r\n\r\n    private contentView = observer(() => {\r\n        return <div className=\"container my-3\">\r\n            <div className=\"row p-5 m-5\">\r\n                <div className=\"col text-center\">\r\n                    <i className=\"fa fa-exclamation fa-5x text-warning\" aria-hidden=\"true\"></i>\r\n                </div>\r\n                <div className=\"col\">\r\n                    <p className=\"h3\">抱歉，页面无法访问...</p>\r\n                    <p className=\"text-mute\">\r\n                        请检查网址是否有误。\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    })\r\n}","import { BoxId, RowContext, QueryPager, nav } from 'tonva-react';\r\nimport { CApp, CUqBase } from 'tapp';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { VPointProduct, VSelectedPointProduct } from 'pointMarket/VPointProduct';\r\nimport { VExchangeOrder } from './VExchangeOrder';\r\nimport { VMyPoint } from './VMyPoint';\r\nimport { CSelectShippingContact } from 'customer/CSelectContact';\r\nimport { OrderSuccess } from './OrderSuccess';\r\nimport { pointOrder, OrderItem } from './pointOrder';\r\nimport { VExchangeHistoryDetail } from './VExchangeHistoryDetail';\r\nimport { VExchangeHistory } from './VExchangeHistory';\r\nimport { VRevenueExpenditure } from './VRevenueExpenditure';\r\nimport { VPointProductDetail } from './VPointProductDetail';\r\nimport { VSelectedLable } from './VSelectedLable';\r\nimport { GLOABLE } from 'global';\r\nimport { VDefaultPost } from './view/VDefaultPost';\r\nimport moment from 'moment';\r\nimport { VShopSideBar } from './view/VShopSideBar';\r\nimport { VError } from 'tools/VError';\r\n\r\nexport const topicClump = {\r\n    productGenre: '产品分类',\r\n    newRecommend: '新品推荐',\r\n    hotProduct: '热门产品',\r\n}\r\n\r\nexport const Arr: any[] = [\r\n    { id: 5000, name: topicClump.newRecommend, typeName: topicClump.newRecommend },\r\n    { id: 5001, name: topicClump.hotProduct, typeName: topicClump.hotProduct },\r\n];\r\n\r\nfunction Arrtoobj(arr: any[]) {\r\n    let obj: any = {};\r\n    arr.forEach((el: any) => {\r\n        obj[el.id] = el;\r\n    });\r\n    return obj;\r\n}\r\n\r\nexport const topicClumps: { [id: number]: { id: number, name: string, typeName: string } } = Arrtoobj(Arr);\r\n\r\nexport const OrderSource = {\r\n    EXCHANGEORDER: '兑换订单',\r\n    PRIZEORDER: '奖品订单',\r\n}\r\n\r\nexport const PointIntervals: { [state: string]: { startPoint: number, endPoint: number } } = {\r\n    \"below\": { startPoint: 0, endPoint: 10000 },\r\n    \"firstLevel\": { startPoint: 10000, endPoint: 50000 },\r\n    \"twoLevel\": { startPoint: 50000, endPoint: 150000 },\r\n    \"above\": { startPoint: 150000, endPoint: Infinity },\r\n}\r\n\r\nexport class CPointProduct extends CUqBase {\r\n\r\n    myPoints: any[] = [];                  /* 我的积分 */\r\n    myEffectivePoints: number = 0;         /* 我的积分(计算后) */\r\n    myTotalPoints: number = 0;             /* 我的积分(计算后) */\r\n    myPointTobeExpired: number = 0;        /* 我的快过期积分 */\r\n\r\n    pointProducts: any[] = [];             /* 可兑产品列表 */\r\n    newPointProducts: any[] = [];          /* 新品推荐 */\r\n    hotPointProducts: any[] = [];          /* 热门产品 */\r\n    pointProductsSelected: any[] = [];     /* 已选择产品列表 */\r\n    pointProductsDetail: any;              /* 详情产品 */\r\n    pointToExchanging: number = 0;              /* 将要兑换的积分总计 */\r\n    orderData: pointOrder = new pointOrder();   /* 正在提交的产品列表*/\r\n    couponId: number;                      /* 积分码 */\r\n    platformOrderId: any;                  /* 平台合同号 */\r\n    platformOrder: any[] = [];             /* 平台合同 */\r\n    pagePointHistory: QueryPager<any>;     /* 积分详情 */\r\n    pointProductGenre: any[] = [];         /* 产品类型列表 */\r\n\r\n    visible: boolean = false;\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            myPoints: observable,\r\n            myEffectivePoints: observable,\r\n            myTotalPoints: observable,\r\n            myPointTobeExpired: observable,\r\n            pointProducts: observable,\r\n            newPointProducts: observable,\r\n            hotPointProducts: observable,\r\n            pointProductsSelected: observable,\r\n            pointProductsDetail: observable,\r\n            pointToExchanging: observable,\r\n            orderData: observable,\r\n            couponId: observable,\r\n            platformOrderId: observable,\r\n            platformOrder: observable,\r\n            pagePointHistory: observable,\r\n            pointProductGenre: observable,\r\n            visible: observable,\r\n        });\r\n    }\r\n\r\n    protected async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 刷新积分\r\n     */\r\n    refreshMypoint = async () => {\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        this.myPoints = await currentUser.getPoints();\r\n        this.myEffectivePoints = this.myPoints.reduce((v, e) => { return v + e.effectiveLeftPoint }, 0);\r\n        this.myTotalPoints = this.myPoints.reduce((v, e) => { return v + e.totalLeftPoint }, 0)\r\n        let date = new Date();\r\n        let dateYear = date.getFullYear();\r\n        this.myPointTobeExpired = this.myPoints.reduce((v, e) => { return v + ((dateYear - e.pointYear) > 1 ? e.effectiveLeftPoint : 0) }, 0);\r\n    }\r\n\r\n    /**\r\n     * 初始化可兑换产品列表(暂时弃用)\r\n     */\r\n    initPointProducts = () => {\r\n        if (this.pointProductsSelected.length) {\r\n            for (let i of this.pointProductsSelected) {\r\n                this.pointProducts.forEach((el: any) => {\r\n                    if (i.product.id === el.product.id) el.quantity = i.quantity;\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 清空选择的积分产品  \r\n     */\r\n    clearSelectedPointsProducts = () => {\r\n        this.orderData.exchangeItems = undefined;\r\n        this.pointProductsSelected.length = 0;\r\n        this.pointToExchanging = 0;\r\n    }\r\n\r\n    /**\r\n     * 积分管理页面\r\n     */\r\n    openMyPoint = async (param?: any) => {\r\n        await this.refreshMypoint();        /* 刷新积分 */\r\n        await this.getPointProductGenre();  /* 获取产品类型 */\r\n        this.newPointProducts = await this.getNewPointProducts();    /* 获取新品推荐 */\r\n        this.hotPointProducts = await this.getHotPointProducts();    /* 获取热门产品 */\r\n        this.openVPage(VMyPoint);\r\n    }\r\n\r\n    /**\r\n     * 可兑换产品页面\r\n     */\r\n    openPointProduct = async (param?: any) => {\r\n        let result: any;\r\n        if (param) {\r\n            let { id } = param;\r\n            result = topicClumps[id];\r\n            if (!result) {\r\n                let res: any = await this.uqs.积分商城.Genre.load(Number(id));\r\n                result = res ? { ...res, typeName: topicClump.productGenre } : undefined;\r\n            };\r\n            if (result) {\r\n                this.pointProducts = await this.getPointProductByDifferentPlot(result);\r\n            };\r\n        };\r\n        await this.getPointProductGenre();\r\n        await this.refreshMypoint();\r\n        this.openVPage(VPointProduct, result);\r\n    }\r\n\r\n    /**\r\n     * 可兑换产品的详情(可生成浏览量)\r\n     */\r\n    openPointProductDetail = async (pointProduct: any) => {\r\n        let { id, product } = pointProduct;\r\n        if (!product) pointProduct.product = await this.uqs.积分商城.PointProductLib.boxId(Number(id));\r\n        this.pointProductsDetail = pointProduct;\r\n        if (pointProduct.product) {\r\n            if (this.pointProductsSelected.length) {\r\n                for (let i of this.pointProductsSelected) {\r\n                    if (pointProduct.product.id === i.product.id)\r\n                        this.pointProductsDetail.quantity = i.quantity;\r\n                }\r\n            } else\r\n                this.pointProductsDetail.quantity = 0;\r\n            let fm = 'YYYY-MM-DD HH:mm:ss';\r\n            let findProduct = await this.getPointProductLibLoad(pointProduct.product.id);\r\n            if (findProduct !== undefined && moment(undefined, fm) >= moment(findProduct.endDate, fm))\r\n                this.pointProductsDetail.OffShelf = true;/* 是否可兑换（无法兑换） */\r\n            // this.pointProductsDetail.htmlFragment = await this.getPointProductDetailFragment(this.pointProductsDetail);\r\n            await this.setPointProductVisits(pointProduct.product?.obj);//生成浏览量\r\n        };\r\n        await this.refreshMypoint();\r\n        await this.getPointProductGenre();\r\n        this.openVPage(VPointProductDetail);\r\n    }\r\n\r\n    renderShopSideBar = () => {\r\n        return this.renderView(VShopSideBar);\r\n    }\r\n\r\n    onContactSelected = async (contact: BoxId) => {\r\n        this.orderData.shippingContact = contact;\r\n        this.visible = false;\r\n    }\r\n\r\n    renderContnet = () => {\r\n        return this.cApp.cSelectShippingContact.renderContentList(\"pointOrder\");\r\n    }\r\n\r\n    /**\r\n     * 据商品id 获取对应的商品所有信息\r\n     */\r\n    getPointProductLibLoad = async (id: number) => {\r\n        return await this.uqs.积分商城.PointProductLib.load(id);\r\n    }\r\n\r\n    /**\r\n     * 获取积分商品详情的html片段(编译后)\r\n     */\r\n    getPointProductDetailFragment = async (pointProduct: any) => {\r\n        // this.pointProductsDetail.htmlFragment = '<div style=\"color:red;text-align:center;margin-top:2rem;\">帖文 待开发</div>';\r\n        let result = await window.fetch(GLOABLE.CONTENTSITE + '/partial/pointproductdetail/' + pointProduct.product.id);\r\n        if (result.ok) {\r\n            let content = await result.text();\r\n            return content;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 积分收支明细页面\r\n     */\r\n    openRevenueExpenditure = async (topic?: any) => {\r\n        await this.getPointHistory();\r\n        this.openVPage(VRevenueExpenditure, topic)\r\n    }\r\n\r\n    /**\r\n     * 积分兑换记录页面\r\n     */\r\n    openExchangeHistory = async () => {\r\n        let promises: PromiseLike<any>[] = [\r\n            this.uqs.积分商城.PointExchangeSheet.mySheets(undefined, 1, -10),\r\n            this.uqs.积分商城.PointExchangeSheet.mySheets(\"#\", 1, -100)\r\n        ];\r\n        let presult = await Promise.all(promises);\r\n        let exchangeHistory = presult[0].concat(presult[1]);\r\n        this.openVPage(VExchangeHistory, exchangeHistory);\r\n    }\r\n\r\n    /**\r\n     * 历史兑换单详情页面\r\n     */\r\n    openOrderDetail = async (orderId: number) => {\r\n        let order:any = await this.uqs.积分商城.PointExchangeSheet.getSheet(orderId);\r\n        if (!order || (this.user?.id !== order?.brief?.user)) {\r\n            this.openVPage(VError);\r\n            return;\r\n        };\r\n        this.openVPage(VExchangeHistoryDetail, order);\r\n    }\r\n\r\n    /**\r\n     * 已选择的可兑换产品页面\r\n     */\r\n    openSelectedPointProduct = async () => {\r\n        this.pointProductsSelected = this.pointProductsSelected.filter(v => v.quantity !== 0);\r\n        this.openVPage(VSelectedPointProduct);\r\n    }\r\n\r\n    /**\r\n     * 确认兑换订单预览页面\r\n     */\r\n    openExchangeOrder = async () => {\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        }\r\n        this.pointProductsSelected = this.pointProductsSelected.filter(v => v.quantity !== 0);\r\n        await this.cApp.cSelectShippingContact.getContactList();\r\n        this.openVPage(VExchangeOrder);\r\n    }\r\n\r\n    /**\r\n     * 已选择的可兑换产品图标\r\n     */\r\n    renderSelectedLable() {\r\n        return this.renderView(VSelectedLable);\r\n    }\r\n\r\n    /**\r\n     * 默认帖文\r\n     */\r\n    renderVDefaultPost() {\r\n        return this.renderView(VDefaultPost);\r\n    }\r\n\r\n    // /*领取积分 */\r\n    // openPointDrawing = async (credits?: string) => {\r\n    //     /* \r\n    //     let lastPlatformId = await this.getLastPlatformOrder();\r\n    //     if (lastPlatformId)\r\n    //         this.platformOrder = await this.getPlatFormOrder(this.platformOrderId);\r\n    //     */\r\n    //     this.openVPage(VPlatformOrderPoint, credits);\r\n    // }\r\n\r\n    /* 展示 积分详情*/\r\n    /* pointDetails = async () => {\r\n        this.getPointHistory();\r\n        this.openVPage(VPointDetails);\r\n    } */\r\n\r\n    /**\r\n     * 浏览商品(数据埋点,生产浏览量PV)\r\n     */\r\n    setPointProductVisits = async (pointProduct: any) => {\r\n        return this.uqs.积分商城.SetPointProductVisits.submit({ pointProduct });\r\n    }\r\n\r\n    /**\r\n     * 获取产品类型\r\n     */\r\n    getPointProductGenre = async () => {\r\n        let { Genre } = this.uqs.积分商城;\r\n        this.pointProductGenre = await Genre.all();\r\n    }\r\n\r\n    /**\r\n     * 获取积分详情的数据\r\n     */\r\n    getPointHistory = () => {\r\n        let { currentUser } = this.cApp;\r\n        this.pagePointHistory = new QueryPager(this.uqs.积分商城.GetPointHistory, 15, 30);\r\n        this.pagePointHistory.first({ customer: currentUser?.currentCustomer, key: \"\" });\r\n    }\r\n\r\n    /**\r\n     * 获取可兑换产品(据 分类、新品推荐、热门产品)\r\n     */\r\n    getPointProductByDifferentPlot = async (plot: any) => {\r\n        let { productGenre, newRecommend, hotProduct } = topicClump;\r\n        switch (plot?.typeName) {\r\n            case productGenre:\r\n                return await this.filterByProductGenre(plot);\r\n            case newRecommend:\r\n                return await this.getNewPointProducts();\r\n            case hotProduct:\r\n                return await this.getHotPointProducts();\r\n            default:\r\n                return;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 据类型筛选商品\r\n     */\r\n    filterByProductGenre = async (currentGenre: any) => {\r\n        // let pointProductFromGenre = await this.getProductsFromGenre(currentGenre);\r\n        let pointProductFromGenre = await this.uqs.积分商城.GetPointProductByGenre.table({ genre: currentGenre });\r\n        return pointProductFromGenre.map((v) => { return { genre: v.genre, product: v.pointProduct } });\r\n    }\r\n\r\n    /**\r\n     * 获取指定分类所属的商品\r\n     */\r\n    getProductsFromGenre = async (genre: any) => {\r\n        return await this.uqs.积分商城.PointProductGenre.table({ genre, pointproduct: undefined });\r\n    }\r\n\r\n    /**\r\n     * 获取新品推荐的产品\r\n     */\r\n    getNewPointProducts = async () => {\r\n        let result = await this.uqs.积分商城.GetNewPointProducts.table({});\r\n        return result.sort((a, b) => a.point - b.point).map((v) => { return { product: v.id } });\r\n    }\r\n\r\n    /**\r\n     * 获取热门产品\r\n     */\r\n    getHotPointProducts = async () => {\r\n        let result = await this.uqs.积分商城.GetHotPointProducts.table({});\r\n        return result.sort((a, b) => a.point - b.point).map((v) => { return { product: v.id } });\r\n    }\r\n\r\n    /**\r\n     * 获取积分区间的积分产品(积分划分)\r\n     */\r\n    getPointsIntervalProducts = async (state: any) => {\r\n        let pointInterval = PointIntervals[state] || PointIntervals[\"below\"];\r\n        this.pointProducts = await this.uqs.积分商城.GetPointProduct.table(pointInterval);\r\n        return this.pointProducts;\r\n    }\r\n\r\n    /**\r\n     * 获取商品源（兑换下单可用）\r\n     */\r\n    getProductSources = async (pointProduct: any) => {\r\n        return await this.uqs.积分商城.PointProductSource.obj({ pointProduct, sourceId: undefined });\r\n    }\r\n\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let IsContain = 0;\r\n        let nowQuantity = value - (prev ? prev : 0);\r\n        /* let availablePoints = this.myEffectivePoints - this.pointToExchanging;\r\n        if (availablePoints <= 0) return;    */\r\n        // 当前产品详情的数量\r\n        this.pointProductsDetail.quantity = value;\r\n        // this.pointToExchanging = this.pointToExchanging + (data.point * nowQuantity);\r\n        this.pointToExchanging = this.pointToExchanging + (data.product.obj.point * nowQuantity);\r\n        this.pointProductsSelected.forEach(element => {\r\n            if (element.product.id === data.product.id) {\r\n                element.quantity = element.quantity + nowQuantity;\r\n                IsContain = IsContain + 1;\r\n            }\r\n        });\r\n        if (IsContain === 0) {\r\n            data.point = data.product.obj.point;\r\n            this.pointProductsSelected.push(data);\r\n        }\r\n    }\r\n\r\n    private createOrderFromCart = async () => {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        this.orderData.webUser = currentUser.id;\r\n        this.orderData.salesRegion = currentSalesRegion.id;\r\n        if (currentUser.currentCustomer !== undefined) {\r\n            this.orderData.customer = currentUser.currentCustomer.id;\r\n        }\r\n        if (this.pointProductsSelected !== undefined && this.pointProductsSelected.length > 0) {\r\n            this.orderData.exchangeItems = this.pointProductsSelected.map(e => {\r\n                if (e.quantity <= 0) return undefined;\r\n                var item = new OrderItem();\r\n                item.product = e.product;\r\n                // item.pack = e.pack;\r\n                item.quantity = e.quantity;\r\n                item.point = e.point;\r\n                return item;\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * 生成兑换单兑换积分\r\n     */\r\n    submitOrder = async () => {\r\n        this.createOrderFromCart();\r\n\r\n        let PointExchangeSheet = this.uqs.积分商城.PointExchangeSheet;\r\n        let getDataForSave = this.orderData.getDataForSave();\r\n        let result: any = await PointExchangeSheet.save(\"PointExchangeSheet\", getDataForSave);\r\n        let { id, flow, state } = result;\r\n        await PointExchangeSheet.action(id, flow, state, \"submit\");\r\n\r\n        //暂时扣除已经兑换的积分;\r\n        this.myEffectivePoints = this.myEffectivePoints - this.pointToExchanging;\r\n        this.myTotalPoints = this.myTotalPoints - this.pointToExchanging;\r\n        if (this.pointToExchanging > this.myPointTobeExpired) {\r\n            this.myPointTobeExpired = 0;\r\n        } else {\r\n            this.myPointTobeExpired = this.myPointTobeExpired - this.pointToExchanging;\r\n        }\r\n\r\n        //兑换后清空选择的积分产品\r\n        /* this.orderData.exchangeItems = undefined;\r\n        this.pointProductsSelected.length = 0;\r\n        this.pointToExchanging = 0; */\r\n        this.clearSelectedPointsProducts();\r\n\r\n        // 打开下单成功显示界面\r\n        nav.popTo(this.cApp.topKey);\r\n        this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    /**\r\n     * 获取当前webuser对应customer的最近一个订单 TODO:delete\r\n    getLastPlatformOrder = async () => {\r\n\r\n        let { currentCustomer } = this.cApp.currentUser;\r\n        let validationResult = await this.uqs.积分商城.GetLastPlatFormOrder.submit({ customer: currentCustomer && currentCustomer.id });\r\n        let { platformOrderId } = validationResult;\r\n        this.platformOrderId = validationResult.platformOrderId;\r\n        return platformOrderId;\r\n    }\r\n    */\r\n\r\n    /*\r\n    getPlatFormOrder = async (platformOrderId: string) => {\r\n        return await this.uqs.积分商城.GetPlatFormOrder.table({ platformOrderId: platformOrderId });\r\n    }\r\n    */\r\n\r\n    IsCouponCanUse = async (couponCode: string) => {\r\n        this.couponId = 0;\r\n        let { currentUser } = this.cApp;\r\n        let { salesTask } = this.uqs;\r\n        let validationResult = await salesTask.IsCanUseCoupon.submit({ code: couponCode, webUser: currentUser && currentUser.id });\r\n\r\n        let { result, id, types } = validationResult;\r\n        if (result === 1) {\r\n            this.couponId = id;\r\n            if (types !== 'credits')\r\n                result = 0;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 领取积分码 TODO:delete\r\n    receivePoint = async (orderId: string) => {\r\n        let { currentCustomer } = this.cApp.currentUser;\r\n        let { AddPlatformOrderPoint } = this.uqs.积分商城;\r\n        let result = await AddPlatformOrderPoint.submit({ orderId: orderId, couponId: this.couponId, customer: currentCustomer && currentCustomer.id });\r\n        let rtn = result.result;\r\n\r\n        return rtn;\r\n    }\r\n    */\r\n\r\n    private openMeInfoOptions: any;\r\n    /**\r\n     * 检查客户信息是否完善（不完善需补充完善后方可领取积分）\r\n     */\r\n    userInfoCompletedChecking = async (options: any): Promise<boolean> => {\r\n        await this.cApp.assureLogin();\r\n        let { cMe, currentUser } = this.cApp;\r\n        if (!currentUser.allowOrdering) {\r\n            cMe.openMeInfoFirstOrder(options);\r\n            return false;\r\n        }\r\n        return true;\r\n        /*\r\n        if (!this.isLogined) {\r\n            this.openMeInfoOptions = options;\r\n            nav.showLogin(this.loginCallback, true);\r\n            return false;\r\n        } else {\r\n            let { cMe, currentUser } = this.cApp;\r\n            if (!currentUser.allowOrdering) {\r\n                cMe.openMeInfoFirstOrder(options);\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        */\r\n    }\r\n    /*\r\n    private loginCallback = async (user: User): Promise<void> => {\r\n        let { cApp } = this;\r\n        await cApp.currentUser.setUser(user);\r\n        await cApp.loginCallBack(user);\r\n        this.closePage(1);\r\n\r\n        let { cMe, currentUser } = this.cApp;\r\n        if (!currentUser.allowOrdering) {\r\n            cMe.openMeInfoFirstOrder(this.openMeInfoOptions);\r\n        }\r\n    };\r\n    */\r\n    /**\r\n     * TODO: delete\r\n     */\r\n    addUsedCoupon = async () => {\r\n        /* let { AddUsedCoupon } = this.uqs.积分商城;\r\n        let result = await AddUsedCoupon.submit({ couponId: this.couponId });\r\n        let rtn = result.result;\r\n        return rtn; */\r\n        return;\r\n    }\r\n\r\n    private defaultSetting: any;\r\n    private async getDefaultSetting() {\r\n        if (this.defaultSetting) return this.defaultSetting;\r\n        let { currentUser } = this.cApp;\r\n        return this.defaultSetting = await currentUser.getSetting() || {};\r\n    }\r\n    private contact0: BoxId;\r\n    private async getContact(): Promise<BoxId> {\r\n        if (this.contact0 === null) return;\r\n        if (this.contact0 !== undefined) return this.contact0;\r\n        let { currentUser } = this.cApp;\r\n        let contactArr = await currentUser.getContacts();\r\n        if (contactArr === undefined || contactArr.length === 0) {\r\n            this.contact0 = null;\r\n            return;\r\n        }\r\n        return this.contact0 = contactArr[0].contact;\r\n    }\r\n    async getDefaultShippingContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.shippingContact || await this.getContact();\r\n    }\r\n\r\n    selectContact = async () => {\r\n        let cSelect = this.newC(CSelectShippingContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        return contactBox;\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        this.orderData.shippingContact = await this.selectContact()\r\n    }\r\n}","import * as React from 'react';\r\nimport { CPointProduct } from 'pointMarket/CPointProduct';\r\nimport {\r\n    VPage, Page, Form, List, tv, ObjectSchema, NumSchema, UiSchema, UiCustom, FA, Tabs, TabProp, autoHideTips, Ax\r\n} from 'tonva-react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { MinusPlusWidget } from 'tools';\r\nimport { observable, makeObservable } from 'mobx';\r\n//import { GLOABLE } from 'cartenv';\r\n//import { color } from 'order/VMyOrders';\r\nimport { randomColor } from 'tools/randomColor';\r\nimport { pointIcon, triangleShadingO } from 'tools/images';\r\nimport { topicClumps } from './CPointProduct';\r\nimport { xs } from '../tools/browser';\r\nimport classNames from 'classnames';\r\n\r\nexport const renderHr = (HRCL?: any, HRST?: any) => {\r\n    let styleObj = HRST ? HRST : { backgroundColor: '#007bff' };\r\n    return <div className={`flex-fill ${HRCL ? HRCL : 'px-2 text-primary'}`}>\r\n        <hr style={{ height: 1, border: 'none', ...styleObj }} />\r\n    </div>\r\n};\r\n\r\nexport const TopicDivision = (topic: any, CL?: any, ST?: any, HRCL?: any, HRST?: any) => {\r\n    return <div className={`text-center w-100 py-2 ${CL ? CL : 'px-2 text-primary'} d-flex justify-content-between align-items-center`} style={ST}>\r\n        {renderHr(HRCL, HRST)}{topic}{renderHr(HRCL, HRST)}\r\n    </div>\r\n}\r\n\r\n\r\nexport const schema = [\r\n    { name: 'product', type: 'object' } as ObjectSchema,\r\n    // { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    // { name: 'point', type: 'number' } as NumSchema,\r\n    // { name: 'imageUrl', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport class VPointProduct extends VPage<CPointProduct> {\r\n    protected isShowSelectForm: boolean = false;\r\n    Gengres: any[] = [];\r\n    //@observable protected productIsNull: boolean = false;\r\n    //@observable protected pointIsEnough: boolean = false;\r\n    protected productIsNull = observable.box(false);\r\n    protected pointIsEnough = observable.box(false);\r\n    private currentInterval: string;\r\n    private themeName: string = '积分商城';\r\n    private tabs: TabProp[];\r\n    protected none: JSX.Element = <div className=\"my-4 text-secondary d-flex justify-content-center\">『 暂无可兑换产品 』</div>;\r\n    rankInterval: any = [\r\n        { caption: '1万以下', state: 'below', icon: 'superpowers', borderC: '#2c93ad' },\r\n        { caption: '1-5万', state: 'firstLevel', icon: 'superpowers', borderC: '#3CC43C' },\r\n        { caption: '5-15万', state: 'twoLevel', icon: 'superpowers', borderC: '#7c1e5e' },\r\n        { caption: '15万以上', state: 'above', icon: 'superpowers', borderC: '#0e2c8c' },\r\n    ];\r\n\r\n    constructor(c: CPointProduct) {\r\n        super(c);\r\n\r\n        makeObservable<VPointProduct, \"isShowSelectForm\">(this, {\r\n            isShowSelectForm: observable,\r\n            Gengres: observable,\r\n        });\r\n    }\r\n\r\n    header() {\r\n        return this.isWebNav === true ? <div>{this.themeName}</div> : this.themeName;\r\n    }\r\n\r\n    right() {\r\n        let right = this.controller.renderSelectedLable();\r\n        return <>{right}</>;\r\n    }\r\n\r\n    init(param?:any) {\r\n        if (param) this.themeName = param?.name;\r\n        let { pointProductGenre } = this.controller;\r\n        this.Gengres = [{ id: null, name: \"商城首页\" },{ id: 5002, name: \"积分商城\" }, ...pointProductGenre, ...Object.values(topicClumps)];\r\n        \r\n    };\r\n\r\n    content() {\r\n        return <this.page />;\r\n    }\r\n\r\n    /* async open(param?: any) {\r\n        if (param) {\r\n            this.themeName = param.name ? param.name : param;\r\n            await this.controller.getPointProductByDifferentPlot(param);\r\n        }\r\n        this.openPage(this.page);\r\n    } */\r\n    private getTabs = async () => {\r\n        let { getPointsIntervalProducts } = this.controller;\r\n        this.tabs = this.rankInterval.map((v: any) => {\r\n            let { caption, state, icon, borderC } = v;\r\n            return {\r\n                name: caption,\r\n                // caption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n                caption: (selected: boolean) => this.TabCaptionComponent(caption, icon, borderC, (selected ? '#ffffff' : 'transparent')),\r\n                content: () => {\r\n                    return <>{this.renderList()}</>\r\n                },\r\n                isSelected: this.currentInterval === state,\r\n                load: async () => {\r\n                    this.currentInterval = state;\r\n                    this.controller.pointProducts = await getPointsIntervalProducts(this.currentInterval);\r\n                }\r\n            };\r\n        });\r\n    }\r\n\r\n    private TabCaptionComponent = (label: string, icon: string, borderC: string, color: string) => <div\r\n        className={'py-2 d-flex justify-content-center align-items-center flex-column cursor-pointer '}>\r\n        <small className=\"w-4c text-center rounded-sm font-weight-bold\" style={{ color: borderC, border: `1px solid ${borderC}`, background: color }}>{label}</small>\r\n    </div>;\r\n\r\n    protected renderList = (isToDetail?: boolean) => {\r\n        let { pointProducts } = this.controller;\r\n        return <div style={{ background: `url(${triangleShadingO}) no-repeat 99% 230px,url(${triangleShadingO}) no-repeat 1% 480px`, backgroundSize: '2.5%' }}>\r\n            <List items={pointProducts} item={{\r\n                render: this.renderPointProduct,\r\n                className: 'col-6 col-md-4 col-lg-3 px-3 bg-transparent'\r\n            }} none={this.none}\r\n                className={`${pointProducts.length !== 0 ? 'row mx-0 mt-2 bg-transparent' : ''}`}\r\n            ></List>\r\n        </div>\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            product: { visible: false },\r\n            // pack: { visible: false },\r\n            quantity: {\r\n                widget: 'custom',\r\n                label: null,\r\n                className: 'text-center w-2c',\r\n                WidgetClass: MinusPlusWidget,\r\n                onChanged: this.controller.onQuantityChanged as any\r\n            } as UiCustom,\r\n            // point: { visible: false },\r\n            // imageUrl: { visible: false },\r\n        }\r\n    }\r\n\r\n    protected renderPointProduct = (pointProduct: any) => {\r\n        let { product } = pointProduct;\r\n        return <>\r\n            {tv(product, (v) => {\r\n                let cProductUI: JSX.Element = <><div title={v.description} className={classNames(\"w-100 cus-height\", this.isShowSelectForm ? \"z-height\" : \"\")}>\r\n                    <PointProductImage chemicalId={v.imageUrl} className=\"w-100 h-100\" style={{ border: `2px solid ${randomColor()}` }} />\r\n                </div>\r\n                    <div className=\"small w-100\">\r\n                        <div className=\"text-truncate w-100\">{v.descriptionC}</div>\r\n                        <>\r\n                            {\r\n                                this.isShowSelectForm\r\n                                    ? <div className=\"w-100 d-flex justify-content-between align-items-right mt-1\">\r\n                                        <small className=\"align-self-center mb-3 text-primary\" ><FA name=\"shopping-bag\" size='2x' /></small>\r\n                                        <Form schema={schema} uiSchema={this.uiSchema} formData={pointProduct} className=\"mr-2\" />\r\n                                    </div>\r\n                                    : null\r\n                            }\r\n                            <div className='d-flex'>\r\n                                <img src={pointIcon} alt=\"\" style={{ height: 24 }} />\r\n                                <span className=\"text-danger h5 m-0 ml-1 align-self-end\"> {v.point}</span>\r\n                            </div>\r\n                        </>\r\n                    </div></>;\r\n                let ProductUI: JSX.Element = this.isShowSelectForm ? cProductUI : <Ax href={\"/pointshop/product/\" + v.id} >{cProductUI}</Ax>;\r\n                return <div className=\"w-100 d-flex flex-column mb-4\">\r\n                   {ProductUI}\r\n                </div>\r\n            })}\r\n        </>\r\n    }\r\n\r\n    protected openExchangeOrder = async () => {\r\n        // 未选择产品\r\n        let { pointToExchanging, myEffectivePoints } = this.controller;\r\n\r\n        if (pointToExchanging < 1) {\r\n            this.productIsNull.set(true);\r\n            this.pointIsEnough.set(false);\r\n            //setTimeout(() => this.productIsNull = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n        // 积分不足\r\n        if (pointToExchanging > myEffectivePoints) {\r\n            this.productIsNull.set(false);\r\n            this.pointIsEnough.set(true);\r\n            //setTimeout(() => this.pointIsEnough = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n\r\n        this.controller.openExchangeOrder();\r\n    }\r\n\r\n    protected getRelatedUI = () => {\r\n        let { pointToExchanging, myEffectivePoints } = this.controller;\r\n        /*\r\n        let productIsNullTip = this.productIsNull ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" />未选择产品</div>\r\n            : null;\r\n        let pointIsEnoughTip = this.pointIsEnough ?\r\n            <div className=\"text-danger small m-0 p-0\"><FA name=\"exclamation-circle\" />积分不足<br />剩余{myEffectivePoints}分</div>\r\n            : null;\r\n        */\r\n        let footer = <div className=\"d-block\">\r\n            <div className=\"w-100 px-3 d-flex justify-content-between\">\r\n                <div>总计:<span className=\"text-danger ml-2 mr-1 h2\" >{pointToExchanging}</span>分</div>\r\n                <div>\r\n                    {/*productIsNullTip*/autoHideTips(this.productIsNull, <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" />未选择产品</div>)}\r\n                    {/*pointIsEnoughTip*/autoHideTips(this.pointIsEnough, <div className=\"text-danger small m-0 p-0\"><FA name=\"exclamation-circle\" />积分不足<br />剩余{myEffectivePoints}分</div>)}\r\n                </div>\r\n                <button type=\"button\" className=\"btn btn-danger m-1\" style={{backgroundColor:'#dc3545'}} onClick={this.openExchangeOrder}>去兑换</button>\r\n            </div>\r\n        </div>;\r\n        return footer;\r\n    }\r\n\r\n    protected page = observer(() => {\r\n        this.getTabs();\r\n        return <div className=\"row mx-0 mt-1\">\r\n            <div className=\"col-md-3 d-none d-md-block py-0 py-md-2 mb-0 mb-md-4\">\r\n                {this.controller.renderShopSideBar()}\r\n            </div>\r\n            <div className=\"col-md-9 px-0 px-md-1\">\r\n                {\r\n                    this.themeName === '积分商城'\r\n                        ? <Tabs tabs={this.tabs} tabPosition=\"top\" size=\"lg\" />\r\n                        : <>\r\n                            {/* {TopicDivision(this.themeName)} */}\r\n                            {this.renderList()}\r\n                        </>\r\n                }\r\n            </div>\r\n        </div>\r\n    });\r\n}\r\n\r\n/**\r\n * 已选择的兑换产品列表\r\n */\r\nexport class VSelectedPointProduct extends VPointProduct {\r\n    isShowSelectForm: boolean = true;\r\n    protected none: JSX.Element = <div className=\"mt-4 text-secondary d-flex justify-content-center\">『 已清空您所选择的产品 』</div>;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    page = observer(() => {\r\n        let { pointProductsSelected } = this.controller;\r\n        let footer = this.getRelatedUI();\r\n\r\n        // let right = <div className=\"mr-2\" onClick={clearSelectedPointsProducts}><FA name=\"trash-o\" className='text-light' /></div>;\r\n        // let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">『 已清空您所选择的产品 』</div>;\r\n        return <Page header='已选择兑换产品' right={<></>} footer={footer} >\r\n            <List\r\n                items={pointProductsSelected}\r\n                item={{\r\n                    render: this.renderPointProduct,\r\n                    className: 'col-6 col-md-4 col-lg-3 px-3 bg-transparent'\r\n                    // className: \"w-50 px-3\"\r\n                }}\r\n                none={this.none}\r\n                className='row mx-0 mt-2 bg-transparent'\r\n            // className=\"d-flex flex-wrap bg-transparent mt-2\"\r\n            />\r\n        </Page >\r\n    })\r\n}","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport {\r\n    tv, VPage, Page, Form, ItemSchema, NumSchema, UiSchema,\r\n    ObjectSchema, RowContext, UiCustom, FormField, List, Ax\r\n} from 'tonva-react';\r\nimport { CProduct } from './CProduct';\r\nimport { MinusPlusWidget } from '../tools/minusPlusWidget';\r\nimport { ProductPackRow, Product } from '../store';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { renderPropItem, renderBrand } from './renders';\r\nimport { xs } from 'tools/browser';\r\nimport { pdfIcon } from 'tools/images';\r\nimport { VFavorite, VPrice } from './views';\r\nimport classNames from 'classnames';\r\nimport { TopicDivision } from 'pointMarket/VPointProduct';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n];\r\n\r\nexport const languageCaptions: { [language: string]: string } = {\r\n    'DE': '德文',\r\n    'EN': '英文',\r\n    'EN-US': '美式英文',\r\n    'CN': '中文',\r\n}\r\n\r\nconst SymbolSrcs:any[] = [\r\n    { name: \"LK\", src: \"GHS02.gif\" },\r\n    { name: \"LM\", src: \"GSH04.gif\" },\r\n    { name: \"LN\", src: \"GHS07.gif\" },\r\n    { name: \"LO\", src: \"GHS03.gif\" },\r\n    { name: \"LP\", src: \"GHS05.gif\" },\r\n    { name: \"LQ\", src: \"GHS09.gif\" },\r\n    { name: \"LR\", src: \"GHS01.gif\" },\r\n    { name: \"LS\", src: \"GHS06.gif\" },\r\n    { name: \"LT\", src: \"GHS08.gif\" },\r\n];\r\n\r\nconst basicInfoKey = [\r\n    // { insideKey: \"MF\", webKey: \"MF\" },\r\n    // { insideKey: \"MW\", webKey: \"MW\" },\r\n    { insideKey: \"Synonymity\", webKey: \"英文别名\" },\r\n    { insideKey: \"SynonymityC\", webKey: \"中文别名\" },\r\n    { insideKey: \"MP\", webKey: \"MP\" },\r\n    { insideKey: \"BP\", webKey: \"BP\" },\r\n    { insideKey: \"FP\", webKey: \"FP\" },\r\n    { insideKey: \"Density\", webKey: \"Density\" },\r\n    { insideKey: \"n20D\", webKey: \"n20D\" },\r\n    { insideKey: \"[a]20D\", webKey: \"[a]20D\" },\r\n    { insideKey: \"pH\", webKey: \"pH\" },\r\n    { insideKey: \"MDL\", webKey: \"MDL编码\" },\r\n    { insideKey: \"Beilstein\", webKey: \"Reaxys-RN (Beilstein)\" },\r\n    { insideKey: \"Merck\", webKey: \"Merck Index\" },\r\n    { insideKey: \"EINECS\", webKey: \"EC No.\" },\r\n];\r\nconst securityInfoKey = [\r\n    { insideKey: \"SpecialRequirement\", webKey: \"存储条件\" },\r\n    { insideKey: \"Hazard\", webKey: \"Symbol\" },\r\n    { insideKey: \"RiskSign\", webKey: \"Signal Word\" },\r\n    { insideKey: \"HValue\", webKey: \"Hazard Statements\" },\r\n    { insideKey: \"PValue\", webKey: \"Precautionary Statements\" },\r\n    { insideKey: \"UN\", webKey: \"UN\" },\r\n    { insideKey: \"HazardClass\", webKey: \"Hazard Class\" },\r\n    { insideKey: \"subrisk\", webKey: \"SubRisk\" },\r\n    { insideKey: \"PackingG\", webKey: \"Packing Group\" },\r\n    { insideKey: \"WGK\", webKey: \"WGK Germany\" },\r\n    { insideKey: \"RTECS\", webKey: \"RTECS\" },\r\n    { insideKey: \"TSCA\", webKey: \"TSCA\" },\r\n];\r\n\r\nexport class VPageProduct extends VPage<CProduct> {\r\n    //private productBox: BoxId;\r\n    //private discount: number;\r\n    p: boolean = false;\r\n\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            p: observable\r\n        });\r\n    }\r\n\r\n    async open(param: any) {\r\n        //let { productData, product, discount } = param;\r\n        //let { getProductSpecFile, getProductMSDSFile } = this.controller;\r\n        //let page = xs ? this.page : this.lpage;\r\n        this.openPage(observer(() => {\r\n            let { cApp, product } = this.controller;\r\n            let { id } = product;\r\n            /* let CurrentUA = browser.versions.mobile;\r\n            let productPdfM = CurrentUA && (productMSDSFiles.length || productSpecFiles.length) ? true : false; */\r\n            let header: any, cartLabel: any;\r\n\r\n            if (xs) {\r\n                header = cApp.cHome.renderSearchHeader();\r\n                cartLabel = cApp.renderCartLabel();\r\n            }\r\n            /* let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n            viewProduct.model = product; */\r\n\r\n            return <Page header={header} right={cartLabel} className=\"bg-white\">\r\n                <section className=\"container mt-lg-2 product-sigle-page\">\r\n                    <div className=\"row\">\r\n                        {this.renderProduct(product)}\r\n                        <div className=\"d-block d-sm-none px-2 ml-2 my-3 w-100\" style={{ lineHeight: 1.8 }}>\r\n                            {TopicDivision('产品资料')}\r\n                            {this.material(product, true)}\r\n                        </div>\r\n                        {this.renderAssistInfo(product)}\r\n                    </div>\r\n                </section>\r\n            </Page>;\r\n            //} else {\r\n            /*\r\n            下面的做法大概不行，因为嵌套的层次较深，且都是observer的，上层observable的变化会嵌套执行下层的代码，而下层代码的render\r\n            会操作数据库，得不偿失（和React的可能还不一样，React只会更新必要的html，不会再执行查询DB的操作）\r\n            */\r\n            /*\r\n             let { controller, productBox } = this;\r\n             let { renderProductWithPrice } = controller;\r\n             return <Page header={header} right={cartLabel}>\r\n                 <div className=\"px-2 py-2 bg-white mb-3\">\r\n                     {renderProductWithPrice(productBox)}\r\n                 </div>\r\n             </Page>\r\n             */\r\n            //}\r\n        }));\r\n    }\r\n\r\n    /*\r\n    private lpage = () => {\r\n        //let { renderHeader, renderFooter } = this.controller.cApp;\r\n        let {product} = this.controller;\r\n        let {data} = product;\r\n           return <Page>\r\n             <section className=\"container mt-lg-2 product-sigle-page\">\r\n                    <div className=\"row\">\r\n                        {this.renderProduct(data.main, data.subs)}\r\n                    </div>\r\n                </section>\r\n        </Page>\r\n    }\r\n    */\r\n\r\n    /*\r\n    render(param: any) {\r\n\r\n        return <this.page />;\r\n    }\r\n    */\r\n    renderAssistInfo = (product: Product) => {\r\n        let { extention, descriptionPost, productCrumbs, standardSample } = product;\r\n        let basicInfoUI: JSX.Element, securityInfoUI: JSX.Element, descriptionPostUI: JSX.Element,\r\n            productCrumbsUI: JSX.Element, standardSampleUI: JSX.Element;\r\n        if (extention) {\r\n            extention = JSON.parse(extention.replace(/(\\t|\\n|\\r)*/g, \"\"));\r\n            let allContent = Object.keys(extention).map((el: any) => {\r\n                if (!extention[el] && extention[el].replace(/\\s*/g, '') == 'N/A') return;\r\n                if (el === 'TSCA') {\r\n                    let TSCAs: { [typeNum: number]: string } = { 0: '', 1: \"是\", 2: \"否\" };\r\n                    extention[el] = TSCAs[extention[el]] || \"\";\r\n                };\r\n                if (el === 'Hazard') {\r\n                    extention[el] = SymbolSrcs.map((o: any, ind: number) => {\r\n                        if (extention[el].indexOf(o.name) > -1) {\r\n                            return <img key={ind} className=\"w-3c mr-1\" src={\"/images/security/\" + o.src} alt=\"\" />;\r\n                        }\r\n                        return '';\r\n                    });\r\n                };\r\n                return el;\r\n            }).filter((el: any) => extention[el]);\r\n            let basicInfos: any[] = basicInfoKey.filter((v: any) =>  allContent.find((i: any) => v.insideKey === i));\r\n            let securityInfos: any[] = securityInfoKey.filter((v: any) => allContent.find((i: any) => v.insideKey === i));\r\n            let tableInfo = (data: any[]) => {\r\n                if (data.length === 0) return;\r\n                return <table className=\"product-table w-100\">\r\n                    <tbody>\r\n                        {data.map((v: any, index: number) => {\r\n                            let value = extention[v.insideKey];\r\n                            if (!value) return null;\r\n                            return <tr key={index}><th className=\"w-50\">{v.webKey}</th><td className=\"w-50\">{value}</td></tr>\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n            };\r\n            if (basicInfos.length) {\r\n                basicInfoUI = <>\r\n                    <div className=\"accordion background-grey mt-lg-1\">\r\n                        <div className=\"w-100 btn text-left collapsed\" data-toggle=\"collapse\" data-target=\"#description1\"\r\n                            role=\"button\" aria-expanded=\"false\" aria-controls=\"description1\">\r\n                            基本信息&emsp;<i className=\"fa fa-chevron-down\"></i>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"container mt-lg-2 collapse show\" id=\"description1\">\r\n                        {tableInfo(basicInfos.slice(0, 6))}\r\n                        <div className=\"container collapse px-0\" id=\"description2\">\r\n                            {tableInfo(basicInfos.slice(6))}\r\n                        </div>\r\n                        {\r\n                            basicInfos.length > 6\r\n                                ? <p className=\"text-right\">\r\n                                    <a className=\"btn text-left collapsed\" onClick={() => this.p = !this.p}\r\n                                        data-toggle=\"collapse\" href=\"#description2\" role=\"button\" aria-expanded=\"false\" aria-controls=\"description2\">\r\n                                        {!this.p ? '更多' : '收起'} <i className={`fa ${!this.p ? 'fa-angle-right' : 'fa-angle-up'}`} aria-hidden=\"true\"></i>\r\n                                    </a>\r\n                                </p> : null\r\n                        }\r\n                    </div>\r\n                </>;\r\n            };\r\n            if (securityInfos.length) {\r\n                securityInfoUI = <>\r\n                    <div className=\"accordion background-grey mt-lg-1\">\r\n                        <a className=\"w-100 btn text-left collapsed\" data-toggle=\"collapse\" href=\"#description4\"\r\n                            role=\"button\" aria-expanded=\"false\" aria-controls=\"jk\" target=\"_blank\">\r\n                            安全信息&emsp;<i className=\"fa fa-chevron-down\"></i>\r\n                        </a>\r\n                    </div>\r\n                    <div className=\"container mt-lg-2 mb-lg-2 collapse show\" id=\"description4\">\r\n                        {tableInfo(securityInfos)}\r\n                    </div>\r\n                </>;\r\n            };\r\n        };\r\n        if (descriptionPost) {\r\n            descriptionPostUI = <>\r\n                <div className=\"accordion background-grey mt-lg-1\">\r\n                    <a className=\"w-100 btn text-left collapsed\" data-toggle=\"collapse\" href=\"#descriptionpost\"\r\n                        role=\"button\" aria-expanded=\"false\" aria-controls=\"jk\" target=\"_blank\">\r\n                        产品描述&emsp;<i className=\"fa fa-chevron-down\"></i>\r\n                    </a>\r\n                </div>\r\n                <div dangerouslySetInnerHTML={{ __html: descriptionPost || \"\" }}\r\n                    className=\"container mt-lg-2 mb-lg-2 collapse show\" id=\"descriptionpost\">\r\n                </div>\r\n            </>;\r\n        };\r\n        if (standardSample) {\r\n            let type = standardSample.components.some((el: any) => el?.matrix || el?.unit) ? \"Set Components\" : \"Analytes\";\r\n            let thead = type === \"Analytes\" ? [\"英文名称\", \"中文名称\", \"CAS\", \"目标浓度\"] : [\"产品编号\", \"英文名称\", \"中文名称\", \"浓度\", \"单位\"];\r\n            standardSampleUI = <>\r\n                <div className=\"accordion background-grey mt-lg-1\">\r\n                    <a className=\"w-100 btn text-left collapsed\" data-toggle=\"collapse\" href=\"#standardSample\"\r\n                        role=\"button\" aria-expanded=\"false\" aria-controls=\"jk\" target=\"_blank\">\r\n                        组分&emsp;<i className=\"fa fa-chevron-down\"></i>\r\n                    </a>\r\n                </div>\r\n                <div className=\"container mt-lg-2 mb-lg-2 collapse show\" id=\"standardSample\">\r\n                    <table className=\"w-100 text-break standardSampleTable\">\r\n                        <thead>\r\n                            <tr className={classNames(\"border-bottom\", type === \"Analytes\" ? \"analytes\" : \"components\" )}>\r\n                                {thead.map((el: any) => { return <th key={el}>{el}</th>})}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {standardSample.components.map((el: any, index: number) => {\r\n                                let { origin, description, descriptionC: descriptionCC, descriptionc, cas, concentration, matrix, unit } = el;\r\n                                let descriptionC = descriptionCC || descriptionc;\r\n                                let tds: JSX.Element;\r\n                                if (type === \"Analytes\") {\r\n                                    tds = <><td data-title=\"英文名称\">{description}</td>\r\n                                        <td data-title=\"中文名称\">{descriptionC}</td>\r\n                                        <td data-title=\"CAS\">{cas}</td>\r\n                                        <td data-title=\"目标浓度\">{concentration}</td></>;\r\n                                } else {\r\n                                    tds = <><td className=\"\" data-title=\"产品编号\"><Ax style={{ color: \"#781515\" }} href={`/search/${origin}?type=2`}>{origin}</Ax></td>\r\n                                        <td className=\"\" data-title=\"英文名称\">{description}</td>\r\n                                        <td className=\"\" data-title=\"中文名称\">{descriptionC}</td>\r\n                                        <td className=\"\" data-title=\"浓度\">{matrix}</td>\r\n                                        <td className=\"w-min-3c\" data-title=\"单位\">{unit}</td></>;\r\n                                };\r\n                                return <tr key={index} className=\"py-2 border-bottom\">{tds}</tr>\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </>;\r\n        };\r\n        if (productCrumbs.length && productCrumbs.some((el: any[]) => el.length)) {\r\n            productCrumbsUI = <><div className=\"mt-lg-1\">\r\n                <div className=\"bg-nobackground-one\">产品分类</div>\r\n                </div>\r\n                <div className=\"mt-lg-1\">\r\n                    {productCrumbs.map((v: any[],index:number) => {\r\n                        if (!v.length) return;\r\n                        return <div key={index}>\r\n                            <Ax className=\"mint\" href={\"/product-catalog\"}>产品分类</Ax> <span style={{color:\"#a5a8ab\"}}>/</span>\r\n                            {v.map((el: any,i:number) => {\r\n                                return <span key={el.name}>\r\n                                    &nbsp;<Ax className=\"mint\" href={\"/product-catalog/\" + el.owner}>{el.name}</Ax>&nbsp;\r\n                                    { i !== v.length-1 ? <span style={{color:\"#a5a8ab\"}}>/</span> : \"\" }</span>\r\n                            })}\r\n                        </div>\r\n                    })}\r\n                </div>\r\n            </>;\r\n        };\r\n        \r\n        return <div className=\"col-lg-12 mt-lg-2 product-container\">{/* col-lg-9 */}\r\n            {basicInfoUI}\r\n            {descriptionPostUI}\r\n            {standardSampleUI}\r\n            {securityInfoUI}\r\n            {productCrumbsUI}\r\n        </div>\r\n    }\r\n\r\n    private material = (product: Product, showMob?: boolean) => {\r\n        let { id, productDocs } = product;\r\n        let Materials = [\r\n            { id: 1, name: \"化学品安全技术说明书（SDS）\", type: \"msds\" },\r\n            { id: 2, name: \"技术规格说明书（Specifications）\", type: \"spec\" },\r\n            { id: 3, name: \"质检报告 (COA)\", type: \"coa\" },\r\n            { id: 4, name: \"用户手册（UserManual）\", type: \"um\" },\r\n        ];\r\n        let effectArr: any[] = Materials.filter((el: any) => productDocs[el.type]);\r\n        return <div className={classNames('', !showMob ? 'd-none d-sm-block' : 'd-block d-sm-none')} >{/* left-below */}\r\n            {\r\n                effectArr.map((v: any) => {\r\n                    return <Ax key={v.name} href={'/product/mscu/' + v.type + '/' + id}>\r\n                        <div className=\"mint\" >{v.name}</div>\r\n                    </Ax>\r\n                })\r\n            }\r\n        </div>\r\n    }\r\n\r\n    private renderProduct = (product: Product) => {\r\n        let { id, brand, props, chemical, warnings } = product;\r\n        let { description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl, mdlnumber } = props;\r\n        let eName = <div className=\"py-2\"><strong dangerouslySetInnerHTML={{__html:description|| ''}}></strong></div>;\r\n        let cName: any;\r\n        if (descriptionC !== description) {\r\n            cName = <div dangerouslySetInnerHTML={{__html:descriptionC || ''}}></div>;\r\n        }\r\n        return <>\r\n            <div className=\"col-lg-4 \">\r\n                <div className=\"\">\r\n                    <div className=\"border px-1\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-100 mb-2\" />\r\n                    </div>\r\n                    <div className=\"d-none d-sm-block\">{this.material(product)}</div>\r\n                </div>\r\n            </div>\r\n            <div className=\"col-lg-8\">\r\n                <div className=\"details\">\r\n                    {eName}\r\n                    {cName}\r\n                    <div className=\"row mx-3\">\r\n                        {renderPropItem('产品编号', origin, \"font-weight-bold\")}\r\n                        {renderPropItem('CAS', <Ax href={`/search/${ CAS || chemical.CAS }` } className=\"text-primary\">{CAS || chemical.CAS}</Ax> , \"font-weight-bold\")}\r\n                        {renderPropItem('纯度', purity || chemical.purity)}\r\n                        {renderPropItem('分子式', molecularFomula || chemical.molecularFomula)}\r\n                        {renderPropItem('分子量', molecularWeight || chemical.molecularWeight)}\r\n                        {renderBrand(brand)}\r\n                        {renderPropItem('MDL', (mdlnumber|| chemical.mdlnumber) ? <Ax href={`/search/${ mdlnumber|| chemical.mdlnumber }` } className=\"text-primary\">{mdlnumber|| chemical.mdlnumber}</Ax> : null)}\r\n                    </div>\r\n                    <div className=\"text-danger row mx-3\">{\r\n                        warnings.map((el: any) => {\r\n                            return <div key={el} className=\"col-sm-6\">{el}</div>;\r\n                        })\r\n                    }</div>\r\n                </div>\r\n                {this.renderVm(VFavorite, { product })}\r\n                {this.renderVm(VPrice, product)}\r\n            </div>\r\n        </>\r\n\r\n        // return <div className=\"mb-3 px-2\">\r\n        //     {eName}\r\n        //     {cName}\r\n        //     <div className=\"row mt-3\">\r\n        //         <div className=\"col-12 col-sm-3\">\r\n        //             <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n        //         </div>\r\n        //         <div className=\"col-12 col-sm-9\">\r\n        //             <div className=\"row mx-3\">\r\n        //                 {renderPropItem('产品编号', origin, \"font-weight-bold\")}\r\n        //                 {renderPropItem('CAS', CAS, \"font-weight-bold\")}\r\n        //                 {renderPropItem('纯度', purity)}\r\n        //                 {renderPropItem('分子式', molecularFomula)}\r\n        //                 {renderPropItem('分子量', molecularWeight)}\r\n        //                 {renderBrand(brand)}\r\n        //             </div>\r\n        //         </div>\r\n        //     </div>\r\n        //     {this.renderVm(VFavorite, { product })/*this.controller.renderFavoritesLabel(product)*/}\r\n        //     {this.renderVm(VPrice, product) /*renderProductPrice(product, discount)*/}\r\n        // </div>;\r\n        // { this.renderVm(VProductFavirateLabel, this.productBox) }\r\n    }\r\n\r\n    private arrTemplet = (item: ProductPackRow) => {\r\n        let { pack, retail, vipPrice, promotionPrice } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\"><FormField name=\"quantity\" /></div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-4 p-0\">\r\n                    <div><b>{tv(pack)}</b></div>\r\n                    <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n                </div>\r\n                <div className=\"col-8 p-0\">\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp, product } = this.controller;\r\n\t\tawait cApp.store.cart.changeQuantity(product, pack, value, price, retail, currency);\r\n\t\t/*\r\n        let { cCart } = cApp;\r\n        if (value > 0)\r\n            await cCart.add(product, pack, value, price, retail, currency);\r\n        else\r\n            await cCart.removeItem([{ productId: product.id, packId: pack.id }]);\r\n\t\t*/\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n        items: {\r\n            quantity: {\r\n                widget: 'custom',\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget as any,\r\n                onChanged: this.onQuantityChanged\r\n            } as UiCustom\r\n        },\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"mx-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n    // private dealWithPDF = (fileName: string) => {\r\n    //     let shiftArr = fileName ? fileName.replace(/\\.pdf/ig, '').split('_') : [];\r\n    //     let lang = shiftArr[1];\r\n    //     let caption = languageCaptions[lang];\r\n    //     if (!caption) caption = languageCaptions['CN'];\r\n    //     return caption;\r\n    // }\r\n\r\n    // private renderPDF = (content: any) => {\r\n    //     let { fileName } = content;\r\n    //     let language = this.dealWithPDF(fileName);\r\n    //     let { ToVerifyPdf, product } = this.controller;\r\n    //     return <div className=\"mx-2 d-flex flex-column text-center\" onClick={() => { ToVerifyPdf({ content, product }) }}>\r\n    //         <img src={pdfIcon} alt=\"\" style={{ width: 24 }} />\r\n    //         <div className=\"small\">{language}</div>\r\n    //     </div>\r\n    // }\r\n\r\n    // private renderProductMaterial = () => {\r\n    //     let { MSDSFiles, specFiles, data } = this.controller.product;\r\n    //     let MaterialArr = [\r\n    //         { type: '化学品安全技术说明书(SDS)', content: MSDSFiles },\r\n    //         { type: '技术规格说明书(SPEC)', content: specFiles }\r\n    //     ];\r\n\r\n    //     let renderListItemPDF = (Material: any, index: number) => {\r\n    //         let { type, content } = Material;\r\n    //         if (content.length) {\r\n    //             /* return <div className=\"d-flex pt-2 border-bottom\">\r\n    //                 <div className=\"w-3c align-self-center mr-2 mb-2\" >{type}</div>\r\n    //                 <List items={content} item={{ render: this.renderPDF, className: 'px-2 border-left' }} className=\"d-flex bg-light mb-1\" />\r\n    //             </div> */\r\n    //             return <>\r\n    //                 <div className=\"accordion background-grey w-100\" style={{ background: '#F2F2F2' }}>\r\n    //                     <a className=\"w-100 btn text-left collapsed\" data-toggle=\"collapse\" href={`#description${index}`} role=\"button\" aria-expanded=\"false\" aria-controls=\"jk\" target=\"_blank\">\r\n    //                         {type}&emsp;<i className=\"fa fa-chevron-down\"></i>\r\n    //                     </a>\r\n    //                 </div>\r\n    //                 <div className=\"container collapse show w-100 pt-2 px-0 border border-top-0\" id={`description${index}`}>\r\n    //                     <List items={content} item={{ render: this.renderPDF, className: 'px-2' }} className=\"d-flex bg-light mb-1\" />\r\n    //                 </div>\r\n    //             </>\r\n    //         } else {\r\n    //             return null;\r\n    //         }\r\n    //     };\r\n    //     return <List items={MaterialArr} item={{ render: renderListItemPDF, className: \"d-block pb-2\" }} />;\r\n    // }\r\n}\r\n","/* eslint-disable */\r\nimport { VPage, Scroller, List } from 'tonva-react';\r\nimport { CProduct } from './CProduct';\r\nimport { Product } from '../store';\r\nimport Pagination from 'antd/lib/pagination/Pagination';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VPageList extends VPage<CProduct> {\r\n\r\n    private onProductClick = async (product: Product) => {\r\n        let { id } = product;\r\n        let url = \"/product/\" + id;\r\n        this.navigate(url);\r\n    }\r\n\r\n    onPageScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        let { productsPager, esproductsPager } = this.controller;\r\n        if (!(esproductsPager instanceof Array))\r\n            esproductsPager.more();\r\n    }\r\n\r\n    private renderProduct = (p: Product) => {\r\n        return this.controller.cApp.cProduct.renderProduct(p, 'productList');\r\n    }\r\n\r\n\r\n    /*\r\n    async open() {\r\n        this.openPage(this.page)\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { productsPager, esproductsPager, cApp, searchKey, esProductsPagerMore, esProductsTotal, currentPage } = this.controller;\r\n        let { cHome, cCart } = cApp;\r\n        let header: any, cart: any;\r\n        if (xs) {\r\n            header = cHome.renderSearchHeader();\r\n            cart = cCart.renderCartLabel();\r\n        }\r\n        let none = <div className=\"p-3 text-warning\">[无]</div>\r\n\r\n        return <Page header={header} right={cart} onScrollBottom={this.onPageScrollBottom}>\r\n            <div className=\"breadcrumbs mb-4\"><small className=\"small text-muted\">搜索: </small>{searchKey}</div>\r\n            <div className=\"row mx-0 bg-light\">\r\n                <div className=\"col-lg-3 product-side d-none d-lg-block\">\r\n                    {this.controller.cApp.cProductCategory.renderRootSideBar()}\r\n                </div>\r\n                <div className=\"col-lg-9 product-introduct px-0\">\r\n                    <List before={''} none={none} items={esproductsPager} item={{ render: this.renderProduct, onClick: this.onProductClick }} />\r\n                    <div className=\"text-center mt-3 mb-5 d-none d-sm-block\">\r\n                        <Pagination onChange={(v) => {\r\n                            document.body.scrollIntoView({ behavior: \"smooth\", block: \"end\", inline: \"nearest\" });\r\n                            esProductsPagerMore(v);//scrollTo(0,0);\r\n                        }} defaultCurrent={currentPage} pageSize={20} hideOnSinglePage={true}\r\n                            total={esProductsTotal ? esProductsTotal.value : 0} showSizeChanger={false} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    });\r\n    */\r\n\r\n    header() {\r\n        return this.isWebNav === true ? null : this.controller.cApp.cHome.renderSearchHeader();\r\n    }\r\n\r\n    right() {\r\n        return this.isWebNav === true ? null : this.controller.cApp.renderCartLabel();\r\n    }\r\n\r\n    content() {\r\n        return <this.contentView />\r\n    }\r\n\r\n    private contentView = observer(() => {\r\n\r\n        let { productsPager, esproductsPager, cApp, searchKey, esProductsPagerMore, esProductsTotal, currentPage } = this.controller;\r\n        let none = <div className=\"p-3 text-warning\">[无]</div>;\r\n        return <section className=\"container mt-lg-2\">\r\n            <div className=\"breadcrumbs mb-1 mb-sm-2 mb-lg-4\"><small className=\" small text-muted\">搜索: </small>{searchKey}</div>\r\n            <div className=\"container display-mobile px-0\">\r\n                {cApp.cProductCategory.renderRootSideBarByMob()}\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-3 product-side display-desktop\">{/* d-none d-lg-block col-lg-3 product-side */}\r\n                    {/* col-lg-3 product-side display-desktop */}\r\n                    {cApp.cProductCategory.renderRootSideBar()}\r\n                </div>\r\n                <div className=\"col-lg-9 product-introduct px-0\">\r\n                    <List before={''} none={none} items={esproductsPager} className=\"bg-white\"\r\n                        item={{ render: this.renderProduct,/*  onClick: this.onProductClick, */ className: \"py-3 border-bottom\" }} />\r\n                    <div className=\"text-center mt-lg-65\">\r\n                        <Pagination onChange={(v) => {\r\n                            document.body.scrollIntoView({ behavior: \"smooth\", block: \"end\", inline: \"nearest\" });\r\n                            esProductsPagerMore(v);//scrollTo(0,0);\r\n                        }} defaultCurrent={currentPage} pageSize={20} hideOnSinglePage={true}\r\n                            total={esProductsTotal ? esProductsTotal.value : 0} showSizeChanger={false} className=\"page-item\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>;\r\n    })\r\n}","import { CProduct } from './CProduct';\r\nimport { VPage, Page } from 'tonva-react';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { observer } from 'mobx-react-lite';\r\nimport Pdfh5 from 'pdfh5'\r\nimport \"pdfh5/css/pdfh5.css\";\r\n\r\nexport class VPagePDF extends VPage<CProduct> {\r\n    pdfh5: any;\r\n    fileName: string = '';      /* 文件名称 暂弃 */\r\n    fileUrl: any;               /* 文件路径 */\r\n    isFoundFile: boolean = true;/* 文件是否存在 */\r\n    fileContent: any;           /* 内容 */\r\n\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            pdfh5: observable,\r\n            fileName: observable,\r\n            fileUrl: observable,\r\n            isFoundFile: observable,\r\n            fileContent: observable\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        // this.fileName = this.controller.currentFileName;\r\n        this.fileUrl = param?.fileUrl || '#';\r\n        this.fileContent = param?.content;\r\n        setTimeout(() => {this.parsRenderPDF()}, 50);\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private parsRenderPDF = () => {\r\n        if (!this.fileUrl) {\r\n            this.isFoundFile = false;\r\n        } else {\r\n            this.isFoundFile = true;\r\n            this.pdfh5 = new Pdfh5(\"#PDFVIEW\", {\r\n                // pdfurl: this.fileUrl\r\n                data: this.fileContent\r\n            });\r\n        }\r\n    }\r\n\r\n    // showAci\r\n\r\n    /* dln = async () => {       \r\n        let downloadElement = document.createElement('a');\r\n        let href = window.URL.createObjectURL(new Blob([this.fileUrl])); //创建下载的链接\r\n        // let fileName ='';\r\n        downloadElement.href = href;\r\n        downloadElement.download = 'SDS.pdf';//decodeURIComponent(fileName)//解码\r\n        document.body.appendChild(downloadElement);\r\n        downloadElement.click();\r\n        document.body.removeChild(downloadElement);\r\n        window.URL.revokeObjectURL(href); //释放掉blob对象\r\n    } */\r\n\r\n    private page = observer(() => {\r\n        // let header = <div className=\"w-100 text-center\">{this.fileName}</div>;\r\n        // let right = <></>;// <div className=\"mr-2\" onClick={() => this.isShowActionSheet = true}><FA name='ellipsis-h' /></div>;\r\n        //setTimeout(() => {this.ParsRenderPDF()}, 50);\r\n        // return <Page header={header} right={right} >\r\n        return <Page >\r\n            <div className=\"text-right mt-1 rounded py-1 pr-3 d-none d-sm-block\" style={{background:'#f5f5f5'}}>\r\n                <a href={this.fileUrl} target=\"_blank\" rel=\"noreferrer\">\r\n                    <button className=\"btn btn-sm btn-success w-3c\" style={{backgroundColor: '#218838'}}>下载</button>\r\n                    {/* <FA name=\"cloud-download\" className=\"text-primary\" size='2x' /> */}\r\n                </a>\r\n            </div>\r\n            {/* <button onClick={()=>{this.dln()}} className=\"btn btn-primary\">下载</button> */}\r\n            {/* <div className=\"position-fixed d-flex flex-column justify-content-end\" style={{ top: 0, left: 0, bottom: 0, right: 0, background: 'rgba(0, 0, 0, .3)' }}>\r\n                <div className=\"\">\r\n                    <div>\r\n                        <button className=\"btn btn-light w-100\">下载</button>\r\n                    </div>\r\n                    <footer className=\"mt-2\">\r\n                        <button className=\"btn btn-light w-100\" onClick={() => this.isShowActionSheet = false}>取消</button>\r\n                    </footer>\r\n                </div>\r\n            </div> */}\r\n            {\r\n                this.isFoundFile \r\n                    ? <div id=\"PDFVIEW\" className=\"w-100 my-2\" style={{ height: '100vh',overflowY:'auto' }}></div>\r\n                    : <div className=\"text-center py-5\">NOT FOUND</div>\r\n            }\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { Page, VPage } from 'tonva-react';\r\nimport { CProduct } from './CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport moment from 'moment';\r\nimport classNames from 'classnames';\r\nimport { xs } from 'tools/browser';\r\n\r\nconst BrandImg: { [brand: string]:string} = {\r\n    'J&K':'/images/coa/coa.jpg',\r\n    'Amethyst':'/images/coa/coaa10.jpg',\r\n};\r\n\r\nexport class VPageCoa extends VPage<CProduct> {\r\n\r\n    async open(param?: any) {\r\n        // let iframeList: any = document.querySelectorAll('body iframe');\r\n        // if (iframeList && iframeList.length) iframeList[iframeList.length - 1].setAttribute('class', \"test-iframe-d-n\");\r\n        let iframeLists: any = document.querySelectorAll('.class_qidian_wpa');\r\n        if (iframeLists && iframeLists.length) {\r\n            for (let key of iframeLists) { key.setAttribute('class', \"test-iframe-d-n\"); };\r\n        };\r\n        this.openPage(this.page, param);\r\n\t}\r\n\r\n\tpage = observer((param?: any) => {\r\n        let { content : COAContent } = param;\r\n        let { content, version, issueDate, lot, origin, product } = COAContent;\r\n        content = JSON.parse(content.replace(/(\\n|\\t|\\r)*/g, ''));\r\n        issueDate = moment(issueDate).format('YYYY-MM-DD');\r\n        let brand:any = product?.obj?.brand?.obj;\r\n        let arr1 = ['description','cas','molecularFormula','molecularWeight','issueDate'];\r\n        let OtherArr = Object.keys(content).filter((v: any) => !arr1.find((i: any) => i === v));\r\n        let header: any, title = '质检报告';\r\n        if (xs) header = title;\r\n        return <Page header={header}>\r\n            <div style={{visibility: \"hidden\"}} onClick={()=>{window.print();}} >打印</div>\r\n\t\t\t<div className=\"text-center w-100 mt-lg-2\">\r\n                <img src={BrandImg[brand?.name] || BrandImg['J&K']} className=\"w-75\" alt=\"\"/>\r\n                <h5 className=\"r-font-size font-weight-bolder\">CERTIFICATE OF ANALYSIS</h5>\r\n            </div>\r\n            <div className=\"border-bottom border-dark font-weight-bold py-1\" style={{ borderTopStyle:'double'}}>\r\n                <div className=\"row mx-0\">\r\n                    {renderCOAItem('catalogNO.',origin)}\r\n                    {renderCOAItem('LotNumber',lot?.obj?.lotnumber)}\r\n                </div>\r\n                <div className=\"row mx-0\">{renderCOAItem('ProductName',content['description'],null,'col-lg-5')}</div>\r\n                <div className=\"row mx-0\">{renderCOAItem('CAS',content['cas'],null,'col-lg-5')}</div>\r\n                <div className=\"row mx-0\">{renderCOAItem('Version',version,null,'col-lg-5')}</div>\r\n                <div className=\"row mx-0\">{renderCOAItem('Molecular Formula',content['molecularFormula'],null,'col-lg-5')}</div>\r\n                <div className=\"row mx-0\">\r\n                    {renderCOAItem('Molecular Weight', content['molecularWeight'])}\r\n                    {renderCOAItem('Issue Date',issueDate)}\r\n                </div>\r\n            </div>\r\n            <div>\r\n                {\r\n                    OtherArr.map((v: any, index: number) => {\r\n                        let cont = content[v];\r\n                        if(Object.prototype.toString.call(cont) ===\"[object Object]\") {\r\n                            return <>\r\n                                <div className=\"row mx-0 font-weight-bold\">{renderCOAItem(v, ' ', null, 'col-lg-5')}</div>\r\n                                {\r\n                                    Object.keys(cont).map((i: any, o: number) => {\r\n                                        if(Object.prototype.toString.call(cont[i]) ===\"[object String]\"){\r\n                                            return <div className=\"row mx-0\"  key={o}>\r\n                                                {renderCOAItem(i, cont[i], 'ml-2 font-weight-normal', 'col-lg-5')}\r\n                                            </div>\r\n                                        };\r\n                                        return null;\r\n                                    })\r\n                                }\r\n                            </>\r\n                        };\r\n                        if(Object.prototype.toString.call(cont) ===\"[object String]\") {\r\n                            return <div className=\"row mx-0 font-weight-bold\" key={index}>\r\n                                {renderCOAItem(v, cont, null, 'col-lg-5')}\r\n                            </div>\r\n                        };\r\n                        return null;\r\n                    })\r\n                }\r\n            </div>\r\n            <div className=\"mb-lg-5 mb-sm-5 mt-2\">\r\n                <img src=\"/images/coa/coa1.gif\" className=\"col-lg-4 col-sm-8 col-10\" alt=\"\"/>\r\n            </div>\r\n\t\t</Page>\r\n    })\r\n}\r\n\r\nfunction renderCOAItem(caption: string, value: any, captionClass?: string, valClass?: string) {\r\n    if (value === null || value === undefined || value === '0') return null;\r\n    let capClass = captionClass ? classNames(captionClass) : \"\";\r\n    valClass = valClass ? classNames(valClass) : \"\";\r\n    return <>\r\n        <div className={classNames(\"col-lg-2 col-sm-5 col-5\", capClass)}> {caption}</div>\r\n        <span className=\"mx-2\">:</span>\r\n        <div className={classNames(\"col-lg-2 col-sm-5 col-5\", valClass)} style={{wordWrap:'break-word'}}>{value}</div>\r\n    </>;\r\n}","import * as React from 'react';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { Page, VPage, autoHideTips } from 'tonva-react';\r\nimport { CProduct } from './CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { xs } from '../tools/browser';\r\nimport { VPagePDF } from './VPagePDF';\r\nimport { languageCaptions } from './VPageProduct';\r\nimport { VPageCoa } from './VPageCoa';\r\n\r\nconst materialCaptions: { [type: string]: any } = {\r\n\t'msds': { type: 'MSDS', CName: \"化学品安全技术说明书\", EName: 'Safety Data Sheet (SDS)' },\r\n\t'spec': { type: 'SPEC', CName: \"技术规格说明书\", EName: 'Specifications (SPEC)' },\r\n\t'coa': { type: 'COA', CName: \"质检报告\", EName: 'Certificate of Analysis (COA)' },\r\n\t'um': { type: 'um', CName: \"用户手册\", EName: 'User Manual (UM)' },\r\n}\r\n\r\nconst defLangs = [{ language: \"CN\" }, { language: \"EN\" }, { language: \"DE\" }, { language: \"EN-US\" },];\r\n\r\nexport const docTypeWithCaptcha: any[] = [\"msds\", \"spec\", \"um\"];\r\n\r\nexport class VPageSkillSearch extends VPage<CProduct> {\r\n\tprivate productOrigin: HTMLInputElement;\r\n\tprivate productLot: HTMLInputElement;\r\n\tprivate captchaInput: HTMLInputElement;\r\n\tprivate selectVal: HTMLSelectElement;\r\n\tprivate productOriginTip = observable.box<string>();\r\n\tprivate productLotTip = observable.box<string>();\r\n\tprivate productLotTipNone = observable.box<string>();\r\n\tprivate captchaTip = observable.box<string>();\r\n\tbuttonDisable: boolean = false;\r\n\r\n\tconstructor(c: CProduct) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            buttonDisable: observable\r\n        });\r\n\t}\r\n\r\n\tasync open(param?: any) {\r\n\t\tthis.openPage(this.page, { origin: param });\r\n\t}\r\n\r\n\tpage = observer((param?: any) => {\r\n\r\n\t\tlet { materialType } = this.controller;\r\n\t\tlet assistContent = (docTypeWithCaptcha.includes(materialType)) ? <>{this.captchaUI(materialType)}</> : <>{this.lots()}</>;\r\n\t\tlet content = materialCaptions[materialType];\r\n\t\tlet header: any, right: any;\r\n\t\tif (xs) {\r\n\t\t\theader = <div className=\"w-100 text-center\">产品资料</div>;\r\n\t\t\tright = <></>;\r\n\t\t};\r\n\t\tlet { origin } = param;\r\n\t\treturn <Page header={header} right={right}>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-12\"><h1 className=\"title my-4\">{content.CName}</h1></div>\r\n\t\t\t\t\t<div className=\"col-lg-12\">\r\n\t\t\t\t\t\t<div className=\"box\">\r\n\t\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t\t<p>{content.EName}</p>\r\n\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-md-3\">\r\n\t\t\t\t\t\t\t\t\t\t<input ref={v => this.productOrigin = v} type=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control border-primary my-2' defaultValue={origin ? origin : ''} placeholder='产品编号' />\r\n\t\t\t\t\t\t\t\t\t\t{autoHideTips(this.productOriginTip, tip => <div className='small text-danger'>* {tip}</div>)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t{assistContent}\r\n\t\t\t\t\t\t\t\t\t{autoHideTips(this.productLotTipNone, tip => <div className='small text-danger px-3'>* {tip}</div>)}\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary w-5c mt-2 mb-5\"\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={this.buttonDisable}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e: any) => { e.preventDefault(); this.buttonDisable = true; this.onSubmit();  }}>查询</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Page>\r\n\t})\r\n\r\n\tprivate lots = () => {\r\n\t\treturn <div className=\"col-md-3\">\r\n\t\t\t<input ref={v => this.productLot = v} type=\"text\"\r\n\t\t\t\tclassName='form-control border-primary my-2'\r\n\t\t\t\tplaceholder='产品批号' />\r\n\t\t\t{autoHideTips(this.productLotTip, tip => <div className='small text-danger'>* {tip}</div>)}\r\n\t\t</div>\r\n\t}\r\n\r\n\tprivate captchaUI = (type: string) => {\r\n\t\tlet { captcha, productMscuVersions, getCaptcha } = this.controller;\r\n\t\tlet langUI: undefined | JSX.Element;\r\n\r\n\t\tif (type === 'msds' || type === 'um') {\r\n\t\t\tlet langArr: any[] = productMscuVersions.length ? productMscuVersions : defLangs;\r\n\t\t\tlangUI = <select ref={v => this.selectVal = v} defaultValue='CN' className=\"p-1 mr-2 mb-2 text-dark\">\r\n\t\t\t\t{langArr.map((v: any) => (<option key={v.language} value={v.language}>{languageCaptions[v.language]}</option>))}\r\n\t\t\t</select>\r\n\t\t};\r\n\t\treturn <>\r\n\t\t\t<div className=\"col-md-3\">\r\n\t\t\t\t<input ref={v => this.captchaInput = v} type=\"text\"\r\n\t\t\t\t\tclassName='form-control border-primary my-2' placeholder='验证码' />\r\n\t\t\t\t{autoHideTips(this.captchaTip, tip => <div className='small text-danger'>* {tip}</div>)}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"col-md-6 my-2\">\r\n\t\t\t\t{langUI}\r\n\t\t\t\t<img src={captcha} alt=\"\" className=\"border p-1 rounded-lg mb-1\" style={{ height: 35 }} />\r\n\t\t\t\t<button className=\"btn btn-link btn-block w-5c p-0 m-0 d-inline-block align-self-center\"\r\n\t\t\t\t\tonClick={(e: any) => { e.preventDefault(); getCaptcha() }}>换一张</button>\r\n\t\t\t</div>\r\n\t\t</>;\r\n\t}\r\n\r\n\tprivate onSubmit = async () => {\r\n\t\tlet productOrigin = this.productOrigin.value;\r\n\t\tlet productLot = this.productLot ? this.productLot.value : true;\r\n\t\tlet currtCaptcha = this.captchaInput ? this.captchaInput.value : true;\r\n\r\n\t\tif (!productOrigin) this.productOriginTip.set('产品编号不可为空');\r\n\t\tif (!productLot) this.productLotTip.set('产品批号不可为空');\r\n\t\tif (!currtCaptcha) this.captchaTip.set('验证码不可为空');\r\n\r\n\t\tif (!productOrigin || !productLot || !currtCaptcha) return;\r\n\t\tlet { getPDFFileUrl, getCaptcha } = this.controller;\r\n\t\tlet content: any = await getPDFFileUrl({\r\n\t\t\torigin: productOrigin, captcha: currtCaptcha,\r\n\t\t\tlang: this.selectVal ? this.selectVal.value : undefined, lot: productLot\r\n\t\t});\r\n\t\tif (content === undefined) return;\r\n\t\tif (content.status) {\r\n\t\t\tif (this.controller.materialType === 'coa') this.productLotTipNone.set(content.msg);\r\n\t\t\telse {\r\n\t\t\t\tthis.captchaTip.set(content.msg);\r\n\t\t\t\tawait getCaptcha();\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tif (this.captchaInput) this.captchaInput.value = '';\r\n\t\t\tif (this.productLot) this.productLot.value = '';\r\n\t\t\tif (this.controller.materialType === 'coa') this.openVPage(VPageCoa, content);\r\n\t\t\telse this.openVPage(VPagePDF, content);\r\n\t\t};\r\n\t\tthis.buttonDisable = false;\r\n\t}\r\n}\r\n","import { observable, makeObservable } from 'mobx';\r\nimport { BoxId, QueryPager } from 'tonva-react';\r\nimport { CApp, CUqBase } from 'tapp';\r\nimport { VPageProduct } from './VPageProduct';\r\nimport { VPageList } from './VPageList';\r\nimport { docTypeWithCaptcha, VPageSkillSearch } from './VPageSkillSearch';\r\nimport { VDelivery, VInCart, VProductWithPrice, VProuductView2 } from './views';\r\nimport { Product } from '../store';\r\nimport { GLOABLE } from 'global';\r\nimport { ElasticSearchPager, UrlGen, productUrlGen, productCatalogUrlGen, productStandardUrlGen } from '../tools/elasticSearchPager';\r\nimport { xs } from 'tools/browser';\r\nimport { VError } from '../tools/VError';\r\n\r\nexport class CProduct extends CUqBase {\r\n    productsPager: QueryPager<Product>;\r\n    esproductsPager: ElasticSearchPager<Product> | any[];\r\n    esProductsTotal: any;\r\n    currentPage: number = 1;\r\n    //@observable productSpecFiles: any[] = [];\r\n    //@observable productMSDSFiles: any[] = [];\r\n    //@observable futureDeliveryTimeDescriptionContainer: { [cacheId: string]: string } = {};\r\n    //@observable chemicalInfoContainer: { [productId: number]: any } = {};\r\n\r\n    captcha: any;\r\n    materialType: string;\r\n    currentFileName: any;\r\n    currentLanguage: any;\r\n    currentProduct: any;\r\n    productMscuVersions: any[] = [];\r\n    showFavorites: Boolean = false;\r\n    searchUrl: string;\r\n\r\n    //@observable productData: any;\r\n    //@observable product: any;\r\n    //@observable discount: any;\r\n\r\n    // private salesRegion: any;\r\n    // private language: any;\r\n\r\n    product: Product;\r\n\r\n    searchKey: string;\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            esproductsPager: observable,\r\n            esProductsTotal: observable,\r\n            currentPage: observable,\r\n            captcha: observable,\r\n            materialType: observable,\r\n            currentFileName: observable,\r\n            currentLanguage: observable,\r\n            currentProduct: observable,\r\n            productMscuVersions: observable,\r\n            showFavorites: observable,\r\n            searchUrl: observable\r\n        });\r\n    }\r\n\r\n    protected async internalStart(param?: any) {\r\n        let { key, type } = param;\r\n        this.searchKey = key;\r\n        this.currentPage = 1;\r\n        this.searchByKey(Number(type));\r\n    }\r\n\r\n    private productConverter = (item: any, queryResults?: { [name: string]: any[] }): Product => {\r\n        let product = this.cApp.getProduct(item.id);\r\n        product.props = item;\r\n        // product.props.imageUrl = item.chemical.toString();\r\n        product.loadListItem();\r\n        return product;\r\n    }\r\n\r\n    searchAction = async (url: string, keyWord: any, urlGen: UrlGen) => {\r\n        let { currentSalesRegion } = this.cApp;\r\n        this.searchUrl = url;\r\n        // if (xs) {\r\n        this.esproductsPager = new ElasticSearchPager<Product>(url, urlGen, 10, 10);\r\n        this.esproductsPager.setItemConverter(this.productConverter);\r\n        await this.esproductsPager.first({\r\n            keyWord: keyWord,\r\n            salesRegion: currentSalesRegion.id\r\n        });\r\n        // };\r\n\r\n        /* if (!xs) {\r\n            this.searchUrl = url + '?key=' + keyWord;\r\n            // this.searchUrl = url + '/' + keyWord;\r\n            await this.esProductsPagerMore(this.currentPage);\r\n        }\r\n        this.openVPage(VPageList); */\r\n    }\r\n\r\n    private async searchByKey(type: number) {\r\n        let url = GLOABLE.CONTENTSITE + '/api/product/search';\r\n        if (type === 2) url = GLOABLE.CONTENTSITE + '/api/standard-sample';\r\n        let keyWord = encodeURIComponent(this.searchKey);\r\n        if (xs) {\r\n            let urlGen = new productUrlGen();\r\n            if (type === 2) urlGen = new productStandardUrlGen();\r\n            await this.searchAction(url, keyWord, urlGen);\r\n        };\r\n        if (!xs) {\r\n            this.searchUrl = url + '?key=' + keyWord + '&pageNumber=';\r\n            if (type === 2) this.searchUrl = url + '/' + keyWord + '/';\r\n            await this.esProductsPagerMore(this.currentPage);\r\n        };\r\n        this.openVPage(VPageList);\r\n        /* this.productsPager = new QueryPager<Product>(this.uqs.product.SearchProduct, 10, 10);\r\n        this.productsPager.setItemConverter(this.productConverter);\r\n        this.productsPager.first({\r\n            keyWord: this.searchKey,\r\n            salesRegion: currentSalesRegion.id\r\n        }); */\r\n    }\r\n\r\n    searchWebByKey(key: string) {\r\n        let { currentSalesRegion } = this.cApp;\r\n        this.productsPager = new QueryPager<any>(this.uqs.product.SearchProduct, 3, 3);\r\n        this.productsPager.setItemConverter(this.productConverter);\r\n        this.productsPager.first({ keyWord: key, salesRegion: currentSalesRegion.id })\r\n    }\r\n\r\n    async searchByCategory({ productCategory, name }: { productCategory: number; name: string }) {\r\n        this.searchKey = name; this.currentPage = 1;\r\n        let url = GLOABLE.CONTENTSITE + '/api/product-catalog';\r\n        let keyWord = productCategory + '/products';\r\n        if (xs) {\r\n            let urlGen = new productCatalogUrlGen();\r\n            await this.searchAction(url, keyWord, urlGen);\r\n        };\r\n        if (!xs) {\r\n            this.searchUrl = url + '/' + keyWord + '/';\r\n            await this.esProductsPagerMore(this.currentPage);\r\n        };\r\n        this.openVPage(VPageList);\r\n        /* this.productsPager = new QueryPager<any>(this.uqs.product.SearchProductByCategory, 10, 10);\r\n        this.productsPager.setItemConverter(this.productConverter);\r\n        await this.productsPager.first({\r\n            productCategory,\r\n            salesRegion: currentSalesRegion.id\r\n        }); */\r\n        // this.openVPage(VPageList);\r\n    }\r\n\r\n    esProductsPagerMore = async (page: number) => {\r\n        this.currentPage = page;\r\n        let url = this.searchUrl + page;\r\n        // let url = this.searchUrl + '/' + page;\r\n        let resp = await fetch(url, {\r\n            // mode: 'cors',\r\n            method: 'GET',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n        });\r\n        let ret = await resp.json();\r\n        let items = ret.hits.filter((v: any) => v);\r\n        let arr = [];\r\n        for (let key of items) {\r\n            if (!key) continue;\r\n            let product = this.productConverter(key);\r\n            arr.push(product);\r\n        }\r\n        this.esproductsPager = arr;\r\n        this.esProductsTotal = ret.total;\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    showProductDetail = async (productId: BoxId | number | string, JumpSource?: any) => {\r\n        if (!productId) return;\r\n        if (typeof productId === 'string') {\r\n            productId = Number(productId);\r\n        }\r\n        this.product = this.cApp.getProduct(productId);\r\n        await this.product.loadDetail();\r\n        if (JumpSource) this.closePage();\r\n        if (!this.product.props) {\r\n            this.openVPage(VError);\r\n        } else {\r\n            this.openVPage(VPageProduct);\r\n        }\r\n    }\r\n\r\n    /*\r\n    renderProductPrice = (product: BoxId, discount: number) => {\r\n        return this.renderView(VProductPrice, { product: product, discount: discount });\r\n    }\r\n    */\r\n\r\n    renderProductWithPrice = (product: BoxId) => {\r\n        return this.renderView(VProductWithPrice, product);\r\n    }\r\n\r\n    /*\r\n    getProductPrice = async (product: BoxId, salesRegionId: number, discount: number) => {\r\n        let { id: productId } = product;\r\n        let { currentSalesRegion, cart, currentLanguage, uqs } = this.cApp;\r\n\r\n        let prices = await uqs.product.PriceX.table({ product: product, salesRegion: salesRegionId });\r\n        let priceSet = prices.filter(e => e.discountinued === 0 && e.expireDate > Date.now()).sort((a, b) => a.retail - b.retail).map(element => {\r\n            let ret: any = {};\r\n            ret.pack = element.pack;\r\n            ret.retail = element.retail;\r\n            if (discount !== 0)\r\n                ret.vipPrice = Math.round(element.retail * (1 - discount));\r\n            ret.currency = currentSalesRegion.currency;\r\n            ret.quantity = cart.getQuantity(productId, element.pack.id)\r\n            return ret;\r\n        });\r\n        let promises: PromiseLike<any>[] = [];\r\n        priceSet.forEach(v => {\r\n            promises.push(uqs.promotion.GetPromotionPack.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n\r\n        for (let i = 0; i < priceSet.length; i++) {\r\n            let promotion = results[i];\r\n            let discount = promotion && promotion.discount;\r\n            if (discount)\r\n                priceSet[i].promotionPrice = Math.round((1 - discount) * priceSet[i].retail);\r\n        }\r\n        return priceSet;\r\n    }\r\n    */\r\n\r\n    renderDeliveryTime = (pack: BoxId, defColor?: string) => {\r\n        let param = { pack: pack, defColor: defColor };\r\n        return this.renderView(VDelivery, param);\r\n    }\r\n\r\n    /*\r\n    renderChemicalInfoInCart = (product: BoxId) => {\r\n        return this.renderView(VChemicalInfoInCart, product);\r\n    }\r\n    */\r\n\r\n    /*\r\n    renderFavoritesLabel = (product: Product) => {\r\n        //let { cApp } = this;\r\n        //let { cFavorites } = cApp;\r\n        //return cFavorites.renderFavoritesLabel(product);\r\n        return this.renderView(VFavorite, product);\r\n    }\r\n    */\r\n\r\n    /**\r\n     *\r\n     */\r\n    renderProduct = (product: Product, dataSource?: string, callback?: any) => {\r\n        return this.renderView(VProuductView2, { product, dataSource, callback });\r\n    }\r\n\r\n    renderCartProduct = (product: Product) => {\r\n        return this.renderView(VInCart, product);\r\n    }\r\n\r\n    /**\r\n     * 在线预览PDF,开启验证\r\n     */\r\n    ToVerifyPdf = async (fileInfo: any) => {\r\n        //let { currentUser } = this.cApp;\r\n        let { content, product } = fileInfo;\r\n        let reg = /\\w*\\//ig\r\n        this.currentFileName = content.fileName ? content.fileName.replace(reg, '').toLocaleUpperCase() : undefined;\r\n        this.currentLanguage = content.language;\r\n        this.currentProduct = product;\r\n        await this.cApp.assureLogin();\r\n        //let loginCallback = async (user: User) => {\r\n        //    await currentUser.setUser(user);\r\n        //    this.closePage(1);\r\n        //    await this.openMaterial();\r\n        //};\r\n        //if (!this.isLogined)\r\n        //    nav.showLogin(loginCallback, true);\r\n        //else\r\n        // await this.openMaterial();\r\n    }\r\n\r\n    /**\r\n     * 获取PDF文件流\r\n     */\r\n    getPDFFileUrl = async (row: any) => {\r\n        // await this.cApp.assureLogin();\r\n        let { origin, captcha, lang, lot } = row;\r\n        if (this.materialType === 'msds')\r\n            return await this.fetchPdf(`/partial/productMsdsFileByOrigin/${lang}/${origin}/${captcha}`);\r\n        if (this.materialType === 'um')\r\n            return await this.fetchPdf(`/partial/productUserManualFileByOrigin/${lang}/${origin}/${captcha}`);\r\n        if (this.materialType === 'spec')\r\n            return await this.fetchPdf(`/partial/productSpecFileByOrigin/${origin}/${captcha}`);\r\n        if (this.materialType === 'coa') {\r\n            let getLot = await this.getLotByOrigin({ lotnumber: lot, origin: origin });/* LV50T103 911810  */\r\n            let res = {\r\n                status: 404,\r\n                msg: `暂时不能提供质检报告（COA）, 您可能输入了错误的产品编号（批号），或者您查询产品品牌暂时不能提供质检报告。`\r\n            };\r\n            if (!getLot) return res;\r\n            let getCoaByOrigin = await this.getCoaByOrigin(getLot.id);\r\n            if (!getCoaByOrigin) return res;\r\n            return {\r\n                content: {\r\n                    ...getLot,\r\n                    ...getCoaByOrigin,\r\n                    origin: origin\r\n                }\r\n            };\r\n        };\r\n    }\r\n\r\n    getCoaByOrigin = async (lotNumber: string | number) => {\r\n        return await this.uqs.product.COA.obj({ lot: lotNumber });\r\n    }\r\n\r\n    getLotByOrigin = async (row: any) => {\r\n        let { origin, lotnumber } = row;\r\n        return await this.uqs.product.GetLotByLotnumber.obj({ lotnumber: lotnumber, origin: origin });\r\n    }\r\n\r\n    fetchPdf = async (url: string) => {\r\n        let fileUrl = GLOABLE.CONTENTSITE + url;\r\n        let res = await window.fetch(fileUrl, {\r\n            credentials: 'include'\r\n        });\r\n        if (res.status === 200) {\r\n            let content = await res.arrayBuffer();\r\n            return {\r\n                content: content,\r\n                fileUrl: fileUrl,\r\n            };\r\n        } else {\r\n            return {\r\n                status: res.status,\r\n                msg: res.status !== 400 ? res.statusText : '验证码错误!'\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取验证码\r\n     */\r\n    getCaptcha = async () => {\r\n        let timer = (new Date()).getTime();\r\n        this.captcha = GLOABLE.CONTENTSITE + `/partial/captcha/?timer=${timer}`;\r\n    }\r\n\r\n    /**\r\n     * 产品资料页面\r\n     */\r\n    openMaterial = async (type?: string, id?: string) => {\r\n        type = type !== undefined ? type.toLowerCase() : type;\r\n        if (docTypeWithCaptcha.includes(type)) await this.getCaptcha();\r\n        this.materialType = type;\r\n        let origin: string;\r\n        if (!isNaN(Number(id))) {\r\n            this.product = this.cApp.getProduct(Number(id));\r\n            await this.product.loadBase();\r\n        }\r\n        if (this.product && this.product.props) {\r\n            origin = this.product.props.origin;\r\n            if (origin && (type === 'msds' || type === 'um')) {\r\n                let urls: { [type: string]: string } = {\r\n                    \"msds\": \"/partial/productMsdsVersion/\",\r\n                    \"um\": \"/partial/productUserManualVersion/\",\r\n                };\r\n                let url: string = urls[type] || \"/partial/productMsdsVersion/\";\r\n                let result = await window.fetch(GLOABLE.CONTENTSITE + url + origin);\r\n                if (result && result.ok) this.productMscuVersions = await result.json();\r\n                else this.productMscuVersions = [];\r\n            };\r\n        }\r\n        this.openVPage(VPageSkillSearch, origin);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, FA } from 'tonva-react';\r\nimport { COrder } from './COrder';\r\n\r\nexport class VModelByCreateOrder extends View<COrder>{\r\n\r\n    render() {\r\n        let { modalTitle, modalTitleS, renderModelContent } = this.controller;\r\n        let showBack = modalTitle && modalTitleS[modalTitle].preLevel;\r\n        // document.body.setAttribute(\"style\", `overflow: ${modalTitle ? \"hidden\" : \"auto\"};`);\r\n        return <div className='modal modal-dialog-show' style={{ display: modalTitle ? 'block' : 'none', background: \"rgba(0,0,0,.3)\", }}>\r\n            <div className=\"d-flex justify-content-center align-content-center w-100 h-100\" >\r\n                <div className=\"border bg-light m-auto rounded pb-4 position-relative\" style={{ maxWidth: 800 }}>\r\n                    <div className=\"position-absolute cursor-pointer\" style={{ right: 5, top: 0 }} onClick={() => { this.controller.modalTitle = ''; }}><FA name=\"times-circle-o\" className=\"text-primary\" /></div>\r\n                    {\r\n                        showBack &&\r\n                        <div className=\"position-absolute cursor-pointer\" style={{ left: 8, top: 8 }}\r\n                            onClick={() => { this.controller.modalTitle = modalTitleS[modalTitle]?.preLevel }}>\r\n                            <FA name=\"chevron-left\" className=\"text-break\" />\r\n                        </div>\r\n                    }\r\n                    <div className=\"text-center border-bottom h4 py-2\">{modalTitleS[modalTitle]?.title}</div>\r\n                    <div className=\"h-max-30c overflow-auto scroll-S\" style={{ overflowX: \"hidden\",minWidth:300}}>{renderModelContent()}</div>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, tv, List, LMR, FA, autoHideTips } from 'tonva-react';\r\nimport { COrder } from './COrder';\r\nimport { OrderItem } from './Order';\r\nimport { CartPackRow } from '../store';\r\nimport classNames from 'classnames';\r\n//import { GLOABLE } from 'cartenv';\r\nimport { xs } from '../tools/browser';\r\nimport { VModelByCreateOrder } from './VModelByCreateOrder';\r\n\r\nexport class VCreateOrder extends VPage<COrder> {\r\n    private useShippingAddress: boolean = true;\r\n    //@observable private shippingAddressIsBlank: boolean = false;\r\n    //@observable private invoiceAddressIsBlank: boolean = false;\r\n\t//@observable private invoiceIsBlank: boolean = false;\r\n\tprivate shippingAddressTip = observable.box();\r\n\tprivate invoiceAddressTip = observable.box();\r\n\tprivate invoiceTip = observable.box();\r\n\tprivate comBininvoiceTip = observable.box();\r\n    orderNotes: HTMLTextAreaElement;\r\n    submitOrderEd: boolean = false;\r\n\r\n    constructor(c: COrder) {\r\n        super(c);\r\n\r\n        makeObservable<VCreateOrder, \"useShippingAddress\">(this, {\r\n            useShippingAddress: observable,\r\n            orderNotes: observable,\r\n            submitOrderEd: observable\r\n        });\r\n    }\r\n\r\n    async open(param: any) {\r\n        document.documentElement.scrollIntoView();\r\n        let { orderData } = this.controller;\r\n        if (orderData?.invoiceContact?.id !== orderData?.shippingContact?.id) {\r\n            this.useShippingAddress = false;\r\n        } else {\r\n            this.useShippingAddress = true;\r\n        };\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private nullContact = () => {\r\n        return <span className=\"text-primary\">选择收货地址</span>;\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow, index: number) => {\r\n        let { pack, quantity, retail, price } = item;\r\n\r\n        let retailUI: any;\r\n        if (price !== retail) {\r\n            retailUI = <del>¥{retail * quantity}</del>;\r\n        }\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger h5\"><small>¥</small>{parseFloat((price * quantity).toFixed(2))}</span>\r\n                    <small className=\"text-muted\">(¥{parseFloat(price.toFixed(2))} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n            <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: OrderItem) => {\r\n        let { product, packs } = orderItem;\r\n        let { controller, packsRow } = this;\r\n        return <div className=\"row w-100 mx-0\">\r\n                <div className=\"col-lg-6 pb-3\">{controller.renderOrderItemProduct(product)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n    }\r\n\r\n    private orderItemKey = (orderItem: OrderItem) => {\r\n        let pack = orderItem.packs[0]?.pack;\r\n        let packID = pack ? String(pack.id) : '';\r\n        return orderItem.product.id + packID;\r\n    }\r\n\r\n    private renderCoupon = observer((param: any) => {\r\n        let { couponAppliedData, hasAnyCoupon, removeCoupon } = this.controller;\r\n        if (couponAppliedData['id'] === undefined) {\r\n            let tip = hasAnyCoupon ? \"有可用优惠卡/券，点击使用\" : \"输入优惠券/积分码\";\r\n            return <span className=\"text-primary\">{tip}</span>;\r\n        } else {\r\n            let { code, types } = couponAppliedData;\r\n            let { couponOffsetAmount, couponRemitted, point } = param;\r\n            let offsetUI, remittedUI, noOffsetUI;\r\n            let cancelCouponUI = <div\r\n                className=\"position-absolute text-primary border text-center border-primary dropdown-menu-right rounded-circle\"\r\n                style={{ border: 1, cursor: 'pointer', width: 19, height: 19, lineHeight: 1, top: 5, right: 5 }}\r\n                onClick={(e) => { e.stopPropagation(); removeCoupon(); }}\r\n            >&times;</div>\r\n            if (types === \"credits\") {\r\n                offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">积分:</div>\r\n                    <div className=\"text-right text-danger\">{point}<small>分</small></div>\r\n                </div>\r\n            }\r\n            else if (couponOffsetAmount || couponRemitted) {\r\n                if (couponOffsetAmount) {\r\n                    offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                        <div className=\"text-muted\">折扣:</div>\r\n                        <div className=\"text-right text-danger\"><small>¥</small>{couponOffsetAmount.toFixed(2)}</div>\r\n                    </div>\r\n                }\r\n                if (couponRemitted) {\r\n                    remittedUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                        <div className=\"text-muted\">抵扣:</div>\r\n                        <div className=\"text-right text-danger\"><small>¥</small>{couponRemitted.toFixed(2)}</div>\r\n                    </div>\r\n                }\r\n            } else {\r\n                noOffsetUI = <div>谢谢惠顾</div>;\r\n            }\r\n            return <div className=\"mr-2 position-relative border-primary border px-3 py-1 rounded\">\r\n                <div className=\"text-success\">{code.substr(0, 4)} {code.substr(4)}</div>\r\n                {offsetUI}\r\n                {remittedUI}\r\n                {noOffsetUI}\r\n                {cancelCouponUI}\r\n            </div>\r\n        }\r\n    });\r\n\r\n    private onBuyerAccountChanged = () => {\r\n\r\n    }\r\n\r\n    private renderBuyerAccount = (item: any) => {\r\n        let { buyerAccount } = item;\r\n        return <div>{tv(buyerAccount, (v) => {\r\n            let { description, organization } = v;\r\n            return <>{description}{tv(organization, (o) => {\r\n                return <>{o.name}</>\r\n            }, undefined, () => null)}</>\r\n        })}</div>\r\n    }\r\n\r\n    private renderBuyerAccounts = observer(() => {\r\n        let { buyerAccounts } = this.controller;\r\n        if (!buyerAccounts || buyerAccounts.length === 0) return null;\r\n        return <div className=\"row mx-0 py-3 bg-white mb-1\">\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">订单账号:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <List items={buyerAccounts} item={{ render: this.renderBuyerAccount, onSelect: this.onBuyerAccountChanged }}></List>\r\n            </div>\r\n        </div>\r\n    })\r\n\r\n    private onSubmit = async () => {\r\n        let { orderData, activePushOrder } = this.controller;\r\n        // 必填项验证\r\n        let { shippingContact, invoiceContact, invoiceType, invoiceInfo } = orderData;\r\n        // let renderTip = (tip:string) => <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> {tip}</div>;\r\n        let combinTip: string = \"\";\r\n        if (!shippingContact) {\r\n            this.shippingAddressTip.set('必须填写收货地址');\r\n            combinTip = \"必须填写收货地址;\";\r\n            //this.shippingAddressIsBlank = true;\r\n            //setTimeout(() => this.shippingAddressIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            // return;\r\n        }\r\n        /* if (!invoiceContact) {\r\n            if (this.useShippingAddress) {\r\n\t\t\t\tthis.controller.orderData.invoiceContact = shippingContact; //contactBox;\r\n\t\t\t\tthis.invoiceAddressTip.set(null);\r\n                //this.invoiceAddressIsBlank = false;\r\n            } else {\r\n                //this.invoiceAddressIsBlank = true;\r\n\t\t\t\t//setTimeout(() => this.invoiceAddressIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n\t\t\t\tthis.invoiceAddressTip.set(renderTip('必须填写发票地址'));\r\n                return;\r\n            }\r\n        } */\r\n        if (!invoiceContact && !this.useShippingAddress) {\r\n            this.invoiceAddressTip.set('必须填写发票地址');\r\n            combinTip += \"必须填写发票地址;\";\r\n            // return;\r\n        };\r\n        if (this.useShippingAddress) {\r\n            this.controller.orderData.invoiceContact = shippingContact; this.invoiceAddressTip.set(null);\r\n        };\r\n        if (!invoiceType || !invoiceInfo) {\r\n            //this.invoiceIsBlank = true;\r\n\t\t\t//setTimeout(() => this.invoiceIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            this.invoiceTip.set('必须填写发票信息');\r\n            combinTip += \"必须填写发票信息;\";\r\n        };\r\n        if (invoiceType && invoiceInfo) {\r\n            let invoiceInfoO: any = await invoiceInfo.assure();\r\n            let { taxNo, address, telephone, bank, accountNo } = invoiceInfoO.obj;\r\n            let validInvoice = invoiceType.id === 1 ? !taxNo : (!taxNo || !address || !telephone || !bank || !accountNo);\r\n            if (validInvoice) {\r\n                this.invoiceTip.set('您的发票信息不全,请补全发票信息;');\r\n                combinTip += \"您的发票信息不全,请补全发票信息;\";\r\n            };\r\n        };\r\n        if (combinTip !== \"\") {\r\n            this.comBininvoiceTip.set(combinTip);\r\n            return;\r\n        }\r\n        let endComments = this.orderNotes?.value ? this.orderNotes.value.replace(/(\\s|\\t|\\n)*/g, \"\") : \"\";\r\n        this.controller.orderData.comments = endComments;\r\n        if (!activePushOrder.maxAmount) {\r\n            this.comBininvoiceTip.set(\"订单总金额超出协议上限,不可下单!\");\r\n            return;\r\n        };\r\n        await this.controller.submitOrder();\r\n    }\r\n\r\n    saveShowModal = async (type: string) => {\r\n        this.controller.cApp.cSelectInvoiceContact.getContactList();\r\n        this.controller.modalTitle = 'contactList';\r\n        this.controller.replyToContactType = type;\r\n    }\r\n\r\n    renderTip = (tip:string) => <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> {tip}</div>;\r\n\r\n    private page = observer(() => {\r\n\r\n        let { cApp, orderData, onSelectShippingContact, onSelectInvoiceContact, onInvoiceInfoEdit, onCouponEdit, getValidCardForWebUser } = this.controller;\r\n\t\tlet { currentUser } = cApp;\r\n        let { allowOrdering } = currentUser;\r\n        let disableOrderBtn = () => { this.submitOrderEd = true; setTimeout(() => this.submitOrderEd = false, 5000); };\r\n        let footer = <div className=\"w-100 px-3 py-1\" style={{ backgroundColor: \"#f8f8f8\" }}>\r\n            {autoHideTips(this.comBininvoiceTip, <div className=\"alert alert-danger\">{this.comBininvoiceTip.get()}</div>,5000)}\r\n            <div className=\"d-flex justify-content-left\">\r\n                <div className=\"text-danger flex-grow-1 align-self-center\" style={{ fontSize: '1.8rem' }}><small>¥</small>{orderData.amount}</div>\r\n                <button type=\"button\"\r\n                    className={classNames('btn', { 'btn-danger': allowOrdering, 'btn-secondary': !allowOrdering })}\r\n                    style={{ backgroundColor: '#c82333' }}\r\n                    onClick={() => { disableOrderBtn(); this.onSubmit()}} disabled={!allowOrdering || this.submitOrderEd}>提交订单\r\n                </button>\r\n            </div>\r\n        </div>;\r\n\r\n        let chevronRight = xs ? <FA name=\"chevron-right\" className=\"cursor-pointer\" /> : <></>;\r\n\t\t/*\r\n        let shippingAddressBlankTip = this.shippingAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>\r\n            : null;\r\n        let invoiceAddressBlankTip = this.invoiceAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票地址</div> : null;\r\n\t\t*/\r\n        let divInvoiceContact: any = null;\r\n        if (this.useShippingAddress === false) {\r\n            if (orderData.invoiceContact !== undefined) {\r\n                divInvoiceContact = <div className=\"col-8 col-sm-10 offset-4 offset-sm-2 d-flex\"\r\n                    onClick={() => { xs ? onSelectInvoiceContact() : this.saveShowModal('invoiceContact') }}>\r\n                    {tv(orderData.invoiceContact, undefined, undefined, this.nullContact)}\r\n                    <div>{chevronRight}</div>\r\n                </div>\r\n            } else {\r\n                divInvoiceContact = <div className=\"col-8 offset-4 offset-sm-2\">\r\n                    <button className=\"btn btn-outline-primary\"\r\n                        onClick={()=>{ xs ? onSelectInvoiceContact() : this.saveShowModal('invoiceContact')}}>选择发票地址</button>\r\n                    {/*invoiceAddressBlankTip*/}\r\n\t\t\t\t\t{autoHideTips(this.invoiceAddressTip, this.renderTip(this.invoiceAddressTip.get()))}\r\n                </div>\r\n            }\r\n\t\t}\r\n\t\t\r\n\t\tlet labeled = (label:string, content:JSX.Element, contentClass?:string):JSX.Element => {\r\n            return <>\r\n\t\t\t\t<div className=\"col-4 col-sm-2 pb-2 text-muted\">{label}</div>\r\n            \t<div className={classNames('col-8 col-sm-10', contentClass)}>{content}</div>\r\n\t\t\t</>;\r\n\t\t};\r\n\t\tlet renderPrice = (price:number, className?:string) => {\r\n\t\t\treturn <div className={classNames('text-right', className)}><small>¥</small>{price}</div>;\r\n\t\t}\r\n\r\n        let invoiceContactUI = <div className=\"row mx-0 py-3 bg-white mb-1\">\r\n\t\t\t{labeled('发票地址:', <label className=\"cursor-pointer\">\r\n\t\t\t\t<input type=\"checkbox\"\r\n\t\t\t\t\tdefaultChecked={this.useShippingAddress}\r\n\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\tthis.useShippingAddress = e.currentTarget.checked;\r\n\t\t\t\t\t\torderData.invoiceContact = undefined;\r\n\t\t\t\t\t\t//this.invoiceAddressIsBlank = false;\r\n\t\t\t\t\t\tthis.shippingAddressTip.set(null);\r\n\t\t\t\t\t}} /> 同收货地址\r\n\t\t\t</label>)}\r\n            {divInvoiceContact}\r\n        </div>\r\n\t\t/*\r\n\t\t            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票地址:</div>\r\n\t\t\t\t\t<div className=\"col-8 col-sm-10\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label className=\"cursor-pointer\">\r\n\t\t\t\t\t\t\t\t<input type=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\tdefaultChecked={this.useShippingAddress}\r\n\t\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\t\tthis.useShippingAddress = e.currentTarget.checked;\r\n\t\t\t\t\t\t\t\t\t\torderData.invoiceContact = undefined;\r\n\t\t\t\t\t\t\t\t\t\t//this.invoiceAddressIsBlank = false;\r\n\t\t\t\t\t\t\t\t\t\tthis.shippingAddressTip.set(null);\r\n\t\t\t\t\t\t\t\t\t}} /> 同收货地址\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t*/\r\n\r\n        //let invoiceBlankTip = this.invoiceIsBlank ? <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票信息</div> : null;\r\n        let invoiceInfoUI = <div className=\"row mx-0 py-3 bg-white\" onClick={()=>{xs ? onInvoiceInfoEdit(): this.controller.modalTitle='invoiceInfo'}}>\r\n            {labeled('发票信息:',\r\n                <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                    {tv(orderData.invoiceType, (v) => <>{v.description}</>, undefined, () => <span className=\"text-primary\">填写发票信息</span>)}\r\n                    {tv(orderData.invoiceInfo, (v) => <> -- {v.title}</>, undefined, () => <></>)}\r\n                    {/*invoiceBlankTip*/}\r\n                    {autoHideTips(this.invoiceTip, this.renderTip(this.invoiceTip.get()))}\r\n                </LMR>)}\r\n        </div>\r\n\r\n        let freightFeeUI = <></>;\r\n\t\tlet freightFeeRemittedUI = <></>;\r\n\t\tlet {freightFee, freightFeeRemitted} = orderData;\r\n        if (freightFee) {\r\n            freightFeeUI = labeled('运费:', renderPrice(freightFee, 'text-danger'));\r\n            if (freightFeeRemitted) {\r\n                freightFeeRemittedUI = labeled('运费减免:', renderPrice(freightFeeRemitted, 'text-danger'));\r\n            }\r\n        }\r\n\r\n        let couponUI = <div className=\"row mx-0 py-3 bg-white\" onClick={()=>{xs ? onCouponEdit() : getValidCardForWebUser()}}>\r\n\t\t\t{labeled('优惠卡券:', \r\n                <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                    {React.createElement(this.renderCoupon,\r\n                        {\r\n                            couponOffsetAmount: orderData.couponOffsetAmount,\r\n                            couponRemitted: orderData.couponRemitted,\r\n                            point: orderData.point\r\n                        })}\r\n                </LMR>)}\r\n        </div>;\r\n        let header:any;\r\n        if(xs) header = \"订单预览\";\r\n        return <Page header={header} footer={footer}>\r\n             {!xs ? <div className=\"col-lg-12 px-3\"><h1 className=\"mt-4 mb-3\">订单信息</h1></div> :null }\r\n            <div className=\"px-2\">\r\n                <div className=\"row mx-0 py-3 bg-white\" onClick={()=>{ xs ? onSelectShippingContact() : this.saveShowModal('shippingContact')}}>\r\n\t\t\t\t\t{labeled('收货地址:',\r\n\t\t\t\t\t\t<>\r\n                        <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                            {tv(orderData.shippingContact, undefined, undefined, this.nullContact)}\r\n                        </LMR>\r\n                        {/*shippingAddressBlankTip*/}\r\n\t\t\t\t\t\t{autoHideTips(this.shippingAddressTip,this.renderTip(this.shippingAddressTip.get()))}\r\n                    </>)}\r\n                </div>\r\n                {invoiceContactUI}\r\n                {invoiceInfoUI}\r\n            </div>\r\n            <List items={orderData.orderItems} item={{ render: this.renderOrderItem,className:\"w-100\", key: this.orderItemKey as any }} />\r\n            <div className=\"px-2\">\r\n                <div className=\"row mx-0 py-3 pr-3 bg-white my-1\">\r\n\t\t\t\t\t{labeled('商品总额:', renderPrice(orderData.productAmounts))}\r\n                    {freightFeeUI}\r\n                    {freightFeeRemittedUI}\r\n                </div >\r\n                {couponUI}\r\n            </div>\r\n            <div className=\"px-2\">\r\n                <div>订单备注（可填）</div>\r\n                <textarea ref={ v => this.orderNotes = v } placeholder=\"您若有疑问或其他问题, 可添加备注\" className=\"w-100 rounded p-1 mx-1\" style={{ outline:'none', resize:\"none\", borderColor:\"#719ECE\" }} rows={3}></textarea>\r\n            </div>\r\n            {this.renderVm(VModelByCreateOrder)}\r\n        </Page>\r\n    })\r\n}","import { BoxId } from 'tonva-react';\r\nimport { observable, computed, makeObservable } from 'mobx';\r\nimport { Product, CartPackRow } from '../store';\r\n\r\nexport class Order {\r\n    webUser: number;\r\n    organization: BoxId;\r\n    customer: any;\r\n\r\n    shippingContact: BoxId;\r\n    invoiceContact: BoxId;\r\n    invoiceType: BoxId;\r\n    invoiceInfo: BoxId;\r\n    orderItems: OrderItem[] = [];\r\n\r\n    freightFee: number;\r\n    freightFeeRemitted: number;\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            shippingContact: observable,\r\n            invoiceContact: observable,\r\n            invoiceType: observable,\r\n            invoiceInfo: observable,\r\n            orderItems: observable,\r\n            freightFee: observable,\r\n            freightFeeRemitted: observable,\r\n            amount: computed,\r\n            productAmount: computed,\r\n            productAmounts: computed,\r\n            coupon: observable,\r\n            couponOffsetAmount: observable,\r\n            couponRemitted: observable,\r\n            point: observable\r\n        });\r\n    }\r\n\r\n    /*\r\n    @computed get amount() {\r\n        return parseFloat((this.orderItems.reduce((pv, cv) => (pv + cv.subAmount), 0) +\r\n            (this.freightFee ? this.freightFee : 0) +\r\n            (this.freightFeeRemitted ? this.freightFeeRemitted : 0) +\r\n            (this.couponOffsetAmount ? this.couponOffsetAmount : 0) +\r\n            (this.couponRemitted ? this.couponRemitted : 0)).toFixed(2));\r\n    };\r\n    */\r\n    /**\r\n     * 总金额\r\n     */\r\n    get amount() {\r\n        return parseFloat((this.orderItems.reduce((pv, cv) => (pv + cv.subAmount), 0) +\r\n            (this.freightFee ? this.freightFee : 0) +\r\n            (this.freightFeeRemitted ? this.freightFeeRemitted : 0)).toFixed(2));\r\n    };\r\n    // @computed get productAmount() {\r\n    //     return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subAmount, 0).toFixed(2));\r\n    // };\r\n    /**\r\n     * 商品总额 -----> 已修 应用现价计算（参与运费减免计算）\r\n     */\r\n    get productAmount() {\r\n        return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subAmount, 0).toFixed(2));\r\n    };\r\n\r\n    /**\r\n     * 商品总额(未应用券的价格) -----> 已修 应用目录价计算(总额恒定) 预览页展示所需\r\n     */\r\n    get productAmounts() {\r\n        return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subListAmount, 0).toFixed(2));\r\n    };\r\n    currency: BoxId;\r\n    coupon: BoxId;\r\n    couponOffsetAmount: number;\r\n    couponRemitted: number;\r\n    point: number;\r\n    comments: string;\r\n    salesRegion: BoxId;\r\n\r\n    getDataForSave() {\r\n        let orderItems: any[] = [];\r\n        this.orderItems.forEach(oi => {\r\n            oi.packs.forEach(pk => {\r\n                this.currency = pk.currency;\r\n                orderItems.push({\r\n                    product: oi.product, pack: pk.pack, price: pk.price, quantity: pk.quantity\r\n                    , subAmount: pk.quantity * pk.price, retail: pk.retail\r\n                })\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            invoiceContact: this.invoiceContact,\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: this.invoiceInfo,\r\n            amount: this.amount,\r\n            currency: this.currency,\r\n            freightFee: this.freightFee,\r\n            freightFeeRemitted: this.freightFeeRemitted,\r\n            coupon: this.coupon,\r\n            couponOffsetAmount: this.couponOffsetAmount,\r\n            couponRemitted: this.couponRemitted,\r\n            point: this.point,\r\n            comments: this.comments,\r\n            orderitems: orderItems, // 前面的必须是小写的orderitems\r\n            salesRegion: this.salesRegion,\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    getDataForSave2(): any {\r\n        let orderItems: any[] = [];\r\n        this.orderItems.forEach(oi => {\r\n            oi.packs.forEach(pk => {\r\n                this.currency = pk.currency;\r\n                orderItems.push({\r\n                    product: oi.product.id, pack: pk.pack.id, price: pk.price, quantity: pk.quantity\r\n                    , subAmount: pk.quantity * pk.price, retail: pk.retail\r\n                })\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization?.id,\r\n            customer: this.customer?.id,\r\n            shippingContact: this.shippingContact?.id,\r\n            invoiceContact: this.invoiceContact?.id,\r\n            invoiceType: this.invoiceType?.id,\r\n            invoiceInfo: this.invoiceInfo?.id,\r\n            amount: this.amount,\r\n            currency: this.currency,\r\n            freightFee: this.freightFee,\r\n            freightFeeRemitted: this.freightFeeRemitted,\r\n            coupon: this.coupon,\r\n            couponOffsetAmount: this.couponOffsetAmount,\r\n            couponRemitted: this.couponRemitted,\r\n            point: this.point,\r\n            comments: this.comments,\r\n            orderitems: orderItems, // 前面的必须是小写的orderitems\r\n            salesRegion: this.salesRegion?.id,\r\n        }\r\n    }\r\n}\r\n\r\nexport class OrderItem {\r\n    product: Product;\r\n    packs: CartPackRow[];\r\n    get subAmount() {\r\n        return this.packs.reduce((p, c) => {\r\n            return p + c.price * c.quantity\r\n        }, 0);\r\n    }\r\n    get subListAmount() {\r\n        return this.packs.reduce((p, c) => {\r\n            return p + c.retail * c.quantity\r\n        }, 0);\r\n    }\r\n\r\n    constructor(product: Product) {\r\n        makeObservable(this, {\r\n            packs: observable,\r\n            subAmount: computed,\r\n            subListAmount: computed\r\n        });\r\n\r\n        this.product = product;\r\n    }\r\n}","import { VPage, Page } from 'tonva-react';\r\nimport { COrder } from './COrder';\r\nimport { xs } from '../tools/browser';\r\n\r\nexport class OrderSuccess extends VPage<COrder> {\r\n\r\n    async open(orderCreateResult: any) {\r\n\r\n        this.openPage(this.page, orderCreateResult);\r\n    }\r\n\r\n    private page = (orderCreateResult: any) => {\r\n        let header: any;\r\n        if (xs) {\r\n            header='下单成功'\r\n        }\r\n        return <Page header={header}>\r\n            <div style={{textAlign: \"center\",paddingTop:\"150px\"}}>\r\n                <p>下单成功，感谢您对百灵威的厚爱!<br/>\r\n                订单编号:<span className=\"mint\">{orderCreateResult.no}</span><br />\r\n                我们会加紧处理，请注意查收短信。</p>\r\n                <img src=\"images/shoppingcart.png\" alt=\"\" className=\"w-min-12c py-5 col-5 col-sm-4 \" />\r\n            </div>\r\n        </Page>\r\n        /* return <Page header=\"下单成功\" back=\"close\">\r\n            <div className=\"py-4 px-3 bg-white mb-3 d-flex\">\r\n                <FA name=\"list-alt\" className=\"text-success mr-3\" size=\"4x\" />\r\n                <div>\r\n                    <p className=\"text-primary\"><span className=\"h4\">下单成功！</span></p>\r\n                    <p className=\"\">\r\n                        订单: <span className=\"h5 text-info\">{orderCreateResult.no}</span><br /><br />\r\n                        <span className=\"text-muted\">我们会加紧处理，请注意查收短信。</span>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </Page> */\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Tabs, TabCaptionComponent, TabProp, LMR } from 'tonva-react';\r\nimport { COrder } from './COrder';\r\nimport { Ax, List, EasyDate } from 'tonva-react';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { xs } from 'tools/browser';\r\nimport { ListTable } from 'tools/listTable';\r\nimport { GLOABLE } from 'global';\r\nimport { Pagination } from 'antd';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport const color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\nexport const OrdersPageSize: number = 15;/* 订单分页每页数量 */\r\n\r\nexport class VMyOrders extends VPage<COrder> {\r\n\r\n\t/*\r\n    @observable private pendingOrders: any[];\r\n    @observable private processingOrders: any[];\r\n    @observable private completedOrders: any[];\r\n\t@observable private allOrders: any[];\r\n\t*/\r\n\tsearchKey: HTMLInputElement;\r\n\tcurrentPage:  number = 1;\r\n\tlistAll:  any[] = [];\r\n\tprivate list: any[] = [];\r\n\tcurrentState: string;\r\n\tprivate tabs: TabProp[];\r\n\r\n\tconstructor(c: COrder) {\r\n        super(c);\r\n\r\n        makeObservable<VMyOrders, \"list\">(this, {\r\n            searchKey: observable,\r\n            currentPage: observable,\r\n            listAll: observable,\r\n            list: observable,\r\n            currentState: observable\r\n        });\r\n\t}\r\n\r\n\t/*\r\n    async open(param: any) {\r\n        this.currentState = param;\r\n        this.openPage(this.page);\r\n\t}\r\n\t*/\r\n\ttoRepeat = (arr: any[], key: string) => {\r\n\t\tlet obj: any = {};\r\n\t\treturn arr.filter(item => obj[item[key]] ? '' : (obj[item[key]] = true));\r\n\t};\r\n\r\n\tinit(param: any) {\r\n\t\tthis.currentState = param;\r\n\t\tlet { getMyOrders, searchMyOrders } = this.controller;\r\n\t\tlet oss = [\r\n\t\t\t{ caption: '待审核', state: 'processing', icon: 'desktop' },\r\n\t\t\t{ caption: '待发货', state: 'completed', icon: 'truck' },\r\n\t\t\t{ caption: '已发货', state: 'shipped', icon: 'truck' },\r\n\t\t\t{ caption: '所有订单', state: 'all', icon: 'file-text-o' },\r\n\t\t];\r\n\t\t/* let TabCaptionComponent = (label:string, icon:string, color:string) => <div \r\n\t\t\tclassName={'d-flex justify-content-center align-items-center flex-column cursor-pointer ' + color}>\r\n\t\t\t<div><i className={'fa fa-lg fa-' + icon} /></div>\r\n\t\t\t<small>{label}</small>\r\n\t\t</div>; */\r\n\t\tlet loadList = async (state: string) => {\r\n\t\t\tthis.currentState = state;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tlet arr: any[] = await getMyOrders(this.currentState);\r\n\t\t\tthis.listAll = this.toRepeat(arr, \"id\");\r\n\t\t\tif (this.currentState === \"processing\") this.list = this.listAll;\r\n\t\t\telse {\r\n\t\t\t\tlet arr: any[] = [];\r\n\t\t\t\tif (this.currentState === \"all\") arr = await getMyOrders(\"processing\");\r\n\t\t\t\tthis.list = [arr, this.listAll.slice(0, OrdersPageSize)].flat();\r\n\t\t\t};\r\n\t\t};\r\n\t\tlet searchOrderByKey = async () => {\r\n\t\t\tlet value = this.searchKey?.value;\r\n\t\t\t// if (!value) return;\r\n\t\t\tlet arr: any = await searchMyOrders({ keyWord: value });\r\n\t\t\tthis.listAll = this.toRepeat(arr.items, \"id\");\r\n\t\t\tthis.list = this.listAll.slice(0, OrdersPageSize);\r\n\t\t};\r\n\t\tlet toSearchOrdersUI: JSX.Element = React.createElement(observer(() => {\r\n\t\t\tif (this.currentState !== \"all\") return null;\r\n\t\t\treturn <LMR className=\"py-2\" right={<button className=\"btn-sm btn-primary w-4c rounded-sm\"\r\n\t\t\t\tonClick={() => { searchOrderByKey() }} >查询</button>} >\r\n\t\t\t\t<form onSubmit={(e: any) => { e.preventDefault(); searchOrderByKey() }} >\r\n\t\t\t\t\t<input ref={(v) => this.searchKey = v} placeholder=\"查询订单 输入:订单号、产品名称、CAS等\" className=\"form-control\" type=\"text\" />\r\n\t\t\t\t</form>\r\n\t\t\t</LMR>\r\n\t\t}));\r\n\t\t\r\n\t\tthis.tabs = oss.map(v => {\r\n\t\t\tlet { caption, state, icon } = v;\r\n\t\t\treturn {\r\n\t\t\t\tname: caption,\r\n\t\t\t\tcaption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n\t\t\t\tcontent: () => {\r\n\t\t\t\t\treturn React.createElement(observer(() => {\r\n\t\t\t\t\t\tif (xs) return <List items={this.list} item={{ render: this.renderOrder }} none=\"[无]\" />;\r\n\t\t\t\t\t\treturn <>{ toSearchOrdersUI}{this.orderListTable(state) }</>\r\n\t\t\t\t\t}));\r\n\t\t\t\t},\r\n\t\t\t\tisSelected: this.currentState === state,\r\n\t\t\t\tload: async () => { await loadList(state);},\r\n\t\t\t\tonShown: async () => { await loadList(state);},\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tprivate orderListTable = (stateA: string): JSX.Element => {\r\n\t\t// if (!this.list.length) return <div className=\"w-100 text-center py-3\">无</div>;\r\n\t\tlet os: { [state: string]: string } = {\r\n\t\t\t'processing': '待审核',\r\n\t\t\t'completed': '待发货',\r\n\t\t\t'shipped': '已发货',\r\n\t\t\t\"11\":\"待审核\",\r\n\t\t\t\"12\":\"待发货\",\r\n\t\t\t\"13\":\"已发货\",\r\n\t\t};\r\n\t\tlet columns = [{ id: 1, name: '订单编号' }, { id: 2, name: '日期' }, { id: 3, name: '订单状态' }, { id: 4, name: '详情' }];\r\n\t\tlet content = <>{this.list.map((v: any,index:number) => {\r\n\t\t\tlet { id, no, date, state } = v;\r\n\t\t\treturn <tr className=\"article-product-list order-wrap-list\" key={id + index + no}>\r\n\t\t\t\t<td data-title={columns[0].name} className=\"mint\">{no}</td>\r\n\t\t\t\t<td data-title={columns[1].name}><EasyDate date={date} /></td>\r\n\t\t\t\t<td data-title={columns[2].name}>{os[state]}</td>\r\n\t\t\t\t<td data-title={columns[3].name}>\r\n\t\t\t\t\t<Ax href={\"/orderDetail/\" + id} className='w-100' target=\"_blank\">\r\n\t\t\t\t\t\t<button type='button' className=\"btn-primary btn-sm w-4c rounded-sm\">详情</button>\r\n\t\t\t\t\t</Ax>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t})}</>;\r\n\t\tif(!this.list.length) content = <tr><td className=\"text-center py-3\" colSpan={4} >无订单</td></tr>\r\n\t\treturn <ListTable columns={columns} content={content} ></ListTable>;\r\n\t}\r\n\r\n\tprivate renderOrder = (order: any, index: number) => {\r\n\t\tlet { openOrderDetail } = this.controller;\r\n\t\tlet { id, no, date, state } = order;\r\n\t\treturn <div className=\"m-3\">\r\n\t\t\t<div className=\"d-flex w-100 justify-content-between cursor-pointer\" onClick={() => openOrderDetail(id)}>\r\n\t\t\t<div><span className=\"small text-muted\">订单: </span><strong>{no}</strong></div>\r\n\t\t\t<div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n\t\t</div></div>;\r\n\t\t/* return <Ax href={\"/orderDetail/\" + id } className='w-100 m-3' target='_blank'>\r\n\t\t\t<div className=\"d-flex w-100 justify-content-between cursor-pointer\">\r\n\t\t\t<div><span className=\"small text-muted\">订单: </span><strong>{no}</strong></div>\r\n\t\t\t<div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n\t\t</div></Ax>; */\r\n\t}\r\n\r\n\theader() {\r\n\t\tif (!xs) return '';\r\n\t\treturn '订单管理';\r\n\t}\r\n\r\n\tchangeShowOrders = async (value: any) => {\r\n\t\tdocument.body.scrollIntoView({ behavior: \"smooth\", block: \"end\", inline: \"start\" });\r\n\t\tthis.currentPage = value;\r\n\t\tlet arr: any[] = [];\r\n\t\tif (this.currentState === \"all\" && value === 1) arr = await this.controller.getMyOrders(\"processing\");\r\n\t\tthis.list = [arr, this.listAll.slice((value - 1) * OrdersPageSize, value * OrdersPageSize)].flat();\r\n\t};\r\n\r\n\tcontent(): JSX.Element {\r\n\t\tlet title = !xs ? <div className=\"text-left mt-5\"><h1>订单管理</h1></div> : null;\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\tlet paginationUI: JSX.Element;\r\n\t\t\tif (this.currentState !== \"processing\") {\r\n\t\t\t\tpaginationUI = <Pagination onChange={(v) => { this.changeShowOrders(v); }} current={this.currentPage}\r\n\t\t\t\t\tdefaultCurrent={1} pageSize={OrdersPageSize} hideOnSinglePage={true}\r\n\t\t\t\t\ttotal={this.listAll.length} showSizeChanger={false} className=\"page-item text-center\" />;\r\n\t\t\t};\r\n\t\t\treturn <div className=\"row mx-0 bg-light my-1\">\r\n\t\t\t\t<div className=\"col-lg-3 d-none d-lg-block\">\r\n\t\t\t\t{this.controller.cApp.cMe.renderMeSideBar()}\r\n\t\t\t</div>\r\n\t\t\t\t<div className={`col-lg-9 px-0 mx-auto ${!xs ? 'px-2' : ''}`} style={{ maxWidth: !xs ? 800 : 'none' }}>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t\t<div className=\"mb-5 reset-z-header-boxS\">\r\n\t\t\t\t\t\t<Tabs tabs={this.tabs} tabPosition=\"top\" tabBg={!xs ? 'bg-light' : ''} />\r\n\t\t\t\t\t\t{paginationUI}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"alert alert-info alert-signin my-2\">\r\n\t\t\t\t\t\t<div>原官网历史订单\r\n\t\t\t\t\t\t<a className=\"text-primary\" href={GLOABLE.CONTENTSITE + \"/Member/Center/SaleOrderList.aspx?language=zh-CN\"}\r\n\t\t\t\t\t\t\t\ttarget=\"_blank\" rel=\"noreferrer\"><b>查询</b></a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t}));\r\n\t};\r\n\r\n\tprivate page = () => {\r\n\r\n\t\tlet { getMyOrders } = this.controller;\r\n\t\tlet oss = [\r\n\t\t\t{ caption: '待审核', state: 'processing', icon: 'desktop' },\r\n\t\t\t{ caption: '待发货', state: 'completed', icon: 'truck' },\r\n\t\t\t{ caption: '所有订单', state: 'all', icon: 'file-text-o' },\r\n\t\t];\r\n\t\tlet tabs = oss.map(v => {\r\n\t\t\tlet { caption, state, icon } = v;\r\n\t\t\treturn {\r\n\t\t\t\tname: caption,\r\n\t\t\t\tcaption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n\t\t\t\tcontent: () => {\r\n\t\t\t\t\treturn <List items={this.list} item={{ render: this.renderOrder }} none=\"[无]\" />\r\n\t\t\t\t},\r\n\t\t\t\tisSelected: this.currentState === state,\r\n\t\t\t\tload: async () => {\r\n\t\t\t\t\tthis.currentState = state;\r\n\t\t\t\t\tthis.list = await getMyOrders(this.currentState);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t\t/*\r\n        let tabs = [{\r\n            name: '待审核',\r\n            caption: (selected: boolean) => TabCaptionComponent(\"待审核\", \"desktop\", color(selected)),\r\n            content: () => {\r\n                return <List items={this.processingOrders} item={{ render: this.renderOrder }} none=\"无待审核订单\" />\r\n            },\r\n            isSelected: this.currentState === 'processing',\r\n            load: async () => {\r\n                this.currentState = 'processing';\r\n                this.processingOrders = await getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            name: '待发货',\r\n            caption: (selected: boolean) => TabCaptionComponent(\"待发货\", \"truck\", color(selected)),\r\n            content: () => {\r\n                return <List items={this.completedOrders} item={{ render: this.renderOrder }} none=\"还没有已完成的订单\" />\r\n            },\r\n            isSelected: this.currentState === 'completed',\r\n            load: async () => {\r\n                this.currentState = 'completed';\r\n                this.completedOrders = await getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            name: '所有订单',\r\n            caption: (selected: boolean) => TabCaptionComponent(\"所有订单\", \"file-text-o\", color(selected)),\r\n            content: () => {\r\n                return <List items={this.allOrders} item={{ render: this.renderOrder }} none=\"还没有订单\" />\r\n            },\r\n            isSelected: this.currentState === 'all',\r\n            load: async () => {\r\n                this.currentState = 'all';\r\n                this.allOrders = await getMyOrders(this.currentState);\r\n            }\r\n\t\t}];\r\n\t\t*/\r\n\t\t// return <Page header=\"我的订单\" tabs={tabs} tabPosition=\"top\" />\r\n\t\t//return <Tabs tabs={tabs} tabPosition='top' />\r\n\t\treturn <Page header=\"我的订单\">\r\n\t\t\t<Tabs tabs={tabs} tabPosition=\"top\" />\r\n\t\t</Page>\r\n\t}\r\n}","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport { VPage, Page, BoxId, EasyDate, Ax, Tuid, nav, List, tv } from 'tonva-react';\r\nimport { COrder } from './COrder';\r\nimport { OrderItem } from './Order';\r\nimport { xs } from '../tools/browser';\r\nimport classNames from 'classnames';\r\nimport { observable, makeObservable } from 'mobx';\r\n//import { CartItem } from '../cart/Cart';\r\n\r\nexport class VOrderDetail extends VPage<COrder> {\r\n    /* orderTrans: any[] = [];\r\n\r\n    constructor(c: COrder) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            orderTrans: observable\r\n        });\r\n    } */\r\n\r\n    async open(order: any) {\r\n\r\n        this.openPage(this.page, order);\r\n    }\r\n\r\n\r\n    private packsRow = (item: any, index: number) => {\r\n        let { pack, quantity, price, currency } = item;\r\n\r\n        return <div key={index} className={classNames('px-2 py-2', index !== 0 ? 'border-top' : '')}>\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{parseFloat((price * quantity).toFixed(2))}</span>\r\n                    <small className=\"text-muted\">(¥{parseFloat(price.toFixed(2))} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    againCreatOrder = async (initialData: OrderItem[]) => {\r\n\t\t/*\r\n        let { uqs, currentSalesRegion, cCart } = this.controller.cApp;\r\n        let { product: p } = uqs;\r\n        let { PriceX } = p;\r\n        let promises: PromiseLike<void>[] = [];\r\n        initialData.forEach((e: any) => e.packs.forEach((v: any) => {\r\n            promises.push(PriceX.obj({ product: e.product, pack: v.pack, salesRegion: currentSalesRegion }))\r\n        }));\r\n        let prices: any[] = await Promise.all(promises);\r\n        let orderData: CartItem[] = [];\r\n        let productPromises: Promise<any>[] = [];\r\n        for (let key of initialData) {\r\n            let { product, packs } = key;\r\n            let filtPacksByProductId = prices.filter((v: any) => Tuid.equ(v.product, product) && v.discountinued === 0 && v.expireDate > Date.now());\r\n            if (!filtPacksByProductId.length) continue;\r\n            for (let i of packs) {\r\n                let findPack = filtPacksByProductId.find((v: any) => Tuid.equ(v.pack, i.pack));\r\n                if (!findPack) continue;\r\n                product = this.controller.cApp.getProduct(product.id);\r\n                productPromises.push(product.loadListItem());\r\n                orderData.push({\r\n                    product: product,\r\n                    packs: [{ pack: i.pack, quantity: i.quantity || 1, price: findPack.retail, retail: findPack.retail, currency: findPack.salesRegion?.obj?.currency }],\r\n                    $isSelected: true,\r\n                    $isDeleted: false,\r\n                    createdate: Date.now()\r\n                })\r\n            };\r\n        };\r\n        await Promise.all(productPromises);\r\n        orderData.forEach((v: any) => {\r\n            let newPrices: any[] = v.product?.prices || [];\r\n            let findPack = newPrices.find((i: any) => Tuid.equ(i.pack, v.packs[0].pack));\r\n            if (findPack) {\r\n                let { vipPrice, promotionPrice } = findPack;\r\n                v.packs[0].price = this.minPrice(vipPrice, promotionPrice) || v.packs[0].price;\r\n            };\r\n        });\r\n        cCart.againOrderCart(orderData);\r\n\t\t*/\r\n\t\tawait this.controller.cApp.store.cart.againCreatOrder(initialData);\r\n        nav.navigate('/cart');\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: any /* OrderItem */, index: number) => {\r\n        let { product, packs, param } = orderItem;\r\n        let { id } = product;\r\n        let { controller, packsRow } = this;\r\n        let transportation: any;\r\n        if (param?.transportation) {\r\n            let { carrier, waybillNumber } = param.transportation;\r\n            transportation = {transNumber: waybillNumber, expressLogistics: carrier};\r\n        };\r\n        let orderTransUI: JSX.Element;\r\n        if (transportation) orderTransUI = <span className=\"mr-2 cursor-pointer btn btn-sm btn-info\"\r\n            style={{ background: \"#17a2b8\" }}\r\n            onClick={() => controller.openOrderTrans(transportation)} >查看物流</span>;\r\n        return <div className=\"row my-1 w-100 mx-0\">\r\n            <div className=\"col-lg-6 pb-3\">{controller.renderOrderItemProduct(product)}</div>\r\n            <div className=\"col-lg-6\">{\r\n                packs.map((p:any, index:number) => {\r\n                    return packsRow(p, index);\r\n                })\r\n            }</div>\r\n            <div className=\"text-right w-100 px-3\">\r\n                <Ax className=\"mx-2 text-info font-weight-bold\" href={'/product/mscu/MSDS/' + id}>SDS</Ax>\r\n                {orderTransUI}\r\n                <div className=\"btn btn-sm btn-info float-left float-lg-right cursor-pointer\"\r\n                    style={{ background: \"#17a2b8\" }} onClick={() => { this.againCreatOrder([orderItem]) }}>\r\n                    再次购买\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private page = (order: any) => {\r\n\r\n        let { brief, data } = order;\r\n        let { id, no, state, description, date } = brief;\r\n        let { orderItems, currency, shippingContact, invoiceContact, invoiceType, invoiceInfo, amount, comments, couponOffsetAmount, couponRemitted\r\n            , freightFee, freightFeeRemitted } = data;\r\n        let couponUI;\r\n        if (couponOffsetAmount || couponRemitted) {\r\n            let offsetUI, remittedUI;\r\n            if (couponOffsetAmount) {\r\n                offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">折扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponOffsetAmount}</div>\r\n                </div>\r\n            }\r\n            if (couponRemitted) {\r\n                remittedUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">抵扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponRemitted}</div>\r\n                </div>\r\n            }\r\n            couponUI = <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">优惠券:</div>\r\n                <div className=\"col-9\">\r\n                    {offsetUI}\r\n                    {remittedUI}\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        /* let freightFeeUI, freightFeeRemittedUI;\r\n        if (freightFee) {\r\n            freightFeeUI = <>\r\n                <div className=\"text-right text-danger\"><small>¥</small>{freightFee}</div>\r\n            </>\r\n            if (freightFeeRemitted) {\r\n                freightFeeRemittedUI = <>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{freightFeeRemitted}(减免)</div>\r\n                </>\r\n            }\r\n        } */\r\n        let orderAgainUI = <div className=\"px-3 py-2 border-bottom\" style={{userSelect: \"none\"}}>\r\n            <span className=\"align-middle\">若需再次购买该订单中所有产品，请 </span>\r\n            <button className=\"btn btn-sm btn-secondary cursor-pointer\" title='可直接下单再次购买订单中产品'\r\n                style={{ background: \"#6c757d\" }}\r\n                onClick={() => { this.againCreatOrder(orderItems) }}>再次下单</button>\r\n            {/* <button className=\"btn btn-primary w-50\" onClick={async () => { this.controller.orderAgain(order.data) }}>再次下单</button> */}\r\n        </div>\r\n\r\n        let commentsUI = comments ? <div className=\"bg-white row no-gutters p-3 my-1\">\r\n            <div className=\"col-3 text-muted\">备注:</div>\r\n            <div className=\"col-9\">{comments}</div>\r\n        </div> : null;\r\n\r\n        let header: any\r\n        if (xs) header = <>订单详情: {no}</>            //orderAgainUI\r\n        let infoArr: any[] = [\r\n            { name: \"收货地址:\", value: tv(shippingContact), isShow: shippingContact },\r\n            { name: \"发票地址:\", value: tv(invoiceContact), isShow: invoiceContact },\r\n            { name: \"发票信息:\", value: invoiceTemplate(invoiceType, invoiceInfo), isShow: invoiceType || invoiceInfo },\r\n        ];\r\n        return <Page header={header} footer={<></>}>\r\n            {!xs && <div className=\"alert alert-info alert-signin mt-3\">订单编号 {no}</div>}\r\n            {orderAgainUI}\r\n            <List items={orderItems} item={{ render: this.renderOrderItem }} />\r\n            {\r\n                infoArr.map((el: any) => {\r\n                    if (!el.isShow) return null;\r\n                    return <div className=\"bg-white row no-gutters p-3 my-1\" key={el.name}>\r\n                        <div className=\"col-3 text-muted\">{el.name}</div>\r\n                        <div className=\"col-9\">{el.value}</div>\r\n                    </div>\r\n                })\r\n            }\r\n            {/* <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">运费:</div>\r\n                <div className=\"col-9\">{freightFeeUI}{freightFeeRemittedUI}</div>\r\n            </div> */}\r\n            {couponUI}\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">下单时间:</div>\r\n                <div className=\"col-9 text-right\"><EasyDate date={date} /></div>\r\n            </div>\r\n            {commentsUI}\r\n            <div className=\"bg-white p-3 my-1 text-right\">\r\n                <span className=\"text-danger font-weight-bold\">总金额: {amount}{tv(currency)}</span>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nfunction invoiceTemplate(invoiceType: BoxId, invoiceInfo: BoxId): JSX.Element {\r\n    return <>\r\n        {tv(invoiceType, invoiceTypeUI, undefined, () => <></>)}<br />\r\n        {tv(invoiceInfo, invoiceInfoUI, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nfunction invoiceTypeUI(values: any) {\r\n    let { id, description } = values;\r\n    return <>{description}</>;\r\n}\r\n\r\nfunction invoiceInfoUI(values: any) {\r\n    let { id, title, taxNo, address, telephone, bank, accountNo } = values;\r\n    return <>{title}</>;\r\n}","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, UiSchema, UiInputItem, Form, Context, tv, BoxId, FA, autoHideTips, Schema } from 'tonva-react';\r\nimport { CInvoiceInfo } from './CInvoiceInfo';\r\nimport { xs } from 'tools/browser';\r\nimport { VMeSideBar } from 'me/VMeSideBar';\r\nimport { CrPageHeaderTitle } from 'tools/pageHeaderTitle';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'title', type: 'string', required: false },\r\n    { name: 'taxNo', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: false },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'bank', type: 'string', required: false },\r\n    { name: 'accountNo', type: 'string', required: false },\r\n];\r\n\r\nconst uiSchema: UiSchema = {\r\n    items: {\r\n        id: { visible: false },\r\n        title: {\r\n            widget: 'text', label: '单位全称', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 200) ? '单位全称最多200个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        taxNo: {\r\n            widget: 'text', label: '纳税人识别码', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if (value) {\r\n                    value = value.trim();\r\n                    var regArr = [/^[\\da-z]{10,15}$/i, /^\\d{6}[\\da-z]{10,12}$/i, /^[a-z]\\d{6}[\\da-z]{9,11}$/i, /^[a-z]{2}\\d{6}[\\da-z]{8,10}$/i, /^\\d{14}[\\dx][\\da-z]{4,5}$/i, /^\\d{17}[\\dx][\\da-z]{1,2}$/i, /^[a-z]\\d{14}[\\dx][\\da-z]{3,4}$/i, /^[a-z]\\d{17}[\\dx][\\da-z]{0,1}$/i, /^[\\d]{6}[\\da-z]{13,14}$/i],\r\n                        j = regArr.length;\r\n                    for (var i = 0; i < j; i++) {\r\n                        if (regArr[i].test(value)) {\r\n                            return undefined;\r\n                        }\r\n                    }\r\n                    return '纳税人识别码格式不正确，请重新输入！';\r\n                }\r\n            }\r\n        } as UiInputItem,\r\n        address: {\r\n            widget: 'text', label: '注册地址', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 200) ? '注册地址最多200个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        telephone: {\r\n            widget: 'text', label: '注册电话', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if(value) value = value.trim();\r\n                if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n                    return \"注册电话格式不正确，请重新输入！\";\r\n                else\r\n                    return undefined;\r\n            }\r\n        } as UiInputItem,\r\n        bank: {\r\n            widget: 'text', label: '开户银行', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 100) ? '开户银行名称最多100个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        accountNo: {\r\n            widget: 'text', label: '银行账号', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if(value) value = value.trim();\r\n                // if (value && !/^([1-9]{1})(\\d{14}|\\d{17}|\\d{18}|\\d{15})$/.test(value))\r\n                /* 银行卡位数校验 现已开放 11-30位,后期可针对具体银行进行细化校验 */\r\n                /* 二次修改  客户银行卡号存在 0开头,暂时只校验数字及数位 */\r\n                if (value && !/^\\d{8,30}$/.test(value.replace(/\\s*/g, \"\")))\r\n                    // if (value && !/^([1-9]{1})(\\d{10,29})$/.test(value.replace(/\\s*/g, \"\")))\r\n                    return \"银行账号格式不正确，请重新输入！\";\r\n                else\r\n                    return undefined;\r\n            }\r\n        } as UiInputItem,\r\n        submit: { widget: 'button', label: '提交' },\r\n    }\r\n}\r\n\r\nconst commonRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: false,\r\n};\r\n\r\nconst valueAddedRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: false,\r\n}\r\n\r\nconst commonVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: true,\r\n};\r\n\r\nconst valueAddedVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: true,\r\n}\r\n\r\nexport class VInvoiceInfo extends VPage<CInvoiceInfo> {\r\n    private form: Form;\r\n    //@observable showTip: boolean = false;\t\r\n    //saveTip: string = \"\";\r\n    private saveTip = observable.box();\r\n    private invoiceInfoData: any;\r\n\r\n    constructor(c: CInvoiceInfo) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            invoiceType: observable,\r\n            InvoiceTypeChecked: observable\r\n        });\r\n    }\r\n\r\n    async open(origInvoice?: any) {\r\n        this.invoiceInfo(origInvoice);\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    invoiceInfo = (origInvoice?: any) => {\r\n        let { invoiceType, invoiceInfo } = origInvoice;\r\n        this.invoiceType = (invoiceType && invoiceType.id) || 1;\r\n        if (invoiceInfo) {\r\n            invoiceInfo.assure();\r\n            this.invoiceInfoData = { ...invoiceInfo.obj };\r\n        } else {\r\n            this.invoiceInfoData = { 'title': this.controller.cApp.currentUser?.defaultOrganizationName };\r\n        }\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { form } = context;\r\n        let { data } = form;\r\n        let invoice = {\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: data,\r\n        };\r\n        this.invoiceInfoData = data;\r\n\r\n        let tip: string;\r\n        try {\r\n            await this.controller.saveInvoiceInfo(invoice);\r\n            tip = \"发票信息已经保存\";\r\n        } catch (error) {\r\n            tip = \"发票信息保存失败，请稍后再试\";\r\n        }\r\n        //this.showTip = true;\r\n        //setTimeout(() => { this.showTip = false; }, 2000);\r\n        this.saveTip.set(tip);\r\n    }\r\n\r\n    private onSaveInvoice = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    invoiceType: number;\r\n\r\n    private buildForm(): JSX.Element {\r\n        let requiredFields: any = this.invoiceType === 1 ? commonRequired : valueAddedRequired;\r\n        let visibleFields: any = this.invoiceType === 1 ? commonVisible : valueAddedVisible;\r\n        schema.forEach(e => {\r\n            let { items } = uiSchema;\r\n            e.required = requiredFields[e.name];\r\n            items[e.name].visible = visibleFields[e.name];\r\n        });\r\n\r\n        return React.createElement(observer(() => {\r\n            return <Form ref={v => this.form = v} className=\"my-3\"\r\n                schema={schema}\r\n                uiSchema={uiSchema}\r\n                formData={this.invoiceInfoData}\r\n                onButtonClick={this.onFormButtonClick}\r\n                fieldLabelSize={3} />\r\n        }))\r\n    }\r\n\r\n    private onInvoiceTypeClick = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.invoiceType = parseInt(event.currentTarget.value);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let frm = this.buildForm();\r\n\r\n        /*\r\n        let tipUI = this.showTip ? (<div className=\"alert alert-primary\" role=\"alert\">\r\n            <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n            {this.saveTip}\r\n        </div>) : null;\r\n        */\r\n        let header = CrPageHeaderTitle('发票');\r\n        return <Page header={header}>\r\n            <div className=\"row mx-0 bg-light my-1\">\r\n                <div className=\"col-lg-3 d-none d-lg-block\">\r\n                    {this.controller.cApp.cMe.renderMeSideBar()}\r\n                </div>\r\n                <div className=\"col-lg-9 px-0\">\r\n                    {!xs && <div className=\"text-center mt-5\"><h1>发票</h1></div>}\r\n                    {this.renderInvoiceContent()}\r\n                </div>\r\n            </div>\r\n        </Page>\r\n    });\r\n\r\n    InvoiceTypeChecked: boolean;\r\n    render(param?: any): JSX.Element {\r\n        return React.createElement(observer(() => {\r\n            if (!this.InvoiceTypeChecked) {\r\n                let { origInvoice } = param;\r\n                this.invoiceInfo(origInvoice);\r\n                this.InvoiceTypeChecked = true;\r\n            };\r\n            return <>{this.renderInvoiceContent()}</>\r\n        }));\r\n    }\r\n\r\n    renderInvoiceContent = () => {\r\n        let frm = this.buildForm();\r\n        return <>\r\n            <div className=\"px-3 mx-auto\" style={{ maxWidth: !xs ? 600 : 'none' }}>\r\n                <div className=\"form-group row py-3 mb-1 bg-white\">\r\n                    <div className=\"col-12 col-sm-3 pb-2 text-muted\">发票类型:</div>\r\n                    <div className=\"col-12 col-sm-9\">\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"common\" value=\"1\"\r\n                                onChange={(event) => this.onInvoiceTypeClick(event)} checked={this.invoiceType === 1}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"common\">增值税普通发票</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"valueAdded\" value=\"2\"\r\n                                onChange={(event) => this.onInvoiceTypeClick(event)} checked={this.invoiceType === 2}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"valueAdded\">增值税专用发票</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"p-3 bg-white mx-auto\" style={{ maxWidth: !xs ? 600 : 'none' }}>\r\n                {frm}\r\n                <button type=\"button\"\r\n                    className=\"btn btn-primary w-100\"\r\n                    onClick={this.onSaveInvoice}>确定</button>\r\n                {/*tipUI*/}\r\n                {autoHideTips(this.saveTip, <div className=\"alert alert-primary\" role=\"alert\">\r\n                    <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                    {this.saveTip.get()}\r\n                </div>)}\r\n            </div>\r\n        </>\r\n    }\r\n}\r\n","import { CUqBase } from 'tapp';\r\nimport { VInvoiceInfo } from './VInvoiceInfo';\r\n//import { CCartApp } from 'CCartApp';\r\n//import { Tuid } from 'tonva-react';\r\n\r\nexport class CInvoiceInfo extends CUqBase {\r\n    fromOrderCreation: boolean;\r\n\r\n    async internalStart(origInvoice: any, fromOrderCreation: boolean) {\r\n        this.fromOrderCreation = fromOrderCreation;\r\n        this.openVPage(VInvoiceInfo, origInvoice);\r\n    }\r\n\r\n    async saveInvoiceInfo(invoice: any) {\r\n        let invoiceBox =  await this.saveInvoiceInfoData(invoice);\r\n        /* let { invoiceType, invoiceInfo } = invoice;\r\n        let newInvoiceInfo = await this.uqs.customer.InvoiceInfo.save(undefined, invoiceInfo);\r\n\r\n        let { id: newInvoiceInfoId } = newInvoiceInfo;\r\n        let invoiceBox = {\r\n            invoiceType: this.uqs.common.InvoiceType.boxId(invoiceType),\r\n            invoiceInfo: this.uqs.customer.InvoiceInfo.boxId(newInvoiceInfoId),\r\n        }\r\n        // if (isDefault === true || !this.fromOrderCreation) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoice(invoiceBox.invoiceType, invoiceBox.invoiceInfo);\r\n        // } */\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(invoiceBox);\r\n        }\r\n    }\r\n\r\n    async saveInvoiceInfoData(invoice: any) {\r\n        let { invoiceType, invoiceInfo } = invoice;\r\n        let newInvoiceInfo = await this.uqs.customer.InvoiceInfo.save(undefined, invoiceInfo);\r\n\r\n        let { id: newInvoiceInfoId } = newInvoiceInfo;\r\n        let invoiceBox = {\r\n            invoiceType: this.uqs.common.InvoiceType.boxId(invoiceType),\r\n            invoiceInfo: this.uqs.customer.InvoiceInfo.boxId(newInvoiceInfoId),\r\n        }\r\n        // if (isDefault === true || !this.fromOrderCreation) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoice(invoiceBox.invoiceType, invoiceBox.invoiceInfo);\r\n        // }\r\n        return invoiceBox;\r\n    }\r\n}","import { CartPackRow } from \"../store\";\r\n\r\nexport function groupByProduct(packItems: any[]) {\r\n    let result: any[] = [];\r\n    for (let packItem of packItems.sort((a, b) => a.price - b.price)) {\r\n        let { product, pack, quantity, price, retail, currency } = packItem;\r\n        let packRow: CartPackRow = {\r\n            pack: pack,\r\n            price: price,\r\n            retail: retail,\r\n            quantity: quantity,\r\n            currency: currency && currency.id\r\n        }\r\n        let cpi = result.find(e => e.product.id === product.id);\r\n        if (cpi === undefined) {\r\n            cpi = { product: product, packs: [] };\r\n            result.push(cpi);\r\n        }\r\n        cpi.packs.push(packRow);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function groupByProduct1(packItems: any[]) {\r\n    let result: any[] = [];\r\n    for (let packItem of packItems) {\r\n        let { product, pack, quantity, price, retail, currency, param } = packItem;\r\n        let packRow: CartPackRow = {\r\n            pack: pack,\r\n            price: price,\r\n            retail: retail,\r\n            quantity: quantity,\r\n            currency: currency && currency.id\r\n        }\r\n        let cpi = { product: product, packs: [packRow] };\r\n        let cparam = { param: param || undefined };\r\n        result.push({ ...cpi, ...cparam });\r\n    }\r\n    return result;\r\n}","/* eslint-disable */\r\nimport { UQs } from 'uq-app';\r\nimport { Tuid, BoxId } from 'tonva-react';\r\nimport { Order } from 'order/Order';\r\nimport moment from 'moment';\r\n\r\nexport const activityTime = {\r\n    startDate: '2020-09-01',\r\n    endDate: '2020-09-30'\r\n}\r\n\r\nexport class CouponBase {\r\n\r\n    constructor(protected id: BoxId, private code: number, expiredDate: Date, private isValid: boolean) {\r\n        this.expiredDate = new Date(expiredDate);\r\n    }\r\n\r\n    protected expiredDate: Date;\r\n\r\n    getCodeShow() {\r\n        let codeShow = String(this.code);\r\n        let p1 = codeShow.substr(0, 4);\r\n        let p2 = codeShow.substr(4);\r\n        return p1 + ' ' + p2;\r\n    }\r\n\r\n    isAvaliable() {\r\n        return this.isValid && this.expiredDate.getTime() > Date.now()\r\n    }\r\n}\r\n\r\nexport interface OrderPriceStrategy {\r\n\r\n    applyTo(order: Order, uqs: UQs): Promise<void>;\r\n}\r\n\r\nexport function createOrderPriceStrategy(couponData: any): OrderPriceStrategy {\r\n    let { id, code, discount, preferential, validitydate, isValid, types, discountSetting } = couponData;\r\n    switch (types) {\r\n        case \"coupon\":\r\n            if (discountSetting && discountSetting.length > 0)\r\n                return new VIPCard(id, code, validitydate, isValid, discountSetting);\r\n            else\r\n                return new Coupon(id, code, validitydate, isValid, discount, preferential);\r\n            break;\r\n        case \"coupon_sale\":\r\n            return new CouponSale(id, code, validitydate, isValid, discount, preferential);\r\n            break;\r\n        case \"vipcard\":\r\n            return new VIPCard(id, code, validitydate, isValid, discountSetting);\r\n            break;\r\n        case \"credits\":\r\n            return new Credits(id, code, validitydate, isValid);\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\n/**\r\n * 优惠券的价格验证策略：成交价格取优惠券折扣价与所购产品品牌折扣价中较高者\r\n */\r\nexport class Coupon extends CouponBase implements OrderPriceStrategy {\r\n\r\n    constructor(protected id: BoxId, code: number, expiredDate: Date, isValid: boolean, protected discount: number, protected preferential: number) {\r\n        super(id, code, expiredDate, isValid);\r\n    }\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id\r\n        if (this.isAvaliable()) {\r\n            if (this.discount) {\r\n                let { orderItems, salesRegion } = orderData;\r\n                if (orderItems !== undefined && orderItems.length > 0) {\r\n                    let { salesTask, product: uqsProduct } = uqs;\r\n                    let couponOffsetAmount = 0;\r\n                    for (let i = 0; i < orderItems.length; i++) {\r\n                        let oi = orderItems[i];\r\n\t\t\t\t\t\tlet { product, packs } = oi;\r\n\t\t\t\t\t\tlet { brand } = product;\r\n                        //let { ProductX } = uqsProduct;\r\n                        //let productTuid: any = await ProductX.load(product)\r\n                        // 获取品牌的折扣\r\n                        let { BottomDiscount } = salesTask;\r\n                        let brandDiscountMap: any = await BottomDiscount.obj({ brand, salesRegion: salesRegion.id });\r\n\r\n                        for (let j = 0; j < packs.length; j++) {\r\n                            let pk = packs[j];\r\n                            // 折扣价格取底线折扣价和折扣价格中较高者\r\n                            let lastDiscount = Math.min((brandDiscountMap ? brandDiscountMap.discount : 0), this.discount);\r\n                            let discountPrice = Math.round(pk.retail * (1 - lastDiscount));\r\n                            // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                            pk.price = Math.round(Math.min(pk.price, discountPrice));\r\n                            couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                        };\r\n                    };\r\n                    orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n\r\n                    /*\r\n                    if (agentPrices && agentPrices.length > 0) {\r\n                        let couponOffsetAmount = 0;\r\n                        for (let i = 0; i < orderItems.length; i++) {\r\n                            let oi = orderItems[i];\r\n                            let { product, packs } = oi;\r\n\r\n                            let eachProductAgentPrice = agentPrices[i];\r\n                            for (let j = 0; j < packs.length; j++) {\r\n                                let pk = packs[j];\r\n                                let agentPrice: any = eachProductAgentPrice.find(\r\n                                    (p: any) => p.product.id === product.id &&\r\n                                        p.pack.id === pk.pack.id &&\r\n                                        p.discountinued === 0 &&\r\n                                        p.expireDate > Date.now());\r\n                                if (!agentPrice) break;\r\n\r\n                                // 折扣价格取agentPrice和折扣价格中较高者\r\n                                let discountPrice = Math.round(Math.max(agentPrice.agentPrice, pk.retail * (1 - this.discount)));\r\n                                // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                                pk.price = Math.round(Math.min(pk.price, discountPrice));\r\n                                couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                            };\r\n                        };\r\n                        orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n                    };\r\n                    */\r\n                }\r\n            }\r\n\r\n            if (this.preferential) {\r\n                orderData.couponRemitted = this.preferential * -1;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 销售发放的优惠券的价格验证策略（未使用） \r\n */\r\nexport class CouponSale extends Coupon implements OrderPriceStrategy {\r\n\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id\r\n        if (this.isAvaliable()) {\r\n            if (this.discount) {\r\n                let { orderItems } = orderData;\r\n                if (orderItems !== undefined && orderItems.length > 0) {\r\n                    let couponOffsetAmount = 0;\r\n                    for (let i = 0; i < orderItems.length; i++) {\r\n                        let oi = orderItems[i];\r\n                        let { packs } = oi;\r\n\r\n                        for (let j = 0; j < packs.length; j++) {\r\n                            let pk = packs[j];\r\n                            // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                            pk.price = Math.round(Math.min(pk.price, pk.retail * (1 - this.discount)));\r\n                            couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                        };\r\n                    };\r\n                    orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n                }\r\n            }\r\n\r\n            if (this.preferential) {\r\n                orderData.couponRemitted = this.preferential * -1;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * VIP卡的价格策略:品牌包含在VIP卡折扣表中的，价格为目录价 * 对应的(1-discount)，否则为目录价\r\n */\r\nexport class VIPCard extends CouponBase implements OrderPriceStrategy {\r\n\r\n    constructor(protected id: BoxId, code: number, expiredDate: Date, isValid: boolean, private discountSetting: any[]) {\r\n        super(id, code, expiredDate, isValid);\r\n    }\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id\r\n        if (this.isAvaliable() && this.discountSetting && this.discountSetting.length > 0) {\r\n            let { orderItems } = orderData;\r\n            if (orderItems !== undefined && orderItems.length > 0) {\r\n                let couponOffsetAmount = 0;\r\n                for (let i = 0; i < orderItems.length; i++) {\r\n                    let oi = orderItems[i];\r\n\t\t\t\t\tlet { product, packs } = oi;\r\n\t\t\t\t\tlet { brand } = product;\r\n                    // 获取明细中产品的VIP卡折扣\r\n                    let thisDiscountSetting = this.discountSetting.find((e: any) => Tuid.equ(e.brand, brand));\r\n                    let discount = (thisDiscountSetting && thisDiscountSetting.discount) || 0;\r\n\r\n                    for (let j = 0; j < packs.length; j++) {\r\n                        let pk = packs[j];\r\n                        pk.priceInit = pk.price === Math.round(pk.retail * (1 - discount)) ? pk.retail : pk.price;\r\n                        // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                        pk.price = Math.round(Math.min(pk.price, pk.retail * (1 - discount)));\r\n                        couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                    };\r\n                };\r\n                orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport class Credits extends CouponBase implements OrderPriceStrategy {\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id;\r\n        if (this.isAvaliable()) {\r\n            let { orderItems } = orderData;\r\n            if (orderItems !== undefined && orderItems.length > 0) {\r\n                let couponOffsetAmount = 0;\r\n                for (let i = 0; i < orderItems.length; i++) {\r\n                    let oi = orderItems[i];\r\n                    let { packs } = oi;\r\n                    for (let j = 0; j < packs.length; j++) {\r\n                        let pk = packs[j];\r\n                        pk.priceInit = pk.price;\r\n                        //双倍积分 无折扣 取最大的价格 \r\n                        pk.price = Math.round(Math.max(pk.price, pk.retail));\r\n                        couponOffsetAmount = 0;\r\n                    };\r\n                };\r\n                orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n            }\r\n        }\r\n        let multiple = 2;\r\n        if (IsInActivePeriod()) multiple = 4;\r\n        orderData.point = Math.round(orderData.productAmount * multiple);\r\n    }\r\n}\r\n\r\n/**\r\n * 是否在活动期\r\n */\r\nexport function IsInActivePeriod() {\r\n    let { startDate, endDate } = activityTime;\r\n    let newDate = moment().format('YYYY-MM-DD');\r\n    return newDate >= startDate && newDate <= endDate;\r\n}","import * as React from 'react';\r\nimport { CCoupon } from './CCoupon';\r\nimport { View, FA, LMR } from 'tonva-react';\r\nimport { VIPCard, IsInActivePeriod, activityTime } from './Coupon';\r\nimport moment from 'moment';\r\nimport { xs } from '../tools/browser';\r\n\r\nfunction getTips(result: number, types: string, code: string) {\r\n    let invalidTip = `${COUPONBASE[types]['name']}【${code}】无效，请与您的专属销售人员联系。`;\r\n    switch (result) {\r\n        case 0:\r\n            invalidTip = `${COUPONBASE[types]['name']}【${code}】不存在，请与您的专属销售人员联系。`;\r\n            break;\r\n        case 2:\r\n            invalidTip = `该${COUPONBASE[types]['name']}【${code}】已失效，请与您的专属销售人员联系。`;\r\n            break;\r\n        case 4:\r\n            invalidTip = `该${COUPONBASE[types]['name']}【${code}】已经使用过，不可重复领用。`;\r\n            break;\r\n        case 6:\r\n            invalidTip = `您不能领用自己发出的${COUPONBASE[types]['name']}【${code}】。`;\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    return invalidTip;\r\n}\r\n\r\nexport class VCoupon extends View<CCoupon> {\r\n\r\n    protected coupon: any;\r\n    protected renderRight = (): JSX.Element => {\r\n        return null;\r\n    }\r\n\r\n    private showDiscountSetting = (vipCardId: VIPCard, event: React.MouseEvent) => {\r\n        event.stopPropagation();\r\n        this.controller.showDiscountSetting(vipCardId);\r\n    }\r\n\r\n    protected renderCardDescription = (): JSX.Element => {\r\n        let { discount } = this.coupon;\r\n        let cardDescription: any;\r\n        if (typeof discount === 'number') {\r\n            if (discount !== 0) {\r\n                let discountShow: any;\r\n                discountShow = (1 - discount) * 10;\r\n                cardDescription = <div className=\"mr-3 font-weight-bold text-danger\"><big>{discountShow === 10 ? '无折扣' : <>{discountShow.toFixed(1)} 折</>}</big></div>\r\n            }\r\n        }\r\n        return cardDescription;\r\n    }\r\n\r\n    protected renderActivityDescription = (): JSX.Element => {\r\n        return null;\r\n    }\r\n\r\n    protected renderCardReveal = (param: any): JSX.Element => {\r\n        let { isOpenMyCouponManage } = this.controller;\r\n        let { result, types, code, validitydate, useddate, expireddate } = this.coupon;\r\n        let CardReveal: any;\r\n        if (!isOpenMyCouponManage) {\r\n            CardReveal = <div className=\"alert alert-primary my-1\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {getTips(result, types, code)}\r\n            </div>\r\n        } else {\r\n            let showDate = validitydate !== undefined ? validitydate : (useddate !== undefined ? useddate : expireddate);\r\n            let newDate = getEasyDate(showDate);\r\n            let content = <div className=\"float-right pr-2\">\r\n                <div className=\"pb-1\">\r\n                    <FA name='th-large' className='mr-1 text-secondary' />\r\n                    <small className=\"ml-3\">{useddate !== undefined ? '使用日期' : '有效期'}: {newDate}</small>\r\n                    {/* <small className=\"ml-3\">{useddate !== undefined ? '使用日期' : '有效期'}: <EasyDate date={showDate} /></small> */}\r\n                </div>\r\n            </div>;\r\n            let left = <div>\r\n                <span className=\"text-body\"><small>{COUPONBASE[types]['name']}</small></span>\r\n            </div>;\r\n            CardReveal = <div className=\"py-3 pl-3 pr-2 mb-1 alert\" style={{ backgroundColor: '#e8eaeb', color: \"text-secondary\" }}>\r\n                <LMR left={left}>\r\n                    {content}\r\n                </LMR>\r\n            </div>\r\n        }\r\n        return CardReveal;\r\n    }\r\n\r\n    protected getCodeShow = (code: number) => {\r\n        let codeShow = String(code);\r\n        let p1 = codeShow.substr(0, 4);\r\n        let p2 = codeShow.substr(4);\r\n        codeShow = p1 + ' ' + p2;\r\n        return codeShow;\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        this.coupon = param\r\n        let { result, code, discount, validitydate, isValid, types } = param;\r\n\r\n        let couponUi;\r\n        if (result !== 1 || !isValid) {\r\n            // this.controller.cApp.currentCouponCode = undefined;\r\n            // couponUi = <div className=\"alert alert-primary my-1\" role=\"alert\">\r\n            //     <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n            //     {getTips(result, types, code)}\r\n            // </div>\r\n            couponUi = this.renderCardReveal(param);\r\n        } else {\r\n            // this.controller.cApp.currentCouponCode = code;\r\n            /*\r\n            let bcenter: any;\r\n            if (preferential)\r\n                bcenter = <div className=\"text-muted\"><small>优惠：<span className=\"mx-3\">￥{preferential}</span></small></div>;\r\n            */\r\n            let tipUI = null;\r\n            if (types !== 'credits') {\r\n                if (discount)\r\n                    tipUI = <small className=\"text-success cursor-pointer\">此{COUPONBASE[types]['name']}全场通用</small>\r\n                else\r\n                    tipUI = <small className=\"text-success cursor-pointer\" onClick={(event) => {\r\n                        event.stopPropagation();\r\n                        if (xs) this.showDiscountSetting(this.coupon, event);\r\n                        else this.controller.showModelCardDiscount(this.coupon)\r\n                    }}>查看适用品牌及折扣</small>\r\n            }\r\n            let newDate = getEasyDate(validitydate);\r\n\r\n            let content = <div className=\"float-right pr-2\">\r\n                <div className=\"pb-1\">\r\n                    <FA name='th-large' className='mr-1 text-warning' />{this.getCodeShow(code)}\r\n                    <small className=\"ml-3\">有效期：{newDate}</small>\r\n                </div>\r\n                <div className=\"float-right\">\r\n                    {tipUI}\r\n                </div>\r\n            </div>;\r\n\r\n            let left = <div>\r\n                <span className=\"text-muted\"><small>{COUPONBASE[types]['name']}</small></span>\r\n                {this.renderCardDescription()}\r\n            </div>;\r\n\r\n            couponUi = <div className=\"bg-white py-3 px-2 mb-1 reset-z-header-boxS\">\r\n                <LMR left={left} right={this.renderRight()}>\r\n                    {content}\r\n                </LMR>\r\n                {this.renderActivityDescription()}\r\n            </div>\r\n        }\r\n        return couponUi;\r\n    }\r\n}\r\n\r\nexport class VVIPCard extends VCoupon {\r\n\r\n    /*\r\n    private showDiscountSetting = (vipCardId: VIPCard, event: React.MouseEvent) => {\r\n        event.stopPropagation();\r\n        this.controller.showDiscountSetting(vipCardId);\r\n    }\r\n\r\n    protected renderRight = (): JSX.Element => {\r\n        return <span className=\"ml-3 my-3\" onClick={(event) => this.showDiscountSetting(this.coupon, event)}>\r\n            <FA name=\"chevron-right\" className=\"corsor-pointer\"></FA>\r\n        </span>;\r\n    }\r\n    */\r\n}\r\n\r\nexport class VCredits extends VCoupon {\r\n\r\n\r\n    protected renderCardDescription = (): JSX.Element => {\r\n        return <div className=\"font-weight-bold text-danger\">\r\n            <big>{\r\n                IsInActivePeriod() ? '限时四倍积分' : '双倍积分'\r\n            }</big>\r\n        </div>\r\n    }\r\n\r\n    protected renderActivityDescription = (): JSX.Element => {\r\n        let { startDate, endDate } = activityTime;\r\n        return IsInActivePeriod() ? <div className=\"text-danger mt-1\">\r\n            <small className=\"text-muted\">{startDate.replace(/-/g, '.')} 至 {endDate.replace(/-/g, '.')} 内下单可获四倍积分 </small>\r\n        </div> : null;\r\n    }\r\n\r\n    /*\r\n    render(param: any): JSX.Element {\r\n        let { coupon, onClick } = param;\r\n        this.coupon = coupon;\r\n        let { result, id, code, discount, preferential, validitydate, isValid, types } = param;\r\n\r\n        let couponUi;\r\n        if (result !== 1 || !isValid) {\r\n            // this.controller.cApp.currentCreditCode = undefined;\r\n            couponUi = <div className=\"alert alert-primary my-1\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {getTips(result, types, code)}\r\n            </div>\r\n        } else {\r\n            // this.controller.cApp.currentCreditCode = code;\r\n            let content = <div onClick={() => onClick(code)}>\r\n                <div className=\"pb-1\">\r\n                    <FA name='th-large' className='mr-1 text-warning' />{this.getCodeShow(code)}\r\n                    <small className=\"ml-3\">有效期：<EasyDate date={validitydate} /></small>\r\n                </div>\r\n                <div><small className=\"text-success\">此{cardTypeName[types]}全场通用</small></div>\r\n            </div>;\r\n\r\n            let left = <div onClick={() => onClick(code)}>\r\n                <span className=\"text-muted\"><small>{cardTypeName[types]}</small></span>\r\n                {this.renderCardDescription()}\r\n            </div>;\r\n\r\n            couponUi = <div className=\"bg-white p-3 mb-1\">\r\n                <LMR left={left}>\r\n                    {content}\r\n                </LMR>\r\n            </div>\r\n        }\r\n        return couponUi;\r\n    }\r\n    */\r\n}\r\n\r\nexport class VCouponUsed extends VCoupon {\r\n    protected renderCardReveal = (param: any): JSX.Element => {\r\n        let { validitydate, types, useddate, expireddate } = param;\r\n        let couponUi;\r\n        let showDate = validitydate !== undefined ? validitydate : (useddate !== undefined ? useddate : expireddate);\r\n        let newDate = getEasyDate(showDate);\r\n        let content = <div className=\"float-right pr-2\">\r\n            <div className=\"pb-1\">\r\n                <FA name='th-large' className='mr-1 text-secondary' />\r\n                <small className=\"ml-3\">{useddate !== undefined ? '使用日期' : '有效期'}: {newDate}</small>\r\n            </div>\r\n        </div>;\r\n        let left = <div>\r\n            <span className=\"text-body\"><small>{COUPONBASE[types]['name']}</small></span>\r\n        </div>;\r\n        couponUi = <div className=\"py-3 pl-3 pr-2 mb-1 alert\" style={{ backgroundColor: '#e8eaeb', color: \"text-secondary\" }}>\r\n            <LMR left={left}>\r\n                {content}\r\n            </LMR>\r\n        </div>\r\n        return couponUi;\r\n    }\r\n}\r\n\r\nexport function getEasyDate(validitydate: any) {\r\n    let date = moment(validitydate).format('YYYY-MM-DD').split('-');\r\n    // let date = new Date(validitydate).toLocaleDateString().split('/');\r\n    let year = new Date().getFullYear().toString();\r\n    return `${date[0] === year ? '' : (date[0] + '年')}${date[1]}月${date[2]}日`;\r\n}\r\n\r\nexport const COUPONBASE: any = {\r\n    'coupon': { 'name': '优惠券', 'view': VCoupon },\r\n    'credits': { 'name': '积分券', 'view': VCredits },\r\n    'vipcard': { 'name': 'VIP卡', 'view': VVIPCard }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, List, FA, LMR, autoHideTips } from 'tonva-react';\r\nimport { CCoupon } from './CCoupon';\r\nimport { observable } from 'mobx';\r\nimport { VVIPCard, VCoupon, VCredits } from './VVIPCard';\r\nimport { observer } from 'mobx-react';\r\nimport { xs } from 'tools/browser';\r\n\r\nexport class VCoupleAvailable extends VPage<CCoupon> {\r\n\r\n    private couponInput: HTMLInputElement;\r\n    private vipCardForWebUser: any;\r\n    private coupons: any[];\r\n\r\n\t//@observable tips: string;\r\n\tprivate tips = observable.box(null);\r\n    async open(param: any) {\r\n        let { vipCardForWebUser, couponsForWebUser } = param;\r\n        this.vipCardForWebUser = vipCardForWebUser;\r\n        this.coupons = couponsForWebUser.map((v: any) => v.coupon).concat(param.creditsForWebUser.map((v: any) => v.coupon));\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private applyCoupon = async () => {\r\n        let coupon = this.couponInput.value;\r\n        await this.applySelectedCoupon(coupon);\r\n    }\r\n\r\n    /**\r\n     * 应用选择的vipcard等 \r\n     */\r\n    private applySelectedCoupon = async (coupon: string) => {\r\n\t\tthis.tips.set(await this.controller.applySelectedCoupon(coupon));\r\n\t\t/*\r\n        this.tips = await this.controller.applySelectedCoupon(coupon);\r\n        //if (this.tips)\r\n\t\t//\tsetTimeout(() => this.tips = undefined, GLOABLE.TIPDISPLAYTIME);\r\n\t\t*/\r\n    }\r\n\r\n    private renderCoupon = (coupon: any) => {\r\n        let { result, code, types, discount } = coupon;\r\n        if (result === 1) {\r\n            // let content = this.renderVm(COUPONBASE[types]['view'], coupon);\r\n            let content = null;\r\n            if (types === \"coupon\")\r\n                content = discount ? this.renderVm(VCoupon, coupon) : this.renderVm(VVIPCard, coupon);\r\n            else if (types === \"credits\")\r\n                content = this.renderVm(VCredits, coupon);\r\n            return <div className=\"d-block\">\r\n                <div className=\"px-2 bg-white\" onClick={() => this.applySelectedCoupon(code)}>\r\n                    {content}\r\n                </div>\r\n            </div>\r\n        } else\r\n            return null;\r\n    }\r\n\r\n\t/*\r\n    private tipsUI = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        return tipsUI;\r\n\t})\r\n\t*/\r\n\r\n    private page = observer(() => {\r\n\r\n        let vipCardUI;\r\n        if (this.vipCardForWebUser) {\r\n            let { coupon } = this.vipCardForWebUser;\r\n            vipCardUI = <div onClick={() => this.applySelectedCoupon(coupon.code)}>{this.renderVm(VVIPCard, coupon)}</div>\r\n        }\r\n\r\n        let right = <button className=\"btn btn-primary w-100\" onClick={this.applyCoupon}>使用</button>\r\n\r\n        return <Page header=\"可用优惠\"> \r\n            {this.renderContent({right:right,vipCardUI:vipCardUI})}\r\n            {this.controller.renderModelCardDiscount()}\r\n        </Page >\r\n    })\r\n\r\n    renderContent = (param: any) => {\r\n        let { right, vipCardUI } = param;\r\n        let left = <div className=\"d-flex align-items-center mr-3\"><div className=\"align-middle\">优惠卡/券:</div></div>\r\n        return <>\r\n            <div className=\"px-2 py-3 reset-z-header-boxS\">\r\n                <LMR left={left} right={right}>\r\n                    <input ref={v => this.couponInput = v} type=\"number\" className=\"form-control\"></input>\r\n                </LMR>\r\n                {/*React.createElement(this.tipsUI)*/}\r\n                {autoHideTips(this.tips,\r\n                    <div className=\"alert alert-primary\" role=\"alert\">\r\n                        <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                        {this.tips.get()}\r\n                    </div>\r\n                )}\r\n            </div >\r\n            <div className=\"px-2 bg-white\">\r\n                {vipCardUI}\r\n            </div>\r\n            <List items={this.coupons} item={{ render: this.renderCoupon }}\r\n                none={ <div className=\"w-100 d-flex justify-content-center text-secondary my-3\">无可用卡券</div> } ></List>\r\n        </>\r\n    }\r\n\r\n    render(param?: any): JSX.Element {\r\n        let { vipCardForWebUser, couponsForWebUser } = param;\r\n        this.vipCardForWebUser = vipCardForWebUser;\r\n        this.coupons = couponsForWebUser.map((v: any) => v.coupon).concat(param.creditsForWebUser.map((v: any) => v.coupon));\r\n        let vipCardUI:any;\r\n        if (this.vipCardForWebUser) {\r\n            let { coupon } = this.vipCardForWebUser;\r\n            vipCardUI = <div onClick={() => this.applySelectedCoupon(coupon.code)}>{this.renderVm(VVIPCard, coupon)}</div>;\r\n        }\r\n        \r\n        let right = <button className=\"btn btn-primary w-3c\" onClick={this.applyCoupon}>使用</button>\r\n        return React.createElement(observer(() => { \r\n            return <div style={{width:!xs ? 500 :'none'}}>\r\n                {this.renderContent({right:right,vipCardUI:vipCardUI})}\r\n                {this.controller.cApp.cCoupon.renderModelCardDiscount()}\r\n            </div>\r\n        }))\r\n    }\r\n}\r\n\r\n/*\r\n\r\n            <div className=\"px-2 py-3\">\r\n                <div className=\"row pr-3 my-1\">\r\n                    <div className=\"col-4 col-sm-2 d-flex align-items-center text-muted\"><span className=\"align-middle\">优惠卡券:</span></div>\r\n                    <div className=\"col-8 col-sm-10 d-flex\">\r\n                        <input ref={v => this.couponInput = v} type=\"number\" className=\"form-control\"></input>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row my-1\">\r\n                    <div className=\"col-12\">\r\n                        <button className=\"btn btn-primary w-100\" onClick={this.applyCoupon}>使用填写的卡券</button>\r\n                    </div>\r\n                </div>\r\n                {React.createElement(this.tipsUI)}\r\n            </div>\r\n*/","import { VPage, Page } from 'tonva-react';\r\nimport { COrder } from './COrder';\r\nimport { xs } from '../tools/browser';\r\n\r\nexport class VEpecOrderError extends VPage<COrder> {\r\n\r\n    async open(error: any) {\r\n        document.body.scrollIntoView();\r\n        this.openPage(this.page, error);\r\n    }\r\n\r\n    private page = (error: any) => {\r\n        let { message } = error;\r\n        if (!message)\r\n            message = '未知原因';\r\n        let header: any;\r\n        if (xs)\r\n            header = '下单失败';\r\n        return <Page header={header}>\r\n            <div className=\"alert alert-warning mt-3\">\r\n                <h3>下单失败</h3>\r\n                <p>失败原因:{message}</p>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport { Page, tv, VPage } from 'tonva-react';\r\nimport { COrder } from './COrder';\r\nimport { xs } from 'tools/browser';\r\nimport classNames from 'classnames';\r\nimport moment from 'moment';\r\n\r\nexport class VOrderTrans extends VPage<COrder> {\r\n\r\n    async open(orderTrans: any) {\r\n        document.documentElement.scrollIntoView();\r\n        this.openPage(this.page, orderTrans);\r\n    }\r\n\r\n    private page = (orderTrans: any) => {\r\n        let { transNumber, orderTrackRult, expressLogistics } = orderTrans;\r\n        let orderTrackUI: JSX.Element;\r\n        if (orderTrackRult) {\r\n            let { result, time:resTime, remark:resRemark, steps } = orderTrackRult;\r\n            let { step } = steps;\r\n            if (!step?.length) { step = [{ time: resTime || Date.now(), remark: \"查无结果\" }]; };\r\n            orderTrackUI = <ul className=\"list-unstyled mt-2\">\r\n                {step.sort((a: any, b: any) => new Date(b.time).getTime() - new Date(a.time).getTime())\r\n                .map((el: any, index: number) => {\r\n                    if (!el) return;\r\n                    let { time, remark } = el;\r\n                    let ina = index === 0 ? \"start\" : (index !== step.length - 1 ? \"\" : \"end\");\r\n                    let dYear = moment(time).format(\"YYYY.MM.DD\");\r\n                    let dTime = moment(time).format(\"HH:mm\");\r\n                    return <li key={index} className={classNames(\"d-flex m-0 step\", ina)}>\r\n                        <div className=\"datetime\">{dYear}<br />{dTime}</div>\r\n                        <div className=\"step-icon\"></div>\r\n                        <div className=\"text col-8 pr-0\">{remark}</div>\r\n                    </li>\r\n                })}\r\n            </ul>;\r\n        } else {\r\n            orderTrackUI = <div className=\"text-secondary p-3\">暂无结果,请自行查询</div>\r\n        };\r\n        let header: any;\r\n        if (xs) header = <>订单跟踪</>;\r\n        return <Page header={header} footer={<></>}>\r\n            {!xs && <h1 className=\"mt-4 mb-3 text-center\">订单跟踪</h1>}\r\n            <div className=\"result-body rounded-sm pt-3\" style={{ background: \"#f5f5f5\" }}>\r\n                <div className=\"row mx-0 justify-content-between p-2 pb-3 border-bottom\">\r\n                    <span className=\"col-12 col-sm-6\"><span className=\"rz-user-select\">发运方式：</span><strong>{tv(expressLogistics, (v: any) => <>{v.name}</>)}</strong></span>\r\n                    <span className=\"col-12 col-sm-6\"><span className=\"rz-user-select\">快递单号：</span><strong>{transNumber}</strong></span>\r\n                </div>\r\n                {orderTrackUI}\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import { GLOABLE } from \"global\";\r\nimport { CApp } from \"tapp\";\r\n\r\nexport interface IActivePushOrder {\r\n    maxAmount: boolean;\r\n    pushOrder(orderRes: any): Promise<void>;\r\n}\r\n\r\nexport function ActivePushOrder(cApp: CApp): IActivePushOrder {\r\n    let type: any = cApp.currentUser?.agtCustomerType;\r\n    switch (type) {\r\n        case \"EPEC\":\r\n            return new PushOrderEpec(cApp);\r\n        default:\r\n            return new PushOrder(cApp);\r\n    };\r\n}\r\n\r\nexport class PushOrder {\r\n    cApp: CApp;\r\n    constructor(res: any) {\r\n        this.cApp = res;\r\n    }\r\n\r\n    get maxAmount() { return true };\r\n\r\n    pushOrder = async (orderRes: any) => {\r\n        this.cApp.cOrder.openOrderSuccess(orderRes);\r\n    };\r\n};\r\n\r\nexport class PushOrderEpec extends PushOrder {\r\n\r\n    get maxAmount() { return this.cApp.cOrder.orderData.amount <= 500000; };\r\n\r\n    pushOrder = async (orderRes: any) => {\r\n        // epec客户下单后要求跳转到指定的url\r\n        try {\r\n            let { id: orderId, no } = orderRes;\r\n            let epecOrder = this.cApp.cOrder.orderData.getDataForSave2();\r\n            epecOrder.id = orderId;\r\n            epecOrder.no = no;\r\n            epecOrder.type = 1;\r\n            let rep = await window.fetch(GLOABLE.EPEC.PUSHORDERURL, {\r\n                method: 'post',\r\n                mode: \"cors\",\r\n                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },\r\n                body: JSON.stringify(epecOrder)\r\n            });\r\n            let { ok, status } = rep;\r\n            if (ok) {\r\n                let url = await rep.json();\r\n                if (url) {\r\n                    window.location.href = url;\r\n                    return;\r\n                };\r\n            } else {\r\n                switch (status) {\r\n                    case 500:\r\n                        let repContent = await rep.json();\r\n                        this.cApp.cOrder.openEpecOrderError(repContent.message);\r\n                        return;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        } catch (error:any) {\r\n            console.log('epec-error', error.message);\r\n        };\r\n        this.cApp.cOrder.openOrderSuccess(orderRes);\r\n    };\r\n}\r\n","import { observable, makeObservable } from 'mobx';\r\nimport { BoxId, Context, env, nav, QueryPager } from 'tonva-react';\r\nimport { CApp, CUqBase } from 'tapp';\r\nimport { VCreateOrder } from './VCreateOrder';\r\nimport { Order, OrderItem } from './Order';\r\nimport { OrderSuccess } from './OrderSuccess';\r\nimport { CSelectShippingContact, CSelectInvoiceContact } from '../customer/CSelectContact';\r\nimport { VMyOrders } from './VMyOrders';\r\nimport { VOrderDetail } from './VOrderDetail';\r\nimport { CInvoiceInfo } from '../customer/CInvoiceInfo';\r\nimport { groupByProduct1 } from '../tools/groupByProduct';\r\nimport { CartItem, CartPackRow } from '../store';\r\nimport { createOrderPriceStrategy, OrderPriceStrategy } from 'coupon/Coupon';\r\nimport { Product } from '../store';\r\nimport { VContact } from 'customer/VContact';\r\nimport { VCity, VCounty, VProvince } from '../customer/VAddress';\r\nimport { GLOABLE } from 'global';\r\nimport { VInvoiceInfo } from 'customer/VInvoiceInfo';\r\nimport { VCoupleAvailable } from 'coupon/VCouponAvailable';\r\nimport { VEpecOrderError } from './VEpecOrderError';\r\nimport { VOrderTrans } from './VOrderTrans';\r\nimport { VError } from '../tools/VError';\r\nimport { ActivePushOrder, IActivePushOrder } from './ActivePushOrder';\r\nimport { OrderDetail, DxOrderMainState, OrderMain, OrderMainEx } from '../uq-app/uqs/JkOrder/JkOrder';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nconst FREIGHTFEEFIXED = 12;\r\nconst FREIGHTFEEREMITTEDSTARTPOINT = 100;\r\n\r\nexport class COrder extends CUqBase {\r\n    // --todo 废弃\r\n    orderPageStart: number = 1000000000;    /* 订单历史记录分页 pageStart */\r\n    getUserOrders: any[] = [];  /* 获取用户所有订单 */\r\n\r\n    orderData: Order = new Order();\r\n    activePushOrder: IActivePushOrder = ActivePushOrder(this.cApp);\r\n    /**\r\n     * 存储已经被应用的卡券，以便在使用后（下单后）将其删除\r\n     */\r\n    couponAppliedData: any = {};\r\n\r\n    replyToContactType: string;\r\n    modalTitle: any;\r\n    modalTitleS: { [desc: string]: any } = {\r\n        'contactList': { id: 1, title: '地址管理', preLevel: '' },\r\n        'contactInfo': { id: 2, title: '地址信息', preLevel: 'contactList' },\r\n        'provinceChoice': { id: 3, title: '所在省市', preLevel: 'contactInfo' },\r\n        'cityChoice': { id: 4, title: '所在城市', preLevel: 'provinceChoice' },\r\n        'countyChoice': { id: 5, title: '所在区县', preLevel: 'cityChoice' },\r\n        'invoiceInfo': { id: 6, title: '发票信息', preLevel: '' },\r\n        'validCard': { id: 7, title: '可用优惠', preLevel: '' },\r\n    };\r\n\r\n    editContact: any;\r\n    provinces: any[] = [];\r\n    cities: any[] = [];\r\n    counties: any[] = [];\r\n    addressId: any;\r\n\r\n    hasAnyCoupon: boolean;\r\n    /**\r\n     * 当前webuser对应的buyeraccount，用来设置订单中的buyeraccount\r\n     */\r\n    buyerAccounts: any[] = [];\r\n    validCardForWebUser: any;\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            orderPageStart: observable,\r\n            getUserOrders: observable,\r\n            activePushOrder: observable,\r\n            orderData: observable,\r\n            couponAppliedData: observable,\r\n            replyToContactType: observable,\r\n            modalTitle: observable,\r\n            modalTitleS: observable,\r\n            editContact: observable,\r\n            provinces: observable,\r\n            cities: observable,\r\n            counties: observable,\r\n            addressId: observable,\r\n            buyerAccounts: observable,\r\n            validCardForWebUser: observable\r\n        });\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n    }\r\n\r\n    initOrderFreightFee = () => {// 运费和运费减免\r\n        this.orderData.freightFee = FREIGHTFEEFIXED;\r\n        if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n            this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n        else\r\n            this.orderData.freightFeeRemitted = 0;\r\n    }\r\n\r\n    createOrderFromCart = async (cartItems: CartItem[]) => {\r\n        let { cApp, uqs } = this;\r\n        let { currentUser, currentSalesRegion, cCoupon } = cApp;\r\n        this.orderData.webUser = currentUser.id;\r\n        this.orderData.salesRegion = currentSalesRegion.id;\r\n        this.removeCoupon();\r\n        this.hasAnyCoupon = await this.hasCoupons();\r\n\r\n        let buyerAccountQResult = await uqs.webuser.WebUserBuyerAccount.query({ webUser: currentUser.id })\r\n        if (buyerAccountQResult) {\r\n            this.buyerAccounts = buyerAccountQResult.ret;\r\n            if (this.buyerAccounts && this.buyerAccounts.length === 1) {\r\n                this.orderData.customer = this.buyerAccounts[0].buyerAccount;\r\n            }\r\n        }\r\n\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceContact === undefined) {\r\n            this.orderData.invoiceContact = await this.getDefaultInvoiceContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceType === undefined) {\r\n            this.orderData.invoiceType = await this.getDefaultInvoiceType();\r\n        }\r\n\r\n        if (this.orderData.invoiceInfo === undefined) {\r\n            this.orderData.invoiceInfo = await this.getDefaultInvoiceInfo();\r\n        }\r\n\r\n        if (cartItems !== undefined && cartItems.length > 0) {\r\n            this.orderData.currency = cartItems[0].packs[0].currency;\r\n            this.orderData.orderItems = cartItems.map(e => {\r\n                let { product, packs } = e;\r\n                var item = new OrderItem(product);\r\n                item.packs = packs.map((v: any) => { return { ...v } }).filter((v: any) => v.quantity > 0 && v.price);\r\n                item.packs.forEach(pk => {\r\n                    pk.priceInit = pk.price;\r\n                })\r\n                return item;\r\n            });\r\n\r\n            // 运费和运费减免\r\n            this.initOrderFreightFee();\r\n        }\r\n\r\n        /*\r\n        let currentCode = currentCouponCode || currentCreditCode;\r\n        if (currentCode) {\r\n            let coupon = await cCoupon.getCouponValidationResult(currentCode);\r\n            if (coupon.result === 1)\r\n                this.applyCoupon(coupon);\r\n            else {\r\n                this.cApp.currentCouponCode = undefined;\r\n                this.cApp.currentCreditCode = undefined;\r\n            }\r\n        }\r\n        */\r\n        // 如果当前webuser有VIP卡，默认下单时使用其VIP卡\r\n        let { webUserVIPCard } = currentUser;\r\n        if (webUserVIPCard !== undefined) {\r\n            let coupon = await cCoupon.getCouponValidationResult(\r\n                webUserVIPCard.vipCardCode.toString()\r\n            );\r\n            let { result, types, id } = coupon;\r\n            if (result === 1) {\r\n                if (types === \"vipcard\" || types === \"coupon\") {\r\n                    coupon.discountSetting = await cCoupon.getValidDiscounts(types, id);\r\n                }\r\n                this.applyCoupon(coupon);\r\n            }\r\n        };\r\n        this.activePushOrder = ActivePushOrder(this.cApp);\r\n        this.openVPage(VCreateOrder);\r\n    }\r\n\r\n    private defaultSetting: any;\r\n    private async getDefaultSetting() {\r\n        if (this.defaultSetting) return this.defaultSetting;\r\n        let { currentUser } = this.cApp;\r\n        return this.defaultSetting = await currentUser.getSetting() || {};\r\n    }\r\n\r\n    private contact0: BoxId;\r\n    private async getContact(): Promise<BoxId> {\r\n        if (this.contact0 === null) return;\r\n        if (this.contact0 !== undefined) return this.contact0;\r\n        let { currentUser } = this.cApp;\r\n        let contactArr = await currentUser.getContacts();\r\n        if (contactArr === undefined || contactArr.length === 0) {\r\n            this.contact0 = null;\r\n            return;\r\n        }\r\n        return this.contact0 = contactArr[0].contact;\r\n    }\r\n\r\n    private async getDefaultShippingContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.shippingContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceType() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceType;\r\n    }\r\n\r\n    private async getDefaultInvoiceInfo() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceInfo;\r\n    }\r\n\r\n\r\n    orderAgain = async (data: any) => {\r\n        let { orderItems } = data;\r\n\r\n        orderItems = orderItems.map((el: CartItem) => {\r\n            return {\r\n                product: el.product,\r\n                packs: el.packs,\r\n                $isDeleted: false,\r\n                $isSelected: true,\r\n                createdate: 'undefined'\r\n            }\r\n        })\r\n        // console.log('orderItems', orderItems);\r\n        await this.createOrderFromCart(orderItems)\r\n    }\r\n\r\n    /**\r\n     * 提交订单\r\n     */\r\n    submitOrder = async () => {\r\n        let { uqs, store, currentUser } = this.cApp;\r\n        let { order, webuser, customer } = uqs;\r\n        let { orderItems } = this.orderData;\r\n        this.initOrderFreightFee();\r\n        let result: any = await order.Order.save(\"order\", this.orderData.getDataForSave());\r\n        let { id: orderId, no, flow, state } = result;\r\n        await order.Order.action(orderId, flow, state, \"submit\");\r\n\r\n        // 如果使用了coupon/credits，需要将其标记为已使用\r\n        let { id: couponId, types } = this.couponAppliedData;\r\n        if (couponId) {\r\n            let nowDate = new Date();\r\n            let usedDate = `${nowDate.getFullYear()}-${nowDate.getMonth() + 1}-${nowDate.getDate()}`;\r\n            switch (types) {\r\n                case 'coupon':\r\n                    if (currentUser.hasCustomer) {\r\n                        let customerId = currentUser.currentCustomer.id;\r\n                        customer.CustomerCoupon.del({ customer: customerId, coupon: couponId, arr1: [{ couponType: 1 }] });\r\n                        customer.CustomerCouponUsed.add({ customer: customerId, arr1: [{ coupon: couponId, usedDate: usedDate }] });\r\n                    } else {\r\n                        webuser.WebUserCoupon.del({ webUser: currentUser.id, coupon: couponId, arr1: [{ couponType: 1 }] });\r\n                        webuser.WebUserCouponUsed.add({ webUser: currentUser.id, arr1: [{ coupon: couponId, usedDate: usedDate }] });\r\n                    };\r\n                    break;\r\n                case 'credits':\r\n                    if (currentUser.hasCustomer) {\r\n                        let customerId = currentUser.currentCustomer.id;\r\n                        customer.CustomerCredits.del({ customer: customerId, arr1: [{ credits: couponId }] });\r\n                        customer.CustomerCreditsUsed.add({ customer: customerId, credits: couponId, arr1: [{ saleOrderItem: no, usedDate: usedDate }] });\r\n                    } else {\r\n                        webuser.WebUserCredits.del({ webUser: currentUser.id, arr1: [{ credits: couponId }] });\r\n                        webuser.WebUserCreditsUsed.add({ webUser: currentUser.id, credits: couponId, arr1: [{ saleOrder: no, usedDate: usedDate }] });\r\n                    };\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        let param: [{ productId: number, packId: number }] = [] as any;\r\n        orderItems.forEach(e => {\r\n            e.packs.forEach(v => {\r\n                param.push({ productId: e.product.id, packId: v.pack.id })\r\n            })\r\n        });\r\n        store.cart.removeItem(param);\r\n        /* pushOrder 不同客户调用不同的pushOrder */\r\n        // await this.activePushOrder.pushOrder(result);\r\n        /* --------------- epec下单 已整理,中间部分弃用 --------------- */\r\n        // epec客户下单后要求跳转到指定的url\r\n        let epecOrder = this.orderData.getDataForSave2();\r\n        epecOrder.id = orderId;\r\n        epecOrder.no = no;\r\n        epecOrder.type = 1;\r\n        try {\r\n            let rep = await window.fetch(GLOABLE.EPEC.PUSHORDERURL, {\r\n                method: 'post',\r\n                mode:\"cors\",\r\n                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },\r\n                body: JSON.stringify(epecOrder)\r\n            });\r\n            let { ok, status } = rep;\r\n            if (ok) {\r\n                let url = await rep.json();\r\n                if (url) {\r\n                    window.location.href = url;\r\n                    return;\r\n                }\r\n            } else {\r\n                switch (status) {\r\n                    case 500:\r\n                        let repContent = await rep.json();\r\n                        this.openVPage(VEpecOrderError, { message: repContent.message });\r\n                        return;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        } catch (error) {\r\n\r\n        }\r\n        /* --------------- epec下单 已整理,中间部分弃用 --------------- */\r\n        // 打开下单成功显示界面\r\n        nav.popTo(this.cApp.topKey);\r\n        this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    openOrderSuccess(result:any) {\r\n        nav.popTo(this.cApp.topKey);\r\n        this.openVPage(OrderSuccess, result);\r\n    };\r\n\r\n    openEpecOrderError(message:any) {\r\n        this.openVPage(VEpecOrderError, { message: message });\r\n    };\r\n\r\n    onSelectShippingContact = async () => {\r\n        let cSelect = this.newC(CSelectShippingContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        this.orderData.shippingContact = contactBox;\r\n    }\r\n\r\n    onSelectInvoiceContact = async () => {\r\n        let cSelect = this.newC(CSelectInvoiceContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        this.orderData.invoiceContact = contactBox;\r\n    }\r\n\r\n    /**\r\n     * 打开输入或选择使用卡券界面\r\n     */\r\n    onCouponEdit = async () => {\r\n        let { cCoupon } = this.cApp;\r\n        let coupon = await cCoupon.call<any>(this.orderData.coupon);\r\n        if (coupon) {\r\n            await this.applyCoupon(coupon);\r\n        }\r\n    }\r\n\r\n    private hasCoupons = async (): Promise<boolean> => {\r\n        let { /* cCoupon, */ currentUser } = this.cApp;\r\n        // let { id: currentUserId } = currentUser;\r\n        let getValidCredits = await currentUser.getValidCredits();\r\n        if (getValidCredits && getValidCredits.length > 0)\r\n            return true;\r\n        let validCoupons = await currentUser.getValidCoupons();\r\n        // let validCoupons = await cCoupon.getValidCouponsForWebUser(currentUserId);\r\n        if (validCoupons && validCoupons.length > 0)\r\n            return true;\r\n        /* let validCredits = await cCoupon.getValidCreditsForWebUser(currentUserId);\r\n        if (validCredits && validCoupons.length > 0)\r\n            return true; */\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 使用优惠券后计算折扣金额和抵扣额\r\n     */\r\n    applyCoupon = async (coupon: any) => {\r\n\r\n        this.removeCoupon();\r\n        let { result: validationResult, validitydate, isValid } = coupon;\r\n        if (validationResult === 1 && isValid === 1 && new Date(validitydate).getTime() > Date.now()) {\r\n            this.couponAppliedData = coupon;\r\n            let orderPriceStrategy: OrderPriceStrategy = createOrderPriceStrategy(coupon);\r\n            orderPriceStrategy.applyTo(this.orderData, this.uqs);\r\n            /*\r\n            this.orderData.coupon = id;\r\n            if (types === \"coupon\" || types === \"vipcard\") {\r\n                // if (discount) {\r\n                // 仍兼容原来统一折扣的模式\r\n                if ((discountSetting && discountSetting.length > 0) || discount) {\r\n                    let { orderData, uqs, cApp } = this;\r\n                    let { orderItems } = orderData;\r\n                    let { AgentPrice } = uqs.product;\r\n                    if (orderItems !== undefined && orderItems.length > 0) {\r\n                        // 获取每个明细中产品的agentprice;\r\n                        let promises: PromiseLike<any>[] = [];\r\n                        orderItems.forEach(e => {\r\n                            promises.push(AgentPrice.table({ product: e.product.id, salesRegion: cApp.currentSalesRegion.id }));\r\n                        });\r\n                        let agentPrices = await Promise.all(promises);\r\n    \r\n                        if (agentPrices && agentPrices.length > 0) {\r\n                            let couponOffsetAmount = 0;\r\n                            for (let i = 0; i < orderItems.length; i++) {\r\n                                let oi = orderItems[i];\r\n                                let { product, packs } = oi;\r\n                                // 获取明细中产品的优惠券/VIP卡折扣\r\n                                if (discountSetting) {\r\n                                    let thisDiscountSetting = discountSetting.find((e: any) => Tuid.equ(e.brand, product.obj.brand));\r\n                                    discount = (thisDiscountSetting && thisDiscountSetting.discount) || discount || 0;\r\n                                }\r\n    \r\n                                let eachProductAgentPrice = agentPrices[i];\r\n                                for (let j = 0; j < packs.length; j++) {\r\n                                    let pk = packs[j];\r\n                                    let agentPrice: any = eachProductAgentPrice.find(\r\n                                        (p: any) => p.product.id === product.id &&\r\n                                            p.pack.id === pk.pack.id &&\r\n                                            p.discountinued === 0 &&\r\n                                            p.expireDate > Date.now());\r\n                                    if (!agentPrice) break;\r\n    \r\n                                    // 折扣价格取agentPrice和折扣价格中较高者\r\n                                    let discountPrice = Math.round(Math.max(agentPrice.agentPrice, pk.retail * (1 - discount)));\r\n                                    // pk.price = Math.round(Math.max(agentPrice.agentPrice, pk.retail * (1 - discount)));\r\n                                    // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                                    pk.price = Math.round(Math.min(pk.price, discountPrice));\r\n                                    couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                                };\r\n                            };\r\n                            this.orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n                        };\r\n                    }\r\n                }\r\n                if (preferential) {\r\n                    this.orderData.couponRemitted = preferential * -1;\r\n                }\r\n                // 运费和运费减免\r\n                this.orderData.freightFee = FREIGHTFEEFIXED;\r\n                if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                    this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n            }\r\n    \r\n            if (types === \"credits\") {\r\n                this.orderData.point = Math.round(this.orderData.productAmount * 2);\r\n            }\r\n            */\r\n            // 运费和运费减免\r\n            this.initOrderFreightFee();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 删除优惠券\r\n     */\r\n    removeCoupon = () => {\r\n        this.orderData.coupon = undefined;\r\n        this.couponAppliedData = {};\r\n        this.orderData.couponOffsetAmount = 0;\r\n        this.orderData.couponRemitted = 0;\r\n        this.orderData.point = 0;\r\n        this.orderData.orderItems.forEach((e: OrderItem) => e.packs.forEach((v: CartPackRow) => v.price = v.priceInit));\r\n    }\r\n\r\n    /*\r\n    * 打开我的订单列表（在“我的”界面使用）\r\n    */\r\n    openMyOrders = async (state: string) => {\r\n        this.openVPage(VMyOrders, state);\r\n    }\r\n\r\n    /**\r\n     * 根据状态读取我的订单\r\n     */\r\n    getMyOrders = async (state: string) => {\r\n        let { order } = this.uqs;\r\n        switch (state) {\r\n            case 'pendingpayment':\r\n                return await order.GetPendingPayment.table(undefined);\r\n            case 'processing':\r\n                /* let res = await order.Order.mySheets(undefined, 1, -20);\r\n                return res.map((el: any) => { return { ...el, state: \"processing\" } }); */\r\n                let result3: any = await this.searchMyOrders({ state: \"11\" });\r\n                return result3.items;\r\n            case 'completed':\r\n                let result2: any = await this.searchMyOrders({ state: \"12\" });\r\n                return result2.items;\r\n            case 'shipped':\r\n                let result1: any = await this.searchMyOrders({ state: \"13\" });\r\n                return result1.items;\r\n            case 'all':\r\n                let result:any = await this.searchMyOrders({});\r\n                return result.items;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    searchMyOrders = async (param:any) => {\r\n        let { firstSize, pageSize, keyWord, state } = param;\r\n        let { currentUser } = this.cApp;\r\n        let result = new QueryPager<any>(this.uqs.order.SearchOrders, pageSize || 100000000, firstSize || 100000000);\r\n        await result.first({\r\n            keyWord: keyWord || undefined, state: state || undefined,\r\n            customer: currentUser?.currentCustomer\r\n        });\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 打开发票信息编辑界面\r\n     */\r\n    onInvoiceInfoEdit = async () => {\r\n        let cInvoiceInfo = this.newC(CInvoiceInfo); // new CInvoiceInfo(this.cApp, undefined, true);\r\n        let { invoiceType, invoiceInfo } = this.orderData;\r\n        let origInvoice = {\r\n            invoiceType: invoiceType,\r\n            invoiceInfo: invoiceInfo,\r\n        }\r\n        let newInvoice = await cInvoiceInfo.call<any>(origInvoice, true);\r\n        this.orderData.invoiceType = newInvoice.invoiceType;\r\n        this.orderData.invoiceInfo = newInvoice.invoiceInfo;\r\n    }\r\n\r\n    openOrderDetail = async (orderId: number) => {\r\n        // if (state === \"11\") {\r\n        //     let order = await this.uqs.order.Order.getSheet(orderId);\r\n        //     let { brief, data } = order;\r\n        //     if (this.user?.id !== brief?.user) {\r\n        //         this.openVPage(VError);return;\r\n        //     };\r\n        //     let { orderItems } = data;\r\n        //     let orderItemsGrouped = groupByProduct1(orderItems);\r\n        //     data.orderItems = orderItemsGrouped;\r\n        //     this.openVPage(VOrderDetail, order);\r\n        // } else {\r\n        let { currentUser, store } = this.cApp;\r\n        let { currentSalesRegion } = store;\r\n        let { id: salesRegionId } = currentSalesRegion;\r\n        let { JkOrder, customer, common, product:productx, deliver } = this.uqs\r\n        let order: any = { brief: {}, data: { orderItems: [], comments: undefined } };\r\n        /* 第一项是 main， 第二项是 detail */\r\n        let getOrderDetail = await JkOrder.IDDetailGet<OrderMain, OrderDetail>({\r\n            id: orderId,\r\n            main: JkOrder.OrderMain,\r\n            detail: JkOrder.OrderDetail,\r\n        });\r\n        let getOrderMainEx: any[] = await JkOrder.ID<OrderMainEx>({\r\n            IDX: JkOrder.OrderMainEx,\r\n            id: orderId,\r\n        });\r\n        if (!getOrderDetail[0].length || !getOrderDetail[1].length) {\r\n            this.openVPage(VError);return;\r\n        };\r\n        let getOrderMainState: any[] = await JkOrder.ID<DxOrderMainState>({\r\n            IDX: JkOrder.DxOrderMainState,\r\n            id: orderId,\r\n        });\r\n        let mainArr: any[] = getOrderDetail[0];\r\n        if (mainArr.length) {\r\n            let { id, no, createDate: date, sumAmount: amount, shippingContact, invoiceContact, invoiceInfo, invoiceType } = mainArr[0] as any;\r\n            let { state } = getOrderMainState[0] || { state: undefined };\r\n            shippingContact = customer.Contact.boxId(shippingContact);\r\n            invoiceContact = customer.Contact.boxId(invoiceContact);\r\n            invoiceInfo = customer.InvoiceInfo.boxId(invoiceInfo);\r\n            invoiceType = common.InvoiceType.boxId(invoiceType);\r\n            let currency = common.Currency.boxId(5);\r\n            let promise1: PromiseLike<any>[] = [shippingContact, invoiceContact, invoiceInfo, invoiceType, currency];\r\n            await Promise.all(promise1);\r\n            /* 数据库date与前端时间偏移量为8小时 */\r\n            date = moment(date).utcOffset(-8).format('YYYY-MM-DD HH:mm:ss');\r\n            order.brief = { id: id, no: no, state: state, date: date };\r\n            _.assign(order.data, {\r\n                couponOffsetAmount: 0, couponRemitted: 0, salesRegion: { id: 1 },\r\n                currency: currency, webUser: currentUser, amount: amount,\r\n                shippingContact: shippingContact, invoiceContact: invoiceContact,\r\n                invoiceInfo: invoiceInfo, invoiceType: invoiceType,\r\n                comments: getOrderMainEx[0]?.commentsAboutDeliver\r\n            });\r\n            let orderItemsn: any[] = [];\r\n            if (getOrderDetail[1].length) {\r\n                let promise: PromiseLike<any>[] = [];\r\n                getOrderDetail[1].forEach((el: any) => {\r\n                    let { product } = el;\r\n                    el.product = productx.ProductX.boxId(product);\r\n                    promise.push(el.product);\r\n                    promise.push(productx.GetProductPrices.table({ product: product, salesRegion: salesRegionId }).then((data: any) => el.pricex = data || []));\r\n                    promise.push(deliver.GetOrderDetailTransportation.obj({ orderDetail: el?.id }).then((data: any) => el.transportation = data || undefined));\r\n                });\r\n                await Promise.all(promise);\r\n                orderItemsn = getOrderDetail[1].map((el: any) => {\r\n                    let { product, item, price, quantity, id, pricex } = el as any;\r\n                    let { pack } = pricex?.find((o: any) => o.pack?.id === item) || { pack: item };\r\n                    let param: any = { id: id, transportation: el.transportation };\r\n                    return { param: param, pack: pack, price: price, product: product, quantity: quantity, currency: undefined };\r\n                });\r\n            };\r\n            /* Fee(页面暂时不展示,后期实现) */\r\n            // let getFreightFee = await JkOrder.IX<IxOrderMainFee>({\r\n            //     IX:JkOrder.IxOrderMainFee,\r\n            //     ix: [31198536],\r\n            // });\r\n            // let freightFee: any, freightFeeRemitted:any;\r\n            // if (getFreightFee.length) {\r\n            //     let { xi, fee } = getFreightFee[0];\r\n            //     freightFee = xi; freightFeeRemitted = -1 * fee;\r\n            // };\r\n            _.assign(order.data, {\r\n                orderItems: groupByProduct1(orderItemsn),\r\n                // freightFee: freightFee || 12,\r\n                // freightFeeRemitted: freightFeeRemitted || 0,\r\n            });\r\n        };\r\n        this.openVPage(VOrderDetail, order);\r\n        // }\r\n    }\r\n    /* 物流信息 orderTransportation 此表废弃,不使用数据 */\r\n    inteLogistics = async (items: any[], orderId: number) => {\r\n        if (!items.length || !orderId) return [];\r\n        let promise: PromiseLike<any>[] = [];\r\n        items.forEach((el: any, index: number) => {\r\n            promise.push(this.getOrderTransportation(orderId, index + 1));\r\n        });\r\n        let res = await Promise.all(promise);\r\n        return res.filter((v: any) => v);\r\n    }\r\n\r\n    getOrderTransportation = async (orderId: number, row: number) => {\r\n        return await this.uqs.order.orderTransportation.obj({ order: orderId, row: row });\r\n    };\r\n\r\n    getOrderTrackByTransNum = async (transCompany: string, transNumber: number | string) => {\r\n        let param = { code: transCompany, no: transNumber };\r\n        let res = await fetch(GLOABLE.LOGISTIC.ORDERTRANS, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\":\"application/json\"\r\n            },\r\n            body: JSON.stringify(param)\r\n        });\r\n        if (!res.ok) return;\r\n        return await res.json();\r\n    }\r\n\r\n    openOrderTrans = async (orderTrans: any) => {\r\n        let { transNumber, expressLogistics } = orderTrans;\r\n        /* 入驻的快递（可查物流） */\r\n        let settledTrans: any = [\r\n            { transCompany: \"Y\", transCompanyId: 1, transCompanyIdTest: 25 },\r\n            { transCompany: \"ST\", transCompanyId: 22, transCompanyIdTest: 21 },\r\n        ];\r\n        let currTransBoxId: any = settledTrans.find((v: any) =>\r\n            (env.testing === true ? v.transCompanyIdTest : v.transCompanyId) === expressLogistics?.id);\r\n        if (currTransBoxId) {\r\n            let { transCompany } = currTransBoxId;\r\n            let orderTrackRult = await this.getOrderTrackByTransNum(transCompany, transNumber);\r\n            orderTrans.orderTrackRult = orderTrackRult?.response;\r\n        };\r\n        this.openVPage(VOrderTrans, orderTrans);\r\n    };\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    renderOrderItemProduct = (product: Product) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderCartProduct(product);\r\n    }\r\n\r\n    onContactSelected = (contact: BoxId) => {\r\n        if (this.replyToContactType === 'shippingContact') this.orderData.shippingContact = contact;\r\n        if (this.replyToContactType === 'invoiceContact') this.orderData.invoiceContact = contact;\r\n        this.modalTitle = '';\r\n    }\r\n\r\n    /**\r\n     * 打开地址编辑界面\r\n     */\r\n    onEditContact = async (userContact: BoxId) => {\r\n        let userContactId = userContact.id;\r\n        let contact = await this.uqs.customer.Contact.load(userContactId);\r\n        contact.isDefault = false;\r\n        this.editContact = contact;\r\n        this.modalTitle = 'contactInfo';\r\n    }\r\n\r\n    renderModelContent = (param?: any) => {\r\n        if (this.modalTitle === 'contactList') return this.renderContentList();\r\n        if (this.modalTitle === 'contactInfo') return this.onNewContact();\r\n        if (this.modalTitle === 'provinceChoice') return this.pickProvince();\r\n        if (this.modalTitle === 'cityChoice') return this.pickCity();\r\n        if (this.modalTitle === 'countyChoice') return this.pickCounty();\r\n        if (this.modalTitle === 'invoiceInfo') return this.renderInvoice();\r\n        if (this.modalTitle === 'validCard') return this.renderValidCard();\r\n    }\r\n\r\n    renderContentList = () => {\r\n        return this.cApp.cSelectInvoiceContact.renderContentList('createOrder');\r\n        // return this.renderView(VContactList);\r\n    }\r\n\r\n    getValidCardForWebUser = async () => {\r\n        let { cCoupon } = this.cApp;\r\n        this.validCardForWebUser = await cCoupon.getValidCardForWebUser();\r\n        this.modalTitle = 'validCard';\r\n    }\r\n\r\n    showModelCardDiscount = async (vipCard: any) => {\r\n        await this.cApp.cCoupon.showModelCardDiscount(vipCard);\r\n    }\r\n    /* 选择发票信息 */\r\n    saveInvoiceInfo = async (invoice: any) => {\r\n        let newInvoice: any = await this.cApp.cInvoiceInfo.saveInvoiceInfoData(invoice);\r\n        this.orderData.invoiceType = newInvoice.invoiceType;\r\n        this.orderData.invoiceInfo = newInvoice.invoiceInfo;\r\n        this.modalTitle = '';\r\n    }\r\n    /* 选择优惠券 */\r\n    applySelectedCoupon = async (coupon: string) => {\r\n        if (!coupon)\r\n            return \"请输入您的优惠卡/券号\";\r\n        else {\r\n            let { cCoupon } = this.cApp;\r\n            let couponRet = await cCoupon.applyCoupon1(coupon);\r\n            if (couponRet) {\r\n                await this.applyCoupon(couponRet);\r\n                this.modalTitle = '';\r\n            };\r\n            return cCoupon.applyTip(couponRet);\r\n        }\r\n    }\r\n\r\n    renderValidCard = () => {\r\n        return this.renderView(VCoupleAvailable, this.validCardForWebUser);\r\n    }\r\n\r\n    renderInvoice = () => {\r\n        let { invoiceType, invoiceInfo } = this.orderData;\r\n        let origInvoice = {\r\n            invoiceType: invoiceType,\r\n            invoiceInfo: invoiceInfo,\r\n        };\r\n        return this.renderView(VInvoiceInfo, { origInvoice: origInvoice });\r\n    }\r\n\r\n    /**\r\n     * 打开地址新建界面\r\n     */\r\n    onNewContact = () => {\r\n        return this.renderView(VContact, { contact: this.editContact });\r\n    }\r\n\r\n    pickAddress = async (context?: Context, name?: string, value?: number): Promise<number> => {\r\n        this.provinces = await this.cApp.cAddress.getCountryProvince(GLOABLE.CHINA);\r\n        this.modalTitle = 'provinceChoice';\r\n        return this.addressId;\r\n    }\r\n\r\n    pickProvince = () => {\r\n        return this.renderView(VProvince, { provinces: this.provinces });\r\n    }\r\n\r\n    pickCity = () => {\r\n        return this.renderView(VCity, { cities: this.cities });\r\n    }\r\n\r\n    pickCounty = () => {\r\n        return this.renderView(VCounty, { counties: this.counties });\r\n    }\r\n\r\n    saveAddress = async (countryId: number, provinceId: number, cityId?: number, countyId?: number): Promise<any> => {\r\n        let { Address } = this.uqs.common;\r\n        let newAddress = await Address.save(undefined, { country: countryId, province: provinceId, city: cityId, county: countyId });\r\n        let addressId = newAddress && Address.boxId(newAddress.id);\r\n        this.modalTitle = 'contactInfo';\r\n        this.addressId = addressId;\r\n    }\r\n\r\n    saveContact = async (contact: any) => {\r\n        let { cSelectShippingContact, cSelectInvoiceContact } = this.cApp;\r\n        let contactBox: any;\r\n        if (this.replyToContactType === 'shippingContact')\r\n            contactBox = await cSelectShippingContact.saveContactData(contact);\r\n        if (this.replyToContactType === 'invoiceContact')\r\n            contactBox = await cSelectInvoiceContact.saveContactData(contact);\r\n        this.onContactSelected(contactBox);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Ax, View, FA } from 'tonva-react';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { rootCategroyResFromId } from 'global';\r\n//import { observer } from 'mobx-react';\r\n\r\n/*\r\nconst imgStyle: React.CSSProperties = {\r\n    height: '1.5rem', width: '1.5rem',\r\n    marginLeft: '0.1rem',\r\n    marginRight: '0.3rem'\r\n}\r\n\r\nexport const titleTitle: React.CSSProperties = {\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport const subStyle: React.CSSProperties = {\r\n    fontSize: '0.75rem',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n*/\r\n\r\nexport class VRootCategory extends View<CProductCategory> {\r\n\r\n    /**\r\n     * \r\n     * @param item 装配了子节点和孙节点的productCategory\r\n     * @param parent \r\n     */\r\n    private renderRootCategory = (item: any, parent: any) => {\r\n        let { name, children, productCategory } = item;\r\n        let { src, labelColor } = rootCategroyResFromId(productCategory);\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <Ax className=\"py-2 px-3 cursor-pointer\"\r\n                href={'/product-catalog/' + productCategory}>\r\n                <img className=\"mr-4 cat-root-img\" src={src} alt={name} />\r\n                <b>{name}</b>\r\n            </Ax>\r\n            <div className=\"cat-root-sub\">\r\n                <div className=\"row no-gutters\">\r\n                    {children.map((v: any) => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { productCategory, name, children, total } = item;\r\n        /*\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\">\r\n            <A onClick={() => this.categoryClick(item, parent, labelColor)} href={\"/product-catalog/\"+ productCategory.id}>\r\n                <div className=\"py-2 px-2 cat-sub\">\r\n                    <div className=\"text-truncate\">\r\n                        <span className=\"ml-1 align-middle\">\r\n                            <FA name=\"chevron-circle-right\" className={labelColor} />\r\n                            &nbsp; {name}\r\n                        </span>\r\n                    </div>\r\n                    {renderThirdCategory(children, total)}\r\n                </div>\r\n                {renderThirdCategory(children, total)}\r\n            </div>\r\n        </div>;\r\n        */\r\n        //onClick={() => this.controller.onClickCategory(item)}\r\n        // let productCategoryId = item.productCategory.id;\r\n        return <Ax key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            href={'/product-catalog/' + productCategory}>\r\n            <div className=\"py-2 px-2 cat-sub\">\r\n                <div className=\"text-truncate\">\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={labelColor} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(children, total)}\r\n            </div>\r\n        </Ax>;\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    }\r\n\r\n    private content = () => {\r\n        let { rootCategories } = this.controller;\r\n        return <>{rootCategories.map((v: any) => this.renderRootCategory(v, undefined))}</>;\r\n        // return <>{categories2.map(v => <div key={v.productCategory.id}>{tv(v, e => this.renderRoot(e))}</div>)}</>;\r\n    };\r\n\r\n    private renderRoot(root: any) {\r\n        let { productCategory } = root;\r\n        let { id } = productCategory;\r\n        console.log(id);\r\n        return <div key={id}>{id}</div>\r\n    }\r\n}\r\n\r\n\r\nfunction renderThirdCategory(children: any[], total: number) {\r\n    return <div className=\"py-1 px-1 text-muted small text-truncate\">\r\n        {\r\n            children.length === 0 ?\r\n                <>{total > 1000 ? '>1000' : total} 个产品</>\r\n                :\r\n                children.map(v => v.name).join(' / ')\r\n        }\r\n    </div>\r\n}\r\n","import * as React from 'react';\r\nimport { View } from 'tonva-react';\r\nimport { CProductCategory, ProductCategory } from './CProductCategory';\r\n\r\nexport class VRootCategorySideBar extends View<CProductCategory>{\r\n\r\n\t//private categoryClick = async (categoryWapper: Product-catalog/*, parent: any, labelColor: string*/) => {\r\n\t//    await this.controller.openMainPage(categoryWapper/*, parent, labelColor*/);\r\n\t//}\r\n\r\n\trender() {\r\n\t\treturn <>\r\n\t\t\t<h2>产品大类</h2>\r\n\t\t\t<nav id=\"sidebar\">\r\n\t\t\t\t<ul className=\"list-unstyled components\">\r\n\t\t\t\t\t{this.controller.rootCategories.map(v => {\r\n\t\t\t\t\t\tlet { productCategory, name, children } = v;\r\n\t\t\t\t\t\tlet pcId = productCategory; //(productCategory as any).id;\r\n\t\t\t\t\t\tlet menuId = \"Submenu\" + pcId;\r\n\t\t\t\t\t\treturn <li className=\"active\" key={pcId}>\r\n\t\t\t\t\t\t\t<a href={'#' + menuId} data-toggle=\"collapse\" aria-expanded=\"false\">{name}</a>\r\n\t\t\t\t\t\t\t{this.renderChildren(children, menuId)}\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</nav>\r\n\t\t</>;\r\n\t}\r\n\r\n\tprivate renderChildren(children: ProductCategory[], menuId: string) {\r\n\t\treturn <ul className=\"collapse list-unstyled\" id={menuId}>\r\n\t\t\t{children.map(e => {\r\n\t\t\t\tlet { productCategory } = e;\r\n\t\t\t\tlet pcId = (productCategory as any).id || productCategory;\r\n\t\t\t\treturn <li key={pcId}>\r\n\t\t\t\t\t{this.controller.renderCategoryItem(e)}\r\n\t\t\t\t</li>;\r\n\t\t\t})}\r\n\t\t</ul>\r\n\t}\r\n}\r\n\r\nexport class VRootCategorySideBarToSelect extends View<CProductCategory>{\r\n\r\n\trender() {\r\n\t\treturn <nav id=\"sidebar\" className=\"dropdown\">\r\n\t\t\t<select name=\"\" id=\"\" className=\"form-control\" onChange={(v: any) => {\r\n\t\t\t\tlet url = \"/product-catalog/\" + v.target.value;\r\n        \t\tthis.navigate(url);\r\n\t\t\t}}>\r\n\t\t\t\t{this.controller.rootCategories.map(v => {\r\n\t\t\t\t\t\tlet { productCategory, name, children } = v;\r\n\t\t\t\t\t\tlet pcId = productCategory; //(productCategory as any).id;\r\n\t\t\t\t\tlet menuId = \"Submenu\" + pcId;\r\n\t\t\t\t\t\treturn <>\r\n\t\t\t\t\t\t\t<option key={pcId} value={pcId} disabled>{ name }</option>\r\n\t\t\t\t\t\t\t<>{this.renderChildren(children, menuId)}</>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t})}\r\n\t\t\t\t\r\n\t\t\t</select>\r\n\t\t</nav>\r\n\t}\r\n\r\n\tprivate renderChildren(children: ProductCategory[], menuId: string) {\r\n\t\treturn <>\r\n\t\t\t{children.map(e => {\r\n\t\t\t\tlet { productCategory,name } = e;\r\n\t\t\t\tlet pcId = (productCategory as any).id || productCategory;\r\n\t\t\t\treturn <option key={pcId} value={pcId}>{ name }</option>\r\n\t\t\t})}\r\n\t\t</>\r\n\t}\r\n}","import React from 'react';\r\nimport { Ax, tv, View } from 'tonva-react';\r\nimport { CProductCategory } from \"./CProductCategory\";\r\n\r\nexport class VBrandCrumbs extends View<CProductCategory> {\r\n\r\n    render(allAncestors: any) {\r\n        let { cApp } = this.controller;\r\n        return <div className=\"breadcrumbs mb-4\" style={{ lineHeight: 1.5 }}>\r\n            <a href=\"/\">首页</a>\r\n            <Ax href=\"/product-catalog\">产品</Ax>\r\n            {allAncestors.map((parent: any) => {\r\n                return tv(parent, (e: any) => {\r\n                    let { id, productcategorylanguage } = e;\r\n                    let jL = productcategorylanguage.find((jl: any) => cApp.currentLanguage.id === jl.language.id);\r\n                    return jL !== undefined ? <Ax href={\"/product-catalog/\" + id}>{jL.name}</Ax> : null;\r\n                })\r\n            })}\r\n        </div>\r\n    }\r\n}","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport { VPage } from 'tonva-react';\r\nimport { CProductCategory, ProductCategory } from './CProductCategory';\r\nimport { xs } from '../tools/browser';\r\nimport { rootCategroyResFromId } from 'global';\r\nimport { VBrandCrumbs } from './VBreadCrumbs';\r\nimport classNames from 'classnames';\r\n\r\nexport class VCategoryPage extends VPage<CProductCategory> {\r\n\r\n    private getBgClass = (productCategoryId: number, allAncestors: any[]) => {\r\n        let bgClass = \"\";\r\n        if (allAncestors !== undefined && allAncestors.length > 0) {\r\n            let res = rootCategroyResFromId(allAncestors[0].id);\r\n            if (res) bgClass = res.bgClass;\r\n        } else {\r\n            let res = rootCategroyResFromId(productCategoryId);\r\n            if (res) bgClass = res.bgClass;\r\n        }\r\n        return bgClass;\r\n    }\r\n\r\n    private renderCategory(/*item: any, parent: any, labelColor: string*/) {\r\n        let { instruction, current } = this.controller;\r\n        let main, breadcrumbs;\r\n        if (current) {\r\n            let { productCategory: productCategoryId, name, children, parent, allAncestors } = current;\r\n            breadcrumbs = this.renderVm(VBrandCrumbs, allAncestors);\r\n\r\n            let instructionUi;\r\n            if (instruction) {\r\n                // let instr: JQuery<Element> = $(instruction);\r\n                // $(\"a[href*='jkchemical.com']\", instr).addClass('d-none');\r\n                // instructionUi = <p dangerouslySetInnerHTML={{ __html: (instr[0].innerHTML || \"\") }} />;\r\n                instructionUi = <section dangerouslySetInnerHTML={{ __html: (instruction) }} />;\r\n            }\r\n\r\n            let bgClass = this.getBgClass(productCategoryId, allAncestors);\r\n            main = <div className=\"col-lg-9 product-introduct\">\r\n                <h1>{name}</h1>\r\n                {instructionUi}\r\n                <div className=\"row\">\r\n                    {children.map(v => this.renderSubcategory(v, bgClass))}\r\n                </div>\r\n            </div>\r\n        }\r\n        return <section className=\"container mt-lg-2\">\r\n            {breadcrumbs}\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-3 product-side d-none d-lg-block\">\r\n                    {this.controller.renderRootSideBar()}\r\n                </div>\r\n                {main}\r\n            </div>\r\n        </section>\r\n    }\r\n\r\n    private renderSubcategory(item: ProductCategory/*item: any, parent: any*/, titleBgClass: string) {\r\n        let { productCategory: id, name, children, total } = item;\r\n        let hasChildren = children && children.length > 0;\r\n\r\n        let vItem = hasChildren === true ?\r\n            <>\r\n                {\r\n                    children.slice(0, 3).map(v => {\r\n                        return this.controller.renderCategoryItem(v, 'mr-3');\r\n                    })\r\n                }\r\n                <p className=\"text-right\">\r\n                    {\r\n                        this.controller.renderCategoryItem(item, undefined,\r\n                            <>更多 <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i></>)\r\n                    }\r\n                </p>\r\n            </>\r\n            :\r\n            <div>{this.controller.renderCategoryItem(item, undefined, <>{total > 1000 ? '>1000' : total}个产品</>)}</div>;\r\n\r\n        return <div key={name} className=\"col-lg-4 each-product\">\r\n            {this.controller.renderCategoryItem(item, undefined, <h2 className={classNames(titleBgClass,'text-truncate')}>{name}</h2>)}\r\n            <div className=\"background-grey\">{vItem}</div>\r\n        </div>\r\n    }\r\n\r\n    header() { if (!xs) return ''; return this.controller.cApp.cHome.renderSearchHeader(); }\r\n    right() { if (!xs) return null; return this.controller.cApp.renderCartLabel(); }\r\n    content() { return this.renderCategory(); }\r\n}","export default __webpack_public_path__ + \"static/media/J&K triangle combinations 5.36ee8d07.png\";","export default __webpack_public_path__ + \"static/media/J&K triangle combinations4.25a76820.png\";","/* eslint-disable */\r\nimport { Ax, VPage } from 'tonva-react';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { xs } from '../tools/browser';\r\nimport { rootCategroyResFromId } from 'global';\r\nimport classNames from 'classnames';\r\nimport combinations5 from 'images/J&K triangle combinations 5.png';\r\nimport combinations4 from 'images/J&K triangle combinations4.png';\r\nimport { VBrandCrumbs } from './VBreadCrumbs';\r\n\r\nexport class VCategoryHome extends VPage<CProductCategory> {\r\n\r\n    private renderCategory() {\r\n        let main = <div className=\"row\">\r\n            {\r\n                this.controller.rootCategories.map((v, index: number) => {\r\n                    let { name, children, productCategory } = v;\r\n                    let pcId = typeof productCategory === 'object' ? (productCategory as any).id : productCategory;\r\n                    let { viceSrc, bgClass } = rootCategroyResFromId(pcId);\r\n                    return <div className=\"col-lg-4 single-product\" key={pcId}>\r\n                        <Ax key={pcId} href={'/product-catalog/' + pcId} className={classNames('d-block text-truncate')}>\r\n                            <img src={viceSrc} className=\"w-100\" />\r\n                            <h2 className={bgClass}>{name}</h2>\r\n                        </Ax>\r\n                        <div className=\"background-grey\">\r\n                            <ul>\r\n                                {\r\n                                    children.slice(0, 5).map(i => {\r\n                                        return this.controller.renderCategoryItem(i, 'mr-3 mb-2');\r\n                                    })\r\n                                }\r\n                                <p className=\"text-right\">\r\n                                    {\r\n                                        this.controller.renderCategoryItem(v, undefined,\r\n                                            <>更多 <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i></>)\r\n                                    }\r\n                                </p>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                })\r\n            }\r\n        </div>;\r\n\r\n        return <div>\r\n            <div className=\"main-product\">\r\n                <img src={combinations5} className=\"img1\" />\r\n                <img src={combinations4} className=\"img2\" />\r\n                <img src={combinations4} className=\"img3\" />\r\n            </div>\r\n            <div className=\"mt-lg-2 px-3\">{this.renderVm(VBrandCrumbs, [])}</div>\r\n            <div className=\"container main-product-introduce w-100 px-3 pt-0\">\r\n                <p className=\"text-left\">向全球化学、生命科学、材料领域客户提供60万种高质量化学品和仪器耗材产品，以及定制生产服务，满足从研发到生产的需求。</p>\r\n            </div>\r\n            <section className=\"container mt-lg-2 main-product\">\r\n                {main}\r\n            </section>\r\n\r\n        </div>\r\n    }\r\n\r\n    header() { if (!xs) return ''; return this.controller.cApp.cHome.renderSearchHeader(); }\r\n    right() { if (!xs) return null; return this.controller.cApp.renderCartLabel(); }\r\n    content() { return this.renderCategory(); }\r\n}","import { CUqBase } from 'tapp';\r\nimport { VRootCategory } from './VRootCategory';\r\nimport { VRootCategorySideBar, VRootCategorySideBarToSelect } from './VRootCategorySideBar';\r\nimport { GLOABLE } from \"global\";\r\nimport './cat.css';\r\nimport { Ax, BoxId, Tuid, VPage } from 'tonva-react';\r\nimport { VCategoryPage } from './VCategoryPage';\r\nimport classNames from 'classnames';\r\nimport { VCategoryHome } from './VCategoryHome';\r\n\r\nexport interface ProductCategory {\r\n    productCategory: number; //ID ProductCategory,\r\n    parent: number; // ID,\r\n    name: string; // char(200),\r\n    total: number; // int\r\n    children?: ProductCategory[];\r\n    allAncestors?: any[];\r\n};\r\n\r\nexport class CProductCategory extends CUqBase {\r\n    rootCategories: ProductCategory[];\r\n    current: ProductCategory;\t\t// 当前显示的目录\r\n    instruction: string; \t\t\t// 当前目录的介绍\r\n    //@observable categories2: any[] = [];\r\n\r\n    async internalStart(param: any) {\r\n        await this.loadRoot();\r\n        /*\r\n        this.uqs.product.ProductCategory.stopCache();\r\n\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        let results = await this.uqs.product.GetRootCategory.query({\r\n            salesRegion: currentSalesRegion.id,\r\n            language: currentLanguage.id\r\n        });\r\n        let { first, secend, third } = results;\r\n        this.rootCategories = (first as any[]).map(v => {\r\n            return this.buildCategories(v, secend, third);\r\n        });\r\n        */\r\n        /*\r\n        let result2 = await this.getRootCategoriesQuery.query({ salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n        if (result2)\r\n            this.categories2 = result2.ret;\r\n        */\r\n    }\r\n\r\n    async loadRoot() {\r\n        if (this.rootCategories) return;\r\n        let { uqs, cApp } = this;\r\n        let { product } = uqs;\r\n        let { ProductCategory, GetRootCategory } = product;\r\n        ProductCategory.stopCache();\r\n\r\n        let { currentSalesRegion, currentLanguage } = cApp;\r\n        let results = await GetRootCategory.query({\r\n            salesRegion: currentSalesRegion, // 去掉.id, 如果传入的是obj参数，会自动取id\r\n            language: currentLanguage, // 去掉.id, 如果传入的是obj参数，会自动取id\r\n        });\r\n        let { first, secend, third } = results;\r\n        (first as any[]).forEach(v => {\r\n            v.productCategory = v.productCategory.id;\r\n            v.children = this.buildChildren(v.productCategory, secend, third);\r\n        });\r\n        this.rootCategories = first;\r\n    }\r\n\r\n    /**\r\n     * 加载指定目录节点，结果赋值给this.current;\r\n     * @param id 目录节点id\r\n     */\r\n    async load(id: number) {\r\n        if (this.current && this.current.productCategory === id) return;\r\n\r\n        let { uqs, currentLanguage } = this.cApp;\r\n        let { product } = uqs;\r\n        let { ProductCategory } = product;\r\n        let promises = [\r\n            ProductCategory.load(id),\r\n            this.getCategoryChildren(id),\r\n            this.getCategoryInstruction(id)\r\n        ];\r\n        let [pcTuid, { first, secend }, instruction] = await Promise.all(promises);\r\n        this.instruction = instruction;\r\n        this.current = {\r\n            productCategory: id,\r\n            parent: undefined,\r\n            allAncestors: [],\r\n            name: undefined,\r\n            total: undefined,\r\n            children: [],\r\n        }\r\n\r\n        let getAllAncestors = async function (productCategoryId: number) {\r\n            let allAncestors: any[] = [];\r\n            while (true) {\r\n                let ProductCategoryLoad: any = await ProductCategory.load(productCategoryId);\r\n                if (!ProductCategoryLoad) break;\r\n                let { parent } = ProductCategoryLoad;\r\n                if (!parent) break;\r\n                productCategoryId = parent.id;\r\n                allAncestors.unshift(parent);\r\n            }\r\n            return allAncestors;\r\n        }\r\n\r\n        if (pcTuid) {\r\n            let { parent, productcategorylanguage } = pcTuid;\r\n            if (parent !== undefined) {\r\n                this.current.parent = parent;\r\n                this.current.allAncestors = await getAllAncestors(id);\r\n            }\r\n            let pcCurrentLanguage = productcategorylanguage.find((v: any) => Tuid.equ(currentLanguage, v.language));\r\n            this.current.name = pcCurrentLanguage && pcCurrentLanguage.name;\r\n            this.current.children = this.buildChildren(id, first, secend);\r\n        }\r\n    }\r\n\r\n    renderRootList = () => {\r\n        return this.renderView(VRootCategory);\r\n    };\r\n\r\n    /**\r\n     * 渲染PC版SideBar中的目录树\r\n     */\r\n    renderRootSideBar = () => {\r\n        return this.renderView(VRootCategorySideBar, this.rootCategories);\r\n    }\r\n\r\n    /**\r\n     * 渲染mobile版SideBar中的目录树\r\n     */\r\n    renderRootSideBarByMob = () => {\r\n        return this.renderView(VRootCategorySideBarToSelect, this.rootCategories);\r\n    }\r\n\r\n    /**\r\n     * 获取目录节点相关的介绍贴文\r\n     * @param categoryId 目录节点id\r\n     */\r\n    private getCategoryInstruction = async (categoryId: number) => {\r\n        try {\r\n            let res = await window.fetch(GLOABLE.CONTENTSITE + \"/partial/categoryinstruction/\" + categoryId);\r\n            if (res.ok) {\r\n                let content = await res.text();\r\n                return content;\r\n            }\r\n        } catch (error) {\r\n\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 根据目录节点的id获取该节点的子节点列表\r\n     * @param categoryId 目录节点的id\r\n     */\r\n    private async getCategoryChildren(categoryId: number) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        return await this.uqs.product.GetChildrenCategory.query({\r\n            parent: categoryId,\r\n            salesRegion: currentSalesRegion.id,\r\n            language: currentLanguage.id\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 为productCategory装配子节点/孙节点 \r\n     * @param id \r\n     * @param subCategories \r\n     * @param secendSubCategory \r\n     */\r\n    private buildChildren(id: number, subCategories: ProductCategory[], secendSubCategory: ProductCategory[]): ProductCategory[] {\r\n        let children: ProductCategory[] = [];\r\n        for (let sub of subCategories) {\r\n            let { productCategory: subProductCategory, parent: subParent, name: subName, total: subTotal } = sub;\r\n            if (!Tuid.equ(id, subParent)) continue;\r\n            children.push({\r\n                productCategory: (subProductCategory as any).id,\r\n                parent: (subParent as any).id,\r\n                name: subName,\r\n                total: subTotal,\r\n                children: secendSubCategory\r\n                    .filter(v => Tuid.equ(v.parent, subProductCategory))\r\n                    .map(v => {\r\n                        return {\r\n                            productCategory: (v.productCategory as any).id,\r\n                            parent: (v.parent as any).id,\r\n                            name: v.name,\r\n                            total: v.total\r\n                        }\r\n                    })\r\n            });\r\n        }\r\n        return children;\r\n    }\r\n\r\n    onClickCategory = async (pc: ProductCategory) => {\r\n\r\n        /*\r\n        this.current = pc;\r\n        let { productCategory, name } = pc;\r\n        let { id: productCategoryId } = ((productCategory as any) as BoxId);\r\n        let promises = [this.getCategoryChildren(productCategoryId), this.getCategoryInstruction(productCategoryId)];\r\n        let [results, instruction] = await Promise.all(promises);\r\n        if (results.first.length !== 0) {\r\n            this.openVPage(VCategory);\r\n        } else {\r\n            let { cProduct } = this.cApp;\r\n            await cProduct.searchByCategory({ productCategory: productCategoryId, name });\r\n        }\r\n        */\r\n        let { productCategory } = pc;\r\n        let { id: productCategoryId } = ((productCategory as any) as BoxId);\r\n        await this.showCategoryPage(productCategoryId);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {number} categoryId 目录节点的id \r\n     */\r\n    async showCategoryPage(categoryId: number) {\r\n        if (!this.rootCategories) await this.loadRoot();  // 供SideBar使用\r\n\r\n        await this.load(categoryId);\r\n        let VP: new (c: CProductCategory) => VPage<any>;\r\n        VP = VCategoryPage;\r\n        /*\r\n        // 如果想要web跟app方式的产品分类页面不一样，可以这么处理\r\n        if (this.isWebNav) {\r\n            VP = VCategoryPage;\r\n        }\r\n        else {\r\n            VP = VCategory;\r\n        }\r\n        */\r\n        if (this.current) {\r\n            let { children } = this.current;\r\n            if (children && children.length > 0) {\r\n                this.openVPage(VP);\r\n            }\r\n            else {\r\n                await this.cApp.cProduct.searchByCategory({\r\n                    productCategory: categoryId,\r\n                    name: this.current.name\r\n                });\r\n            }\r\n        } else {\r\n            this.openVPage(VP);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {ProductCategory} pc 目录节点\r\n     * @param className 所使用的class \r\n     * @param content \r\n     */\r\n    renderCategoryItem(pc: ProductCategory, className?: string, content?: any): JSX.Element {\r\n        if (!pc) debugger;\r\n        let { productCategory, name } = pc;\r\n        let pcId = typeof productCategory === 'object' ? (productCategory as any).id : productCategory;\r\n        return <Ax key={pcId}\r\n            href={'/product-catalog/' + pcId}\r\n            className={classNames(className, 'd-block text-truncate')}\r\n        >{content || name}</Ax>\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    async showCategoryHome() {\r\n        if (!this.rootCategories) await this.loadRoot();  // 供SideBar使用\r\n        let VP: new (c: CProductCategory) => VPage<any>;\r\n        VP = VCategoryHome;\r\n        this.openVPage(VP);\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/pig.7f1e923b.png\";","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport { VPage, Image, LMR, Muted, FA, Media } from 'tonva-react';\r\nimport { CMember } from './CMember';\r\nimport pig from '../images/pig.png';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst stylePig: React.CSSProperties = {\r\n    width: '100%',\r\n    height: '20rem',\r\n    backgroundImage: `url(${pig})`,\r\n    backgroundSize: 'contain',\r\n    backgroundColor: 'rgba(255,255,255,0.1)',\r\n    opacity: 0.09,\r\n    position: 'absolute',\r\n}\r\n\r\nexport class VMember extends VPage<CMember> {\r\n    private recommendationCodeRef = React.createRef<HTMLInputElement>();\r\n\r\n    async open(param: any) {\r\n\r\n    }\r\n\r\n    render(member: any): JSX.Element {\r\n\r\n        return <this.page />;\r\n    }\r\n\r\n    private submitRecommendationCode() {\r\n        let code = this.recommendationCodeRef.current.value;\r\n        if (code) {\r\n            let { setReferrer: submit } = this.controller;\r\n            submit(code);\r\n        }\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { cApp, member } = this.controller;\r\n        if (member === undefined)\r\n            return <></>;\r\n        let { currentUser } = cApp;\r\n        let { recommendationCode, point } = member;\r\n        if (!point) point = 0;\r\n\r\n        let im = <Image className=\"mr-3 w-3c h-3c\" src={currentUser.icon} />;\r\n        let inviteCode = <div className=\"small\">邀请码: {recommendationCode}</div>;\r\n\r\n        let divPoints = <div className=\"my-3 text-center bg-white h-25\" style={{ position: 'relative' }}>\r\n            <div className=\"w-100 bg-white h-20c\" style={{ position: 'absolute' }} />\r\n            <div className=\"d-flex align-items-center justify-content-center\" style={stylePig} />\r\n            <div className=\"w-100 d-flex align-items-center justify-content-center h-20c\" style={{ position: 'absolute' }}>\r\n                <div className=\"muted mr-3 small\">积分: </div>\r\n                <div className=\"text-danger\" style={{ fontSize: '2rem' }}>{point}</div>\r\n            </div>\r\n        </div>\r\n\r\n        let pointTitle = <p className=\"h4\">我的积分</p>\r\n        let pointDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>\r\n        let pointThisWeek = <><p className=\"h5 mb-0\">0</p><Muted>本周</Muted></>\r\n        let pointAll = <><p className=\"h5 mb-0\">{point}</p><Muted>累计</Muted></>\r\n\r\n        let fansTitle = <p>我的粉丝</p>\r\n        let fansDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>;\r\n        let detail = <div className=\"shadow bg-white rounded p-3 mb-1\">\r\n            <LMR left={fansTitle} right={fansDetail}></LMR>\r\n            <LMR className=\"pb-2\">\r\n                <p className=\"h4 mb-0\">0</p>\r\n                <Muted>今日</Muted>\r\n            </LMR>\r\n            <LMR left={pointThisWeek} right={pointAll} />\r\n            <LMR>\r\n                <input type=\"text\" className=\"form-control\" ref={this.recommendationCodeRef} />\r\n                <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.submitRecommendationCode()}>输入邀请码</button>\r\n            </LMR>\r\n        </div>;\r\n\r\n        return <div>\r\n            <LMR className=\"bg-white p-3 mb-1 align-items-center\"\r\n                left={im} right={inviteCode}>\r\n                <b>{currentUser.name}</b>\r\n            </LMR>\r\n            {divPoints}\r\n            {/*detail*/}\r\n        </div>\r\n    })\r\n}\r\n/*\r\n<div className=\"shadow bg-white rounded p-3 mb-1\">\r\n<LMR left={pointTitle} right={pointDetail}></LMR>\r\n<LMR className=\"pb-2\">\r\n    <p className=\"h4 mb-0\">0</p>\r\n    <Muted>今日</Muted>\r\n</LMR>\r\n<LMR left={pointThisWeek} right={pointAll} />\r\n</div>\r\n*/","/* eslint-disable */\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { FA, Loading, nav, BoxId } from 'tonva-react';\r\nimport { CApp, CUqBase } from 'tapp';\r\nimport { VMember } from './VMember';\r\n\r\nexport class CMember extends CUqBase {\r\n    member: any;\r\n    private referrer: BoxId;\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            member: observable.ref\r\n        });\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n\t\tif (!this.isLogined) return;\r\n\t\tlet { member } = this.uqs;\r\n\t\tlet { id: currentUserId } = this.user;\r\n\t\tlet promises: PromiseLike<any>[] = [\r\n\t\t\tmember.MemberAction.submit({}),\r\n\t\t\tmember.MemberRecommender.table({ referrer: currentUserId }),\r\n\t\t\tmember.MemberRecommender.table({ member: currentUserId }),\r\n\t\t];\r\n\t\tlet [{ code, point }, fans, referrer] = await Promise.all(promises);\r\n\t\tthis.referrer = referrer;\r\n\t\tthis.member = { recommendationCode: code, point, fans, referrer };\r\n    }\r\n\r\n    private loginCallback = async () => {\r\n        nav.pop();\r\n        await this.internalStart(undefined);\r\n    }\r\n\r\n    private render = observer(() => {\r\n        if (this.isLogined) {\r\n            return this.member === undefined ? <Loading /> : this.renderView(VMember);\r\n        } else {\r\n            return <div\r\n                className=\"d-flex h-100 flex-column align-items-center justify-content-center\">\r\n                <div className=\"flex-fill\" />\r\n                <button className=\"btn btn-success w-20c\"\r\n                    onClick={() => nav.showLogin(this.loginCallback, true)}>\r\n                    <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                </button>\r\n                <div className=\"flex-fill\" />\r\n                <div className=\"flex-fill\" />\r\n            </div>;\r\n        }\r\n    })\r\n\r\n    tab = () => {\r\n        this.start();\r\n        return <this.render />;\r\n    }\r\n\r\n    setReferrer(code: string) {\r\n        if (code) {\r\n            // 写入map，方法是add，用这个方法可能会写入多次，多以在写入之前要检查有没有，有的话，就不能再调用这个方法了\r\n            // 这个逻辑我认为应该是在服务端，写入的时候要给双方积分，给多少积分的逻辑，也应该在后端，从邀请码到拥有此邀请码\r\n            // 的会员id之间的转换，逻辑也应该在后台，这个后端的逻辑写在ACTION中？\r\n            if (!this.referrer) {\r\n                let { id: currentUserId } = this.user;\r\n            }\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { Page } from 'tonva-react';\r\n\r\ninterface Phone {\r\n\tnumber: string;\r\n\tcaption: string;\r\n}\r\n\r\ninterface Section {\r\n\tcaption: string;\r\n\taddress: string;\r\n\tpost?: string;\r\n\tphones: Phone[];\r\n\tfax?: string;\r\n\temail: string[];\r\n}\r\n\r\nconst sections: Section[] = [\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd.',\r\n\t\taddress: '北京市朝阳区北辰西路69号峻峰华亭A座5层',\r\n\t\tpost: '100029',\r\n\t\tphones: [\r\n\t\t\t{ number: '4006667788', caption: '400-666-7788' },\r\n\t\t\t{ number: '+861082848833', caption: '+86 10 8284 8833' },\r\n\t\t],\r\n\t\tfax: '+86 10 8284 9933',\r\n\t\temail: ['jkinfo@jkchemical.com', 'jkinfo@jk-sci.com'],\r\n\t},\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (上海)',\r\n\t\taddress: '上海市浦东区世纪大道1777号东方希望大厦10楼H座',\r\n\t\tpost: '200122',\r\n\t\tphones: [{ number: '+862161638833', caption: '+86 21 6163 8833' }],\r\n\t\tfax: '+86 21 6163 8800',\r\n\t\temail: ['jksh@jkchemical.com', 'jksh@jk-sci.com']\r\n\t},\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (广东)',\r\n\t\taddress: '广东省广州市天河区珠江新城华夏路28号富力盈信大厦3108室',\r\n\t\tpost: '510623',\r\n\t\tphones: [{ number: '+862038889733', caption: '+86 20 3888 9733' }],\r\n\t\tfax: '+86 20 3888 8285',\r\n\t\temail: ['jkgz@jkchemical.com', 'jkgz@jk-sci.com'],\r\n\t},\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (成都)',\r\n\t\taddress: '四川省成都市高新区科园南路1号1栋8楼803号',\r\n\t\tpost: '610041',\r\n\t\tphones: [{ number: '+8602883231067', caption: '+86 028 83231067' }],\r\n\t\temail: ['jkinfo@jkchemical.com'],\r\n\t},\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (香港)',\r\n\t\taddress: 'FLAT/RM 1901, 19/F, Lee Garden One,33 Hysan Avenue, Causeway Bay, Hong Kong',\r\n\t\tphones: [{ number: '+85228105022', caption: '+852 2810 5022' }],\r\n\t\tfax: '+852 2810 5033',\r\n\t\temail: ['jkhk@jkchemical.com'],\r\n\t}\r\n];\r\n\r\nconst Row: React.FunctionComponent<any> = ({ label, content }) => {\r\n\tif (!content) return null;\r\n\treturn <div className=\"my-1\">\r\n\t\t<span className=\"small text-muted\">{label}</span>：{content}\r\n\t</div>;\r\n}\r\n\r\nexport class ContactUs extends React.Component {\r\n\trender() {\r\n\t\tlet right = null;\r\n\t\treturn <Page header=\"联系信息\" right={right}>\r\n\t\t\t<div className='bg-white pb-5'>\r\n\t\t\t\t<div className=\"h4 pb-3 border-bottom border-muted text-center p-3 mb-3\">\r\n\t\t\t\t\t<span className=\"text-primary mr-\">联系我们</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"px-3 my-3\">\r\n\t\t\t\t\t<small className=\"text-muted\">全国客服热线：</small><a href=\"tel:4006667788\">400-666-7788</a>\r\n\t\t\t\t\t<span className=\"ml-4\"><small className=\"text-muted\">QQ：</small>4006667788</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t{sections.map((v, index) => {\r\n\t\t\t\t\tlet { caption, address, post, phones, fax, email } = v;\r\n\t\t\t\t\treturn <div key={index} className=\"my-4\">\r\n\t\t\t\t\t\t<div className=\"h5 text-info border-bottom p-3\">{caption}</div>\r\n\t\t\t\t\t\t<div className=\"px-3\">\r\n\t\t\t\t\t\t\t<Row label=\"地址\" content={address} />\r\n\t\t\t\t\t\t\t<Row label=\"邮编\" content={post} />\r\n\t\t\t\t\t\t\t<Row label=\"电话\" content={\r\n\t\t\t\t\t\t\t\tphones && phones.map((phone, phoneIndex) => {\r\n\t\t\t\t\t\t\t\t\tlet { number, caption } = phone;\r\n\t\t\t\t\t\t\t\t\treturn <a key={phoneIndex} className=\"mr-5\" href={'tel:' + number}>{caption}</a>\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Row label=\"传真\" content={fax} />\r\n\t\t\t\t\t\t\t<Row label=\"电子邮件\" content={\r\n\t\t\t\t\t\t\t\temail && email.map((e, eIndex) => {\r\n\t\t\t\t\t\t\t\t\treturn <a key={eIndex} className=\"mr-5\" href={'mailto:' + e}>{e}</a>\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</Page >;\r\n\t}\r\n}\r\n/*\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.</p>\r\n<div className=\"small\">\r\n\t<p>地址：北京市朝阳区北辰西路69号峻峰华亭A座5层</p>\r\n\t<p>邮编：100029</p>\r\n\t<p>电话：<a href=\"tel:4006667788\">400-666-7788</a> / <a href=\"tel:861082848833\">+86 10 8284 8833</a></p>\r\n\t<p>传真：+86 10 8284 9933</p>\r\n\t<p>电子邮件：<a href=\"mailto:jkinfo@jkchemical.com\">jkinfo@jkchemical.com</a><a className=\"ml-3\" href=\"mailto:jkinfo@jk-sci.com\">jkinfo@jk-sci.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(上海)</p>\r\n<div className=\"small\">\r\n\t<p>地址：上海市浦东区世纪大道1777号东方希望大厦10楼H座</p>\r\n\t<p>邮编：200122</p>\r\n\t<p>电话：<a href=\"tel:+862161638833\">+86 21 6163 8833</a></p>\r\n\t<p>传真：+86 21 6163 8800</p>\r\n\t<p>电子邮件：<a href=\"mailto:jksh@jkchemical.com\">jksh@jkchemical.com</a><a className=\"ml-3\" href=\"mailto:jksh@jk-sci.com\">jksh@jk-sci.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(广东)</p>\r\n<div className=\"small\">\r\n\t<p>地址：广东省广州市天河区珠江新城华夏路28号富力盈信大厦3108室</p>\r\n\t<p>邮编：510623</p>\r\n\t<p>电话：<a href=\"tel:+862038889733\">+86 20 3888 9733</a></p>\r\n\t<p>传真：+86 20 3888 8285</p>\r\n\t<p>电子邮件：<a href=\"mailto:jkgz@jkchemical.com\">jkgz@jkchemical.com</a><a className=\"ml-3\" href=\"mailto:jkgz@jk-sci.com\">jkgz@jk-sci.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(成都)</p>\r\n<div className=\"small\">\r\n\t<p>地址：四川省成都市高新区科园南路1号1栋8楼803号</p>\r\n\t<p>邮编：610041</p>\r\n\t<p>电话：<a href=\"tel:+8602883231067\">+86 028 83231067</a></p>\r\n\t<p>电子邮件：<a href=\"mailto:jkinfo@jkchemical.com\">jkinfo@jkchemical.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(香港)</p>\r\n<div className=\"small\">\r\n\t<p>地址：FLAT/RM 1901, 19/F, Lee Garden One,33 Hysan Avenue, Causeway Bay, Hong Kong</p>\r\n\t<p>电话：<a href=\"tel:+85228105022\">+852 2810 5022</a></p>\r\n\t<p>传真：+852 2810 5033</p>\r\n\t<p>电子邮件：<a href=\"mailto:jkhk@jkchemical.com\">jkhk@jkchemical.com</a></p>\r\n</div>\r\n</div>\r\n*/","import * as React from 'react';\r\nimport { Page, VPage, nav } from 'tonva-react';\r\nimport logo from '../images/logo_mobi.png';\r\nimport { appConfig } from 'tapp';\r\nimport { CMe } from './CMe';\r\n\r\nexport class AboutThisApp extends VPage<CMe>{\r\n\r\n    private version: any;\r\n    async open() {\r\n        this.version = await nav.checkVersion();\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = () => {\r\n        let right = null;\r\n        let links: any = <div className=\"sep-product-select\" style={{ width: \"80%\", margin: \" 0 auto 0 auto\" }} />\r\n        return <Page header=\"关于百灵威购物APP\" right={right}>\r\n            <div className='bg-white p-3'>\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <img src={logo} alt=\"logo\" />\r\n                </div>\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <span className=\"text-primary mr-3\">百灵威购物APP</span>\r\n                </div>\r\n                <div className=\"h3 flex-fill text-center small\">\r\n                    <span className=\"text-muted mr-3\">V{appConfig.version}</span>\r\n                </div>\r\n\r\n                {\r\n                    (this.version && this.version !== appConfig.version) && <>\r\n                        {links}\r\n                        < div className=\"d-flex my-3 cursor-pointer\" style={{ width: \"70%\", margin: \" 0 auto 0 auto\" }} onClick={() => nav.resetAll()} >\r\n                            <div className=\"text-danger\">发现新版本 V{this.version}，升级APP</div>\r\n                        </div>\r\n                        {links}\r\n                    </>\r\n                }\r\n            </div>\r\n        </Page>;\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/welcome.1bd46823.png\";","import { View, IconText, Ax } from 'tonva-react';\r\nimport { CMe } from './CMe';\r\n\r\nexport const MeLib = [\r\n    {\r\n        type: '帐户设置',\r\n        image: '/images/setting.svg',\r\n        belongs: [\r\n            {\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text=\"修改密码\" />,\r\n                href:'/password',\r\n            },{\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text=\"账户信息\" />,\r\n                href:'/meInfo',\r\n            },{\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"地址管理\" />,\r\n                href:'/contact',\r\n            },\r\n        ]\r\n    },{\r\n        type: '会员管理',\r\n        image: '/images/number-01.svg',\r\n        belongs: [\r\n            {\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"heart\" text=\"商品收藏\" />,\r\n                href:'/favorites',\r\n            },{\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"shopping-bag\" text=\"积分管理\" />,\r\n                href:'/pointshop',\r\n            },{\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"connectdevelop\" text=\"卡券管理\" />,\r\n                href:'/couponManage',\r\n            },\r\n        ]\r\n    },{\r\n        type: '订单管理',\r\n        image: '/images/order-01.svg',\r\n        belongs: [\r\n            {\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"file-text\" text=\"订单记录\" />,\r\n                href:'/myOrders',\r\n            },{\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"发票管理\" />,\r\n                href:'/invoice',\r\n            },\r\n        ]\r\n    },\r\n]\r\n\r\n\r\nexport class VMeSideBar extends View<CMe> {\r\n\r\n    render(): JSX.Element {\r\n        let { pathname } = document.location;\r\n        return <div className=\"my-5 px-2 border rounded\">\r\n            {MeLib.map((v: any,index:number) => {\r\n                return <div key={index}>\r\n                    <div className=\"text-center border-bottom py-2 font-weight-bolder\">{v.type}</div>\r\n                    <ul className=\"px-0 text-center \">\r\n                        {v.belongs.map((o: any,index:number) => {\r\n                            return <li style={{ background:o.href === pathname ? '#f5f5f5':''}}\r\n                                className='list-inline rounded'\r\n                                key={index}><Ax href={o.href}>{o.component}</Ax></li>\r\n                        })}\r\n                    </ul>\r\n                </div>\r\n            })}\r\n        </div>\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { nav, Image, VPage, Ax, Prop, IconText, FA, PropGrid, LMR } from 'tonva-react';\r\nimport { ContactUs } from './contactUs';\r\nimport { observer } from 'mobx-react';\r\n//import { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\nimport { AboutThisApp } from './aboutThisApp';\r\nimport { appConfig } from 'tapp';\r\n//import { observable } from 'mobx';\r\nimport { browser, xs } from 'tools/browser';\r\nimport welcome from 'images/welcome.png';\r\nimport { MeLib } from './VMeSideBar';\r\n\r\nexport class VMe extends VPage<CMe> {\r\n\t/*\r\n    async open(param?: any) {\r\n\t\tthis.open\r\n\t}\r\n\t*/\r\n\t//private tips = observable.box('a');\r\n\r\n    private exit() {\r\n        nav.showLogout();\r\n    }\r\n\r\n    private contactUs = () => nav.push(<ContactUs />);\r\n    private privacy = () => {\r\n        this.controller.openPrivacy();\r\n    }\r\n    private aboutThisApp = () => {\r\n        // nav.push(<AboutThisApp />);\r\n        this.openVPage(AboutThisApp)\r\n    }\r\n\r\n    private changePassword = async () => {\r\n        await nav.changePassword();\r\n    }\r\n\r\n    private openContactList = async () => {\r\n        this.controller.openContactList();\r\n    }\r\n\r\n    private openInvoice = async () => {\r\n        this.controller.openInvoice();\r\n    }\r\n\r\n    private openMyPoint = async () => {\r\n        this.controller.openMyPoint();\r\n    }\r\n\r\n    private openCouponManage = async () => {\r\n        this.controller.openCouponManage();\r\n    }\r\n\r\n    private openFavorites = async () => {\r\n        this.controller.openFavorites();\r\n    }\r\n\r\n    private meInfo = observer(() => {\r\n        let { user } = nav;\r\n        if (user === undefined) {\r\n\t\t\treturn null;\r\n\t\t}\r\n        let { id, name, nick, icon } = user;\r\n        return <LMR className=\"px-3 py-2 cursor-pointer w-100 bg-primary text-white\"\r\n            left={<Image className=\"w-3c h-3c mr-3\" src={icon} />}\r\n            right={<FA className=\"align-self-end\" name=\"angle-right\" />}\r\n            onClick={this.controller.openMeInfo\r\n\t\t\t\t /*() => {this.openVPage(EditMeInfo);}*/}>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-light\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </LMR>;\r\n    });\r\n\r\n    private orderStates = () => {\r\n        let { openMyOrders } = this.controller;\r\n        let oss = [\r\n            { caption: '待审核', state: 'processing', icon: 'desktop' },\r\n            { caption: '待发货', state: 'completed', icon: 'truck' },\r\n            { caption: '所有订单', state: 'all', icon: 'file-text-o' },\r\n        ];\r\n\r\n        return <div className=\"d-flex justify-content-around w-100 my-3\">\r\n            {\r\n                oss.map(((os, index) => {\r\n                    let { caption, state, icon } = os;\r\n                    return <div key={index} className=\"flex-fill d-flex flex-column align-items-center cursor-pointer\"\r\n                        onClick={() => openMyOrders(state)}>\r\n                        <FA name={icon} className=\"text-info fa-2x\" />\r\n                        <small>{caption}</small>\r\n                    </div>;\r\n                }))\r\n            }\r\n        </div>\r\n    };\r\n\r\n    render() {\r\n        return <this.page />;\r\n    }\r\n    content() {\r\n        return <this.page />;\r\n    }\r\n    header() {\r\n        if (xs || browser.versions.iPad) return <this.meInfo />;\r\n        return '';\r\n\t}\r\n\tfooter():JSX.Element {return null;}\r\n\r\n    private page = observer(() => {\r\n        const { user } = nav;\r\n        let aboutRows: Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"phone\" text=\"联系我们\" />,\r\n                onClick: this.contactUs\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于百灵威\" />,\r\n                onClick: () => this.controller.openAbout()\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"隐私政策\" />,\r\n                onClick: this.privacy\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <div className=\"w-100 d-flex justify-content-between\" onClick={this.aboutThisApp}>\r\n                    <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于本APP\" />\r\n                    <div className=\"py-2 small\">V{appConfig.version}</div>\r\n                </div>,\r\n            },\r\n            ''\r\n        ];\r\n\r\n        let rows: Prop[];\r\n        if (user === undefined) {\r\n            let { showLogin } = this.controller;\r\n            rows = aboutRows;\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    component: <button className=\"btn btn-success w-100 my-2\" onClick={() => showLogin()}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                    </button>\r\n                },\r\n            );\r\n        }\r\n        else {\r\n            let logOutRows: Prop[] = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    bk: '',\r\n                    component: <div className=\"text-center flex-fill mb-3\"><button className=\"btn btn-danger w-75\" onClick={this.exit}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 退出登录\r\n\t\t\t\t\t\t</button>\r\n                    </div>\r\n                },\r\n            ];\r\n\r\n            rows = [\r\n\t\t\t\t/*\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.meInfo />\r\n\t\t\t\t},\r\n\t\t\t\t*/\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <>{this.orderStates()}</>,\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"地址管理\" />,\r\n                    onClick: this.openContactList\r\n                },\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"发票管理\" />,\r\n                    onClick: this.openInvoice\r\n                },\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"积分管理\" />,\r\n                    onClick: this.openMyPoint\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"connectdevelop\" text=\"卡券管理\" />,\r\n                    onClick: this.openCouponManage\r\n                },\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"heart\" text=\"商品收藏\" />,\r\n                    onClick: this.openFavorites\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text=\"修改密码\" />,\r\n                    onClick: this.changePassword\r\n                },\r\n            ]\r\n            rows.push(...aboutRows, ...logOutRows);\r\n        }\r\n\r\n        if (xs || browser.versions.iPad) return <>\r\n            <PropGrid rows={rows} values={{}} />\r\n        </>;\r\n        else {\r\n            if (user === undefined) {\r\n                return <div className=\"d-flex justify-content-center\" style={{ height: 340 }}>\r\n                    <div className=\"my-auto p-5 rounded\">\r\n                        <div className=\"d-flex\">\r\n                            <img src={welcome} className=\"m-auto\" alt=\"\" />\r\n                        </div>\r\n                        您正在以访客身份查看本站内容,请\r\n                            <Ax href=\"/login\" className=\"alert-link font-weight-bolder\"> 登录 </Ax>\r\n                        或者\r\n                            <Ax href=\"/register\" className=\"alert-link font-weight-bolder\"> 注册会员</Ax>\r\n                    </div>\r\n                </div>\r\n            };\r\n            let meLib = MeLib;\r\n            return <div className=\"container mt-lg-2 py-3\">\r\n                <div className=\"row\">\r\n                    {\r\n                        meLib.map((v: any,index:number) => {\r\n                            return <div className=\"col-lg-4 single-product\" key={index}>\r\n                                <div className=\"border text-center pt-5\">\r\n                                    <a href=\"#\"><img src={v.image} className=\"w-50\" /></a>\r\n                                </div>\r\n                                <h2 className=\"mint-bg\">{v.type}</h2>\r\n                                <div className=\"background-grey h-auto\">\r\n                                    <ul className=\"pl-3\">\r\n                                        {\r\n                                            v.belongs.map((o: any,index:number) => {\r\n                                                return <li className=\"list-inline\" key={index}><Ax href={o.href}>{o.component}</Ax></li>\r\n                                            })\r\n                                        }\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        \r\n        }\r\n\t\t// <button onClick={()=>this.tips.set('ddddd')}>push</button>\r\n\t\t// {autoHideTips(this.tips, <div className=\"text-danger\">{this.tips.get()}</div>)}\r\n    })\r\n}\r\n\r\nexport function userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import * as React from 'react';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport {\r\n    userApi, ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page,\r\n    Edit, UiSchema,\r\n    VPage, UiRadio, IdSchema, UiIdItem, Context, BoxId, tv\r\n} from 'tonva-react';\r\nimport { CMe } from './CMe';\r\nimport {\r\n    faxValidation, emailValidation, mobileValidation, telephoneValidation,\r\n    addressDetailValidation, zipCodeValidation,\r\n    organizationNameValidation, departmentNameValidation,\r\n    salutationValidation, nameValidation\r\n} from '../tools/inputValidations';\r\nimport { xs } from 'tools/browser';\r\n\r\nexport class EditMeInfo extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        let { cApp } = this.controller;\r\n\t\t// 程序运行到这里，必须有currentWebUser，否则一定是其它某个地方出错了。\r\n        //if(!cApp.currentUser?.mobile) await cApp.currentUser.setUser(nav.user);\r\n        let { telephone, mobile, email, fax, zipCode, address, addressString } = cApp.currentUser;\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            address: address,\r\n            addressString: addressString,\r\n            zipCode: zipCode,\r\n        };\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            nick: { widget: 'text', label: '别名', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n        }\r\n    }\r\n    private data: any;\r\n\r\n    private webUserData: any;\r\n\r\n    private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n\r\n        makeObservable<EditMeInfo, \"data\" | \"webUserData\" | \"webUserContactData\">(this, {\r\n            data: observable,\r\n            webUserData: observable,\r\n            webUserContactData: observable\r\n        });\r\n\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone\r\n            , mobile, email, fax, zipCode, address, addressString } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName,\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            address: address,\r\n            addressString: addressString,\r\n            zipCode: zipCode,\r\n        }\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        (nav.user as any)[name] = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        let { schema, uiSchema, data, onItemChanged, webUserData, onWebUserChanged, webUserContactData, onWebUserContactChanged, controller } = this;\r\n        let header: any, title = '个人信息';\r\n        if (xs) header = title;\r\n        return <Page header={header}>\r\n             <div className=\"row mx-0 mb-lg-5 mb-sm-5\">\r\n                <div className=\"col-lg-3 d-none d-lg-block\">\r\n                    {this.controller.cApp.cMe.renderMeSideBar()}\r\n                </div>\r\n                <div className=\"col-lg-9 px-0 mx-auto\" style={{ maxWidth: !xs ? 800 : 'none' }}>\r\n                    {!xs && <div className=\"text-left mt-5 px-3\"><h1>{title}</h1></div>}\r\n                    <Edit schema={schema} uiSchema={uiSchema}\r\n                        data={data}\r\n                        onItemChanged={onItemChanged} />\r\n                    <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                        data={webUserData}\r\n                        onItemChanged={onWebUserChanged} />\r\n                    <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema(controller.pickAddress)}\r\n                        data={webUserContactData}\r\n                        onItemChanged={onWebUserContactChanged} />\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport const webUserSchema: ItemSchema[] = [\r\n    { name: 'firstName', type: 'string', required: true } as StringSchema,\r\n    { name: 'gender', type: 'string' } as StringSchema,\r\n    { name: 'salutation', type: 'string' } as StringSchema,\r\n    { name: 'organizationName', type: 'string', required: true } as StringSchema,\r\n    { name: 'departmentName', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport const webUserUiSchema: UiSchema = {\r\n    items: {\r\n        firstName: {\r\n            widget: 'text', label: '真实姓名',\r\n            placeholder: '真实姓名',\r\n            rules: nameValidation\r\n        } as UiTextItem,\r\n        gender: { widget: 'radio', label: '性别', list: [{ value: '1', title: '男' }, { value: '0', title: '女' }] } as UiRadio,\r\n        salutation: { widget: 'text', label: '称谓', rules: salutationValidation } as UiTextItem,\r\n        organizationName: { widget: 'text', label: '单位名称', placeholder: '单位名称', rules: organizationNameValidation } as UiTextItem,\r\n        departmentName: { widget: 'text', label: '部门名称', placeholder: '部门名称', rules: departmentNameValidation } as UiTextItem,\r\n    }\r\n}\r\n\r\n// 个人联系方式信息\r\nexport const webUserContactSchema: ItemSchema[] = [\r\n    { name: 'telephone', type: 'string' } as StringSchema,\r\n    { name: 'mobile', type: 'string', required: true } as StringSchema,\r\n    { name: 'email', type: 'string' } as StringSchema,\r\n    { name: 'fax', type: 'string', required: false } as StringSchema,\r\n    { name: 'address', type: 'id', required: false } as IdSchema,\r\n    { name: 'addressString', type: 'string', required: false } as StringSchema,\r\n    { name: 'zipCode', type: 'string', required: false } as StringSchema,\r\n];\r\n\r\nexport function webUserContactUiSchema(pickAddress: any) {\r\n    return {\r\n        items: {\r\n            telephone: { widget: 'text', label: '固定电话', placeholder: '固定电话', rules: telephoneValidation } as UiTextItem,\r\n            mobile: { widget: 'text', label: '手机号', placeholder: '手机号', rules: mobileValidation } as UiTextItem,\r\n            email: { widget: 'text', label: 'Email', rules: emailValidation, placeholder: 'Email' } as UiTextItem,\r\n            fax: { widget: 'text', label: '传真', placeholder: '传真', rules: faxValidation } as UiTextItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区', placeholder: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    if (!address) return <small className=\"text-muted\">(无)</small>;\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <>\r\n                            {country !== undefined && country.id !== undefined && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province !== undefined && province.id !== undefined && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city !== undefined && city.id !== undefined && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county !== undefined && county.id !== undefined && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', placeholder: '详细地址', rules: addressDetailValidation } as UiTextItem,\r\n            zipCode: { widget: 'text', label: '邮编', placeholder: '邮编', rules: zipCodeValidation } as UiTextItem,\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { ItemSchema, Page, VPage, FA, Form, Context, autoHideTips } from 'tonva-react';\r\nimport { CMe } from './CMe';\r\nimport { webUserSchema, webUserUiSchema, webUserContactSchema, webUserContactUiSchema } from './EditMeInfo';\r\nimport { observer } from 'mobx-react';\r\n\r\ninterface Options {\r\n    onlyRequired: boolean;\r\n    caption: string;\r\n    note: string;\r\n    actionButton: {\r\n        value: string;\r\n        action: any;\r\n    }\r\n}\r\n\r\nexport class EditMeInfoFirstOrder extends VPage<CMe>{\r\n    private options: Options;\r\n    //@observable tips: JSX.Element;\r\n    private tips = observable.box();\r\n    private form: Form;\r\n\r\n    async open(param: any) {\r\n        // this.onlyRequired = param;\r\n        this.options = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private webUserData: any;\r\n    private webUserContactData: any;\r\n\r\n    private ref = (f: Form) => {\r\n        if (this.form === f) {\r\n            debugger;\r\n        }\r\n        this.form = f;\r\n    }\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n\r\n        makeObservable<EditMeInfoFirstOrder, \"webUserData\" | \"webUserContactData\">(this, {\r\n            webUserData: observable,\r\n            webUserContactData: observable\r\n        });\r\n\r\n        let { cApp } = this.controller;\r\n        let { currentUser } = cApp;\r\n        if (!currentUser) return;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone\r\n            , mobile, email, fax, address, addressString, zipCode } = currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            address: address,\r\n            addressString: addressString,\r\n            zipCode: zipCode\r\n        }\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { data } = context.form;\r\n        _.merge(this.webUserData, data);\r\n        _.merge(this.webUserContactData, data);\r\n        await this.controller.changeWebUser(this.webUserData);\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n\r\n        let { currentUser } = this.controller.cApp;\r\n        if (currentUser && currentUser.allowOrdering) {\r\n            this.closePage();\r\n            let webUserContacts = await currentUser.getContacts();\r\n            if (webUserContacts === undefined || webUserContacts.length === 0) {\r\n                await currentUser.addContactFromAccount();\r\n            }\r\n            await this.options.actionButton.action();\r\n        } else {\r\n            this.tips.set(<>以上带有 <span className='text-danger'>*</span> 的内容均须填写！</>);\r\n            //setTimeout(() => {\r\n            //    this.tips = undefined;\r\n            //}, GLOABLE.TIPDISPLAYTIME);\r\n        }\r\n    }\r\n\r\n    private onCompleted = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private page = observer(() => {\r\n        /*\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        */\r\n\r\n        let { onlyRequired, caption, note, actionButton } = this.options;\r\n        let schemaFilter = (itemSchema: ItemSchema): boolean => {\r\n            return (onlyRequired === true && itemSchema.required === true)\r\n                || onlyRequired === undefined\r\n                || onlyRequired === false\r\n        }\r\n\r\n        let schemaArr = [];\r\n        for (let item of webUserSchema) {\r\n            if (item.required === true) schemaArr.push(item);\r\n        }\r\n        for (let item of webUserContactSchema) {\r\n            if (item.required === true) schemaArr.push(item);\r\n        }\r\n        if (onlyRequired !== true) {\r\n            for (let item of webUserSchema) {\r\n                if (item.required !== true) schemaArr.push(item);\r\n            }\r\n            for (let item of webUserContactSchema) {\r\n                if (item.required !== true) schemaArr.push(item);\r\n            }\r\n        }\r\n        let uiSchema = {};\r\n        _.merge(uiSchema, webUserUiSchema, webUserContactUiSchema(this.controller.pickAddress));\r\n\r\n        let data = _.merge(this.webUserData, this.webUserContactData);\r\n        let { value } = actionButton;\r\n        return <Page header={caption}>\r\n            <div className=\"alert alert-light my-3 py-4\" role=\"alert\">\r\n                <FA name=\"smile-o\" className=\"text-warning mr-4 my-1\" size=\"2x\" />\r\n                {note}\r\n            </div>\r\n\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={this.ref} className=\"my-3\"\r\n                    schema={schemaArr.filter(schemaFilter)}\r\n                    uiSchema={uiSchema}\r\n                    formData={data}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n\r\n            <div className=\"p-3 bg-white\">\r\n                {/*tipsUI*/}\r\n                {autoHideTips(this.tips, <div className=\"alert alert-primary\" role=\"alert\">\r\n                    <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                    {this.tips}\r\n                </div>)}\r\n                <button type=\"button\" className=\"btn btn-primary w-100\" onClick={() => this.onCompleted()}>{value}</button>\r\n            </div>\r\n        </Page >;\r\n    });\r\n}\r\n/*\r\n<Edit schema={schemaArr.filter(schemaFilter)} uiSchema={uiSchema}\r\n    data={data}\r\n    onItemChanged={this.onMergeDataChanged} />\r\n\r\n    private onMergeDataChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n*/","import * as React from 'react';\r\nimport { VPage, Page, BoxId, List, Scroller } from 'tonva-react';\r\nimport { CFavorites } from './CFavorites';\r\nimport { xs } from '../tools/browser';\r\nimport { pageHTitle } from 'tools/pageHeaderTitle';\r\n\r\nexport class VFavorites extends VPage<CFavorites> {\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n    private onScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        let { productsFavorites } = this.controller;\r\n        productsFavorites.more();\r\n    }\r\n    private onProductClick = async (product: BoxId) => {\r\n        let { cProduct } = this.controller.cApp;\r\n        await cProduct.showProductDetail(product.id);\r\n    }\r\n\r\n    private renderProduct = (p: any) => {\r\n        // console.log(p);\r\n        let callb = () => {\r\n            let index = this.controller.productsFavorites.items.findIndex((v: any) => v.id === p.id);\r\n            if(index !== -1) this.controller.productsFavorites.items.splice(index, 1);\r\n        }\r\n        if(!this.controller.cApp.cProduct.showFavorites)\r\n            this.controller.cApp.cProduct.showFavorites = true;\r\n        return this.controller.cApp.cProduct.renderProduct(p,null,callb);\r\n    }\r\n\r\n    private page = (param: any) => {\r\n        let { productsFavorites } = this.controller;\r\n        //let { cProduct } = cApp;\r\n        let header: any;\r\n        if (xs) {\r\n            header = \"商品收藏\";\r\n        };\r\n        let none = <div className=\"p-3 text-warning mt-4 d-flex justify-content-center\">[无收藏]</div>\r\n        return <Page header={header} onScrollBottom={this.onScrollBottom}>\r\n            <div className=\"row mx-0 bg-light my-1\">\r\n                <div className=\"col-lg-3 d-none d-lg-block\">\r\n                    {this.controller.cApp.cMe.renderMeSideBar()}\r\n                </div>\r\n                <div className=\"col-lg-9 product-introduct px-0\">\r\n                    {pageHTitle(<div className=\"text-left pl-3\">商品收藏</div>)}\r\n                    <List before={''} none={none} items={productsFavorites} item={{ render: this.renderProduct/* , onClick: this.onProductClick */ ,className:\"pb-3 pt-2\"}} />\r\n                </div>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n","import { CUqBase } from 'tapp';\r\nimport { VFavorites } from './VFavorites';\r\nimport { QueryPager } from 'tonva-react';\r\nimport { Product } from '../store';\r\n//import { VProductFavorateLabel } from './VProductFavorateLabel';\r\n\r\nexport class CFavorites extends CUqBase {\r\n    productsFavorites: QueryPager<any>;\r\n    myFavorites: any[] = [];\r\n    protected async internalStart() {\r\n        await this.searchByFavorites();\r\n        this.openVPage(VFavorites);\r\n    }\r\n\r\n    private productConverter = (item: any, queryResults?: { [name: string]: any[] }): Product => {\r\n        let product = this.cApp.getProduct(item.id);\r\n        product.props = item;\r\n        // product.props.imageUrl = item.chemical.toString();\r\n        product.loadListItem();\r\n        return product;\r\n    }\r\n\r\n    async searchByFavorites() {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        this.productsFavorites = new QueryPager<any>(this.uqs.webuser.getMyFavirates, 10, 10);\r\n        this.productsFavorites.setItemConverter(this.productConverter);\r\n        await this.productsFavorites.first({ webUser: currentUser, salesRegion: currentSalesRegion });\r\n    }\r\n\r\n    /*\r\n    async getMyFavorites() {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        let myFavorites = await this.uqs.webuser.myFavorites.query({ webUser: currentUser, salesRegion: currentSalesRegion });\r\n        return myFavorites.ret;\r\n    }\r\n    */\r\n\t/*\r\n    renderFavoritesLabel = (productid: number) => {\r\n        let { currentUser } = this.cApp;\r\n        // let myFavorite = await this.uqs.webuser.myFavorites.obj({ webUser: currentUser, product: productid });\r\n        return this.renderView(VProductFavorateLabel, productid)\r\n\t}\r\n\t*/\r\n}\r\n","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport { View, nav, LMR, Image, FA, A, Ax } from 'tonva-react';\r\nimport { CMe } from './CMe';\r\nimport { observer } from 'mobx-react';\r\n\r\n\r\n/**\r\n * 在jk-web中使用的登录状态组件\r\n */\r\nexport class VLoginState extends View<CMe> {\r\n\r\n    render() {\r\n        return <this.page />;\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { user } = this.controller;\r\n        let v: any;\r\n        if (!user) {\r\n            v = <>\r\n                <a className=\"\" href=\"/register\" target=\"_self\">注册</a> /&nbsp;\r\n                <a className=\"\" href=\"/login\" target=\"_self\">登录</a>\r\n            </>;\r\n        }\r\n        else {\r\n            let { name, nick, icon } = user;\r\n            let Avatar: JSX.Element = !icon ? <FA name=\"user\" size=\"lg\" className=\"text-primary\" /> : <Image className=\"w-1c h-1c\" style={{ width: \"1rem\", height: \"1rem\" }} src={icon} />\r\n            v = <>\r\n                <a className=\"mr-2 nav-item dropdown\" href=\"/me\" target=\"_self\">\r\n                    {Avatar}\r\n                    <span className=\"dropdown-menu dropdown-menu-right px-2 m-0\">{nick || name}</span>\r\n                </a>\r\n                <a className=\"mr-2\" href=\"/logout\" target=\"_self\">退出</a>\r\n            </>;\r\n        }\r\n        return <>\r\n            {v}\r\n        </>;\r\n    })\r\n}\r\n\r\nexport function userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import * as React from 'react';\r\nimport { VPage } from 'tonva-react';\r\n//import marked from 'marked';\r\nimport logo from '../images/logo_mobi.png';\r\nimport { CMe } from './CMe';\r\n\r\nconst imgStyle: React.CSSProperties = {\r\n\twidth: '100%',\r\n\theight: 'auto',\r\n};\r\n\r\nconst content = <>\r\n\t<p>　　百灵威科技有限公司是一家致力于研发和生产化学及相关产品，集敏捷制造、全球营销和现代物流为一体的高科技企业。\r\n\t百灵威在中国内地、香港，欧洲及北美等多个国家和地区设有物流中心，实行专业化、个性化的一站式服务，\r\n为全球超过200,000 名科技和工业领域的客户提供产品资源及配套技术服务。</p>\r\n\t<img src=\"/images/aboutus/HebBirdsEye.jpg\" alt=\"BirdsEye\" className=\"pb-3\" style={imgStyle} />\r\n\t<p>　　百灵威现代化的研发制造基地拥有一支富有创造天赋的专业团队，新技术、新产品层出不穷，J&K®、Amethyst®、J&K Scientific® 产品\r\n\t已多达30,000 种以上，并呈几何级数增长。作为国际化的资源平台公司，百灵威致力于促进全球产业链的合作，不断推进集约式发展，\r\n\t集成资源600,000 余种，包括高纯有机试剂、无机试剂、生化试剂、分析试剂、标准品、金属有机催化剂、医药中间体、超精细材料、\r\n\t以及实验室仪器、耗材等众多产品。百灵威的柔性生产线能够快速提供小批量、多品种的原料，满足实验、中试以至规模化生产的需要。\r\n</p>\r\n\t<img src=\"/images/aboutus/aboutUs1.jpg\" alt=\"aboutus1\" className=\"pb-3\" style={imgStyle} />\r\n\t<p>　　百灵威秉承“诚实守信、开拓创新、合作共赢、实现卓越”的价值观，致力于与化学、生物医药、精细化工、食品工业、现代农业、电子、日化、\r\n\t石化、纺织、生命科学、环境保护、疾病控制、新能源、新材料、航空航天等领域的客户建立互信、长久的合作关系，\r\n\t为实现“促进科技与工业发展，造福人类”的使命而不懈努力！\r\n</p>\r\n</>;\r\n\r\nexport class VAbout extends VPage<CMe> {\r\n\tcontent() {\r\n\t\treturn <div className='bg-white p-3'>\r\n\t\t\t<img className=\"h-3c position-absolute\" src={logo} alt=\"百灵威\" />\r\n\t\t\t<div className=\"h3 flex-fill text-center\">\r\n\t\t\t\t<span className=\"text-primary mr-3\">百灵威集团</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"mt-5\">{content}</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\n//dangerouslySetInnerHTML={{ __html: marked(content) }} />","/* eslint-disable */\r\nimport _ from 'lodash';\r\nimport { Context, nav, VPage, User } from 'tonva-react';\r\nimport { CUqBase } from 'tapp';\r\nimport { VMe } from './VMe';\r\nimport { CSelectShippingContact } from '../customer/CSelectContact';\r\nimport { EditMeInfoFirstOrder } from './EditMeInfoFirstOrder';\r\nimport { CInvoiceInfo } from '../customer/CInvoiceInfo';\r\nimport { CAddress } from '../customer/CAddress';\r\nimport { CFavorites } from '../customer/CFavorites';\r\nimport { CPointProduct } from 'pointMarket/CPointProduct';\r\nimport { VLoginState } from './VLoginState';\r\nimport { VAbout } from './about';\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { VMeSideBar } from './VMeSideBar';\r\n\r\nexport class CMe extends CUqBase {\r\n    //    cApp: CApp;\r\n    protected async internalStart(param?: any) {\r\n        this.openVPage(VMe);\r\n    }\r\n\r\n    async changeWebUser(webUser: any) {\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        await currentUser.changeWebUser(webUser);\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        await currentUser.changeWebUserContact(webUserContact);\r\n    }\r\n\r\n    tab = () => this.renderView(VMe);\r\n    tabPage: VMe = new VMe(this);\r\n\r\n    openMyOrders = async (state: string) => {\r\n        let { cOrder } = this.cApp;\r\n        await cOrder.openMyOrders(state);\r\n    }\r\n\r\n    openMeInfo = async () => {\r\n        await this.cApp.assureLogin();\r\n        this.openVPage(EditMeInfo);\r\n    }\r\n\r\n    openContactList = async () => {\r\n        let contactList = this.newC(CSelectShippingContact); // new CSelectShippingContact(this.cApp, undefined, false);\r\n        await contactList.start(false);\r\n    }\r\n\r\n    openInvoice = async () => {\r\n        let cInvoiceInfo = this.newC(CInvoiceInfo); // new CInvoiceInfo(this.cApp, undefined, false);\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        let defaultSetting = await currentUser.getSetting();\r\n\r\n        let origInvoice = _.pick(defaultSetting, ['invoiceType', 'invoiceInfo']);\r\n        cInvoiceInfo.start(origInvoice);\r\n    }\r\n\r\n    openMyPoint = async () => {\r\n        /* let cPointProduct = this.newC(CPointProduct);// new CSelectShippingContact(this.cApp, undefined, false);\r\n        await cPointProduct.start(); */\r\n        await this.cApp.cPointProduct.openMyPoint();\r\n    }\r\n    /**\r\n     * 卡券管理\r\n     */\r\n    openCouponManage = async () => {\r\n        let { cCoupon } = this.cApp;\r\n        await cCoupon.openMyCouponManage();\r\n        // let cCouponManage = this.newC(CCouponManage);\r\n        // await cCouponManage.start();\r\n    }\r\n\r\n    /**\r\n     * 商品收藏\r\n     */\r\n    openFavorites = async () => {\r\n        let cMyFavorites = this.newC(CFavorites);\r\n        await cMyFavorites.start();\r\n    }\r\n\r\n    toPersonalAccountInfo = async (fn: Function) => {\r\n        await this.openMeInfoFirstOrder({\r\n            onlyRequired: false,\r\n            caption: \"请补充账户信息\",\r\n            note: <>\r\n                化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。\r\n                为此，需要您重新提供非虚拟的、可核查的信息。这些信息包括下面所有带有 <span className=\"text-danger\">*</span> 的信息。\r\n            </>,\r\n            actionButton: {\r\n                value: \"下一步\",\r\n                action: fn\r\n            }\r\n        });\r\n    }\r\n\r\n    openAbout() {\r\n        this.openVPage(VAbout);\r\n    }\r\n\r\n    openMeInfoFirstOrder = async (options?: any) => {\r\n        await this.openVPage(EditMeInfoFirstOrder, options);\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = this.newC(CAddress); // new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n\r\n    openPrivacy = () => {\r\n        // this.openVPage(Privacy);\r\n        nav.showPrivacyPage();\r\n    }\r\n\r\n    getCommonText = async (textId: number) => {\r\n        return await this.uqs.order.CommonText.load(textId);\r\n    }\r\n\r\n    /**\r\n     * 渲染在jk-web中使用的登录状态组件\r\n     */\r\n    renderLoginState() {\r\n        return this.renderView(VLoginState);\r\n    }\r\n\r\n    showLogin = (callback?: (user: User) => Promise<void>) => {\r\n        if (nav.isWebNav) {\r\n            nav.navigate('/login');\r\n        }\r\n        else {\r\n            nav.showLogin(callback, true);\r\n        }\r\n    }\r\n\r\n    showLoginOut = (callback?: () => Promise<void>) => {\r\n        nav.showLogout(callback);\r\n    }\r\n\r\n    renderMeSideBar = () => {\r\n        return this.renderView(VMeSideBar);\r\n    }\r\n\r\n    /*\r\n    renderCarLabel_Web() {\r\n        let { cCart } = this.cApp;\r\n        return cCart.renderCartLabel_Web();\r\n    }\r\n    */\r\n}","import * as React from 'react';\r\nimport { VPage, TabCaptionComponent, Page, TabsProps, TabProp } from 'tonva-react';\r\nimport { CApp } from './CApp';\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\nfunction caption(label:string|JSX.Element, icon:string) {\r\n\treturn (selected: boolean) => TabCaptionComponent(label, icon, color(selected));\r\n}\r\n\r\nexport class VMain extends VPage<CApp> {\r\n\tprotected get tabsProps(): TabsProps {\r\n\t\tlet { store, cHome, cMe, cCart/*, cBug, cUI*/ } = this.controller;\r\n\t\tlet tabs: TabProp[] = [\r\n\t\t\t//{name: 'home', caption: caption(t('home'), 'home'), content: cHome.tab},\r\n\t\t\t//{name: 'me', caption: caption(t('me'), 'user-o'), content: cMe.tab, load: cMe.load},\r\n            { \r\n\t\t\t\tname: 'home', \r\n\t\t\t\tcaption: caption('首页', 'home'),\r\n\t\t\t\tcontent: cHome.tab, \r\n\t\t\t\tnotify: undefined\r\n\t\t\t},\r\n            // { name: 'member', label: '会员', icon: 'vcard', content: cMember.tab },\r\n            {\r\n                name: 'cart',\r\n\t\t\t\tcaption: caption('购物车', 'shopping-cart'),\r\n                content: cCart.tabPage, \r\n                //page: cCart.tabPage,\r\n                notify: store.cartCount\r\n            },\r\n            {\r\n                name: 'me',\r\n\t\t\t\tcaption: caption('我的', 'user'),\r\n                content: cMe.tab \r\n                //page: cMe.tabPage,\r\n            }\r\n\t\t];\r\n\t\t/*\r\n\t\tif (this.isDev === true) {\r\n\t\t\ttabs.push({\r\n\t\t\t\tname: 'UI', caption: caption(t('UI'), 'television'), content: cUI.tab\r\n\t\t\t});\r\n\t\t\ttabs.push({\r\n\t\t\t\tname: 'debug', caption: caption(t('debug'), 'bug'), content: cBug.tab, onShown: cBug.load\r\n\t\t\t});\r\n\t\t}\r\n\t\t*/\r\n\t\treturn {tabs};\r\n\t}\r\n\r\n\r\n\t/*\r\n    async open(param?: any) {\r\n        this.openPage(this.render);\r\n    }\r\n\r\n    render = (param?: any): JSX.Element => {\r\n\tlet { cHome, cCart, cMe, store } = this.controller;\r\n        let faceTabs = [\r\n            { name: 'home', label: '首页', icon: 'home', page: cHome.tab, notify: undefined },\r\n            // { name: 'member', label: '会员', icon: 'vcard', content: cMember.tab },\r\n            {\r\n                name: 'cart',\r\n                label: '购物车',\r\n                icon: 'shopping-cart',\r\n                content: cCart.tabPage, \r\n                //page: cCart.tabPage,\r\n                notify: store.cartCount\r\n            },\r\n            {\r\n                name: 'me',\r\n                label: '我的',\r\n                icon: 'user',\r\n                content: cMe.tab \r\n                //page: cMe.tabPage,\r\n            }\r\n        ].map(v => {\r\n            let { name, label, icon, content, notify } = v;\r\n            return {\r\n                name,\r\n                caption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n                content,\r\n                notify,\r\n            }\r\n        });\r\n\r\n        return <Page tabsProps={{ tabs: faceTabs }} />\r\n    }\r\n\t*/\r\n}\r\n\r\n/* export class Main extends VPage<CApp> {\r\n    async open(param?: any) {\r\n        this.openPage(this.render, { param });\r\n    }\r\n\r\n    render = (param?: any): JSX.Element => {\r\n        return <Switch>\r\n            <Route path='/search1/:key' render={() => {\r\n                return <div>cProduct1.start</div>\r\n            }} />\r\n            <Route path='/search/:key' render={() => {\r\n                // this.controller.cProduct.start(param.param);\r\n                this.controller.cProduct.searchByKey(param.param);\r\n                return this.controller.cProduct.renderProductList2(param.param);\r\n            }} />\r\n            <Route path='/' render={() => {\r\n                this.openVPage(VMain);\r\n                return <></>\r\n            }} />\r\n        </Switch>\r\n    }\r\n} */","import * as React from 'react';\r\nimport { CCoupon } from './CCoupon';\r\nimport { VPage, Page, List } from 'tonva-react';\r\nimport { observer } from 'mobx-react';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { VCoupon, VCredits, VVIPCard } from './VVIPCard';\r\n\r\nexport class VSharedCoupon extends VPage<CCoupon> {\r\n    tipsAfterDawed: string;\r\n    private products: any[] = [];\r\n    \r\n    constructor(c: CCoupon) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            tipsAfterDawed: observable\r\n        });\r\n    }\r\n\r\n    async open(param: any) {\r\n        this.products = param.products || [];\r\n        if (this.products.length === 0) {\r\n            this.tipsAfterDawed = `3秒后将跳到首页，开始您的购物之旅。`\r\n        } else {\r\n            this.tipsAfterDawed = \"您可以点击以下产品开始您的购物之旅。\"\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private drawCouponUI = observer(() => {\r\n        let { sharedCouponValidationResult } = this.controller;\r\n        if (sharedCouponValidationResult.result !== 1)\r\n            return null;\r\n        let { couponDrawed, loginWhenDrawCoupon } = this.controller;\r\n        if (couponDrawed) {\r\n            if (this.products.length === 0) {\r\n                this.countDown();\r\n            }\r\n            return React.createElement(this.showTips)\r\n        }\r\n        else {\r\n            return <button className=\"btn btn-primary w-100\"\r\n                onClick={() => loginWhenDrawCoupon(sharedCouponValidationResult)}>领取</button>\r\n        }\r\n    })\r\n\r\n    private countDown = () => {\r\n        let waitingSeconds = 3;\r\n        setInterval(() => {\r\n            this.tipsAfterDawed = `${waitingSeconds}秒后将跳到首页，开始您的购物之旅。`\r\n            if (waitingSeconds === 0) {\r\n                this.backPage();\r\n            }\r\n            waitingSeconds--;\r\n        }, 1000)\r\n    }\r\n\r\n    private showTips = observer(() => {\r\n        return <div className=\"alert alert-info w-100 text-center\">\r\n            <div className=\"pb-3\">\r\n                <span className=\"text-danger\" style={{ fontSize: \"1.4rem\" }}>领取成功</span><br />\r\n                <small className=\"text-muted\">领取的卡券可在&Prime;卡券管理&Prime;中查看</small>\r\n            </div>\r\n            <small>{this.tipsAfterDawed}</small>\r\n        </div>\r\n    })\r\n\r\n    private renderCouponBase = (sharedCouponValidationResult: any) => {\r\n        let { types, discount } = sharedCouponValidationResult;\r\n        // return <>{this.renderVm(COUPONBASE[types]['view'], sharedCouponValidationResult)}</>;\r\n        switch (types) {\r\n            case 'coupon':\r\n                if (discount)\r\n                    return <>{this.renderVm(VCoupon, sharedCouponValidationResult)}</>;\r\n                else\r\n                    return <>{this.renderVm(VVIPCard, sharedCouponValidationResult)}</>;\r\n            case 'credits':\r\n                return <>{this.renderVm(VCredits, sharedCouponValidationResult)}</>;\r\n            case 'vipcard':\r\n                return <>{this.renderVm(VVIPCard, sharedCouponValidationResult)}</>;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private onProductClick = async (product: any) => {\r\n        await this.controller.showProductDetail(product.id);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { renderProduct, cApp, sharedCouponValidationResult } = this.controller;\r\n        return <Page header=\"与您分享\" right={cApp.renderCartLabel()}>\r\n            {this.renderCouponBase(sharedCouponValidationResult)}\r\n            {React.createElement(this.drawCouponUI)}\r\n            <List items={this.products} item={{ render: renderProduct, onClick: this.onProductClick, className: \"mb-1\" }} none={null} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, List, tv } from 'tonva-react';\r\nimport { CrPageHeaderTitle } from 'tools/pageHeaderTitle';\r\nimport { CCoupon } from './CCoupon';\r\nimport { pageHTitle } from '../tools/pageHeaderTitle';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VVIPCardDiscount extends VPage<CCoupon>{\r\n\r\n    private vipCard: any;\r\n    async open(vipCard: any) {\r\n        this.vipCard = vipCard;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderVIPCardDiscountSetting(item: any) {\r\n        let { brand, discount } = item;\r\n        return <div className=\"row\">\r\n            <div className=\"col-7\">\r\n                {tv(brand, v => v.name)}\r\n            </div>\r\n            <div className=\"col-5\">\r\n                {100 - discount * 100}%\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private page = () => {\r\n        let header = CrPageHeaderTitle('折扣明细');\r\n        return <Page header={header}>\r\n            <div style={{maxWidth:990}} className=\"mx-auto mb-5\">\r\n                {pageHTitle('折扣明细')}\r\n                <List items={this.vipCard.discountSetting} item={{ render: this.renderVIPCardDiscountSetting, className: \"px-3 py-2\" }}></List>\r\n            </div>\r\n        </Page>\r\n    }\r\n\r\n    render(param?: any): JSX.Element{\r\n        this.vipCard = param.vipCard;\r\n        return React.createElement(observer(() => {\r\n            return <List items={this.vipCard?.discountSetting} item={{ render: this.renderVIPCardDiscountSetting, className: \"px-3 py-2\" }}></List>\r\n        }));\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, LMR, FA, List, TabProp, TabCaptionComponent, Tabs, Scroller, QueryPager, autoHideTips } from 'tonva-react';\r\nimport { observer } from 'mobx-react';\r\nimport { VCoupon, VCredits, VVIPCard, VCouponUsed } from './VVIPCard';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { color } from 'order/VMyOrders';\r\nimport { CCoupon } from './CCoupon';\r\nimport { xs } from '../tools/browser';\r\nimport { CrPageHeaderTitle, pageHTitle } from 'tools/pageHeaderTitle';\r\n\r\nexport class VCouponManage extends VPage<CCoupon> {\r\n\r\n    private couponInput: HTMLInputElement;\r\n    private coupons: QueryPager<any>;\r\n    private currentStatus: string;\r\n    private tabs: TabProp[];\r\n    oss: any = [\r\n        { caption: '可使用', state: 'validCardForWebUser', icon: 'free-code-camp', toolTip: '亲，您现没有可用的优惠券呦！' },\r\n        { caption: '已使用', state: 'usageRecordForWebUser', icon: 'cc-amex', toolTip: '亲，您还未使用过任何优惠券,快去使用噢！' },\r\n        { caption: '已过期', state: 'expiredForWebUser', icon: 'ravelry', toolTip: '亲，您还没已过期的优惠券！' },\r\n    ];\r\n\r\n\t//@observable tips: string;\r\n    private tips = observable.box();\r\n    \r\n    constructor(c: CCoupon) {\r\n        super(c);\r\n\r\n        makeObservable<VCouponManage, \"coupons\">(this, {\r\n            coupons: observable\r\n        });\r\n    }\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private getTabs = async () => {\r\n        let { getCoupons } = this.controller;\r\n        this.tabs = this.oss.map((v: any) => {\r\n            let { caption, state, icon, toolTip } = v;\r\n            let none = <div className=\"my-4 text-secondary d-flex justify-content-center\">{`『 ${toolTip} 』`}</div>\r\n            return {\r\n                name: caption,\r\n                caption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n                content: () => {\r\n                    return <List items={this.coupons} item={{render: this.renderCoupon, className: 'col-lg-6 border rounded px-0'}} className='row mx-0 bg-light mt-2' none={none} />\r\n                },\r\n                isSelected: this.currentStatus === state,\r\n                load: async () => {\r\n                    this.currentStatus = state;\r\n                    this.coupons = await getCoupons(this.currentStatus);\r\n                }\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 领取优惠卡\r\n     */\r\n    private receiveCoupon = async () => {\r\n        let { drawCoupon, getCouponValidationResult, applyTip } = this.controller;\r\n\t\tlet coupon = this.couponInput.value;\r\n\t\tlet tips: string;\r\n        if (!coupon)\r\n            tips = \"请输入您的优惠卡/券号\";\r\n        else {\r\n            this.couponInput.value = '';\r\n\r\n            let validationResult = await getCouponValidationResult(coupon);\r\n            let { result } = validationResult;\r\n            if (result === 1) {\r\n                await drawCoupon(validationResult);\r\n                tips = '领取成功！';\r\n            } else {\r\n                tips = applyTip(result);\r\n            }\r\n\t\t}\r\n\t\tthis.tips.set(tips);\r\n\t\t/*\r\n        if (this.tips) {\r\n        //    setTimeout(() => this.tips = undefined, GLOABLE.TIPDISPLAYTIME);\r\n\t\t}\r\n\t\t*/\r\n        // setTimeout(() => this.controller.closePage(), 500);\r\n        // this.currentStatus = this.oss[0].state;\r\n        // this.coupons = await getCoupons(this.currentStatus);\r\n    }\r\n\r\n    /**\r\n     * 优惠卡展示\r\n     */\r\n    private renderCoupon = (coupon: any) => {\r\n        let { types, discount, conductReveal } = coupon;\r\n        let content = null;\r\n        if (types === \"coupon\")\r\n            content = discount ? this.renderVm(VCoupon, coupon) : this.renderVm(VVIPCard, coupon);\r\n        else if (types === \"credits\")\r\n            content = this.renderVm(VCredits, coupon);\r\n        else if (types === 'vipcard') {\r\n            content = this.renderVm(VVIPCard, coupon);\r\n        }\r\n        if (conductReveal) {\r\n            content = this.renderVm(VCouponUsed, coupon);\r\n        }\r\n        return <div className=\"d-block\">\r\n            <div className=\"px-2 bg-white mt-1\" onClick={() => { this.CouponViewOrUse(coupon) }}>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    /**\r\n     * 折扣明细或使用记录\r\n     */\r\n    private CouponViewOrUse = (coupon: any) => {\r\n        let { showDiscountSetting,showModelCardDiscount } = this.controller;\r\n        let { result, types } = coupon;\r\n        if (result === 1 && types !== 'credits') {\r\n            if (xs) showDiscountSetting(coupon);\r\n            else showModelCardDiscount(coupon);\r\n        }\r\n    }\r\n\r\n    private tipsUI = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        return tipsUI;\r\n    })\r\n    private onScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        if (this.currentStatus !== \"validCardForWebUser\")\r\n            this.coupons.more();\r\n    }\r\n\r\n    private page = observer(() => {\r\n        this.getTabs();\r\n        let right = <button className=\"btn btn-primary w-4c\" onClick={this.receiveCoupon}>领取</button>\r\n        let header = CrPageHeaderTitle('卡券管理');\r\n        return <Page header={header}>\r\n            <div className=\"row mx-0\">\r\n                <div className=\"col-lg-3 d-none d-lg-block\">\r\n                    {this.controller.cApp.cMe.renderMeSideBar()}\r\n                </div>\r\n                <div className=\"col-lg-9 px-0 mx-auto\" style={{ maxWidth: !xs ? 800 : 'none' }}>\r\n                    {pageHTitle(<div className=\"text-left px-2\">卡券管理</div>)}\r\n                    <div className=\"px-2 py-3 mb-5 mx-auto\" style={{maxWidth:990}}>\r\n                        <LMR right={right}>\r\n                            <input ref={v => this.couponInput = v} type=\"number\" placeholder=\"输入领取优惠卡券号码\" className=\"form-control\"></input>\r\n                        </LMR>\r\n                        {/*React.createElement(this.tipsUI)*/}\r\n                        {autoHideTips(this.tips)}\r\n                        <div className=\"mt-2 reset-z-header-boxS\">\r\n                            <Tabs tabs={this.tabs} tabPosition=\"top\" tabBg='bg-light' />\r\n                        </div>\r\n                    </div >\r\n                    {this.controller.renderModelCardDiscount()}\r\n                </div>\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { View } from 'tonva-react';\r\nimport { observer } from 'mobx-react';\r\nimport { CCoupon } from './CCoupon';\r\nimport { Modal } from 'antd';\r\n\r\nexport class VModelCardDiscount extends View<CCoupon> {\r\n\r\n    render(param?: any): JSX.Element {\r\n    \treturn React.createElement(observer(() => {\r\n\t\t\treturn <Modal\r\n                title=\"折扣明细\"\r\n                visible={this.controller.CardDiscount}\r\n                onCancel={() => {this.controller.CardDiscount = false;}}\r\n                style={{top:'35%'}}\r\n                footer={null}>\r\n                {this.controller.renderCardDiscount()}\r\n            </Modal>\r\n\t\t}));\r\n\t}\r\n}","import { observable, makeObservable } from 'mobx';\r\nimport { QueryPager } from 'tonva-react';\r\nimport { VSharedCoupon } from './VSharedCoupon';\r\nimport { VCoupleAvailable } from './VCouponAvailable';\r\nimport { VVIPCardDiscount } from './VVIPCardDiscount';\r\nimport { VCoupon, VCredits, VVIPCard } from './VVIPCard';\r\nimport { VCouponManage } from './VCouponManage';\r\nimport { VModelCardDiscount } from './VModelCardDiscount';\r\nimport { CApp, CUqBase } from 'tapp';\r\n\r\nexport const COUPONBASE: any = {\r\n    'coupon': { 'name': '优惠券', 'view': VCoupon },\r\n    'credits': { 'name': '积分券', 'view': VCredits },\r\n    'vipcard': { 'name': 'VIP卡', 'view': VVIPCard }\r\n}\r\n\r\n\r\nconst couponTips: { [key: number]: string } = {\r\n    \"-1\": '对不起，当前服务器繁忙，请稍后再试。',\r\n    \"1\": '有效',\r\n    \"0\": \"无此优惠券，请重新输入或与您的专属销售人员联系确认优惠码是否正确。\",\r\n    \"2\": '优惠券已过期或作废，请重新输入或与您的专属销售人员联系。',\r\n    \"3\": '优惠券无效，请重新输入或与您的专属销售人员联系。',\r\n    \"5\": '优惠券无效，请重新输入或与您的专属销售人员联系。',\r\n    \"6\": '不允许使用本人优惠券！',\r\n    \"4\": '该优惠券已经被使用过了，不允许重复使用。',\r\n}\r\n\r\nexport class CCoupon extends CUqBase {\r\n    isOpenMyCouponManage: boolean = false;\r\n    couponDrawed: boolean;\r\n    sharedCouponValidationResult: any;\r\n    CardDiscount: boolean = false;\r\n    curCardDiscount: any;\r\n    couponPager: QueryPager<any>;\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            couponDrawed: observable,\r\n            sharedCouponValidationResult: observable,\r\n            CardDiscount: observable,\r\n            curCardDiscount: observable\r\n        });\r\n    }\r\n\r\n    applyCoupon = async (coupon: string) => {\r\n        let validationResult = await this.getCouponValidationResult(coupon);\r\n        let { result: rtn, id, types } = validationResult;\r\n        if (rtn === 1) {\r\n            if (types === 'vipcard' || types === 'coupon') {\r\n                validationResult.discountSetting = await this.getCouponDiscountSetting(types, id);\r\n            }\r\n            this.returnCall(validationResult);\r\n            this.closePage();\r\n        }\r\n        return rtn;\r\n    }\r\n\r\n    applyCoupon1 = async (coupon: string) => {\r\n        let validationResult = await this.getCouponValidationResult(coupon);\r\n        let { result: rtn, id, types } = validationResult;\r\n        if (rtn === 1) {\r\n            if (types === 'vipcard' || types === 'coupon') {\r\n                validationResult.discountSetting = await this.getCouponDiscountSetting(types, id);\r\n            }\r\n            return validationResult;\r\n        }\r\n        return rtn;\r\n    }\r\n\r\n    getCouponValidationResult = async (coupon: string) => {\r\n        let { currentUser } = this.cApp;\r\n        return await this.uqs.salesTask.IsCanUseCoupon.submit({ code: coupon, webUser: currentUser && currentUser.id });\r\n    }\r\n\r\n    /**\r\n     * 优惠卡券管理界面\r\n     */\r\n    openMyCouponManage = async () => {\r\n        this.isOpenMyCouponManage = true;\r\n        this.openVPage(VCouponManage);\r\n    }\r\n\r\n    /**\r\n     * 获取不同状态下的优惠卡券\r\n     */\r\n    getCoupons = async (state: any) => {\r\n        let { webuser } = this.uqs;\r\n        let { currentUser } = this.cApp;\r\n        let result;\r\n        switch (state) {\r\n            case 'validCardForWebUser':\r\n                result = await this.getValidCardForWebUser();\r\n                return this.getValidMusterForWebUser(result);\r\n            case 'usageRecordForWebUser':\r\n                result = await currentUser.getUserdCoupon();\r\n                // new QueryPager<any>(webuser.getMyUsedCoupon, 10, 10);\r\n                // await result.first({ webUser: currentUser });\r\n                return result;\r\n            case 'expiredForWebUser':\r\n                result = await currentUser.getExpiredCoupon();\r\n                // result = new QueryPager<any>(webuser.getMyExpiredCoupon, 10, 10);\r\n                // await result.first({ webUser: currentUser });\r\n                return result;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 可使用的优惠卡\r\n     */\r\n    getValidMusterForWebUser = (params: any) => {\r\n        let { vipCardForWebUser, couponsForWebUser, creditsForWebUser } = params;\r\n        let shift = couponsForWebUser.map((v: any) => v.coupon).concat(creditsForWebUser.map((v: any) => v.coupon));\r\n        let validMuster = vipCardForWebUser ? [vipCardForWebUser.coupon].concat(shift) : shift;\r\n        let finalValidMuster = validMuster.filter((v: any) => v.result === 1);\r\n        return finalValidMuster;\r\n    }\r\n\r\n    /**\r\n     * 获取已过期的优惠卡\r\n     */\r\n    /* getExpiredMusterForWebUser = async () => {\r\n        let { webuser, 积分商城 } = this.uqs;\r\n        let { currentUser } = this.cApp;\r\n        let expiredMusterForWebUser: any[] = [];\r\n        let couponsMusterForWebUser: any = await webuser.WebUserCoupon.table({ webUser: currentUser });\r\n        let creditsMusterForWebUser: any = await 积分商城.WebUserCredits.table({ webUser: currentUser });\r\n        let vipCardMusterForWebUser: any = await webuser.WebUserVIPCard.obj({ webUser: currentUser });\r\n        if (vipCardMusterForWebUser) {\r\n            let { expiredDate } = vipCardMusterForWebUser;\r\n            if (expiredDate.getTime() < Date.now()) {\r\n                vipCardMusterForWebUser.coupon = await this.getCouponValidationResult(vipCardMusterForWebUser.vipCardCode);\r\n                expiredMusterForWebUser.push(vipCardMusterForWebUser.coupon);\r\n            }\r\n        }\r\n\r\n        if (couponsMusterForWebUser) {\r\n            let result = couponsMusterForWebUser.filter((v: any) => v.expiredDate.getTime() < Date.now());\r\n            if (result.length > 0) {\r\n                for (let i = 0; i < result.length; i++) {\r\n                    let e = result[i];\r\n                    e.coupon = await this.getCouponValidationResult(e.couponCode);\r\n                }\r\n                expiredMusterForWebUser.push(...result.map((v: any) => v.coupon));\r\n            }\r\n        }\r\n\r\n        if (creditsMusterForWebUser) {\r\n            let result = creditsMusterForWebUser.filter((v: any) => v.expiredDate.getTime() < Date.now());\r\n\r\n\r\n            if (result.length > 0) {\r\n                for (let i = 0; i < result.length; i++) {\r\n                    let e = result[i];\r\n                    e.coupon = await this.getCouponValidationResult(e.creditsCode);\r\n                }\r\n                expiredMusterForWebUser.push(...result.map((v: any) => v.coupon));\r\n            }\r\n        }\r\n        // expiredMusterForWebUser.forEach((el: any) => el.conductReveal = true);\r\n        return expiredMusterForWebUser;\r\n    }\r\n */\r\n\r\n    /**\r\n     * 获取用户有效的优惠券/vip卡\r\n     */\r\n    getValidCardForWebUser = async () => {\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        let { id: currentUserId } = currentUser;\r\n\r\n        let validVIPCardForWebUser = await this.getValidVipCardForWebUser(currentUserId);\r\n        if (validVIPCardForWebUser) {\r\n            validVIPCardForWebUser.coupon = await this.getCouponValidationResult(validVIPCardForWebUser.vipCardCode)\r\n        }\r\n\r\n        let validCouponsForWebUser = await currentUser.getValidCoupons(); //this.getValidCouponsForWebUser(currentUserId);\r\n        if (validCouponsForWebUser.length > 0) {\r\n            for (let i = 0; i < validCouponsForWebUser.length; i++) {\r\n                let e = validCouponsForWebUser[i];\r\n                e.coupon = await this.getCouponValidationResult(e.couponCode);\r\n            }\r\n        }\r\n\r\n        let validCreditsForWebUser = await currentUser.getValidCredits();// this.getValidCreditsForWebUser(currentUserId);\r\n        if (validCreditsForWebUser.length > 0) {\r\n            for (let i = 0; i < validCreditsForWebUser.length; i++) {\r\n                let e = validCreditsForWebUser[i];\r\n                e.coupon = await this.getCouponValidationResult(e.creditsCode);\r\n            }\r\n        }\r\n\r\n        return {\r\n            'vipCardForWebUser': validVIPCardForWebUser,\r\n            'couponsForWebUser': validCouponsForWebUser,\r\n            'creditsForWebUser': validCreditsForWebUser\r\n        }\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        let result = await this.getValidCardForWebUser();\r\n\r\n        this.openVPage(VCoupleAvailable, result);\r\n    }\r\n\r\n    /**\r\n     * （在订单上）应用coupon\r\n     * @param coupon \r\n     */\r\n    applySelectedCoupon = async (coupon: string) => {\r\n        if (!coupon)\r\n            return \"请输入您的优惠卡/券号\";\r\n        else {\r\n            let ret = await this.applyCoupon(coupon);\r\n            return this.applyTip(ret);\r\n        }\r\n    }\r\n\r\n    applyTip = (ret: any) => {\r\n        return couponTips[ret];\r\n        /*\r\n        switch (ret) {\r\n            case -1:\r\n                return '对不起，当前服务器繁忙，请稍后再试。';\r\n            case 1:\r\n                return '有效';\r\n            case 0:\r\n                return \"无此优惠券，请重新输入或与您的专属销售人员联系确认优惠码是否正确。\";\r\n            case 2:\r\n                return '优惠券已过期或作废，请重新输入或与您的专属销售人员联系。';\r\n            case 3:\r\n            case 5:\r\n                return '优惠券无效，请重新输入或与您的专属销售人员联系。';\r\n            case 6:\r\n                return '不允许使用本人优惠券！';\r\n            case 4:\r\n                return '该优惠券已经被使用过了，不允许重复使用。';\r\n            default:\r\n                break;\r\n        }*/\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param currentUserId \r\n     */\r\n    getValidVipCardForWebUser = async (currentUserId: number): Promise<any> => {\r\n        let { uqs } = this.cApp;\r\n        let { webuser } = uqs;\r\n        let { WebUserVIPCard } = webuser;\r\n        let vipCardForWebUser: any = await WebUserVIPCard.obj({ webUser: currentUserId });\r\n        if (vipCardForWebUser) {\r\n            let { expiredDate } = vipCardForWebUser\r\n            if (expiredDate.getTime() > Date.now()) {\r\n                return vipCardForWebUser;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param currentUserId \r\n     *  (更新至webuser--getValidCoupons)\r\n     * -- TODO : 废弃\r\n     */\r\n    getValidCouponsForWebUser = async (currentUserId: number): Promise<any[]> => {\r\n        let { uqs } = this.cApp;\r\n        let { webuser } = uqs;\r\n        let { WebUserCoupon } = webuser;\r\n        let couponsForWebUser: any[] = await WebUserCoupon.table({ webUser: currentUserId });\r\n        let validCouponsForWebUser: any[] = [];\r\n        if (couponsForWebUser) {\r\n            validCouponsForWebUser = couponsForWebUser.filter(v => v.expiredDate.getTime() > Date.now());\r\n        }\r\n        return validCouponsForWebUser;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param currentUserId \r\n     * (更新至webuser--getValidCredits)\r\n     * -- TODO : 废弃\r\n     */\r\n    getValidCreditsForWebUser = async (currentUserId: number): Promise<any[]> => {\r\n        let { uqs } = this.cApp;\r\n        let { webuser } = uqs;\r\n        let creditsForWebUser: any[] = await webuser.WebUserCredits.table({ webUser: currentUserId });\r\n        let validCreditsForWebUser: any[] = [];\r\n        if (creditsForWebUser) {\r\n            validCreditsForWebUser = creditsForWebUser.filter(v => v.expiredDate.getTime() > Date.now());\r\n        }\r\n        return validCreditsForWebUser;\r\n    }\r\n\r\n    /**\r\n     * 显示VIP卡的品牌折扣明细 \r\n     * @param coupon \r\n     */\r\n    showDiscountSetting = async (vipCard: any) => {\r\n        let { types, id } = vipCard;\r\n        vipCard.discountSetting = await this.getCouponDiscountSetting(types, id);\r\n        this.openVPage(VVIPCardDiscount, vipCard);\r\n    }\r\n\r\n    showModelCardDiscount = async (vipCard: any) => {\r\n        let { types, id } = vipCard;\r\n        vipCard.discountSetting = await this.getCouponDiscountSetting(types, id);\r\n        this.curCardDiscount = vipCard;\r\n        this.CardDiscount = true;\r\n    }\r\n    /**\r\n     * 获取卡券的有效折扣  \r\n     */\r\n    getValidDiscounts = async (types: string, id: number) => {\r\n        return await this.getCouponDiscountSetting(types, id);\r\n    }\r\n\r\n    private getCouponDiscountSetting = async (types: string, couponId: number) => {\r\n        if (types === 'vipcard' || types === 'coupon') {\r\n            return await this.uqs.salesTask.VIPCardDiscount.table({ coupon: couponId });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 领取VIP卡 \r\n     */\r\n    showSharedVIPCard = async (param: any) => {\r\n        let { vipcard: vipCardCode, productids } = param;\r\n        await this.autoDrawCouponBase(vipCardCode);\r\n        let products = this.getProducts(productids);\r\n        this.openVPage(VSharedCoupon, { products });\r\n    }\r\n\r\n    /**\r\n     * 领取优惠券 \r\n     */\r\n    showSharedCoupon = async (param: any) => {\r\n        let { coupon, productids } = param;\r\n        await this.autoDrawCouponBase(coupon);\r\n        let products = this.getProducts(productids);\r\n        this.openVPage(VSharedCoupon, { products });\r\n    }\r\n\r\n    /**\r\n     * 领取积分码 \r\n     */\r\n    showSharedCredits = async (param: any) => {\r\n        let { credits, productids } = param;\r\n        await this.autoDrawCouponBase(credits);\r\n        let products = this.getProducts(productids);\r\n        this.openVPage(VSharedCoupon, { products });\r\n    }\r\n\r\n    private autoDrawCouponBase = async (couponBaseCode: string) => {\r\n\r\n        this.couponDrawed = false;\r\n        this.sharedCouponValidationResult = await this.getCouponValidationResult(couponBaseCode);\r\n        let { result } = this.sharedCouponValidationResult;\r\n\r\n        // 自动领取积分券\r\n        let { currentUser } = this.cApp;\r\n        if (!currentUser) return;\r\n        let { id: currentUserId, allowOrdering } = currentUser;\r\n        if (result === 1 && currentUserId && allowOrdering)\r\n            await this.drawCoupon(this.sharedCouponValidationResult);\r\n    }\r\n\r\n    private getProducts = (productids: string) => {\r\n        let products: any;\r\n        if (productids) {\r\n            let { ProductX } = this.uqs.product;\r\n            let productidArray = productids.split('-').filter((v: any) => /^\\d{1,10}$/.test(v));\r\n            products = productidArray.map((v: any) => ProductX.boxId(v));\r\n        }\r\n        return products;\r\n    }\r\n\r\n    loginWhenDrawCoupon = async (credits: any) => {\r\n        let { cApp } = this;\r\n        let { cMe, currentUser } = cApp;\r\n        let { code } = credits;\r\n        this.sharedCouponValidationResult = await this.getCouponValidationResult(code);\r\n        let { result } = this.sharedCouponValidationResult;\r\n        let allowCurrentUser = async () => {\r\n            if (result === 1) {\r\n                if (!currentUser || !currentUser.allowOrdering) {\r\n                    cMe.toPersonalAccountInfo(async () => await this.drawCoupon(this.sharedCouponValidationResult));\r\n                } else {\r\n                    await this.drawCoupon(this.sharedCouponValidationResult);\r\n                }\r\n            }\r\n        }\r\n\r\n        await this.cApp.assureLogin();\r\n        await allowCurrentUser();\r\n        /*\r\n        let loginCallback = async (user: User) => {\r\n            await cApp.currentUser.setUser(user);\r\n            await cApp.loginCallBack(user);\r\n            this.closePage(1);\r\n            await allowCurrentUser();\r\n        };\r\n        if (!this.isLogined)\r\n            nav.showLogin(loginCallback, true);\r\n        else {\r\n            await allowCurrentUser();\r\n        }\r\n        */\r\n    }\r\n\r\n    drawCoupon = async (credits: any) => {\r\n        let { uqs, cApp } = this;\r\n        let { currentUser } = cApp;\r\n        if (!currentUser) return;\r\n        let { id: currentUserId } = currentUser;\r\n        let { webuser, customer } = uqs;\r\n        let { result, id: creditsId, code, validitydate, types } = credits;\r\n        if (result !== 1)\r\n            return;\r\n        switch (types) {\r\n            case 'credits':\r\n                let drawedResult: any;\r\n                if(currentUser.hasCustomer)\r\n                    drawedResult = await customer.CustomerCredits.obj({ customer: currentUser.currentCustomer, credits: creditsId });\r\n                else drawedResult = await webuser.WebUserCredits.obj({ webUser: currentUserId, credits: creditsId });\r\n                if (!drawedResult) {\r\n                    let now = new Date();\r\n                    let pramArr = [{\r\n                        credits: creditsId, creditsCode: code,\r\n                        createDate: `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`, expiredDate: validitydate\r\n                    }];\r\n                    if (currentUser.hasCustomer)\r\n                        await customer.CustomerCredits.add({ customer: currentUser.currentCustomer, arr1: pramArr });\r\n                    else\r\n                        await webuser.WebUserCredits.add({ webUser: currentUserId, arr1: pramArr });\r\n                }\r\n                break;\r\n            case 'coupon':\r\n                let drawedResult3: any;\r\n                if(currentUser.hasCustomer)\r\n                    drawedResult3 = await customer.CustomerCoupon.obj({ customer: currentUser.currentCustomer, coupon: creditsId });\r\n                else drawedResult3 = await webuser.WebUserCoupon.obj({ webUser: currentUserId, coupon: creditsId });\r\n                if (!drawedResult3) {\r\n                    let now = new Date();\r\n                    let pramArr = [{\r\n                        couponType: 1, couponCode: code,\r\n                        createDate: `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`, expiredDate: validitydate,\r\n                    }];\r\n                    if (currentUser.hasCustomer)\r\n                        await customer.CustomerCoupon.add({ customer: currentUser.currentCustomer, coupon: creditsId, arr1: pramArr });\r\n                    else\r\n                        await webuser.WebUserCoupon.add({ webUser: currentUserId, coupon: creditsId, arr1: pramArr });\r\n                }\r\n                break;\r\n            case 'vipcard':\r\n                let drawedResult2 = await webuser.WebUserVIPCard.obj({ webUser: currentUserId, vipCard: creditsId });\r\n                if (!drawedResult2) {\r\n                    let now = new Date();\r\n                    await this.uqs.webuser.WebUserVIPCard.add({\r\n                        webUser: currentUserId,\r\n                        vipCard: creditsId,\r\n                        arr1: [{\r\n                            vipCardType: 1,\r\n                            createDate: `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`,\r\n                            expiredDate: validitydate,\r\n                            vipCardCode: code\r\n                        }]\r\n                    })\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.couponDrawed = true;\r\n    }\r\n\r\n    async showProductDetail(product: number) {\r\n        let { cProduct } = this.cApp;\r\n        await cProduct.showProductDetail(product);\r\n    }\r\n\r\n    renderProduct = (product: any) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderProductWithPrice(product);\r\n    }\r\n\r\n    renderModelCardDiscount = () => {\r\n        return this.renderView(VModelCardDiscount);\r\n    }\r\n\r\n    renderCardDiscount = () => {\r\n        return this.renderView(VVIPCardDiscount, { vipCard: this.curCardDiscount });\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, List, LMR, FA } from 'tonva-react';\r\nimport { observer } from 'mobx-react';\r\nimport { CYncProjects } from './CYncProjects';\r\n\r\nexport class VYncProjects extends VPage<CYncProjects> {\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { YncProjectsItems } = this.controller;\r\n\r\n        let header = <header>\r\n            <div>选择项目</div>\r\n        </header>;\r\n        return <Page header={header} headerClassName=\"py-1 bg-primary\" >\r\n            <List items={YncProjectsItems} item={{ render: this.renderItem, onClick: this.onClick }} />\r\n        </Page>;\r\n    });\r\n\r\n\r\n    private onClick = async (model: any) => {\r\n        await this.controller.returnYncProject(model);\r\n        this.closePage();\r\n    }\r\n\r\n    private renderItem = (item: any, index: number) => {\r\n        let { ProjectName } = item;\r\n        return <LMR className=\"py-2 border\">\r\n            <div><FA name=\"circle\" className=\"px-2 text-primary\"></FA>{ProjectName}</div>\r\n        </LMR >;\r\n    }\r\n\r\n}\r\n","import { CUqBase } from 'tapp';\r\nimport { VYncProjects } from './VYncProjects';\r\nimport { YncProjectsResponse, YncProjectsItem } from './YncProductItem';\r\n\r\nexport class CYncProjects extends CUqBase {\r\n\r\n    private OrganCode: string;\r\n    private UserId: number;\r\n    YncProjectsItems: YncProjectsItem[] = [];\r\n    private YncProjectsResponse: YncProjectsResponse;\r\n\r\n    async internalStart(OrganCode: string, UserId: number) {\r\n        this.OrganCode = OrganCode;\r\n        this.UserId = UserId;\r\n        await this.getYncProjects();\r\n        this.openVPage(VYncProjects);\r\n    }\r\n\r\n    getYncProjects = async () => {\r\n        let formData = new FormData();\r\n        formData.append(\"OrganCode\", this.OrganCode);\r\n        formData.append(\"UserId\", this.UserId.toString());\r\n\r\n        let res = await window.fetch('http://apitest.sinopec.ad/api/ynk/projects', {\r\n            method: 'post',\r\n            body: formData,\r\n            headers: {\r\n                'Accept': 'application/x-www-form-urlencoded',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        if (res.ok) {\r\n            let content = await res.json();\r\n            if (content.ok) {\r\n                this.YncProjectsResponse = JSON.parse(content);\r\n                if (this.YncProjectsResponse.code === 200) {\r\n                    this.YncProjectsItems = this.YncProjectsResponse.response;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    returnYncProject = (model: any) => {\r\n        this.returnCall(model);\r\n    }\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, FA } from 'tonva-react';\r\nimport { CLottery } from './CLottery';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport classNames from 'classnames';\r\n\r\nexport class VLottery extends VPage<CLottery> {\r\n    currIndex: number;\r\n    winning: any;   /* 中奖的商品 */\r\n    isLottery: boolean = false;\r\n    lotterySuccess: boolean = false;\r\n    aDeg: any = 0;/* 轮盘转到度数 */\r\n    prize = [0, 1, 2, 5, 8, 7, 6, 3];//抽奖轮转顺序  九宫格\r\n\r\n    constructor(c: CLottery) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            currIndex: observable,\r\n            winning: observable,\r\n            isLottery: observable,\r\n            lotterySuccess: observable,\r\n            aDeg: observable\r\n        });\r\n    }\r\n\r\n    // prize = [0, 1, 2, 3, 4, 5, 6, 7];//抽奖轮转顺序     轮盘\r\n    async open(param?: any) {\r\n        // console.log(await this.controller.cApp.uqs.积分商城);\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private lottery = async () => {\r\n        let { lotteryProducts, productsLib, decreasingNumberOfDraws, winningProduct } = this.controller;\r\n        await decreasingNumberOfDraws();\r\n        let i = 0;//转到哪个位置\r\n        let count = 0;//转圈初始值\r\n        let totalCount = 9;//转动的总圈数\r\n        let speed = 500;//转圈速度，越大越慢\r\n        let timer: any;\r\n        /* ---------------- 轮盘转动 ---------------- */\r\n        // let aaaaa = Math.floor(Math.random() * (3600 - 1000) + 1000);\r\n        // let roll = () => {\r\n        //     this.aDeg += 10;\r\n        //     if (this.aDeg >= aaaaa) {\r\n        //         clearTimeout(timer);\r\n        //         this.isLottery = false; this.lotterySuccess = true;\r\n        //     } else\r\n        //         timer = setTimeout(roll, 50);\r\n        // }\r\n        // roll();\r\n        /* ---------------- 轮盘转动 ---------------- */\r\n        this.currIndex = undefined;\r\n        this.isLottery = true;\r\n        let indexMR = this.mR();//随机取值\r\n        let roll = async () => {\r\n            speed -= 50;//速度衰减\r\n            if (speed <= 10) speed = 10;\r\n            this.currIndex = this.prize[i];\r\n            i++;\r\n            if (i > this.prize.length - 1) {//计算转圈次数\r\n                i = 0; count++;\r\n            }\r\n            if (count >= totalCount && productsLib[indexMR].productId === lotteryProducts[this.currIndex].id) {//满足转圈数和指定位置就停止\r\n                clearTimeout(timer); speed = 500; this.isLottery = false; this.lotterySuccess = true; this.winning = lotteryProducts[this.currIndex];\r\n                await winningProduct(this.winning);\r\n            } else {\r\n                timer = setTimeout(roll, speed);//不满足条件时调用定时器\r\n                if (count >= totalCount - 1 || speed <= 50) speed += 100;//最后一圈减速\r\n            }\r\n        }\r\n        roll();\r\n    }\r\n\r\n    private mR = () => {\r\n        let { productsLib } = this.controller;\r\n        return Math.floor(Math.random() * (productsLib.length - 0) + 0);\r\n    }\r\n\r\n    private renderLotteryBtn = () => {\r\n        let { remainingNumOfDraws } = this.controller;\r\n        return <button className={classNames('btn btn-primary  align-self-center ', this.isLottery ? 'disabled pr-4' : '')} onClick={() => {\r\n            if (remainingNumOfDraws === 0) { this.lotterySuccess = true; return; }\r\n            if (!this.isLottery) { this.lottery() }\r\n        }}>{this.isLottery ? '抽奖中' : '开始抽奖'}\r\n            <span className=\" position-relative\" style={{ display: this.isLottery ? '' : 'none' }}>\r\n                <i className=\"fa-li fa fa-spinner fa-spin position-absolute\" style={{ left: -7 }}></i>\r\n            </span>\r\n        </button>\r\n    }\r\n\r\n    private renderPrizesBlock = (v: any, index: any) => {\r\n        let color = [0, 2, 4, 6].includes(index) ? '#A52A2A' : '#7EC0EE';\r\n        // Math.cos((45 / 2) * (Math.PI / 180)) * 160 / 2 可大约计算border的带宽,存在误差 (------思路错误，需修正)\r\n        // console.log(Math.sin((45) * (Math.PI / 180)) * 160 / 2);\r\n        return <div key={index}\r\n            style={{\r\n                transform: `rotate(${index * 45 - 90}deg) translateY(-50%)`, top: '50%', left: '50%', width: 0, height: 0, border: \"68px solid transparent\",\r\n                borderRight: `160px solid ${this.currIndex === index ? 'rgb(255,203,63)' : color}`, borderLeft: 0, transformOrigin: '0% 0%'\r\n            }}\r\n            className=\"position-absolute\">\r\n            <span className=\"position-absolute\" style={{ top: -10, left: 130, transform: 'rotate(90deg)' }}>{v.content}</span>\r\n        </div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { lotteryProducts, remainingNumOfDraws, openMyLotteryPrize } = this.controller;\r\n        let header = <div className=\"w-100 text-center\">幸运抽奖</div>;\r\n\r\n        return <Page header={header} right={<></>} className=\"w-100\">\r\n\r\n            <div className=\"position-relative\" style={{ background: `url(http://bpic.588ku.com/back_pic/04/70/62/26589975a47d9d0.jpg) no-repeat`, backgroundSize: 'cover', }}>\r\n                {/* <img style={{ visibility: 'hidden' }} width=\"100%\" src={timg1_test} alt=\"\" /> */}\r\n                <div className=\"w-100 pb-5\" >\r\n                    {/* 抽奖机会 */}\r\n                    <div className=\"d-flex justify-content-center text-light pt-5 mb-3\" >\r\n                        <span className=\"border border-light rounded px-2 bg-transparent\" style={{ padding: '2px 0' }}>\r\n                            剩余 <b className=\"bg-white p-1 text-danger\">{remainingNumOfDraws}</b> 次抽奖机会\r\n                        </span>\r\n                    </div>\r\n\r\n                    {/* 抽奖区域 */}\r\n                    <div className=\" pb-5 mx-2 rounded-lg w-auto\"\r\n                        style={{ background: \"url(https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1104137880,798719686&fm=26&gp=0.jpg) no-repeat\", backgroundSize: \"100% 100%\" }}>\r\n                        {/* 抽奖标题 */}\r\n                        <div className=\"d-flex justify-content-center p-2 pt-3 h3 text-center text-monospace font-weight-bolder\">\r\n                            <div className=\" position-relative\" style={{ color: \"#cc0000\" }}>\r\n                                <span style={{ top: 3, left: -30, transform: 'rotate(-12deg)' }} className=\"position-absolute\">福</span>\r\n                                利放\r\n                                <span style={{ top: 3, right: -30, transform: 'rotate(12deg)' }} className=\"position-absolute\">送</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 抽奖内容 */}\r\n                        {/* 轮盘--------------界面适配bug */} {/* overflow-hidden */}\r\n                        {/* <div className=\"border rounded-circle m-auto w-20c h-20c position-relative overflow-hidden\"\r\n                            style={{ transform: `rotate(${this.aDeg}deg)` }}>\r\n                            {lotteryProducts.map((v: any, index: number) => {\r\n                                return this.renderPrizesBlock(v, index);\r\n                            })}\r\n                            <div className=\"border rounded-circle position-absolute w-75 h-75 d-flex justify-content-center align-items-center\"\r\n                                style={{ top: '50%', left: '50%', transform: 'translate(-50%, -50%)', }}>\r\n                                {this.renderLotteryBtn()}\r\n                            </div>\r\n                        </div> */}\r\n                        {/* 九宫格 */}\r\n                        <div className='d-flex flex-wrap px-2 m-auto'>\r\n                            {lotteryProducts.map((v: any, index: number) => {\r\n                                if (index === 4) {\r\n                                    return <div className=\"d-flex justify-content-center\" key={index} style={{ width: '33.3%' }} >\r\n                                        {this.renderLotteryBtn()}\r\n                                    </div>\r\n                                }\r\n                                return <PointProductImage className={classNames('border', this.currIndex === index ? 'border-success' : '')} key={index} style={{ width: \"33.3%\" }} chemicalId={'1'} />\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                    {/* 我的奖品 */}\r\n                    <div className=\"mx-2 d-flex justify-content-center mt-2\" onClick={() => { if (!this.isLottery) openMyLotteryPrize() }}>\r\n                        <span style={{ borderRadius: \"22px\", color: '#F7C709' }} className=\"text-center py-1 px-3 bg-white\">\r\n                            <FA name='gift' /> <span style={{ color: 'rgb(152,42,7)' }} className=\"small\">我的奖品</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n\r\n            {/* 抽奖成功提示 */}\r\n            {\r\n                this.lotterySuccess ?\r\n                    <div className=\"position-fixed d-flex justify-content-center\"\r\n                        style={{ top: 0, left: 0, right: 0, bottom: 0, zIndex: 99999, backgroundColor: 'hsla(120,0%,50%,.7)' }}>\r\n                        <div className=\"align-self-center bg-white rounded-lg px-4 py-3 pb-4 text-center position-relative\">\r\n                            <div className=\"position-absolute\" style={{ top: 5, right: 10, }} onClick={() => { this.lotterySuccess = false; this.winning = undefined; }}><FA name=\"times-circle-o\" /></div>\r\n                            {\r\n                                remainingNumOfDraws === 0 && this.winning === undefined\r\n                                    ? <div className=\"pt-2\">\r\n                                        <div className=\"text-warning\"><FA name='frown-o' size='2x' /></div>\r\n                                        您的抽奖机会用完了！\r\n                                    </div>\r\n                                    : <div className=\"align-self-center bg-white rounded-lg  pt-3 text-center\">\r\n                                        <div>恭喜您</div>\r\n                                        <div>获得-----</div>\r\n                                        <div className=\"py-5\">展示</div>\r\n                                        <div className='small mt-2'>可以到我的奖品中去查看</div>\r\n                                    </div>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    : null\r\n            }\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, List } from 'tonva-react';\r\nimport { CLottery } from './CLottery';\r\n\r\nexport class VMyLotteryPrize extends VPage<CLottery> {\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderMyPrize = (myPrize: any) => {\r\n        return <div>1111</div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { myPrizeLib, openMyPrizeOrder } = this.controller;\r\n        let footer = <div className=\"w-100 px-3 d-flex justify-content-end\">\r\n            <button type=\"button\" className=\"btn btn-danger m-1\" onClick={openMyPrizeOrder}>领取奖品</button>\r\n        </div>\r\n\r\n        return <Page header='我的奖品' footer={footer}>\r\n            <List items={myPrizeLib} item={{ render: this.renderMyPrize }} none='无' />\r\n        </Page >\r\n    })\r\n}","import { BoxId } from 'tonva-react';\r\nimport { observable, computed, makeObservable } from 'mobx';\r\n\r\nexport class prizeOrder {\r\n\r\n    webUser: any;   // OK\r\n    organization: BoxId;\r\n    customer: any;  //OK\r\n    salesRegion: BoxId;   // OK\r\n\r\n    shippingContact: BoxId; //OK\r\n    exchangeItems: prizeOrderItem[] = [];\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            shippingContact: observable,\r\n            exchangeItems: observable,\r\n            amount: computed\r\n        });\r\n    }\r\n\r\n    get amount() {\r\n        return this.exchangeItems.reduce((pv, cv) => (pv + cv.subAmount), 0);\r\n    };\r\n\r\n    getDataForSave() {\r\n        let exchangeItems: any[] = [];\r\n        this.exchangeItems.forEach(oi => {\r\n            exchangeItems.push({\r\n                product: oi.product, pack: oi.pack, point: oi.point, quantity: oi.quantity\r\n                , subAmount: oi.quantity * oi.point\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            amount: this.amount,\r\n            exchangeitems: exchangeItems, // 前面的必须是小写的\r\n            salesRegion: this.salesRegion\r\n        }\r\n    }\r\n}\r\n\r\nexport class prizeOrderItem {\r\n    product: BoxId;\r\n    pack: BoxId;\r\n    quantity: any;\r\n    point: any;\r\n    imageUrl: any;\r\n    description: any;\r\n    descriptionC: any;\r\n    grade: any;\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            pack: observable,\r\n            quantity: observable,\r\n            point: observable,\r\n            imageUrl: observable,\r\n            description: observable,\r\n            descriptionC: observable,\r\n            grade: observable,\r\n            subAmount: computed\r\n        });\r\n    }\r\n\r\n    get subAmount() {\r\n        return this.quantity * this.point;\r\n    }\r\n}","/* eslint-disable */\r\nimport { CApp, CUqBase } from 'tapp';\r\nimport { VLottery } from './VLottery';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { VMyLotteryPrize } from './VMyLotteryPrize';\r\nimport { VMyPrizeExchangeOrder } from '../VExchangeOrder';\r\nimport { prizeOrder, prizeOrderItem } from './prizeOrder';\r\n\r\nexport class CLottery extends CUqBase {\r\n    lotteryProducts: any[] = [];        /* 抽奖产品列表 */\r\n    remainingNumOfDraws: number = 1;    /* 剩余抽奖次数 */\r\n    productsLib: any[] = [];            /* 抽奖产品集合（加概率） */\r\n    myPrizeLib: any[] = [];             /* 我的奖品 */\r\n    totalNumPrizes: number = 10000;      /* 奖品总量 */\r\n    prizeOrderData: prizeOrder = new prizeOrder();\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            lotteryProducts: observable,\r\n            remainingNumOfDraws: observable,\r\n            productsLib: observable,\r\n            myPrizeLib: observable,\r\n            totalNumPrizes: observable,\r\n            prizeOrderData: observable\r\n        });\r\n    }\r\n\r\n    async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 抽奖界面\r\n     */\r\n    openLotteryProduct = async () => {\r\n        await this.getLotteryProducts();\r\n        await this.getLotteryNumOfDraws();\r\n        this.basedChanceHandlePrizes();\r\n        this.openVPage(VLottery);\r\n    }\r\n\r\n    /**\r\n     * 我的奖品界面\r\n     */\r\n    openMyLotteryPrize = async () => {\r\n        await this.getMyPrizes();\r\n        this.openVPage(VMyLotteryPrize);\r\n    }\r\n\r\n    /**\r\n    * 奖品领取预览界面\r\n    */\r\n    openMyPrizeOrder = async () => {\r\n        let { cPointProduct } = this.cApp;\r\n        if (this.prizeOrderData.shippingContact === undefined) {\r\n            this.prizeOrderData.shippingContact = await cPointProduct.getDefaultShippingContact();\r\n        }\r\n        this.openVPage(VMyPrizeExchangeOrder);\r\n    }\r\n\r\n    /**\r\n     * 中奖获得的产品\r\n     */\r\n    winningProduct = async (winning: any) => {\r\n        console.log('winning', winning);\r\n        await this.addMyPrize(winning);\r\n    }\r\n\r\n    /**\r\n     * 抽奖次数递减\r\n     */\r\n    decreasingNumberOfDraws = async () => {\r\n        this.remainingNumOfDraws -= 1;\r\n        // await this.uqs.积分商城.\r\n    }\r\n\r\n    /**\r\n     * 获取可抽奖次数\r\n     */\r\n    getLotteryNumOfDraws = async () => {\r\n        // this.remainingNumOfDraws = await this.uqs.积分商城.\r\n    }\r\n\r\n    /**\r\n     * 获取抽奖产品列表\r\n     */\r\n    getLotteryProducts = async () => {//PR\r\n        // this.lotteryProducts = await this.uqs.积分商城.\r\n        this.lotteryProducts = [\r\n            { id: 1, content: '111', p: '1', PR: 15 },\r\n            { id: 2, content: '222', p: '4', PR: 20 },\r\n            { id: 3, content: '333', p: '5', PR: 5 },\r\n            { id: 4, content: '444', p: '1', PR: 10 },\r\n            { id: 5, content: '555', p: '1', PR: 10 },\r\n            { id: 6, content: '666', p: '8', PR: 20 },\r\n            { id: 7, content: '777', p: '2', PR: 5 },\r\n            { id: 8, content: '888', p: '7', PR: 15 },\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * 据概率处理抽奖商品\r\n     */\r\n    basedChanceHandlePrizes = () => {\r\n        let arr = [], minPrice = this.lotteryProducts[0];\r\n        for (let key of this.lotteryProducts) {\r\n            if (minPrice.p >= key.p && minPrice.PR > key.PR) minPrice = key;\r\n            let base = key.PR * this.totalNumPrizes / 100;\r\n            arr.push(Array.from(Array(base), (v, k) => { return { productId: key.id, content: key.content } }));\r\n        }\r\n        let shift = arr.flat();\r\n        this.productsLib = shift;\r\n        let total = this.productsLib.length;\r\n\r\n        if (total !== this.totalNumPrizes) {\r\n            for (let i = 0; i < (this.totalNumPrizes - total); i++)  //找8个商品中价值最小的\r\n                this.productsLib.push({ productId: minPrice.id, content: minPrice.content });//productId 暂未定\r\n        }\r\n\r\n        //乱序\r\n        let { length } = this.productsLib, i;\r\n        while (length) {\r\n            i = (Math.random() * length--) >>> 0;\r\n            [this.productsLib[length], this.productsLib[i]] = [this.productsLib[i], this.productsLib[length]]\r\n        }\r\n\r\n        this.lotteryProducts.splice(this.lotteryProducts.length / 2, 0, {}); // 九宫格 使用\r\n    }\r\n\r\n    /**\r\n     * 抽中的产品添加至我的奖品列表   ------------------ 需uq \r\n     */\r\n    addMyPrize = async (prize: any) => {\r\n        // await this.uqs.积分商城\r\n    }\r\n\r\n    /**\r\n     * 获取我的奖品\r\n     */\r\n    getMyPrizes = async () => {\r\n        this.myPrizeLib = [];\r\n        // await this.uqs.积分商城\r\n    }\r\n\r\n    private createOrderFromCart = async () => {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        this.prizeOrderData.webUser = currentUser.id;\r\n        this.prizeOrderData.salesRegion = currentSalesRegion.id;\r\n        if (currentUser.currentCustomer !== undefined) {\r\n            this.prizeOrderData.customer = currentUser.currentCustomer.id;\r\n        }\r\n\r\n        /* if (this.myPrizeLib !== undefined && this.myPrizeLib.length > 0) {\r\n            this.prizeOrderData.exchangeItems = this.myPrizeLib.map((e: any) => {\r\n                if (e.quantity > 0) {\r\n                    var item = new prizeOrderItem();\r\n                    item.product = e.id;\r\n                    item.pack = e.pack;\r\n                    item.quantity = e.quantity;\r\n                    item.point = e.point;\r\n                    return item;\r\n                }\r\n            });\r\n        } */\r\n    }\r\n\r\n    /**\r\n     * 确认领取(成功 VMyPrizeExchangeOrder 确认使用此函数)\r\n     */\r\n    submitOrder = async () => {\r\n        this.createOrderFromCart();\r\n        console.log(this.prizeOrderData);\r\n\r\n        // let PointExchangeSheet = this.uqs.积分商城.PointExchangeSheet;\r\n        // let getDataForSave = this.orderData.getDataForSave();\r\n        // let result: any = await PointExchangeSheet.save(\"PointExchangeSheet\", getDataForSave);\r\n        // let { id, flow, state } = result;\r\n        // await PointExchangeSheet.action(id, flow, state, \"submit\");\r\n\r\n\r\n        // 打开下单成功显示界面\r\n        // nav.popTo(this.cApp.topKey);\r\n        // this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        let { cPointProduct } = this.cApp;\r\n        this.prizeOrderData.shippingContact = await cPointProduct.selectContact()\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/已签到.552dc80d.png\";","import * as React from 'react';\r\nimport { VPage, Page, DropdownAction, DropdownActions, FA } from 'tonva-react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { signTopicMap, Homemadelogo } from 'tools/images';\r\nimport { CSignIn } from './CSignIn';\r\nimport { RevenueExpenditure } from '../basicRefer';\r\nimport moment from 'moment';\r\nimport 积分图标P from 'images/积分图标P.png'\r\nimport 已签到 from 'images/已签到.png'\r\nimport { xs } from 'tools/browser';\r\nimport { CrPageHeaderTitle, pageHTitle } from 'tools/pageHeaderTitle';\r\nimport { renderDropdownActions } from '../VMyPoint';\r\n\r\nexport const daysAndMultipleByWelfare = [\r\n    { id: 1, days: 7, multiple: 2 },\r\n    { id: 2, days: 15, multiple: 3 },\r\n    { id: 3, days: 30, multiple: 4 },\r\n    { id: 4, days: 180, multiple: 5 },\r\n    { id: 5, days: 365, multiple: 6 }\r\n];\r\n\r\nexport class VPointSign extends VPage<CSignIn> {\r\n    showTips: any = \"none\";\r\n    rulesNum: number = 0;\r\n\r\n    constructor(c: CSignIn) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            showTips: observable\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderRule = (rulesNum: any, ruleContent: any) => {\r\n        return <div key={rulesNum} className=\" mb-3 d-flex\" style={{ boxShadow: \"0px 1px 3px #333333\", borderRadius: \"8px\" }}>\r\n            <span className=\"h4 m-0 p-2  align-self-center\" style={{ borderRight: '1px dashed #cccccc' }}>\r\n                {String(rulesNum).padStart(2, '0')}\r\n            </span>\r\n            <div className=\"initialism modal-title flex-fill p-2  align-self-center\">{ruleContent}</div>\r\n        </div>\r\n    }\r\n\r\n    private demandBlock = (name: string, icon: string, color: string, action: any) => {\r\n        return <div onClick={action} className=\"w-25 text-center p-2\" style={{ color }}>\r\n            <FA name={icon} size=\"2x\" />\r\n            <div className=\"small\">{name}</div>\r\n        </div>\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { isSignin, signinval, openRevenueExpenditure } = this.controller;\r\n        //let { cLottery } = cApp;\r\n        let date = moment().format('YYYY-MM-DD').split('-');\r\n        let timer = `${date[0]} 年 ${date[1]} 月 ${date[2]} 日 `;\r\n\r\n        // if (IsSignin) this.handleChange();\r\n        let actions: DropdownAction[] = [\r\n            {\r\n                icon: 'get-pocket',\r\n                caption: RevenueExpenditure.SIGNINHISTORY,\r\n                action: () => openRevenueExpenditure(RevenueExpenditure.SIGNINHISTORY)\r\n            }\r\n        ];\r\n        let right = <DropdownActions className=\"align-self-center mr-1 bg-transparent border-0 text-light\" icon=\"navicon\" actions={actions} />;\r\n        let header = CrPageHeaderTitle('签到');\r\n        if (!xs) right = null;\r\n        return <Page header={header} right={right}>\r\n            {pageHTitle('签到')}\r\n            {renderDropdownActions(actions)}\r\n            <div className=\"text-center text-light px-5 pt-5\"\r\n                style={{ background: `url(${signTopicMap}) no-repeat`, backgroundSize: \"100% 100%\" }}>\r\n                {/* <div className=\"rounded-circle mx-auto\"\r\n                    style={{ background: 'linear-gradient(#FCF4F3 15%, #EFDCD4, #CC9287, #C17162, #A93338, #A52230)', padding: '.8rem', width: '10rem', height: '10rem' }}>\r\n                    <div className=\"w-100 h-100 rounded-circle pt-3\" style={{ background: \"#A52230\" }}>\r\n                        <div className=\"small pt-2\">已连续签到</div>\r\n                        <div className=\"d-flex align-items-end justify-content-center\">\r\n                            <span className=\"font-weight-bolder display-4\">{signinConsecutiveDays} </span>\r\n                            <span className=\"mb-1 pb-2 ml-1\"> 天</span>\r\n                        </div>\r\n                    </div>\r\n                </div> */}\r\n                <div className=\"pb-5\">\r\n                    <div className=\"h4\">{timer}</div>\r\n                    {isSignin ? <>\r\n                        <img src={积分图标P} alt=\"\" className=\"h-5c\" />\r\n                        <div className=\"pt-3\">\r\n                            <span className=\"bg-white px-3 py-1 font-weight-bolder\" style={{ borderRadius: \"25px\", color: 'rgb(165,34,48)' }}>本次签到获取{signinval}分</span>\r\n                        </div>\r\n                    </>\r\n                        : <>\r\n                            <img src={已签到} alt=\"\" className=\"h-4c mb-3 mt-2\" />\r\n                            <div className=\"mb-2 h5\">今日已签到</div>\r\n                        </>\r\n                    }\r\n                    {/* <div className=\"my-4 h5\">今日已签到</div> */}\r\n                </div>\r\n                {/* <div className=\"rounded-circle mx-auto w-12c h-12c\"\r\n                    style={{ background: 'linear-gradient(#FCF4F3 15%, #EFDCD4, #CC9287, #C17162, #A93338, #A52230)', padding: '.8rem' }}>\r\n                    <div className=\"w-100 h-100 rounded-circle pt-3\" style={{ background: \"#A52230\" }}>\r\n                        <div className=\"pt-4\">已连续签到</div>\r\n                        <div className=\"d-flex align-items-end justify-content-center\">\r\n                            <span className=\"font-weight-bolder display-4\">{signinConsecutiveDays} </span>\r\n                            <span className=\"mb-1 pb-2 ml-1\"> 天</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"small\" style={{ transform: 'translateY(-30px)' }}>\r\n                    <span className=\"bg-white px-3 py-1 font-weight-bolder\" style={{ borderRadius: \"25px\", color: 'rgb(165,34,48)' }}>本次签到获取{signinval}分</span>\r\n                    <div className=\"small mt-2\">连续签到30天，可获得1次抽奖机会</div>\r\n                </div> */}\r\n            </div>\r\n            <div className=\"w-100 p-5 mt-4 d-flex justify-content-center flex-column\" >\r\n                <img src={Homemadelogo} alt=\"\" className=\"w-100 mx-auto\" style={{ opacity: .1, transform: 'skew(-10deg, 0deg)' }} />\r\n            </div>\r\n\r\n            {/* 抽奖 */}\r\n            {/* <div style={{ background: `url(${signViceMap})`, backgroundSize: \"100%\" }} className=\"h-20c\">\r\n                <div className=\"mx-5 mt-2 py-1 d-flex justify-content-center flex-wrap\" style={{ boxShadow: \"0px 1px 3px #333333\", borderRadius: \"8px\" }}>\r\n                    {this.demandBlock('抽奖', 'life-ring', '#CD6600', cLottery.openLotteryProduct)}\r\n                </div>\r\n            </div> */}\r\n\r\n            {/* 签到规则 */}\r\n            {/* <div className=\"pt-4 px-4 mt-4\">\r\n                <p className=\"text-center mb-4\"><span style={{ borderRadius: \"22px\", background: \"#D56F2B\" }} className=\"text-center py-2 px-3 text-white\">签到规则</span></p>\r\n                {this.renderRule(1, '连续签到30天，可获得1次抽奖机会')}\r\n                {this.renderRule(2, '若累计签到中断,则重新计算签到天数。')}\r\n            </div> */}\r\n\r\n            {/* <small style={{ color: 'rgb(255,192,120)' }} >连续签到{welfare.days}天，可获得{welfare.multiple}倍的积分奖励</small> */}\r\n            {/* 签到获取提示 */}\r\n            {/* <div className=\"text-left small w-100 pt-1 pl-2 position-absolute text-body\"\r\n                style={{ top: 0, left: 0, display: this.showTips }}>本次签到获取{signinval}分</div> */}\r\n        </Page >;\r\n\r\n        /* return <Page header='签到领积分' right={right}>\r\n            <div className=\"text-center \" style={{ position: \"relative\", background: \"linear-gradient(rgb(253, 98, 52), rgb(250, 51, 82))\", padding: '3rem' }}>\r\n                <div className=\"d-flex justify-content-center\" style={{ flexDirection: 'column', margin: '0 4rem' }}>\r\n                    <h2 style={{ color: 'rgb(255,192,120)' }} className=\"mb-3\">\r\n                        <FA name='diamond' /> <span className=\"text-light\"><small>x</small> {this.signinval}</span>\r\n                    </h2>\r\n                    {getSignpoint}\r\n                </div>\r\n                <div className=\"text-center text-white small w-100 p-1 alert alert-warning text-muted\" style={{\r\n                    position: \"absolute\", top: 0, left: 0, display: this.showTips\r\n                }}>本次签到获取{this.signinval}分</div>\r\n            </div>\r\n            // <div className=\"text-center my-1 p-1  bg-white\" style={{ borderBottom: \".5px solid #ccc\" }}>签到积分详情</div>\r\n            // <List items={signinPageHistory} item={{ render: renderPointRecord }} none={none} />\r\n        </Page >; */\r\n    })\r\n\r\n\t/*\r\n    protected handleChange = async () => {\r\n        this.showTips = \"\";\r\n        if (!this.showTips)\r\n            setTimeout(() => { this.showTips = \"none\"; this.controller.isSignin = false }, GLOABLE.TIPDISPLAYTIME);\r\n\t}\r\n\t*/\r\n}\r\n","export default \"data:image/png;base64,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\"","/* eslint-disable */\r\nimport { CApp, CUqBase } from 'tapp';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { QueryPager } from 'tonva-react';\r\nimport { VPointSign, daysAndMultipleByWelfare } from './VPointSign';\r\nimport { VRevenueExpenditure } from '../VRevenueExpenditure';\r\n\r\nconst pointBase: number = 3; /* 积分基数 */\r\n\r\nexport class CSignIn extends CUqBase {\r\n    signinval: number = pointBase;         /* 签到可领积分 */\r\n    signinConsecutiveDays: number = 0;     /* 连续签到天数 */\r\n    isSignin: boolean = false;             /* 是否签到 */\r\n    signinPageHistory: QueryPager<any>;    /* 签到记录 */\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            signinval: observable,\r\n            signinConsecutiveDays: observable,\r\n            isSignin: observable,\r\n            signinPageHistory: observable\r\n        });\r\n    }\r\n\r\n    async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 签到   ------------------ 需调用连续签到天数 uq:this.getSigninConsecutiveDays --------------------\r\n     */\r\n    openPointSign = async () => {\r\n        await this.isSignined();\r\n        if (this.isSignin)\r\n            await this.addSigninSheet(47, this.signinval);\r\n        await this.getSigninConsecutiveDays();\r\n        this.openVPage(VPointSign);\r\n    }\r\n\r\n    /**\r\n    * 签到明细页面\r\n    */\r\n    openRevenueExpenditure = async (topic?: any) => {\r\n        await this.getSigninHistory();\r\n        this.openVPage(VRevenueExpenditure, topic)\r\n    }\r\n\r\n    /**\r\n     * 是否签到\r\n     */\r\n    isSignined = async () => {\r\n        let { currentUser } = this.cApp;\r\n        let { checkIsSignin } = this.uqs.积分商城;\r\n        let res = await checkIsSignin.obj({ customer: currentUser?.currentCustomer });\r\n        this.isSignin = res?.result === 0 ? true : false;\r\n    }\r\n\r\n    /**\r\n     * 签到添加积分到\r\n     */\r\n    addSigninSheet = async (customer: any, amount: any) => {\r\n        let { cPointProduct } = this.cApp;\r\n        let { Signin } = this.uqs.积分商城;\r\n        customer = this.cApp.currentUser.currentCustomer;\r\n        customer = customer ? customer : this.user.id;\r\n        await Signin.submit({ webuser: this.user.id, customer: customer, amount: amount });\r\n        await cPointProduct.refreshMypoint();\r\n        // await this.getSigninConsecutiveDays();\r\n        // await this.getSigninHistory();\r\n        // await this.getPointHistory();\r\n\r\n        /**\r\n        let result: any = await SigninSheet.save(\"SigninSheet\", { customer: customer, amount: amount });\r\n        console.log(this.cApp.currentUser);\r\n        let { id, flow, state } = result;\r\n        await SigninSheet.action(id, flow, state, \"submit\");\r\n        await Signin.submit({ webbuser: 47, customer: 47, amount: 3 });\r\n        **/\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取签到记录\r\n     */\r\n    getSigninHistory = async () => {\r\n        let { currentUser } = this.cApp;\r\n        this.signinPageHistory = new QueryPager(this.uqs.积分商城.GetPointSigninHistory, 15, 30);\r\n        this.signinPageHistory.first({ customer: currentUser?.currentCustomer });\r\n    }\r\n\r\n    /**\r\n     * 连续签到天数  webUser  ----------------------------需uq --------------------------------\r\n     */\r\n    getSigninConsecutiveDays = async () => {\r\n        // this.signinConsecutiveDays \r\n        await this.getSigninHistory();\r\n\r\n    }\r\n\r\n    /**\r\n     * 福利：连续签到 数倍积分（弃用）\r\n     */\r\n    /* multiplePointsWelfare = () => {\r\n        let arr = daysAndMultipleByWelfare;\r\n        if (this.IsSignin) this.signinConsecutiveDays += 1;\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (this.signinConsecutiveDays < arr[i].days) {\r\n                if (i === 0) this.signinval = pointBase;\r\n                else this.signinval = pointBase * arr[i - 1].multiple;\r\n                return arr[i];\r\n            } else if (this.signinConsecutiveDays >= arr[i].days && i === (arr.length - 1)) {\r\n                this.signinval = pointBase * arr[i].multiple;\r\n                return arr[i];\r\n            }\r\n        }\r\n    } */\r\n\r\n}\r\n","import { observable, autorun, IReactionDisposer, makeObservable, runInAction } from 'mobx';\r\nimport { TuidDiv, BoxId, Tuid } from 'tonva-react';\r\nimport { PackRow, Product } from './Product';\r\nimport { Store } from './store';\r\nimport { OrderItem } from 'order/Order';\r\n\r\nexport interface CartItem {\r\n    product: Product; // BoxId;\r\n    packs: CartPackRow[];\r\n    $isSelected?: boolean;\r\n    $isDeleted?: boolean;\r\n    createdate: number;\r\n}\r\n\r\nexport interface CartPackRow extends PackRow {\r\n    /**\r\n     * 销售成交价（在购物车中是目录价或市场活动价或协议价的最小值），订单中还会经过券的计算\r\n     */\r\n    price: number;\r\n\r\n    /**\r\n     * 订单中的初始销售成交价（订单中应用折扣券之前的价格）\r\n     */\r\n    priceInit?: number;\r\n    /**\r\n     * 订单中目录价\r\n     */\r\n    retail: number;\r\n    currency: any;\r\n}\r\n\r\nexport class Cart {\r\n    private store: Store;\r\n    private cartData: any;\r\n    private cartStore: CartStore;\r\n    private disposer: IReactionDisposer;\r\n\r\n    /*\r\n    @observable data: any = {\r\n        list: observable<CartItem>([]),\r\n    };\r\n    */\r\n    cartItems: CartItem[];\r\n    count = 0; //observable.box<number>(0);\r\n    amount = 0; //= observable.box<number>(0);\r\n    constructor(store: Store) {\r\n        makeObservable(this, {\r\n            cartItems: observable,\r\n            count: observable,\r\n            amount: observable\r\n        });\r\n\r\n        //this.cApp = cApp;\r\n        //this.cartItems = this.data.list;\r\n        this.store = store;\r\n        this.disposer = autorun(this.calcSum);\r\n    }\r\n\r\n    dispose() {\r\n        this.disposer();\r\n    }\r\n\r\n    private calcSum = () => {\r\n        if (!this.cartItems) return;\r\n        let count = 0, amount = 0;\r\n        for (let cp of this.cartItems) {\r\n            let { $isSelected, $isDeleted, packs } = cp;\r\n            if ($isDeleted === true || !($isSelected === true)) continue;\r\n            for (let pi of packs) {\r\n                let { price, quantity } = pi;\r\n                count += quantity;\r\n                if (price === Number.NaN || quantity === Number.NaN) continue;\r\n                amount += quantity * price;\r\n            }\r\n        }\r\n        this.count = count;\r\n        this.amount = parseFloat(amount.toFixed(2));\r\n    }\r\n\r\n    async init(): Promise<void> {\r\n        let { isLogined } = this.store;\r\n        if (isLogined)\r\n            this.cartStore = new CartRemote(this.store);\r\n        else\r\n            this.cartStore = new CartLocal(this.store);\r\n        let cartData = await this.cartStore.load();\r\n        this.cartItems = await this.buildItem2(cartData);\r\n        this.calcSum();\r\n    }\r\n\r\n    againOrderCart = (data: CartItem[]) => {\r\n        this.cartItems.forEach((v: any) => v.$isSelected = false);\r\n        data.forEach((v: any) => {\r\n            let findRepeatData = this.cartItems.findIndex((i: any) => Tuid.equ(v.product, i.product) && Tuid.equ(v.packs[0].pack, i.packs[0].pack));\r\n            if (findRepeatData > -1) {\r\n                v.packs[0].quantity = v.packs[0].quantity + this.cartItems[findRepeatData].packs[0].quantity;\r\n                this.cartItems.splice(findRepeatData, 1);\r\n            };\r\n        });\r\n        this.cartItems = [...data, ...this.cartItems];\r\n        this.calcSum();\r\n    }\r\n\r\n    /**\r\n     * 合并购物车数据\r\n     * @param cartData \r\n     * @returns \r\n     */\r\n    async mergeFromRemote() {\r\n        let { isLogined } = this.store;\r\n        if (!isLogined)\r\n            return;\r\n        this.cartStore = new CartRemote(this.store);\r\n        let cartData = await this.cartStore.load();\r\n        if (!cartData) return;\r\n        let cartItems = await this.buildItem2(cartData);\r\n        if (!(this.cartItems) || this.cartItems.length === 0) {\r\n            this.cartItems = cartItems;\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < this.cartItems.length; i++) {\r\n            const e = this.cartItems[i];\r\n            let { product, packs } = e;\r\n            let { pack, quantity, price, currency } = packs[0];\r\n            let cartItemExists = cartItems.find((ci) => Tuid.equ(product, ci.product) && Tuid.equ(pack, ci.packs[0].pack));\r\n            if (!cartItemExists)\r\n                await this.cartStore.storeCart(product, pack, quantity, price, currency);\r\n        }\r\n        cartItems.forEach(e => {\r\n            let { product, packs } = e;\r\n            let { pack } = packs[0];\r\n            let cartItemExists = this.cartItems.find((ci) => Tuid.equ(product, ci.product) && Tuid.equ(pack, ci.packs[0].pack));\r\n            if (!cartItemExists) {\r\n                this.cartItems.push(e);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 填充购物车中相关产品的具体信息 \r\n     * @param cartData \r\n     * @returns \r\n     */\r\n    private async buildItem2(cartData: any[]): Promise<CartItem[]> {\r\n        let { uqs, currentSalesRegion } = this.store;\r\n        // 初始化购物车中产品的目录价\r\n        let { product } = uqs;\r\n        let { PriceX } = product;\r\n        let promises: PromiseLike<void>[] = [];\r\n        cartData.forEach((e: any) => promises.push(PriceX.obj({ product: e.product, pack: e.pack, salesRegion: currentSalesRegion })));\r\n        let prices = await Promise.all(promises);\r\n        for (let index = cartData.length - 1; index >= 0; index--) {\r\n            let e: any = cartData[index];\r\n            let priceMap: any = prices.find((v: any) => {\r\n                if (!v) return false;\r\n                return Tuid.equ(v.product, e.product)\r\n                    && Tuid.equ(v.pack, e.pack)\r\n                    && v.discountinued === 0\r\n                    && v.expireDate > Date.now()\r\n            });\r\n            if (priceMap && priceMap.retail) {\r\n                e.retail = priceMap.retail;\r\n            } else {\r\n                cartData.splice(index, 1);\r\n            }\r\n        }\r\n\r\n        // let cartDataGrouped = groupByProduct(cartData);\r\n        let productPromises: Promise<any>[] = [];\r\n        let cartItems: CartItem[] = [];\r\n        if (cartData && cartData.length) {\r\n            for (let key of cartData) {\r\n                let { product: productId, pack, quantity, price, retail, currency, createdate } = key;\r\n                let product = this.store.getProduct(productId);\r\n                productPromises.push(product.loadListItem());\r\n                cartItems.push({\r\n                    product: product,\r\n                    packs: [{ pack: pack, quantity: quantity, price: price, retail: retail, currency: typeof currency === 'number' ? currency : currency?.id }],\r\n                    $isSelected: true,\r\n                    $isDeleted: false,\r\n                    createdate: createdate,\r\n                });\r\n            };\r\n        };\r\n        await Promise.all(productPromises);\r\n        return cartItems;\r\n    }\r\n\r\n    async buildItems() {\r\n        if (this.cartItems) return;\r\n        this.cartItems = await this.buildItem2(this.cartData);\r\n        delete this.cartData;\r\n    }\r\n\r\n    /*\r\n    private mergeToRemote(localItems: any[]) {\r\n        let originLength = localItems.length;\r\n        let nowLength = this.items.length;\r\n        if (originLength > 0) {\r\n            if (nowLength > 0) {\r\n                // 合并，谁覆盖谁？\r\n                for (let i = 0; i < originLength; i++) {\r\n                    let { product: tempProduct, pack: tempPack } = localItems[i];\r\n                    let cartItemExits = this.items.find(v => v.product === tempProduct && v.pack === tempPack);\r\n                    if (cartItemExits) {\r\n                        // 如果本地购物车中的产品已经过期，则要删除\r\n                    } else {\r\n                        this.items.push(localItems[i]);\r\n                    }\r\n                }\r\n            } else {\r\n                this.items.push(...localItems);\r\n            }\r\n            // 保存到远程\r\n        }\r\n    }\r\n    */\r\n\r\n    getQuantity(productId: number, packId: number): number {\r\n        if (!this.cartItems) return 0;\r\n        let cps = this.cartItems.filter(v => v.$isDeleted !== true && Tuid.equ(v.product, productId));\r\n        if (!cps.length) return 0;\r\n        let cpp = cps.find((v => v.packs[0].pack.id === packId));\r\n        return cpp === undefined ? 0 : cpp.packs[0].quantity;\r\n        /* if (!cp) return 0;\r\n        let cpp = cp.packs.find(v => v.pack.id === packId);\r\n        return cpp === undefined ? 0 : cpp.quantity; */\r\n    }\r\n\r\n    isDeleted(productId: number): boolean {\r\n        let i = this.cartItems.findIndex(v => v.$isDeleted === true && Tuid.equ(v.product, productId));\r\n        return i !== -1;\r\n    }\r\n\r\n    getSelectedItems(): CartItem[] {\r\n        return this.cartItems.filter(v => {\r\n            let { $isSelected, $isDeleted } = v;\r\n            return $isSelected === true && $isDeleted !== true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    private async add(product: Product/*BoxId*/, pack: BoxId, quantity: number, price: number, retail: number, currency: any) {\r\n        let cartItemExists = this.cartItems.find((e) => Tuid.equ(e.product, product) && Tuid.equ(e.packs[0].pack, pack));\r\n        if (!cartItemExists) {\r\n            this.cartItems.push({\r\n                product: product,\r\n                packs: [{ pack: pack, quantity: quantity, price: price, retail: retail, currency: currency }],\r\n                $isSelected: true,\r\n                $isDeleted: false,\r\n                createdate: Date.now()\r\n            });\r\n        }\r\n        else {\r\n            let { $isDeleted, packs } = cartItemExists;\r\n            if ($isDeleted === true) packs.splice(0);\r\n\r\n            let packExists: CartPackRow = packs.find(e => Tuid.equ(e.pack, pack));\r\n            packExists.quantity = quantity;\r\n            packExists.price = price;\r\n            packExists.currency = currency;\r\n\r\n            cartItemExists.$isSelected = true;\r\n            cartItemExists.$isDeleted = false;\r\n            cartItemExists.createdate = Date.now();\r\n        }\r\n\r\n        await this.cartStore.storeCart(product, pack, quantity, price, currency);\r\n    }\r\n    removeStrike = async (data: any) => {\r\n        console.log(data);\r\n        // data.forEach((el: CartItem2) => {\r\n        //     el.packs.forEach(async (v: any) => {\r\n        //         await this.cartStore.storeCart(el.product, v.pack, v.quantity, v.price, v.currency);\r\n        //     })\r\n        // });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param rows\r\n     */\r\n    async removeItem(rows: [{ productId: number, packId: number }]) {\r\n        if (rows && rows.length > 0) {\r\n            rows.forEach(pe => {\r\n                let cartItemIndex = this.cartItems.findIndex(e => Tuid.equ(e.product, pe.productId)\r\n                    && Tuid.equ(e.packs[0].pack, pe.packId));\r\n                if (cartItemIndex >= 0) {\r\n                    let cartItem = this.cartItems[cartItemIndex];\r\n                    let i = cartItem.packs.findIndex(e => e.pack.id === pe.packId)\r\n                    if (i >= 0) {\r\n                        cartItem.packs.splice(i, 1);\r\n                        if (cartItem.packs.length === 0) {\r\n                            this.cartItems.splice(cartItemIndex, 1);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            this.cartStore.removeFromCart(rows);\r\n        }\r\n    }\r\n\r\n    async changeQuantity(product: Product, pack: BoxId, quantity: number, price: number, retail: number, currency: any) {\r\n        if (quantity > 0)\r\n            await this.add(product, pack, quantity, price, retail, currency);\r\n        else\r\n            await this.removeItem([{ productId: product.id, packId: pack.id }]);\r\n    }\r\n\r\n\r\n    againCreatOrder = async (initialData: OrderItem[]) => {\r\n        let { uqs, currentSalesRegion } = this.store;\r\n        let { product: p } = uqs;\r\n        let { PriceX } = p;\r\n        let promises: PromiseLike<void>[] = [];\r\n        initialData.forEach((e: any) => e.packs.forEach((v: any) => {\r\n            promises.push(PriceX.obj({ product: e.product, pack: v.pack, salesRegion: currentSalesRegion }))\r\n        }));\r\n        let prices: any[] = await Promise.all(promises);\r\n        let orderData: CartItem[] = [];\r\n        let productPromises: Promise<any>[] = [];\r\n        for (let key of initialData) {\r\n            let { product, packs } = key;\r\n            let filtPacksByProductId = prices.filter((v: any) => Tuid.equ(v.product, product) && v.discountinued === 0 && v.expireDate > Date.now());\r\n            if (!filtPacksByProductId.length) continue;\r\n            for (let i of packs) {\r\n                let findPack = filtPacksByProductId.find((v: any) => Tuid.equ(v.pack, i.pack));\r\n                if (!findPack) continue;\r\n                product = this.store.getProduct(product.id);\r\n                productPromises.push(product.loadListItem());\r\n                orderData.push({\r\n                    product: product,\r\n                    packs: [{ pack: i.pack, quantity: i.quantity || 1, price: findPack.retail, retail: findPack.retail, currency: findPack.salesRegion?.obj?.currency }],\r\n                    $isSelected: true,\r\n                    $isDeleted: false,\r\n                    createdate: Date.now()\r\n                })\r\n            };\r\n        };\r\n        await Promise.all(productPromises);\r\n        orderData.forEach((v: any) => {\r\n            let newPrices: any[] = v.product?.prices || [];\r\n            let findPack = newPrices.find((i: any) => Tuid.equ(i.pack, v.packs[0].pack));\r\n            if (findPack) {\r\n                let { vipPrice, promotionPrice } = findPack;\r\n                v.packs[0].price = this.minPrice(vipPrice, promotionPrice) || v.packs[0].price;\r\n            };\r\n        });\r\n        this.againOrderCart(orderData);\r\n        //nav.navigate('/cart');\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    /*\r\n    setDeletedMark(productId: number, packId: number) {\r\n        let cp = this.items.find(v => v.$isDeleted !== true && v.product === productId && v.pack === packId);\r\n        if (cp !== undefined)\r\n            cp.$isDeleted = true;\r\n    }\r\n\r\n    async removeDeletedItem() {\r\n        let rows: { product: number, packItem: CartPackRow }[] = [];\r\n        for (let cp of this.items) {\r\n            let { quantity, $isDeleted } = cp;\r\n            if ($isDeleted === true || quantity === 0) {\r\n                // TODO:\r\n            }\r\n        }\r\n        if (rows.length === 0) return;\r\n        await this.cartStore.removeFromCart(rows);\r\n\r\n        // 下面是从本地数据结构中删除\r\n        for (let cp of this.items) {\r\n            let { packs } = cp;\r\n            let packIndexes: number[] = [];\r\n            let len = packs.length;\r\n            for (let i = 0; i < len; i++) {\r\n                if (packs[i].quantity === 0) packIndexes.push(i);\r\n            }\r\n            for (let i = packIndexes.length - 1; i >= 0; i--) packs.splice(packIndexes[i], 1);\r\n        }\r\n\r\n        let itemIndexes: number[] = [];\r\n        let len = this.items.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let { $isDeleted, packs } = this.items[i];\r\n            if ($isDeleted === true || packs.length === 0) itemIndexes.push(i);\r\n        }\r\n        for (let i = itemIndexes.length - 1; i >= 0; i--) this.items.splice(itemIndexes[i], 1);\r\n    }\r\n\r\n    async clear() {\r\n        this.items.forEach(v => v.$isDeleted = true);\r\n        await this.removeDeletedItem();\r\n    }\r\n    */\r\n\r\n}\r\n\r\nabstract class CartStore {\r\n\r\n    protected store: Store;\r\n    constructor(store: Store) {\r\n        this.store = store;\r\n    }\r\n    //abstract get isLocal(): boolean;\r\n    abstract load(): Promise<CartItem[]>;\r\n    abstract storeCart(product: Product, pack: BoxId, quantity: number, price: number, currency: any): Promise<void>;\r\n    abstract removeFromCart(rows: [{ productId: number, packId: number }]): Promise<void>;\r\n}\r\n\r\nclass CartRemote extends CartStore {\r\n    //private getCartQuery: Query;\r\n    //private setCartAction: Action;\r\n    //private removeFromCartAction: Action;\r\n\r\n    //get isLocal(): boolean { return false }\r\n\r\n    /*\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        let { cUqOrder } = this.cApp;\r\n        this.getCartQuery = cUqOrder.query('getcart')\r\n        this.setCartAction = cUqOrder.action('setcart');\r\n        this.removeFromCartAction = cUqOrder.action('removefromcart');\r\n    }\r\n    */\r\n\r\n    async load(): Promise<CartItem[]> {\r\n        let ret = await this.store.uqs.order.GetCart.page(undefined, 0, 100);\r\n        return ret && ret.$page && ret.$page.filter((v: any) => v.product && v.pack) as any;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param product\r\n     * @param pack\r\n     * @param quantity\r\n     * @param price\r\n     * @param currency\r\n     */\r\n    async storeCart(product: Product, pack: BoxId, quantity: number, price: number, currency: any) {\r\n        await this.store.uqs.order.SetCart.submit({\r\n            product,\r\n            pack: pack.id,\r\n            price: price,\r\n            currency: currency,\r\n            quantity: quantity\r\n        });\r\n    }\r\n\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        let param = rows.map(e => { return { product: e.productId, pack: e.packId } });\r\n        await this.store.uqs.order.RemoveFromCart.submit({ rows: param });\r\n    }\r\n}\r\n\r\nexport const LOCALCARTNAME: string = \"cart\";\r\nclass CartLocal extends CartStore {\r\n\r\n    private cartData: any[] = [];\r\n    private productTuid: Tuid;\r\n    private packTuid: TuidDiv;\r\n    constructor(store: Store) {\r\n        super(store);\r\n\r\n        this.productTuid = this.store.uqs.product.ProductX;\r\n        this.packTuid = this.productTuid.div('packx');\r\n    }\r\n\r\n    //get isLocal(): boolean { return true }\r\n\r\n    async load(): Promise<CartItem[]> {\r\n        try {\r\n            let cartstring = localStorage.getItem(LOCALCARTNAME);\r\n            if (cartstring === null) return [];\r\n            this.cartData = JSON.parse(cartstring);\r\n            let cartDataBoxed = [];\r\n            for (let i = 0; i < this.cartData.length; i++) {\r\n                let { product, pack, quantity, price, currency } = this.cartData[i];\r\n                if (product && pack) {\r\n                    let productbox = this.productTuid.boxId(product);\r\n                    let packbox = this.packTuid.boxId(pack);\r\n                    cartDataBoxed.push({\r\n                        product: productbox,\r\n                        pack: packbox,\r\n                        quantity: quantity,\r\n                        price: price,\r\n                        currency: currency\r\n                    } as any)\r\n                }\r\n            }\r\n            return cartDataBoxed;\r\n        }\r\n        catch (e) {\r\n            localStorage.removeItem(LOCALCARTNAME);\r\n            this.cartData = [];\r\n            return this.cartData;\r\n        }\r\n    }\r\n\r\n    async storeCart(product: Product, pack: BoxId, quantity: number, price: number, currency: any) {\r\n        let cartItemExists = this.cartData.find(e => {\r\n            if (!e) return false;\r\n            return Tuid.equ(e.product, product) && TuidDiv.equ(e.pack, pack);\r\n        });\r\n        if (cartItemExists !== undefined) {\r\n            cartItemExists.quantity = quantity;\r\n            cartItemExists.price = price;\r\n            cartItemExists.currency = typeof currency === 'number' ? currency : currency?.id\r\n        } else\r\n            this.cartData.push({ product: product.id, pack: pack.id, quantity: quantity, price: price, currency: typeof currency === 'number' ? currency : currency?.id });\r\n        localStorage.setItem(LOCALCARTNAME, JSON.stringify(this.cartData));\r\n    }\r\n\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n\r\n        rows.forEach(e => {\r\n            let i = this.cartData.findIndex(v => v.product = e.productId && v.pack === e.packId);\r\n            if (i >= 0)\r\n                this.cartData.splice(i, 1);\r\n        })\r\n        localStorage.setItem(LOCALCARTNAME, JSON.stringify(this.cartData));\r\n    }\r\n}","import { GLOABLE } from 'global';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport moment from 'moment';\r\nimport { BoxId } from 'tonva-react';\r\nimport { MainBrand, Chemical } from './model';\r\nimport { UQs } from 'uq-app';\r\nimport { Store } from './store';\r\n\r\nexport interface InventoryAllocation {\r\n\twarehouse: BoxId;\r\n\tquantity: number;\r\n\tdeliveryTimeDescription: string;\r\n}\r\n\r\nexport interface PackRow {\r\n\tpack: BoxId;\r\n\tquantity: number;\r\n}\r\n\r\nexport interface ProductPackRow extends PackRow {\r\n\tretail: number;\r\n\tvipPrice?: number;\r\n\tpromotionPrice?: number;\r\n\tcurrency: BoxId;\r\n\tinventoryAllocation: InventoryAllocation[];\r\n}\r\n\r\nexport interface ProductProps {\r\n\tid: BoxId; \t\t\t\t// {id: 525, tuid: TuidInner, ui: ƒ, isUndefined: false}\r\n\torigin: string;\r\n\tdescription: string;\r\n\tdescriptionC: string;\r\n\timageUrl: string;\r\n\tbrand: BoxId;\r\n\tCAS: string; \t\t\t\t// '50525-27-4'\r\n\tchemical: BoxId; \t\t\t// ReactBoxId {id: 2030, tuid: TuidInner, ui: undefined, isUndefined: false}\r\n\tmolecularWeight: string; \t//'748.63'\r\n\tmolecularFomula: string;\r\n\tno: string; //\t\t\t\t// 'A01102033'\r\n\tpurity: string; \t\t\t// '98%'\r\n\tmdlnumber?: string;\r\n\t// seq: number;\r\n}\r\n\r\nexport class Product {\r\n\tprivate uqs: UQs;\r\n\tprivate store: Store;\r\n\r\n\tid: number;\r\n\tprops: ProductProps;\r\n\r\n\tbrand: MainBrand;\t/* 品牌 */\r\n\tchemical: Chemical;\t/* 化学属性 */\r\n\tfavorite: boolean;\t\t/* 是否收藏 */\r\n\twarnings: any[] = [];\t/* 警示：危化品、夏东季禁运等 */\r\n\textention: any;\t\t\t/* 基本信息、安全信息 */\r\n\tstandardSample: any;\t/* 标样信息 */\r\n\tproductCrumbs: any[] = [];\t/* 产品目录 */\r\n\tdescriptionPost: any;\t/* 产品描述 */\r\n\tpacks: ProductPackRow[];\t/* 销售包装 */\r\n\tprices: any[];\t\t\t\t// 包含价格和折扣信息\r\n\tfutureDeliveryTimeDescription: string;\r\n\tproductDocs: any = { msds: false, spec: false, coa: false, um: false };\r\n\t// @observable MSDSFiles: any;\r\n\t// @observable specFiles: any;\r\n\t// @observable data: any;\r\n\tdiscount: any;\r\n\r\n\tconstructor(store: Store, id: number | BoxId) {\r\n\t\tmakeObservable(this, {\r\n\t\t\tprops: observable.ref,\r\n\t\t\tbrand: observable.ref,\r\n\t\t\tchemical: observable.ref,\r\n\t\t\tfavorite: observable,\r\n\t\t\twarnings: observable,\r\n\t\t\textention: observable,\r\n\t\t\tstandardSample: observable,\r\n\t\t\tproductCrumbs: observable,\r\n\t\t\tdescriptionPost: observable,\r\n\t\t\tpacks: observable.shallow,\r\n\t\t\tprices: observable,\r\n\t\t\tfutureDeliveryTimeDescription: observable,\r\n\t\t\tproductDocs: observable,\r\n\t\t\tdiscount: observable\r\n\t\t});\r\n\t\tthis.uqs = store.uqs;\r\n\t\tthis.store = store;\r\n\t\tthis.id = typeof id === 'object' ? id.id : id;\r\n\t}\r\n\r\n\tgetInventoryAllocation(packId: number): InventoryAllocation[] {\r\n\t\t// return undefined;\r\n\t\tif (this.packs === undefined) return undefined;\r\n\t\tlet pack = this.packs.find(v => v.pack.id === packId);\r\n\t\tif (!pack) return undefined;\r\n\t\treturn pack.inventoryAllocation;\r\n\t}\r\n\r\n\tasync loadDetail() {\r\n\t\tthis.discount = 0;\r\n\t\tawait this.loadBase();\r\n\t\tawait this.loadBrand();\r\n\t\tlet promises: PromiseLike<any>[] = [\r\n\t\t\tthis.loadChemical(),\r\n\t\t\tthis.loadFavorite(),\r\n\t\t\tthis.loadPrices(),\r\n\t\t\tthis.loadMSDSFile(),\r\n\t\t\tthis.loadSpecFile(),\r\n\t\t\tthis.loadCOAFile(),\r\n\t\t\tthis.loadUserManualFile(),\r\n\t\t\tthis.loadFDTimeDescription(),\r\n\t\t\tthis.getProductExtention(),\r\n\t\t\tthis.loadDescriptionPost(),\r\n\t\t\tthis.loadProductCrumbs(),\r\n\t\t\tthis.loadStandardSample()\r\n\t\t];\r\n\t\tawait Promise.all(promises);\r\n\t\tawait this.loadProductWarnings();\r\n\t}\r\n\r\n\tasync loadListItem() {\r\n\t\tawait this.loadBase();\r\n\t\tawait this.loadBrand();\r\n\t\tlet promises: PromiseLike<any>[] = [\r\n\t\t\tthis.loadChemical(),\r\n\t\t\tthis.loadFavorite(),\r\n\t\t\tthis.loadPrices(),\r\n\t\t\tthis.loadFDTimeDescription()\r\n\t\t];\r\n\t\tawait Promise.all(promises);\r\n\t}\r\n\r\n\tasync loadBase() {\r\n\t\tif (this.props) return;\r\n\t\tlet { currentSalesRegion } = this.store;\r\n\t\tlet ret = await this.uqs.product.GetAvailableProductById.obj({ product: this.id, salesRegion: currentSalesRegion });\r\n\t\t// let ret = await this.uqs.product.ProductX.load(this.id);\r\n\t\tthis.props = ret;\r\n\t}\r\n\r\n\tprivate async loadBrand() {\r\n\t\tif (this.brand) return;\r\n\t\tlet ret = await this.uqs.product.Brand.load(this.props?.brand?.id);\r\n\t\tthis.brand = ret;\r\n\t}\r\n\r\n\tprivate async loadChemical() {\r\n\t\tif (this.chemical) return;\r\n\t\tlet ret = await this.uqs.product.ProductChemical.obj({ product: this.id });\r\n\t\tthis.chemical = ret;\r\n\t}\r\n\r\n\tasync loadFavorite() {\r\n\t\tif (this.favorite !== undefined) return;\r\n\t\tlet ret = await this.uqs.webuser.myFavorites.obj({ webUser: this.store.currentUser, product: this.id });\r\n\t\tthis.favorite = (ret !== undefined);\r\n\t}\r\n\r\n\t/**\r\n\t * 获取产品MSDS文件(是否存在)\r\n\t */\r\n\tprivate async loadMSDSFile() {\r\n\t\tlet productMSDSFiles = await this.uqs.product.ProductMSDSFile.table({ product: this.id });\r\n\t\tthis.productDocs.msds = productMSDSFiles.length ? true : false;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取产品Spec文件(是否存在)\r\n\t */\r\n\tprivate async loadSpecFile() {\r\n\t\tlet specFiles = await this.uqs.product.ProductSpecFile.table({ product: this.id });\r\n\t\tthis.productDocs.spec = specFiles.length ? true : false;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取产品COA(是否存在)\r\n\t */\r\n\tprivate async loadCOAFile() {\r\n\t\tlet coaFile = await this.uqs.product.getProductLotNumber.table({ product: this.id });\r\n\t\tthis.productDocs.coa = coaFile.length ? true : false;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取用户手册(是否存在)\r\n\t */\r\n\tprivate async loadUserManualFile() {\r\n\t\tlet userManualFile = await this.uqs.product.ProductUserManualFile.table({ product: this.id });\r\n\t\tthis.productDocs.um = userManualFile.length ? true : false;\r\n\t}\r\n\r\n\tprivate async loadPrices() {\r\n\t\tlet { customerDiscount, product, promotion, warehouse } = this.uqs;\r\n\t\tlet discount = 0;\r\n\t\tlet { currentUser, currentSalesRegion, cart, currentLanguage } = this.store;\r\n\t\t//线上客户是否是线下客户 协议折扣  discount\r\n\t\tif (currentUser) {\r\n\t\t\tif (currentUser.hasCustomer) {\r\n\t\t\t\tlet { Discounts } = currentUser?.currentCustomer;\r\n\t\t\t\tlet discountSetting = Discounts.find((el: any) => el.brand?.id === this.brand?.id);\r\n\t\t\t\tif (discountSetting && discountSetting.discount)\r\n\t\t\t\t\tdiscount = discountSetting.discount;\r\n\t\t\t};\r\n\t\t\t/* if (currentUser.hasCustomer) {\r\n\t\t\t\tlet discountSetting = await customerDiscount.GetDiscount.obj({ brand: this.brand?.id, customer: currentUser?.currentCustomer });\r\n\t\t\t\tif (discountSetting && discountSetting.discount)\r\n\t\t\t\t\tdiscount = discountSetting.discount;\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (currentUser.currentCustomer.Organization) {\r\n\t\t\t\t\t\tdiscountSetting = await customerDiscount.GetDiscountByOrganization.obj({ brand: this.brand?.id, organization: currentUser.currentCustomer.Organization });\r\n\t\t\t\t\t\tif (discountSetting && discountSetting.discount) discount = discountSetting.discount;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} */\r\n\r\n\t\t\t// 协议客户与vip客户不同存\r\n\t\t\tif (currentUser.webUserVIPCard !== undefined) {\r\n\t\t\t\tlet brandDiscounts = currentUser.VIPDiscount;\r\n\t\t\t\tlet brandDiscount = brandDiscounts.find((e: any) => e.brand.id === this.brand?.id);\r\n\t\t\t\t// 协议与vip折扣比较 取其大值  (两者不可同存)\r\n\t\t\t\tif (brandDiscount && brandDiscount.discount > discount)\r\n\t\t\t\t\tdiscount = brandDiscount && brandDiscount.discount;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// let { id: currentSalesRegionId } = currentSalesRegion;\r\n\t\tlet prices: any[] = await this.getProductPacks();\r\n\t\tthis.prices = prices.sort((a, b) => a.retail - b.retail).map(element => {\r\n\t\t\tlet ret: any = {};\r\n\t\t\tret.pack = element.pack;\r\n\t\t\tret.retail = element.retail;\r\n\t\t\tif (discount !== 0)\r\n\t\t\t\tret.vipPrice = Math.round(element.retail * (1 - discount));\r\n\t\t\tret.currency = currentSalesRegion.currency;\r\n\t\t\tif (cart) {\r\n\t\t\t\tret.quantity = cart.getQuantity(this.id, element.pack.id)\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t});\r\n\r\n\t\tlet promises: PromiseLike<any>[] = [];\r\n\t\tlet promises1: PromiseLike<any>[] = [];\r\n\t\tthis.prices.forEach(v => {\r\n\t\t\tpromises.push(promotion.GetPromotionPack.obj({ product: this.id, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n\t\t\tpromises1.push(warehouse.GetInventoryAllocation.table({ product: this.id, pack: v.pack, salesRegion: currentSalesRegion }));\r\n\t\t});\r\n\t\tlet results = await Promise.all(promises);\r\n\t\tlet results2 = await Promise.all(promises1);\r\n\r\n\t\tlet newPacks = [];\r\n\t\tfor (let i = 0; i < this.prices.length; i++) {\r\n\t\t\tlet inventoryAllocation = results2.find((v: any[]) => {\r\n\t\t\t\tlet res = v.filter((j: any) => j.pack.id === this.prices[i].pack.id);\r\n\t\t\t\treturn res.length;\r\n\t\t\t});\r\n\t\t\tnewPacks.push({ ...this.prices[i], inventoryAllocation: inventoryAllocation })\r\n\r\n\t\t\tlet price = this.prices[i];\r\n\t\t\tlet promotion = results[i];\r\n\t\t\tlet discount = promotion && promotion.discount;\r\n\t\t\tif (discount)\r\n\t\t\t\tprice.promotionPrice = Math.round((1 - discount) * price.retail);\r\n\t\t}\r\n\t\tthis.packs = newPacks;\r\n\t}\r\n\r\n\tasync loadPacks(param: any) {\r\n\t\tlet { currentSalesRegion } = this.store;\r\n\t\tlet { pack, quantity, retail, currency } = param;\r\n\t\tlet inventoryAllocation = await this.uqs.warehouse.GetInventoryAllocation.table({ product: this.id, pack: pack, salesRegion: currentSalesRegion });\r\n\t\tthis.packs = [{ pack, quantity, retail, currency, inventoryAllocation }];\r\n\t}\r\n\r\n\tprivate async addProductFavorites(pack?: any) {\r\n\t\tlet { currentUser } = this.store;\r\n\t\tlet createDate = moment().format('YYYY-MM-DD HH:mm:ss');\r\n\t\tawait this.uqs.webuser.myFavorites.add({ webUser: currentUser, product: this.id, arr1: [{ pack: 0, date: createDate }] });\r\n\t\tthis.favorite = true;\r\n\t}\r\n\r\n\tprivate async delProductFavorites(pack?: any) {\r\n\t\tlet { currentUser } = this.store;\r\n\t\tawait this.uqs.webuser.myFavorites.del({ webUser: currentUser, product: this.id, arr1: [{ pack: 0 }] });\r\n\t\tthis.favorite = false;\r\n\t}\r\n\r\n\tgetProductPacks = async () => {\r\n\t\tlet { product } = this.uqs;\r\n\t\tlet { currentSalesRegion } = this.store;\r\n\t\tlet { id: currentSalesRegionId } = currentSalesRegion;\r\n\t\t// let pricex2 = await product.PriceX.table({ product: this.id, salesRegion: currentSalesRegionId });\r\n\t\tlet pricex = await product.GetProductPrices.table({ product: this.id, salesRegion: currentSalesRegionId });\r\n\t\treturn pricex.filter(e => e.discountinued === 0 && e.expireDate > Date.now() && e.salesLevel?.id === 1);\r\n\t}\r\n\r\n\tfavoriteOrCancel = async (pack?: any) => {\r\n\t\tawait this.loadFavorite();\r\n\t\tif (this.favorite === true) {\r\n\t\t\tawait this.delProductFavorites();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait this.addProductFavorites();\r\n\t\t}\r\n\t}\r\n\r\n\tgetProductAndDiscount = async (productId: BoxId) => {\r\n\t\tlet product = await this.uqs.product.ProductX.load(productId);\r\n\t\tlet discount = 0;\r\n\t\tlet { currentUser } = this.store;\r\n\t\tif (currentUser.hasCustomer) {\r\n\t\t\tlet discountSetting = await this.uqs.customerDiscount.GetDiscount.obj({ brand: product.brand.id, customer: currentUser.currentCustomer });\r\n\t\t\tdiscount = discountSetting && discountSetting.discount;\r\n\t\t}\r\n\t\treturn { product: product, discount: discount };\r\n\t}\r\n\r\n\tgetProductExtention = async () => {\r\n\t\tif (this.extention) return;\r\n\t\tlet extention = await this.uqs.product.ProductExtention.obj({ product: this.id });\r\n\t\tthis.extention = extention?.content;\r\n\t}\r\n\r\n\tloadDescriptionPost = async () => {\r\n\t\tif (this.descriptionPost) return;\r\n\t\tlet result = await window.fetch(GLOABLE.CONTENTSITE + '/partial/productapplication/' + this.id);\r\n\t\tif (result.ok) {\r\n\t\t\tlet content = await result.text();\r\n\t\t\tthis.descriptionPost = content;\r\n\t\t};\r\n\t}\r\n\r\n\tloadStandardSample = async () => {\r\n\t\tlet standardSample: any = await this.uqs.product.Productstandardsample.obj({ product: this.id });\r\n\t\tthis.standardSample = standardSample ? JSON.parse(standardSample.content.replace(/\\t\\n\\r*/g, \"\")) : undefined;\r\n\t}\r\n\r\n\tloadProductCrumbs = async () => {\r\n\t\tlet { ProductProductCategory, ProductCategory } = this.uqs.product;\r\n\t\tlet arr: any[] = [];\r\n\t\tlet getProductCategorys: any[] = await ProductProductCategory.table({ product: this.id });\r\n\t\tif (getProductCategorys.length) {\r\n\t\t\tlet promise: PromiseLike<any>[] = [];\r\n\t\t\tfor (let key of getProductCategorys) {\r\n\t\t\t\tpromise.push(ProductCategory.load(key?.category));\r\n\t\t\t};\r\n\t\t\tlet result: any[] = await Promise.all(promise);\r\n\t\t\tif (result.length) {\r\n\t\t\t\tlet value: any;\r\n\t\t\t\tfor (let key of result) {\r\n\t\t\t\t\tlet keyArr: any[] = [];\r\n\t\t\t\t\tkeyArr.unshift(key.productcategorylanguage.find((el: any) => el.language?.id == GLOABLE.CHINESE.id));\r\n\t\t\t\t\tvalue = key?.parent;\r\n\t\t\t\t\twhile (value) {\r\n\t\t\t\t\t\tlet productCategoryByParent: any = await ProductCategory.load(value);\r\n\t\t\t\t\t\tif (productCategoryByParent)\r\n\t\t\t\t\t\t\tkeyArr.unshift(productCategoryByParent?.productcategorylanguage?.find((el: any) => el.language?.id == GLOABLE.CHINESE.id));\r\n\t\t\t\t\t\tvalue = productCategoryByParent?.parent;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tarr.push(keyArr);\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t};\r\n\t\tthis.productCrumbs = arr;\r\n\t}\r\n\r\n\tloadProductWarnings = async () => {\r\n\t\tlet warnings: PromiseLike<any>[] = [\r\n\t\t\tthis.getProductWarningSigns(),\r\n\t\t\tthis.getProductEmbargo(),\r\n\t\t];\r\n\t\tlet res = await Promise.all(warnings);\r\n\t\tthis.warnings = res.filter((el: any) => el);\r\n\t};\r\n\r\n\t/* 产品警示标示 */\r\n\tgetProductWarningSigns = async () => {\r\n\t\tlet JNKRestrictByChemical: any[] = await this.uqs.chemical.ChemicalJNKRestrict.table({ chemical: this.chemical?.chemical });\r\n\t\tif (!JNKRestrictByChemical.length) return;\r\n\t\tlet promise: PromiseLike<any>[] = [];\r\n\t\tfor (let key of JNKRestrictByChemical) {\r\n\t\t\tpromise.push(this.uqs.chemicalSecurity.JNKRestrict.load(key?.jnkRestrict?.id));\r\n\t\t};\r\n\t\tlet result = await Promise.all(promise);\r\n\t\tlet warningSign: string = \"\";\r\n\t\tfor (let key of result) {\r\n\t\t\tif (key) {\r\n\t\t\t\tlet { no } = key;\r\n\t\t\t\tif (no.indexOf('WX') > -1) warningSign = '危化品';\r\n\t\t\t};\r\n\t\t};\r\n\t\t/* let { jnkRestrict } = JNKRestrictByChemical;\r\n\t\tlet jnkRestrictObj = await this.uqs.chemicalSecurity.JNKRestrict.load(jnkRestrict?.id);\r\n\t\tlet warningSign: string = \"\";\r\n\t\tif (jnkRestrictObj) {\r\n\t\t\tlet { no } = jnkRestrictObj;\r\n\t\t\tif (no.indexOf('WX') > -1) warningSign = '危化品';\r\n\t\t}; */\r\n\t\treturn warningSign;\r\n\t}\r\n\r\n\t/* 产品禁运信息 */\r\n\tgetProductEmbargo = async () => {\r\n\t\tlet { currentSalesRegion } = this.store;\r\n\t\tlet getProductEmbargo = await this.uqs.product.ProductEmbargo.obj({ product: this.id, salesRegion: currentSalesRegion });\r\n\t\tif (!getProductEmbargo || getProductEmbargo.beginDate > Date.now() || getProductEmbargo.endDate < Date.now()) return;\r\n\t\tlet { type, packDescription, endDate } = getProductEmbargo;\r\n\t\tlet dateTime = moment(endDate).format(\"MM月DD日\");\r\n\t\treturn `${type}产品,${dateTime}后发运(限${packDescription || \"1L\"}以上包装)`;\r\n\t};\r\n\r\n\t/**\r\n\t * 获取PDF文件流\r\n\t */\r\n\tgetPDFFileUrl = async (captcha: string) => {\r\n\t\tdebugger;\r\n\t\t/*\r\n\t\tlet lang = this.currentLanguage ? this.currentLanguage.id : undefined;\r\n\t\tlet productId = this.currentProduct ? this.currentProduct.id : undefined;\r\n\t\t// let res = await window.fetch(GLOABLE.CONTENTSITE + `/partial/productpdffile/${captcha}/${32}/${7084}`);\r\n\t\tlet res = await window.fetch(GLOABLE.CONTENTSITE + `/partial/productpdffile/${captcha}/${lang}/${productId}`);\r\n\t\tif (res.status === 200) {\r\n\t\t\tlet content = await res.arrayBuffer();\r\n\t\t\treturn content;\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\tstatus: res.status,\r\n\t\t\t\tmsg: res.status !== 412 ? res.statusText : '验证码错误!'\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\t/**\r\n\t * 获取验证码\r\n\t */\r\n\tgetVerifyCode = async () => {\r\n\t\tdebugger;\r\n\t\t/*\r\n\t\tlet timer = (new Date()).getTime()\r\n\t\tthis.verifyCode = GLOABLE.CONTENTSITE + `/partial/captcha/?timer=${timer}`;//'http://dummyimage.com/200x100';\r\n\t\t*/\r\n\t}\r\n\r\n\tprivate async loadFDTimeDescription() {\r\n\t\tlet { currentSalesRegion } = this.store;\r\n\t\tlet futureDeliveryTime = await this.uqs.product.ProductDeliveryTime.table({ product: this.id, salesRegion: currentSalesRegion });\r\n\t\tif (!futureDeliveryTime.length) {\r\n\t\t\tfutureDeliveryTime = await this.uqs.product.GetFutureDeliveryTime.table({ product: this.id, salesRegion: currentSalesRegion });\r\n\t\t};\r\n\t\tif (futureDeliveryTime.length > 0) {\r\n\t\t\tlet { minValue, maxValue, unit, deliveryTimeDescription } = futureDeliveryTime[0];\r\n\t\t\tthis.futureDeliveryTimeDescription = minValue + (maxValue > minValue ? '~' + maxValue : '') + ' ' + unit;\r\n\t\t} else {\r\n\t\t\tthis.futureDeliveryTimeDescription = '';\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tgetChemicalInfo(product: number|BoxId):any {\r\n\t\tlet p = this.getCacheProduct(product);\r\n\t\tlet {chemical} = p;\r\n\t\tif (chemical) return chemical;\r\n\t\tif (chemical === null) return null;\r\n\t\tif (chemical as any === '') return null;\r\n\t\tp.chemical = '';\r\n\t\tthis.uqs.product.ProductChemical.obj({ product }).then(value => {\r\n\t\t\tp.chemical = value;\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tgetInventoryAllocation(product: number|BoxId, pack: number|BoxId): any[] {\r\n\t\tlet p = this.getCacheProduct(product);\r\n\t\tlet {inventoryAllocation} = p;\r\n\t\tif (inventoryAllocation) return inventoryAllocation;\r\n\t\tif (inventoryAllocation === null) return null;\r\n\t\tif (inventoryAllocation as any === '') return null;\r\n\t\tp.inventoryAllocation = '' as any;\r\n\t\tthis.uqs.warehouse.GetInventoryAllocation.table({ product, pack, salesRegion: this.cApp.currentSalesRegion }).then(results => {\r\n\t\t\tp.inventoryAllocation = results;\r\n\t\t});\r\n\t}\r\n\r\n\tgetFutureDeliveryTimeDescription(product: number|BoxId) {\r\n\t\tlet p = this.getCacheProduct(product);\r\n\t\tlet {futureDeliveryTimeDescription} = p;\r\n\t\tif (futureDeliveryTimeDescription) return futureDeliveryTimeDescription;\r\n\t\tif (futureDeliveryTimeDescription === null) return null;\r\n\t\tif (futureDeliveryTimeDescription === '') return null;\r\n\t\tp.futureDeliveryTimeDescription = '';\r\n\t\tthis.uqs.product.GetFutureDeliveryTime.table({ product, salesRegion: this.cApp.currentSalesRegion.id}).then(futureDeliveryTime => {\r\n\t\t\tlet value: string;\r\n\t\t\tif (futureDeliveryTime.length > 0) {\r\n\t\t\t\tlet { minValue, maxValue, unit, deliveryTimeDescription } = futureDeliveryTime[0];\r\n\t\t\t\tvalue = minValue + (maxValue > minValue ? '~' + maxValue : '') + ' ' + unit;\r\n\t\t\t} else {\r\n\t\t\t\tvalue = null;\r\n\t\t\t}\r\n\t\t\tp.futureDeliveryTimeDescription = value;\r\n\t\t});\r\n\t}\r\n\r\n\tgetPrices(product: BoxId, discount:number): any[] {\r\n\t\tlet p = this.getCacheProduct(product);\r\n\t\tlet {prices} = p;\r\n\t\tif (prices) return prices;\r\n\t\tif (prices === null) return null;\r\n\t\tif (prices as any === '') return null;\r\n\t\tp.prices = '';\r\n\t\tlet { id: productId } = product;\r\n\t\tlet { currentSalesRegion, cart, currentLanguage, uqs } = this.cApp;\r\n\r\n\t\tuqs.product.PriceX.table({ product: product, salesRegion: currentSalesRegion }).then(pricesResult => {\r\n\t\t\tlet priceSets = pricesResult.filter(e => e.discountinued === 0 && e.expireDate > Date.now()).sort((a, b) => a.retail - b.retail).map(element => {\r\n\t\t\t\tlet ret: any = {};\r\n\t\t\t\tret.pack = element.pack;\r\n\t\t\t\tret.retail = element.retail;\r\n\t\t\t\tif (discount !== 0)\r\n\t\t\t\t\tret.vipPrice = Math.round(element.retail * (1 - discount));\r\n\t\t\t\tret.currency = currentSalesRegion.currency;\r\n\t\t\t\tret.quantity = cart.getQuantity(productId, element.pack.id)\r\n\t\t\t\treturn ret;\r\n\t\t\t});\r\n\t\t\tlet promises: PromiseLike<any>[] = priceSets.map(v => {\r\n\t\t\t\treturn uqs.promotion.GetPromotionPack.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage });\r\n\t\t\t})\r\n\t\t\tPromise.all(promises).then(results => {\r\n\t\t\t\tfor (let i = 0; i < priceSets.length; i++) {\r\n\t\t\t\t\tlet priceSet = priceSets[i];\r\n\t\t\t\t\tlet promotion = results[i];\r\n\t\t\t\t\tlet discount = promotion && promotion.discount;\r\n\t\t\t\t\tif (discount)\r\n\t\t\t\t\t\tpriceSet.promotionPrice = Math.round((1 - discount) * priceSet.retail);\r\n\t\t\t\t}\r\n\t\t\t\tp.prices = priceSets;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tgetInventoryAllocation = async (productId: number, packId: number, salesRegionId: number) => {\r\n\t\treturn await this.uqs.warehouse.GetInventoryAllocation.table({ product: productId, pack: packId, salesRegion: this.cApp.currentSalesRegion });\r\n\t}\r\n\r\n\tgetFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n\t\tlet cacheId = productId + '_' + salesRegionId;\r\n\t\tif (this.futureDeliveryTimeDescriptionContainer[cacheId] === undefined) {\r\n\t\t\tlet futureDeliveryTime = await this.uqs.product.GetFutureDeliveryTime.table({ product: productId, salesRegion: salesRegionId });\r\n\t\t\tif (futureDeliveryTime.length > 0) {\r\n\t\t\t\tlet { minValue, maxValue, unit, deliveryTimeDescription } = futureDeliveryTime[0];\r\n\t\t\t\tthis.futureDeliveryTimeDescriptionContainer[cacheId] = minValue + (maxValue > minValue ? '~' + maxValue : '') + ' ' + unit;\r\n\t\t\t} else {\r\n\t\t\t\tthis.futureDeliveryTimeDescriptionContainer[cacheId] = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.futureDeliveryTimeDescriptionContainer[cacheId];\r\n\t}\r\n\t*/\r\n\r\n}\r\n/*\r\nexport class ProductInCApp extends Product {\r\n\t//private cApp: CApp;\r\n\r\n\tconstructor(cApp: CApp, id: number | BoxId)\t{\r\n\t\tsuper(cApp.uqs, id);\r\n\t\t//this.cApp = cApp;\r\n\t}\r\n}\r\n\r\nexport class ProductInStore extends Product {\r\n\r\n}\r\n*/\r\n","import { BoxId, nav } from 'tonva-react';\r\nimport { UQs } from \"uq-app\";\r\nimport { Cart } from \"./Cart\";\r\nimport { WebUser } from \"CurrentUser\";\r\nimport { Product } from \"./Product\";\r\n\r\nexport class Store {\r\n    private cache: Map<number, Product>;\r\n\r\n    uqs: UQs;\r\n    cart: Cart;\r\n    currentSalesRegion: any;\r\n    currentLanguage: any;\r\n    currentUser: WebUser;\r\n\r\n    constructor(uqs: UQs) {\r\n        this.uqs = uqs;\r\n        this.cart = new Cart(this);\r\n        this.cache = new Map();\r\n    }\r\n\r\n    getProduct(productId: number | BoxId): Product {\r\n        if (!productId) return;\r\n        // region, language 改变的时候，直接清cache\r\n        /*\r\n        let {currentSalesRegion, currentLanguage} = this;\r\n        if (this.salesRegion !== currentSalesRegion\r\n            || this.language != currentLanguage) {\r\n            this.cache = new Map<number, Product>();\r\n            this.salesRegion = currentSalesRegion;\r\n            this.language = currentLanguage;\r\n        }\r\n        */\r\n        if (typeof productId === 'object') productId = productId.id;\r\n        let product = this.cache.get(productId);\r\n        if (!product) {\r\n            product = new Product(this, productId);\r\n            this.cache.set(productId, product);\r\n        }\r\n        return product;\r\n    };\r\n\r\n    get isLogined(): boolean {\r\n        let { user } = nav;\r\n        if (user === undefined) return false;\r\n        return user?.id > 0;\r\n    }\r\n\r\n    get cartCount(): number { return this.cart.count; }\r\n\r\n    async buildCartItems(): Promise<void> {\r\n        await this.cart.buildItems();\r\n    }\r\n\r\n    async initCart() {\r\n        await this.cart.init();\r\n        //await this.buildCartItems();\r\n    }\r\n\r\n    dispose() {\r\n        this.cart.dispose();\r\n    }\r\n}\r\n","/* eslint-disable */\r\nimport { observable, computed, makeObservable } from 'mobx';\r\nimport { User, BoxId, QueryPager } from 'tonva-react';\r\nimport { UQs } from 'uq-app';\r\n\r\nexport class WebUser {\r\n    private _user: User;\r\n    id: number;\r\n    name: string;\r\n    nick?: string;\r\n    icon?: string;\r\n\r\n    firstName: string;\r\n    gender: string;\r\n    salutation: string;\r\n    organizationName: string;\r\n    departmentName: string;\r\n\r\n    get defaultOrganizationName(): string {\r\n        return this.organizationName ||\r\n            (this.webUserSettings &&\r\n                (\r\n                    (this.webUserSettings.invoiceInfo && this.webUserSettings.invoiceInfo.obj['title'])\r\n                    || (this.webUserSettings.shippingContact && this.webUserSettings.shippingContact.obj['organizationName'])\r\n                    || (this.webUserSettings.invoiceContact && this.webUserSettings.invoiceContact.obj['organizationName'])\r\n                )\r\n            );\r\n    }\r\n\r\n    get defaultName(): string {\r\n        return this.firstName ||\r\n            (this.webUserSettings &&\r\n                ((\r\n                    this.webUserSettings.shippingContact && this.webUserSettings.shippingContact.obj['name'])\r\n                    || (this.webUserSettings.invoiceContact && this.webUserSettings.invoiceContact.obj['name'])\r\n                )\r\n            );\r\n    }\r\n\r\n    get defaultMobile(): string {\r\n        return this.mobile ||\r\n            (this.webUserSettings &&\r\n                ((\r\n                    this.webUserSettings.shippingContact && this.webUserSettings.shippingContact.obj['mobile'])\r\n                    || (this.webUserSettings.invoiceContact && this.webUserSettings.invoiceContact.obj['mobile'])\r\n                )\r\n            );\r\n    }\r\n\r\n    telephone: string;\r\n    mobile: string;\r\n    email: string;\r\n    fax: string;\r\n    address: BoxId;\r\n    addressString: string;\r\n    zipCode: string;\r\n    VIPDiscount: any;\r\n    webUserVIPCard: any;\r\n    thirdPartyOrg: any;\r\n    epecUser: any;\r\n\r\n    get agtCustomerType() {\r\n        if (this.epecUser) return 'EPEC';\r\n        return \"\";\r\n    };\r\n\r\n    get allowOrdering() {\r\n        // 这个地方要改成相关账号吧？\r\n        return this.currentCustomer !== undefined ||\r\n            (this.mobile && this.firstName && this.organizationName);\r\n    }\r\n\r\n    private webUserSettings: any;\r\n\r\n    private uqs: UQs;\r\n\r\n\r\n    constructor(uqs: UQs) {// cUsqWebUser: CUq, cUsqCustomer: CUq) {\r\n        makeObservable(this, {\r\n            firstName: observable,\r\n            organizationName: observable,\r\n            mobile: observable,\r\n            allowOrdering: computed,\r\n            agtCustomerType: computed,\r\n        });\r\n\r\n        // cUsqWebUser: CUq, cUsqCustomer: CUq) {\r\n        this.uqs = uqs;\r\n    }\r\n\r\n    setUser = async (user: User) => {\r\n        if (!user) return;\r\n        this._user = user;\r\n        this.id = user.id;\r\n        this.name = user.name;\r\n        this.nick = user.nick;\r\n        this.icon = user.icon;\r\n\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    private async loadWebUser() {\r\n        let { id, _user } = this;\r\n        if (_user === undefined) return;\r\n\r\n        let { webuser: webUserTuid, salesTask, platformjoint } = this.uqs;\r\n        let { WebUser, WebUserContact, WebUserSetting, WebUserCustomer, WebUserBuyerAccount, RecordLogin } = webUserTuid;\r\n        let webUser = await WebUser.load(this.id);\r\n        if (webUser) {\r\n            let { firstName, gender, salutation, organizationName, departmentName } = webUser;\r\n            this.firstName = firstName;\r\n            this.gender = gender;\r\n            this.salutation = salutation;\r\n            this.organizationName = organizationName;\r\n            this.departmentName = departmentName;\r\n            this.webUserVIPCard = await webUserTuid.WebUserVIPCard.obj({ webUser: this });\r\n            if (this.webUserVIPCard !== undefined) {\r\n                // this.VIPDiscount = await vipCardType.VIPCardTypeDiscount.query({ vipCard: this.webUserVIPCard.vipCardType })\r\n                if (this.webUserVIPCard.expiredDate > Date.now())\r\n                    this.VIPDiscount = await salesTask.VIPCardDiscount.table({ coupon: this.webUserVIPCard.vipCard });\r\n                else this.VIPDiscount = [];\r\n            }\r\n\r\n            await RecordLogin.submit({ webUser: webUser, ip: \"\", app: \"shop\" });\r\n            let thirdPartyOrg: any = await platformjoint.NeoTridentUser.obj({ webUser: this });\r\n            this.thirdPartyOrg = thirdPartyOrg?.organization;\r\n            this.epecUser = await platformjoint.EpecUser.obj({ webUser: this });\r\n        }\r\n\r\n\r\n        let contact = await WebUserContact.obj({ \"webUser\": id });\r\n        if (contact) {\r\n            let { telephone, mobile, email, fax, address, addressString, zipCode } = contact;\r\n            this.telephone = telephone;\r\n            this.mobile = mobile;\r\n            this.email = email;\r\n            this.fax = fax;\r\n            this.address = address;\r\n            this.addressString = addressString;\r\n            this.zipCode = zipCode;\r\n        }\r\n\r\n        this.webUserSettings = await WebUserSetting.obj({ webUser: id }) || { webUser: id };\r\n\r\n        let value = await WebUserCustomer.obj({ webUser: id });\r\n        if (value !== undefined) {\r\n            this.currentCustomer = new Customer(value.customer, this.uqs);\r\n            await this.currentCustomer.init();\r\n        }\r\n        let accountValue = await WebUserBuyerAccount.query({ webUser: id });\r\n        let { ret: buyerAccounts } = accountValue;\r\n        if (buyerAccounts && buyerAccounts.length > 0) {\r\n            // TODO: 暂时不考虑有多个相关账号的情况\r\n            this.buyerAccount = buyerAccounts[0].buyerAccount;\r\n        }\r\n    }\r\n\r\n    /*\r\n    get isLogined(): boolean {\r\n        return this._user !== undefined;\r\n    }\r\n    */\r\n\r\n    get hasCustomer(): boolean {\r\n        return this.currentCustomer !== undefined;\r\n    }\r\n    currentCustomer: Customer;\r\n    buyerAccount: any;\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            return await this.currentCustomer.getContacts()\r\n        }\r\n        */\r\n        return await this.uqs.webuser.WebUserContacts.table({ webUser: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.addContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        await this.uqs.webuser.WebUserContacts.add({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async addContactFromAccount() {\r\n        let { firstName, organizationName, mobile, telephone, email, address, addressString } = this;\r\n        if (firstName && organizationName && mobile && address && addressString) {\r\n            let newContact = await this.uqs.customer.Contact.save(undefined, {\r\n                name: firstName,\r\n                organizationName: organizationName,\r\n                mobile: mobile,\r\n                telephone: telephone,\r\n                email: email,\r\n                address: address,\r\n                addressString: addressString\r\n            })\r\n            if (newContact) {\r\n                let { id: newContactId } = newContact;\r\n                await this.addContact(newContactId);\r\n                let newContactBox = this.uqs.customer.Contact.boxId(newContactId);\r\n                this.setDefaultShippingContact(newContactBox);\r\n            }\r\n        }\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.delContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        await this.uqs.webuser.WebUserContacts.del({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async getSetting() {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            return this.currentCustomer.getSetting();\r\n        }\r\n        */\r\n        return this.webUserSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultShippingContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        this.webUserSettings.shippingContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoiceContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        this.webUserSettings.invoiceContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoice(invoiceTypeId, invoiceInfoId);\r\n            return;\r\n        }\r\n        */\r\n        // await this.webUserSettingMap.add({ webUser: this.id, arr1: [{ invoiceType: invoiceTypeId, invoiceInfo: invoiceInfoId }] });\r\n        this.webUserSettings.invoiceType = invoiceTypeId;\r\n        this.webUserSettings.invoiceInfo = invoiceInfoId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async saveDefaultSettings() {\r\n        await this.uqs.webuser.WebUserSetting.add(this.webUserSettings);\r\n    }\r\n\r\n\r\n    async changeWebUser(webUser: any) {\r\n        await this.uqs.webuser.WebUser.save(this.id, webUser);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        webUserContact.webUser = this.id;\r\n        await this.uqs.webuser.WebUserContact.add(webUserContact);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async getPoints() {\r\n        return await this.uqs.积分商城.getPoints.table({ customer: this.currentCustomer });\r\n    }\r\n\r\n    async getValidCredits() {\r\n        let { customer, webuser } = this.uqs;\r\n        let creditsForWebUser: any[] = [];\r\n        if (this.hasCustomer) {\r\n            creditsForWebUser = await customer.CustomerCredits.table({ customer: this.currentCustomer });\r\n        } else {\r\n            creditsForWebUser = await webuser.WebUserCredits.table({ webUser: this.id });\r\n        };\r\n        return creditsForWebUser.filter(v => v.expiredDate.getTime() > Date.now());\r\n    }\r\n\r\n    async getValidCoupons() {\r\n        let { customer, webuser } = this.uqs;\r\n        let couponsForWebUser: any[] = [];\r\n        if (this.hasCustomer) {\r\n            couponsForWebUser = await customer.CustomerCoupon.table({ customer: this.currentCustomer });\r\n        } else {\r\n            couponsForWebUser = await webuser.WebUserCoupon.table({ webUser: this.id });\r\n        };\r\n        return couponsForWebUser.filter(v => v.expiredDate.getTime() > Date.now());\r\n    }\r\n\r\n    async getUserdCoupon() {\r\n        let { webuser, customer } = this.uqs;\r\n        let result: any;\r\n        if (this.hasCustomer) {\r\n            result = new QueryPager<any>(customer.getMyUsedCoupon, 10, 10);\r\n            await result.first({ customer: this.currentCustomer });\r\n        } else {\r\n            result = new QueryPager<any>(webuser.getMyUsedCoupon, 10, 10);\r\n            await result.first({ webUser: this.id });\r\n        };\r\n        return result;\r\n    }\r\n\r\n    async getExpiredCoupon() {\r\n        let { webuser, customer } = this.uqs;\r\n        let result: any;\r\n        if (this.hasCustomer) {\r\n            result = new QueryPager<any>(customer.getMyExpiredCoupon, 10, 10);\r\n            await result.first({ customer: this.currentCustomer });\r\n        } else {\r\n            result = new QueryPager<any>(webuser.getMyExpiredCoupon, 10, 10);\r\n            await result.first({ webUser: this.id });\r\n        };\r\n        return result;\r\n    }\r\n\r\n};\r\n\r\nexport class Customer {\r\n    private readonly uqs: UQs;\r\n    id: number;\r\n\r\n    private customerSettings: any;\r\n    Contractor: any;\r\n    Organization: any;\r\n    Discounts: any[] = []\r\n\r\n    constructor(customer: BoxId, uqs: UQs) {\r\n        this.id = customer.id;\r\n        this.uqs = uqs;\r\n    };\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        return await this.uqs.customer.CustomerContacts.table({ customer: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        await this.uqs.customer.CustomerContacts.add({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        await this.uqs.customer.CustomerContacts.del({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    /**\r\n     * 获取customer折扣表\r\n     */\r\n    async getcustomerDiscount(customer: BoxId | number) {\r\n        let discounts = await this.uqs.customerDiscount.CustomerDiscount.table({ customer: customer });\r\n        return discounts.filter((el: any) => el.endDate > Date.now());\r\n    }\r\n\r\n    /**\r\n     * 获取所属组织折扣表\r\n     */\r\n    async getOrganizationDiscount(organization: BoxId | number) {\r\n        let discounts = await this.uqs.customerDiscount.OrganizationDiscount.table({ organization: organization });\r\n        return discounts.filter((el: any) => el.endDate > Date.now());\r\n    }\r\n    /* 获取用户的折扣表(个人-->个人所属组织-->关联老师-->老师所属组织) */\r\n    async getcustomerDiscountArr() {\r\n        /* 获取个人的折扣表 */\r\n        this.Discounts = await this.getcustomerDiscount(this.id);\r\n        if (this.Organization && !this.Discounts.length) {/* 获取个人组织的折扣表 */\r\n            this.Discounts = await this.getOrganizationDiscount(this.Organization);\r\n        };\r\n        if (this.Discounts.length) return;\r\n        /* 获取关联老师 */\r\n        let customerBuyerAccount = await this.uqs.customer.CustomerBuyerAccount.obj({ customer: this.id });\r\n        if (customerBuyerAccount) {\r\n            let { buyerAccount } = customerBuyerAccount;\r\n            /* 读取老师 buyerAccount */\r\n            let getBuyerAccountID = await this.uqs.customer.Buyeraccount.load(buyerAccount);\r\n            if (getBuyerAccountID) {\r\n                let { description: BuyerAccountName, organization } = getBuyerAccountID;\r\n                /*  获取老师customer */\r\n                let getBuyerAccountCustomerRes = await this.uqs.customer.Customer.search(BuyerAccountName, 10, 10);\r\n                if (!getBuyerAccountCustomerRes.length) return;\r\n                /* 获取老师的折扣表 */\r\n                this.Discounts = await this.getcustomerDiscount(getBuyerAccountCustomerRes[0].id);\r\n                if (this.Discounts.length) return;\r\n                /* 获取老师组织折扣表 */\r\n                this.Discounts = await this.getOrganizationDiscount(organization);\r\n            };\r\n        };\r\n    }\r\n\r\n    async init() {\r\n        this.customerSettings = await this.uqs.customer.CustomerSetting.obj({ customer: this.id }) || { customer: this.id };\r\n        let customerContactorMap: any = await this.uqs.customer.CustomerContacts.obj({ customer: this.id });\r\n        if (customerContactorMap)\r\n            this.Contractor = customerContactorMap.contractor;\r\n        let customerOrganization = await this.uqs.customer.getCustomerOrganization.obj({ customerId: this.id });\r\n        if (customerOrganization) this.Organization = customerOrganization.organization;\r\n        await this.getcustomerDiscountArr();\r\n    }\r\n\r\n    getSetting() {\r\n        return this.customerSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        this.customerSettings.shippingContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        this.customerSettings.invoiceContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        this.customerSettings.invoiceType = invoiceTypeId;\r\n        this.customerSettings.invoiceInfo = invoiceInfoId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultSettings() {\r\n        await this.uqs.customer.CustomerSetting.add(this.customerSettings);\r\n    }\r\n\r\n}","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport { autoHideTips, LMR, FA, List, VPage } from 'tonva-react';\r\nimport { observer } from 'mobx-react';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport classNames from 'classnames';\r\nimport XLSX from \"xlsx\";\r\nimport { xs } from 'tools/browser';\r\nimport { CQuickOrder } from './CQuickOrder';\r\nimport { Product } from '../store';\r\nimport { renderBrand, renderPropItem } from 'product/renders';\r\n\r\nconst productOrderType: { [type:number]:string } = {\r\n    1: \"产品编号订购\",\r\n    2: \"上传Excel文件订购\",\r\n};\r\n\r\n\r\nexport class VQuickOrder extends VPage<CQuickOrder> {\r\n\r\n    directOrderType: number = 1;        /* 一键下单 类型 */\r\n    excelData: any[] = [];              /* excel文件数据 */\r\n    execlFileName: string;              /* excel文件名称 */\r\n    private excelTip = observable.box<string>('');\r\n\r\n    constructor(c: CQuickOrder) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            directOrderType: observable,\r\n            excelData: observable,\r\n            execlFileName: observable\r\n        });\r\n    }\r\n\r\n    header() {\r\n        return this.isWebNav === true ? null : <>批量订购</>;\r\n    }\r\n\r\n    right() {\r\n        return this.isWebNav === true ? null : <></>;\r\n    }\r\n\r\n    content() {\r\n        return <this.contentView />\r\n    }\r\n\r\n    /* 存储input输入值 */\r\n    inputStorageToOrigin = () => {\r\n        this.controller.quickOrderProducts.forEach((el: any) => { if (el?.iptValue) el.origin = el?.iptValue?.value; });\r\n    };\r\n\r\n    productContent = (item: any, index: number) => {\r\n        let delProduct = () => {\r\n            this.inputStorageToOrigin();\r\n            this.controller.quickOrderProducts.splice(index, 1);\r\n        };\r\n        let { product, origin, noProductTip } = item;\r\n        let rightUI = <div><span className=\"ml-2\"\r\n            onClick={() => { delProduct() }} ><FA name=\"trash-o\" className=\"cursor-pointer\" /></span></div>;\r\n        return React.createElement(observer(() => {\r\n            return <LMR right={rightUI} >\r\n                <div className=\"row mx-0 py-1 border-bottom\">\r\n                    <div className=\"col-lg-6 row mx-0 align-items-center px-0\">\r\n                        {\r\n                            !product\r\n                                ? <input ref={v => { item.iptValue = v }} defaultValue={origin || ''}\r\n                                        placeholder=\"产品编号\" type=\"text\" className=\"form-control col-6 col-sm-3 d-inline-block\" />\r\n                                : null\r\n                        }\r\n                        <span className={classNames(!product ? \"col-12 col-sm-9 text-danger\" : \"col-12\", \"small align-self-center px-0\")}>\r\n                            {\r\n                                !product && noProductTip\r\n                                    ? <div className=\"px-2\">{noProductTip}</div>\r\n                                    : this.renProduct(product)\r\n                            }\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"col-lg-6 px-0\">\r\n                        {this.controller.renderPriceQuickOrderView(item)}\r\n                    </div>\r\n                </div>\r\n            </LMR>\r\n        }));\r\n    };\r\n\r\n    renProduct = (product: Product) => {\r\n        if (!product) return <></>;\r\n        let { props, brand } = product;\r\n        let { description, descriptionC, origin } = props;\r\n        let eName = <div dangerouslySetInnerHTML={{ __html: description || '' }}></div>;\r\n        let cName: any;\r\n        if (descriptionC !== description) {\r\n            cName = <div dangerouslySetInnerHTML={{ __html: descriptionC || '' }}></div>;\r\n        };\r\n        return <>\r\n            <div className=\"small font-weight-bolder\">{eName}{cName}</div>\r\n            <div className=\"row mx-0\">\r\n                {renderPropItem('产品编号', origin, 'text-primary')}\r\n                {renderBrand(brand)}\r\n            </div>\r\n        </>;\r\n    };\r\n\r\n    /** \r\n     * 上传excel文件 添加产品\r\n     */\r\n    excelUpload = () => {\r\n        let csv2table = (csv: string) => {\r\n            let rows = csv.split('\\n');\r\n            rows.pop();\r\n            let arr: any[] = rows.map((row: string, idx: number) => {\r\n                let columns = row.split(',');\r\n                let obj = {\r\n                    id: idx + 1,\r\n                    origin: columns[0],\r\n                    pack: columns[1],\r\n                    quantity: columns[2],\r\n                };\r\n                return obj;\r\n            });\r\n            return arr;\r\n        };\r\n        let readExcelFile = (e: any) => {\r\n            let reads = new FileReader();\r\n            let fileName = e.target.files[0];\r\n            if (!(/.xls(x?)$/.test(fileName?.name))) {\r\n                this.excelTip.set(\"文件格式仅限于 .xlsx 或 .xls\");\r\n                return;\r\n            };\r\n            this.execlFileName = fileName?.name ? fileName.name.replace(/(.{2}).*(.{1}.xls(x?))/, \"$1...$2\") : '';\r\n            reads.readAsBinaryString(fileName);\r\n            reads.onload = (e) => {\r\n                //workbook存放excel的所有基本信息\r\n                let workbook = XLSX.read(e.target.result, { type: 'binary' });\r\n                //定义sheetList中存放excel表格的sheet表，就是最下方的tab\r\n                let sheetList = workbook.SheetNames;\r\n                //只获取第一张表的数据\r\n                let firstSheet = sheetList[0];\r\n                //存放json数组格式的表格数据\r\n                let worksheet = workbook.Sheets[firstSheet];\r\n                let csv = XLSX.utils.sheet_to_csv(worksheet);\r\n                let csv1 = csv2table(csv);\r\n                // let excelData = XLSX.utils.sheet_to_json(worksheet, { defval: '' });//每行以json数组形式输出\r\n                this.excelData = csv1; //|| excelData;\r\n            };\r\n            e.target.value = '';\r\n        }\r\n        return <div className=\"col-lg-6 p-2\" style={{ background: \"#efefef\" }}>\r\n            <div className=\"w-50 py-2 text-center position-relative rounded-sm border-primary\" style={{ border: \"1px dashed\" }}>\r\n                上传Excel文件 <br /><span className=\"small\">（格式: .xlsx、.xls）</span>\r\n                <div className=\"text-primary\">{this.execlFileName}</div>\r\n                <input onChange={(e) => readExcelFile(e)} type=\"file\" name=\"\" className=\"position-absolute w-100 h-100 cursor-pointer\"\r\n                    style={{ top: 0, left: 0, opacity: 0 }}\r\n                    accept=\"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" />\r\n            </div>\r\n            {autoHideTips(this.excelTip, <div className=\"text-danger\">*{this.excelTip.get()}</div>)}\r\n            <div className=\"row mx-0 align-items-end justify-content-between mt-2\">\r\n                <button onClick={this.UploadExcel} className=\"btn btn-sm btn-primary w-25\"><span className=\"mx-2\">上载</span></button>\r\n                <a className=\"col-6 col-sm-6 text-right collapsed text-primary small p-0\" data-toggle=\"collapse\" href=\"#setMyFileC\" role=\"button\" aria-expanded=\"false\">\r\n                    如何设置我的文件\r\n                </a>\r\n            </div>\r\n            <div className=\"mt-lg-2 mb-lg-2 collapse\" id=\"setMyFileC\">\r\n                如何设置我的Excel文件以进行批量订购\r\n                <div className=\"small\">您的文件应按以下所示的列顺序包含以下信息。请不要在列中包含任何文本标题。</div>\r\n                <div className=\"text-center my-2\"><img style={{ maxWidth: \"100%\" }} src=\"/images/Excel.gif\" alt=\"\" /></div>\r\n                <div className=\"small\"><span className=\"text-danger\">注意：</span>“产品编号”是输入文件中唯一需要的列。您可以根据需要省略包装尺寸和/或数量。上传文件后，您将可以编辑所有产品信息。</div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private contentView = observer(() => {\r\n        let { quickOrderProducts, overOrder } = this.controller;\r\n        let quickOrderDised = !quickOrderProducts.length || !quickOrderProducts.every((v: any) => v?.selectedPack && v?.selectedPack?.retail);\r\n        return <div className=\"mb-5 row mx-0 \">\r\n            {!xs ? <h4 className=\"col-12 mt-5 mb-4 text-center\">批量订购</h4> : null}\r\n            <div className=\"px-2 px-lg-0\">\r\n                <h5>按产品编号订购</h5>\r\n                <div className=\"small\">输入商品编号,检索商品。下单时所有产品必须有效,且已选择包装的大小和数量。</div>\r\n            </div>\r\n            <div className=\"col-lg-12 mx-auto p-2 rounded\" style={{ background: \"#efefef\" }}>\r\n                <List items={quickOrderProducts} item={{ render: this.productContent, className: \"bg-transparent\" }} none={<div className=\"py-2 d-flex justify-content-center\" style={{userSelect: \"none\"}}>请添加产品</div>} />\r\n                <div className=\"py-2\">\r\n                    <button onClick={this.addMoreProducts} className=\"btn btn-sm btn-primary col—2\"><span className=\"mx-2\">添加更多产品</span></button>\r\n                    {\r\n                        quickOrderProducts.every((v: any) => v.product)\r\n                            ? <button onClick={overOrder} disabled={quickOrderDised}\r\n                                className=\"btn btn-sm btn-success col—2 float-right\" style={{ backgroundColor: \"#218838\" }}><span className=\"mx-2\">现在下单</span></button>\r\n                            : <button onClick={this.getProductByOriginOrPack}\r\n                                className=\"btn btn-sm btn-primary col—2 float-right\" style={{ backgroundColor: \"#007bff\" }}><span className=\"mx-2\">获取产品包装</span></button>\r\n                    }\r\n                </div>\r\n            </div>\r\n            {\r\n                !xs ? <div>\r\n                    <div className=\"mt-3 px-2 px-lg-0\">\r\n                        <h5>上传您自己的产品列表</h5>\r\n                        <div className=\"small\">通过上载每行一个产品（最多30行）的Excel文件，将商品添加到列表中。\r\n                            文件的第一列必须是产品编号,第二列包装大小和第三列数量的列表。您可以将任何/所有产品的包装尺寸和数量列留空。上传文件后，您就可以添加/编辑包装的尺寸和数量。</div>\r\n                    </div>\r\n                    {this.excelUpload()}\r\n                </div> : null\r\n            }\r\n        </div>\r\n    });\r\n\r\n    /**\r\n     * 添加更多产品\r\n     */\r\n    addMoreProducts = () => {\r\n        let { quickOrderProducts } = this.controller;\r\n        let { length: leng } = quickOrderProducts;\r\n        if (length >= 30) return;\r\n        let id = quickOrderProducts[leng - 1]?.id || 0;\r\n        let len = 30 - leng < 5 ? 30 - leng : 5;\r\n        let newArr = Array.from({ length: len }, (v, k) => { return { id: id + k + 1, origin: '' } });\r\n        this.inputStorageToOrigin();\r\n        this.controller.quickOrderProducts.push(...newArr);\r\n    };\r\n\r\n    /**\r\n     * 上载Excel\r\n     */\r\n    UploadExcel = async () => {\r\n        if (!this.execlFileName) {\r\n            this.excelTip.set('请上传的文件.');\r\n            return;\r\n        };\r\n        let excelData = this.excelData.map((el: any) => {\r\n            if (!el || (el && !(\"origin\" in el) && el.origin !== \"\")) return;\r\n            if (\"pack\" in el) {\r\n                let radioyArr = el.pack.match(/(\\d*\\.*\\d+)/g);\r\n                let unitArr = el.pack.replace(/(\\.)*/g, \"\").match(/\\D+/g);\r\n                let radioy = radioyArr ? Number(radioyArr[0]) : 1;\r\n                let unit = unitArr ? unitArr[0] : \"\";\r\n                return {\r\n                    id: el.id,\r\n                    origin: el.origin,\r\n                    radiox: 1,\r\n                    radioy: radioy,\r\n                    unit: unit,\r\n                    quantity: Number(el?.quantity) || 1,\r\n                }\r\n            } else return { id: el.id, origin: el.origin };\r\n        }).filter((v: any) => v);\r\n        if (!excelData.length || excelData.length > 30) {\r\n            this.excelTip.set('您上传的文件无法解析,请保证数据格式正确,并且包含至少1中产品,最多30个产品!');\r\n            return;\r\n        };\r\n        this.controller.quickOrderProducts = excelData;\r\n        this.excelData = [];\r\n        this.execlFileName = '';\r\n        await this.getProductByOriginOrPack();\r\n    };\r\n\r\n    /**\r\n     * 获取产品\r\n     */\r\n    getProductByOriginOrPack = async () => {\r\n        let { quickOrderProducts, QueryProductsByOriginOrPack } = this.controller;\r\n        this.inputStorageToOrigin();\r\n        let origins: any = quickOrderProducts.map((el: any) => {\r\n            if (el.product) return;\r\n            let obj:any= {\r\n                id: el.id,\r\n                origin: el.origin || el?.iptValue?.value\r\n            };\r\n            if (\"radioy\" in el || \"unit\" in el) {\r\n                obj = { ...obj, radiox: el?.radiox, radioy: el?.radioy, unit: el?.unit, quantity: el?.quantity };\r\n            };\r\n            return obj;\r\n        }).filter((v: any) => v && v.origin);\r\n        if (!origins.length) return;\r\n        await QueryProductsByOriginOrPack(origins);\r\n    };\r\n}","import { observable, makeObservable } from 'mobx';\r\nimport { BoxId, Tuid } from 'tonva-react';\r\nimport { CApp, CUqBase } from 'tapp';\r\nimport { VQuickOrder } from './VQuickOrder';\r\nimport { VPriceQuickOrder } from 'product/views';\r\n\r\nexport let minPrice = (vipPrice: any, promotionPrice: any) => {\r\n    if (vipPrice || promotionPrice)\r\n        return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n};\r\n\r\nexport class CQuickOrder extends CUqBase {\r\n\r\n    quickOrderProducts: any[] = [\r\n        // { id: 1, origin: \"187351\" },\r\n        // { id: 2, origin: \"102053\" },\r\n        // { id: 3, origin: \"159262\" },\r\n        // { id: 4, origin: \"160666\" },\r\n        // { id: 5, origin: \"187351\" },\r\n    ];\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n        makeObservable(this, {\r\n            quickOrderProducts: observable\r\n        });\r\n    }\r\n    \r\n    protected async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 初始化产品订购列表\r\n     */\r\n    initProduct = () => {\r\n        this.quickOrderProducts = Array.from({ length: 5 }, (v, k) => { return { id: k + 1, origin: '' } });\r\n    };\r\n\r\n    /**\r\n     * 一键下单页\r\n     */\r\n    openQuickOrder = async () => {\r\n        this.initProduct();\r\n        this.openVPage(VQuickOrder);\r\n    }\r\n\r\n    renderPriceQuickOrderView = (item:any) => {\r\n        return this.renderView(VPriceQuickOrder , item);\r\n    }\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    /**\r\n     * 据指定字段检索产品\r\n     */\r\n    queryProductByOrigin = async (origin: string) => {\r\n        let { currentSalesRegion } = this.cApp;\r\n        let nOrigin = origin.trim();\r\n        let productByOrigin = await this.cApp.uqs.product.GetProductPackByOrigin.table({ origin: nOrigin, salesRegion: currentSalesRegion });\r\n        return productByOrigin;\r\n    };\r\n\r\n    /**\r\n     * 根据产品编号/包装规格查询产品，在客户手动输入或提交excel表格 检索产品\r\n     */\r\n    QueryProductsByOriginOrPack = async (param: any[]) => {\r\n        /* 获取product 据origin */\r\n        let promises: Promise<any>[]=[];\r\n        param.forEach((el: any) => {\r\n            let { origin } = el;\r\n            promises.push(this.queryProductByOrigin(origin));\r\n        });\r\n        let res = await Promise.all(promises);\r\n        let result = res.flat();\r\n        /* 去重 product */\r\n        let resultArr: any = [];\r\n        result.forEach((el: any) => {\r\n            let { product, pack } = el;\r\n            let productExists = resultArr.find((i: any) => Tuid.equ(i.product, product));\r\n            if (productExists) {\r\n                if (!Tuid.equ(productExists.pack, pack)) productExists.packArr.push(pack);\r\n            } else {\r\n                resultArr.push({ product: product, packArr: [pack] });\r\n            };\r\n        });\r\n        /* product 重装为 Product类数据 */\r\n        let promises2: PromiseLike<any>[] = [];\r\n        resultArr.forEach((el: any) => {\r\n            let productExists = this.quickOrderProducts.find((v: any) => Tuid.equ(el.product, v.product));\r\n            if (productExists) {\r\n                el.product = productExists.product;\r\n            } else {\r\n                el.product = this.cApp.getProduct(el?.product?.id);\r\n                promises2.push(el.product.loadListItem());\r\n            };\r\n        });\r\n        await Promise.all(promises2);\r\n        /* 获取有效的Pack,pack数据重装（获取的pack中obj数据不是需求值,需重装） */\r\n        resultArr = resultArr.map((el: any) => {\r\n            el.packArr = el.packArr.map((v: any) => {\r\n                let packExistsFormPrices = el.product.prices.find((i: any) => Tuid.equ(i.pack, v));\r\n                if (!packExistsFormPrices || packExistsFormPrices.retail === 0.01) return;\r\n                return { ...packExistsFormPrices, quantity: packExistsFormPrices.quantity || 1 };\r\n            }).filter((i: any) => i);\r\n            return el;\r\n        });\r\n        /* 不考虑一个origin 匹配到多个产品,多个取一个就行 */\r\n        this.quickOrderProducts.forEach((el: any) => {\r\n            if (el?.productExists) return;\r\n            let findOriginById = param.find((i: any) => i.id === el.id);\r\n            if (!findOriginById) return;\r\n            let getProductByOrigin = resultArr.find((v: any) => v.product.props.origin === findOriginById.origin);\r\n            if (getProductByOrigin) {\r\n                el.product = getProductByOrigin.product;\r\n                el.noProductTip = \"\";\r\n                if (findOriginById?.radioy || findOriginById?.unit) {\r\n                    let finddefaultPack:any = getProductByOrigin.packArr.find((v: any) => v.pack?.obj?.radioy === findOriginById?.radioy && v.pack?.obj?.unit === findOriginById?.unit);\r\n                    el.selectedPack = finddefaultPack ? { ...finddefaultPack, quantity: findOriginById?.quantity } : undefined;\r\n                };\r\n                if (!getProductByOrigin.packArr.length) {\r\n                    el.noPackTip = \"该产品无销售包装,请删除.\"; return;\r\n                };\r\n                el.QPacks = getProductByOrigin.packArr;\r\n                el.productExists = true;\r\n            } else {\r\n                el.noProductTip = \"您输入了无效的产品编号,请再试一次.\";\r\n            };\r\n        });\r\n        this.quickOrderProducts = this.quickOrderProducts.filter((v: any) => v && v.origin);\r\n    };\r\n\r\n    /**\r\n     * 产品列表数量变更\r\n     */\r\n    changeProductQuantity = async (item: any, pack: BoxId, quantity: number) => {\r\n        let { id } = item;\r\n        this.quickOrderProducts.forEach((el: any) => {\r\n            if (el.id === id) el.selectedPack.quantity = quantity;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 包装选择 \r\n     */\r\n    selectedPack = (item: any, pack: any) => {\r\n        let { id } = item;\r\n        this.quickOrderProducts.forEach((el: any) => { if (el.id === id) el.selectedPack = pack; });\r\n    };\r\n\r\n    /* 现在下单 */\r\n    overOrder = async () => {\r\n        await this.cApp.assureLogin();\r\n        let resultArr: any = [];\r\n        this.quickOrderProducts.forEach((el: any) => {\r\n            if (!el) return;\r\n            let { product, selectedPack } = el;\r\n            let getPriceByPackID = product.prices.find((v: any) => Tuid.equ(v.pack, selectedPack.pack));\r\n            let price = minPrice(getPriceByPackID?.vipPrice, getPriceByPackID?.promotionPrice) || selectedPack.retail;\r\n            selectedPack.price = price;\r\n            let productExists = resultArr.find((i: any) => Tuid.equ(i.product, product));\r\n            if (productExists) {\r\n                if (!Tuid.equ(productExists.pack, selectedPack.pack)) productExists.packs.push(selectedPack);\r\n            } else {\r\n                resultArr.push({ product: product, packs: [selectedPack], $isSelected: true, $isDeleted: false, createdate: Date.now() });\r\n            };\r\n        });\r\n        await this.cApp.cOrder.createOrderFromCart(resultArr);\r\n    };\r\n}\r\n","/* eslint-disable */\r\nimport { User, nav, NavPage, BoxId, PageWebNav } from 'tonva-react';\r\n//import { Cart/*, LOCALCARTNAME*/ } from \"../cart/Cart\";\r\nimport { CHome } from \"../home\";\r\nimport { CCart } from \"../cart\";\r\nimport { CProduct } from \"../product\";\r\nimport { COrder } from \"../order/COrder\";\r\nimport { CProductCategory } from \"../productCategory/CProductCategory\";\r\nimport { CMember } from \"../member\";\r\nimport { CMe } from \"../me/CMe\";\r\nimport { CUqApp } from \"./CBase\";\r\nimport { VMain } from 'tapp/main';\r\nimport * as qs from 'querystringify';\r\nimport { CCoupon } from \"coupon/CCoupon\";\r\nimport { CPointProduct } from \"pointMarket/CPointProduct\";\r\nimport { CYncProjects } from \"ync/CYncProjects\";\r\nimport { CFavorites } from 'customer/CFavorites';\r\nimport { CLottery } from 'pointMarket/lottery/CLottery';\r\nimport { CSignIn } from 'pointMarket/signIn/CSignIn';\r\nimport { Store, Product } from '../store';\r\nimport { WebUser } from 'CurrentUser';\r\nimport { GLOABLE } from 'global';\r\nimport { CSelectInvoiceContact, CSelectShippingContact } from 'customer/CSelectContact';\r\nimport { CAddress } from '../customer/CAddress';\r\nimport { CInvoiceInfo } from 'customer/CInvoiceInfo';\r\nimport { CQuickOrder } from '../order/CQuickOrder';\r\n\r\nexport class CApp extends CUqApp {\r\n    store: Store;\r\n    private cache: Map<number, Product>;\r\n    //cart: Cart;\r\n    currentSalesRegion: any;\r\n    currentLanguage: any;\r\n    currentUser: WebUser;\r\n\r\n    topKey: any;\r\n\r\n    cHome: CHome;\r\n    cCart: CCart;\r\n\r\n    cProduct: CProduct;\r\n    cOrder: COrder;\r\n    cQuickOrder: CQuickOrder;\r\n    cCoupon: CCoupon;\r\n    cProductCategory: CProductCategory;\r\n    cMember: CMember;\r\n    cMe: CMe;\r\n    cPointProduct: CPointProduct;\r\n    cFavorites: CFavorites;\r\n    cYncProjects: CYncProjects;\r\n    cLottery: CLottery;\r\n    cSignIn: CSignIn;\r\n    cSelectShippingContact: CSelectShippingContact;\r\n    cSelectInvoiceContact: CSelectInvoiceContact;\r\n    cAddress: CAddress;\r\n    cInvoiceInfo: CInvoiceInfo;\r\n\r\n\r\n    protected async beforeStart(): Promise<boolean> {\r\n        if (await super.beforeStart() === false) return false;\r\n\r\n        this.store = new Store(this.uqs);\r\n        this.currentSalesRegion = GLOABLE.SALESREGION_CN;\r\n        this.currentLanguage = GLOABLE.CHINESE;\r\n        this.store.currentSalesRegion = this.currentSalesRegion;\r\n        this.store.currentLanguage = this.currentLanguage;\r\n\r\n        this.cache = new Map();\r\n        /*\r\n        this.setUser();\r\n        this.cart = new Cart(this);\r\n        await this.cart.init();\r\n        await this.cart.buildItems();\r\n        */\r\n\r\n        this.cHome = this.newC(CHome);\r\n        this.cProductCategory = this.newC<CProductCategory>(CProductCategory);\r\n        this.cProduct = this.newC(CProduct);\r\n        this.cOrder = this.newC(COrder);\r\n        this.cQuickOrder = this.newC(CQuickOrder);\r\n        this.cCart = this.newC(CCart);\r\n        this.cCoupon = this.newC(CCoupon);\r\n        this.cMember = this.newC(CMember);\r\n        this.cMe = this.newC(CMe);\r\n        this.cPointProduct = this.newC(CPointProduct);\r\n        this.cFavorites = this.newC(CFavorites);\r\n        this.cYncProjects = this.newC(CYncProjects);\r\n        this.cLottery = this.newC(CLottery);\r\n        this.cSignIn = this.newC(CSignIn);\r\n        this.cSelectShippingContact = this.newC(CSelectShippingContact);\r\n        this.cSelectInvoiceContact = this.newC(CSelectInvoiceContact);\r\n        this.cAddress = this.newC(CAddress);\r\n        this.cInvoiceInfo = this.newC(CInvoiceInfo);\r\n        await this.store.initCart();/* 暂时性初始化购物车 调整后可删除 */\r\n        await this.cSelectShippingContact.getContactList();\r\n        await this.cHome.getSlideShow();\r\n        return true;\r\n    }\r\n\r\n    protected async internalStart(params: any) {\r\n        let promises: PromiseLike<void>[] = [];\r\n        promises.push(this.cProductCategory.start());\r\n        await Promise.all(promises);\r\n\r\n        let { location } = document;\r\n        let { search, pathname } = location;\r\n        if (search) {\r\n            let query: any = qs.parse(search.toLowerCase());\r\n            switch (query.type) {\r\n                case \"privacy\":\r\n                    this.showMain();\r\n                    this.cMe.openPrivacy();\r\n                    break;\r\n                case \"product\":\r\n                    this.showMain();\r\n                    let prouductBoxId = await this.uqs.product.ProductX.boxId(query.product).assure();\r\n                    await this.cProduct.showProductDetail(prouductBoxId);\r\n                    break;\r\n                case \"coupon\":\r\n                    this.showMain();\r\n                    if (query.coupon)\r\n                        await this.cCoupon.showSharedCoupon(query);\r\n                    break;\r\n                case \"credits\":\r\n                    this.showMain();\r\n                    if (query.credits) {\r\n                        await this.cCoupon.showSharedCredits(query);\r\n                    }\r\n                    break;\r\n                case \"vipcard\":\r\n                    this.showMain();\r\n                    if (query.vipcard)\r\n                        await this.cCoupon.showSharedVIPCard(query);\r\n                    break;\r\n                case \"login\":\r\n                    if (!this.isLogined)\r\n                        this.cMe.showLogin(async (user: User) => {\r\n                            window.location.href = window.location.origin;\r\n                        });\r\n                    break;\r\n                case \"loginout\":\r\n                    if (this.isLogined)\r\n                        this.cMe.showLoginOut(async () => {\r\n                            window.location.href = window.location.origin;\r\n                        });\r\n                    break;\r\n                case \"productlist\":\r\n                    this.cProduct.start(query.key);\r\n                    break;\r\n                case \"me\":\r\n                    this.cMe.openMyOrders('all');\r\n                    break;\r\n                default:\r\n                    this.showMain();\r\n                    break;\r\n            }\r\n        } else {\r\n            this.showMain();\r\n            //this.openVPage(Entrance);\r\n        }\r\n    }\r\n\r\n    protected async afterStart(): Promise<void> {\r\n        // await super.afterStart();\r\n        nav.onChangeLogin = (user: User) => this.onChangeLogin(user);\r\n        await this.onChangeLogin(this.user);\r\n        nav.resolveRoute();\r\n        this.topKey = nav.topKey();\r\n    }\r\n\r\n    renderCartLabel() {\r\n        return this.cCart.renderCartLabel();\r\n    }\r\n\r\n    /*\r\n    private setUser() {\r\n        this.currentUser = new WebUser(this.uqs); //this.cUqWebUser, this.cUqCustomer);\r\n        this.currentUser.setUser(this.user);\r\n    }\r\n    */\r\n\r\n    /**\r\n     * \r\n     * @returns \r\n     */\r\n    getPageWebNav(): PageWebNav {\r\n        let webNav = this.getWebNav();\r\n        if (webNav === undefined) return;\r\n        let { VNavHeader, VNavRawHeader, VNavFooter, VNavRawFooter, renderPageHeader } = webNav;\r\n        let navHeader: JSX.Element;\r\n        if (VNavHeader) navHeader = this.renderView(VNavHeader);\r\n        let navRawHeader: JSX.Element;\r\n        if (VNavRawHeader) navRawHeader = this.renderView(VNavRawHeader);\r\n        let navFooter: JSX.Element;\r\n        if (VNavFooter) navFooter = this.renderView(VNavFooter);\r\n        let navRawFooter: JSX.Element;\r\n        if (VNavRawFooter) navRawFooter = this.renderView(VNavRawFooter);\r\n        let ret: PageWebNav = {\r\n            navHeader,\r\n            navRawHeader,\r\n            navFooter,\r\n            navRawFooter,\r\n            renderPageHeader,\r\n        };\r\n        return ret;\r\n    }\r\n\r\n    showMain(initTabName?: string) {\r\n        this.openVPage(VMain, initTabName);\r\n    }\r\n\r\n\r\n    getProduct(id: number | BoxId): Product {\r\n        if (!id) return;\r\n        // region, language 改变的时候，直接清cache\r\n        /*\r\n        let {currentSalesRegion, currentLanguage} = this;\r\n        if (this.salesRegion !== currentSalesRegion\r\n            || this.language != currentLanguage) {\r\n            this.cache = new Map<number, Product>();\r\n            this.salesRegion = currentSalesRegion;\r\n            this.language = currentLanguage;\r\n        }\r\n        */\r\n        if (typeof id === 'object') id = id.id;\r\n        let product = this.cache.get(id);\r\n        if (!product) {\r\n            product = new Product(this.store, id);\r\n            this.cache.set(id, product);\r\n        }\r\n        return product;\r\n    }\r\n\r\n    /*\r\n        // onRoute在beforeStart中调用。this.on的作用是将url和function的关系（即route)配置在导航基础结构中供使用\r\n        // 导航的基本原理是：根据当前的location.href，从配置好的route中找到匹配项，执行对应的function。\r\n        protected onRoute() {\r\n            this.on(() => {\r\n                this.showMain();\r\n            });\r\n            this.on({\r\n                '/search/:key': (params: any, queryStr: any) => {\r\n                    this.cProduct.start(params.key);\r\n                },\r\n                '/product/:id': (params: any, queryStr: any) => {\r\n                    this.cProduct.showProductDetail(params.id);\r\n                },\r\n                '/cart': () => {\r\n                    this.cCart.start();\r\n                },\r\n                '/product-catalog/:id': (params: any, queryStr: any) => {\r\n                    this.cProduct.showProductDetail(params.id);\r\n                },\r\n                '/pointshop': () => {\r\n                    // 积分商城是否需要登录后才能查看？ \r\n                    this.cPointProduct.openMyPoint();\r\n                }\r\n            });\r\n        }\r\n    */\r\n\r\n    private navHome: NavPage = async (params: any) => {\r\n        await this.cHome.getSlideShow();\r\n\r\n        let promises: PromiseLike<void>[] = [];\r\n        promises.push(this.cProductCategory.start());\r\n        await Promise.all(promises);\r\n        this.showMain();\r\n    }\r\n\r\n    private navSearch: NavPage = async (params: any) => {\r\n        let { search } = document.location;\r\n        let query: any = { type: 1 };\r\n        if (search) query = qs.parse(search.toLowerCase());\r\n        let type = (query?.type && Number(query.type) === 2) ? query.type : 1;\r\n        let promises: PromiseLike<void>[] = [];\r\n        promises.push(this.cProductCategory.start());\r\n        await Promise.all(promises);\r\n        await this.store.buildCartItems();\r\n        this.cProduct.start({ key: params?.key, type: type });\r\n    }\r\n\r\n    private navProduct: NavPage = async (params: any) => {\r\n        await this.store.buildCartItems();\r\n        this.cProduct.showProductDetail(params?.id);\r\n    }\r\n\r\n    private navProductMSCU: NavPage = async (params: any) => {\r\n        // await this.assureLogin();\r\n        this.cProduct.openMaterial(params?.type, params?.id);\r\n    }\r\n\r\n    private navCart: NavPage = async (params: any) => {\r\n        await this.store.buildCartItems();\r\n        await this.cSelectShippingContact.getContactList();\r\n        await this.cCart.start();\r\n    }\r\n\r\n    private navProductCategory: NavPage = async (params: any) => {\r\n        let id = params.id;\r\n        if (id) id = Number(id);\r\n        await this.store.buildCartItems();\r\n        await this.cProductCategory.showCategoryPage(id);\r\n    }\r\n\r\n    private navProductCategoryHome: NavPage = async (params: any) => {\r\n        await this.cProductCategory.showCategoryHome();\r\n    }\r\n\r\n    private navPointShop: NavPage = async (params: any) => {\r\n        this.cPointProduct.openMyPoint();\r\n    }\r\n\r\n    private navAbout: NavPage = async (params: any) => {\r\n        this.cMe.openAbout();\r\n    }\r\n\r\n    private navMe: NavPage = async (params: any) => {\r\n        this.cMe.start();\r\n    }\r\n\r\n    private navContactList: NavPage = async (params: any) => {\r\n        await this.assureLogin();\r\n        this.cMe.openContactList();\r\n    }\r\n\r\n    private navInvoice: NavPage = async (params: any) => {\r\n        await this.assureLogin();\r\n        this.cMe.openInvoice();\r\n    }\r\n\r\n    private navMyOrders: NavPage = async (params: any) => {\r\n        await this.assureLogin();\r\n        this.cMe.openMyOrders('all');\r\n    }\r\n\r\n    private navOrderDetail: NavPage = async (params: any) => {\r\n        await this.assureLogin();\r\n        this.cOrder.openOrderDetail(Number(params.orderId));\r\n    }\r\n\r\n    private navCouponManage: NavPage = async (params: any) => {\r\n        await this.assureLogin();\r\n        this.cMe.openCouponManage();\r\n    }\r\n\r\n    private navFavorites: NavPage = async (params: any) => {\r\n        await this.assureLogin();\r\n        this.cMe.openFavorites();\r\n    }\r\n\r\n    private navPassword: NavPage = async (params: any) => {\r\n        await this.assureLogin();\r\n        await nav.changePassword();\r\n    }\r\n\r\n    private navMeInfo: NavPage = async (params: any) => {\r\n        this.cMe.openMeInfo();\r\n    }\r\n\r\n    private navQuickOrder: NavPage = async (params: any) => {\r\n        this.cQuickOrder.openQuickOrder();\r\n    }\r\n\r\n    private navPointProduct: NavPage = async (params: any) => {\r\n        this.cPointProduct.openPointProduct(params);\r\n    }\r\n\r\n    private navPointProductDetail: NavPage = async (params: any) => {\r\n        this.cPointProduct.openPointProductDetail(params);\r\n    }\r\n\r\n    private navPointProductOrder: NavPage = async (params: any) => {\r\n        this.cPointProduct.openExchangeHistory();\r\n    }\r\n\r\n    private navPointProductOrderDetail: NavPage = async (params: any) => {\r\n        let { id } = params;\r\n        this.cPointProduct.openOrderDetail(Number(id));\r\n    }\r\n\r\n    protected onNavRoutes() {\r\n        let routes: { [route: string]: NavPage } = {\r\n            '/app': this.navHome,\r\n            '/index': this.navHome,\r\n            '/home': this.navHome,\r\n            '/search/:key': this.navSearch,\r\n            '/search': this.navProductCategoryHome,\r\n            '/product/:id': this.navProduct,\r\n            '/product/mscu/:type/:id': this.navProductMSCU,\r\n            '/product/mscu/:type': this.navProductMSCU,\r\n            '/cart': this.navCart,\r\n            '/product-catalog/:id': this.navProductCategory,\r\n            '/product-catalog': this.navProductCategoryHome,\r\n            '/pointshop': this.navPointShop,\r\n            '/about': this.navAbout,\r\n            '/me': this.navMe,\r\n\r\n            '/contact': this.navContactList,\r\n            '/invoice': this.navInvoice,\r\n            '/myOrders': this.navMyOrders,\r\n            '/orderDetail/:orderId': this.navOrderDetail,\r\n            '/couponManage': this.navCouponManage,\r\n            '/favorites': this.navFavorites,\r\n            '/password': this.navPassword,\r\n            '/meInfo': this.navMeInfo,\r\n\r\n            '/quickOrder': this.navQuickOrder,\r\n\r\n\r\n            \"/pointshop/productLine/:id\": this.navPointProduct,\r\n            \"/pointshop/product/:id\": this.navPointProductDetail,\r\n            \"/pointshop/order\": this.navPointProductOrder,\r\n            \"/pointshop/orderDetail/:id\": this.navPointProductOrderDetail,\r\n        };\r\n        nav.onNavRoutes(routes);\r\n        this.setHomeRoute();\r\n    }\r\n\r\n    setHomeRoute() {\r\n        nav.onNavRoute(this.navHome);\r\n    }\r\n\r\n    async assureLogin(): Promise<void> {\r\n        if (this.isLogined) return;\r\n        return new Promise<void>((resolve, reject) => {\r\n            let loginCallback = async (user: User) => {\r\n                if (this.isWebNav) {\r\n                    window.history.back();\r\n                }\r\n                else {\r\n                    this.closePage(1);\r\n                }\r\n                resolve();\r\n            };\r\n            nav.showLogin(loginCallback, true);\r\n        });\r\n    }\r\n\r\n    protected async onChangeLogin(user: User) {\r\n        if (user) {\r\n            await this.initLogined(user);\r\n        }\r\n        else {\r\n            this.initNotLogined();\r\n        }\r\n        await this.initUQs();\r\n        await this.store.initCart();\r\n    }\r\n\r\n    private async initLogined(user: User) {\r\n        this.currentUser = new WebUser(this.uqs);\r\n        await this.currentUser.setUser(this.user);\r\n        this.store.currentUser = this.currentUser;\r\n        /*\r\n        // 如果currentUser，也必须重置\r\n        //if (this.currentUser === undefined)\r\n        this.currentUser = new WebUser(this.uqs);\r\n        await this.currentUser.setUser(user);\r\n        await this.cart.mergeFromRemote();\r\n        */\r\n    }\r\n\r\n    private initNotLogined() {\r\n        // 退出的话把购物车清掉？\r\n        this.currentUser = undefined;\r\n        /* 切换账户,cOrder内容未清空,快捷方式 直击实例赋值 */\r\n        this.cOrder = this.newC(COrder);\r\n        /*\r\n        localStorage.removeItem(LOCALCARTNAME);\r\n        this.cart.count.set(0);\r\n        this.cart.cartItems = [];\r\n        */\r\n    }\r\n\r\n    protected onDispose() {\r\n        this.store.dispose();\r\n    }\r\n}","/* eslint-disable */\r\nimport * as React from 'react';\r\nimport { VPage, Ax, FA, View, A, Image, nav, env } from 'tonva-react';\r\nimport { CApp } from './CApp';\r\nimport { observer } from 'mobx-react';\r\nimport * as qs from 'querystringify';\r\nimport { makeObservable, observable } from 'mobx';\r\n\r\ninterface PCategoryId {\r\n    id: number | string,\r\n    id_test: number | string\r\n};\r\n\r\nconst ProductCategorys: { [name: string]: PCategoryId } = {\r\n    \"有机化学\": { id: 47, id_test: 7 },\r\n    \"分析化学\": { id: 470, id_test: 430 },\r\n    \"生命科学\": { id: 1013, id_test: 986 },\r\n    \"材料科学\": { id: 1219, id_test: 1214 },\r\n    \"仪器耗材\": { id: 1545, id_test: \"#\" }\r\n};\r\n\r\nexport class VMainWebNav extends VPage<CApp> {\r\n    content() {\r\n        let { cHome } = this.controller;\r\n        return cHome.tabContent();\r\n    }\r\n}\r\n\r\nexport class NavHeaderView extends View<CApp> {\r\n    private searchKey: HTMLInputElement;\r\n    private searchType: HTMLSelectElement;\r\n    searchPhlder: string;\r\n\r\n    constructor(c: CApp) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            searchPhlder: observable\r\n        });\r\n    }\r\n\r\n    searchClick = () => {\r\n        let keyValue: string = this.searchKey?.value ? this.searchKey?.value : \"\";\r\n        let url = \"/search/\" + encodeURIComponent(keyValue);\r\n        if (this.searchKey?.value !== \"\") url += \"?type=\" + this.searchType.value;\r\n        this.navigate(url);\r\n    }\r\n\r\n    render() {\r\n        let vLogin = React.createElement(observer(() => {\r\n            let { user } = this.controller;\r\n            let v: any;\r\n            if (!user) {\r\n                v = <>\r\n                    <Ax className=\"\" href=\"/register\" target=\"_self\">注册</Ax> /&nbsp;\r\n                    <Ax className=\"\" href=\"/login\" target=\"_self\">登录</Ax>\r\n                </>;\r\n            }\r\n            else {\r\n                let { name, nick, icon } = user;\r\n                let Avatar: JSX.Element = !icon ? <FA name=\"user\" size=\"lg\" className=\"text-primary\" /> : <Image className=\"w-1c h-1c\" style={{ width: \"1rem\", height: \"1rem\" }} src={icon} />\r\n                v = <>\r\n                    <Ax className=\"mr-2 nav-item dropdown\" href=\"/me\" target=\"_self\">\r\n                        {Avatar}\r\n                        {/* <FA name=\"user\" size=\"lg\" className=\"text-primary\" /> */}\r\n                        <span className=\"dropdown-menu dropdown-menu-right px-2 m-0\">{nick || name}</span>\r\n                    </Ax>\r\n                    {/* <A className=\"mr-2\" href=\"/me\" target=\"_self\">{nick || name}</A> */}\r\n                    <Ax className=\"mr-2\" href=\"/logout\" target=\"_self\">退出</Ax>\r\n                </>;\r\n            }\r\n            return <div className=\"login\" style={{ fontSize: \"14px\" }}> {v}</div >;\r\n        }));\r\n\r\n        let vCartLabel = React.createElement(observer(() => {\r\n            let store = this?.controller?.store;\r\n            let count = store?.cartCount;\r\n            let vCount: any;\r\n            if (count) vCount = <u className=\"position-absolute d-flex align-items-center justify-content-center text-white text-right text-decoration-none ml-2\"\r\n                style={{ top: \"0.2rem\", fontSize: \"0.6rem\", backgroundColor: \"red\", minWidth: \"1rem\", padding: \"0 3px\", height: \"1.0rem\", borderRadius: '0.6rem' }}>{count}</u>;\r\n            //if (!count) count = undefined;\r\n            return <div className=\"cart mr-3 pl-1\">\r\n                <Ax className=\"text-primary position-relative\" href=\"/cart\">\r\n                    <span className=\"text-primary small\">\r\n                        <FA name=\"shopping-cart\" />\r\n                    </span>\r\n                    {vCount}\r\n                </Ax>\r\n            </div>\r\n        }));\r\n\r\n        let searchPhlderVal = (type: number) => {\r\n            if (type === 1) return \"品名、编号、CAS...\";\r\n            else return \"产品CAS、名称、组分CAS、名称....\";\r\n        };\r\n\r\n        let { search } = document.location;\r\n        let query: any = { type: 1 };\r\n        if (search) query = qs.parse(search.toLowerCase());\r\n        this.searchPhlder = searchPhlderVal(Number(query?.type || 1));\r\n\r\n        let searchTypeUI = React.createElement(observer(() => {\r\n            return <><form className=\"w-100\" onSubmit={(e: any) => { e.preventDefault(); this.searchClick(); }}>\r\n                <input type=\"text\" ref={v => this.searchKey = v} className=\"search-query form-control\" placeholder={this.searchPhlder} />\r\n            </form>\r\n                <select onChange={() => { this.searchPhlder = searchPhlderVal(Number(this.searchType?.value || 1)) }} onClick={(e: any) => { e.preventDefault(); return false }} ref={(v) => this.searchType = v} defaultValue={query?.type || 1}\r\n                    className=\"h-100 align-middle p-0 position-absolute input-group-sel\" style={{ border: \"1px solid lightgray\", zIndex: 99 }} >\r\n                    <option value=\"1\">试剂/耗材</option>\r\n                    <option value=\"2\">标准品</option>\r\n                </select>\r\n            </>\r\n        }));\r\n\r\n        return <header>\r\n            <div className=\"top-header\">\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-auto ml-auto d-flex align-items-center float-right\">\r\n                            <div className=\"phone\">\r\n                                <img src=\"/images/icon/Phone.svg\" /> 客服热线： 400-666-7788\r\n                            </div>\r\n                            <div className=\"area\">\r\n                                <a className=\"px-1\" data-toggle=\"modal\">\r\n                                    中国\r\n                                </a>\r\n                            </div>\r\n                            {vCartLabel}\r\n                            {vLogin}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n\r\n            <nav className=\"navbar navbar-expand-lg navbar-dark pad-tb20\">\r\n                <div className=\"container\">\r\n                    <a href=\"/\" className=\"header-logo\"><img src=\"/images/logo.svg\" alt=\"logo\" className=\"img-fluid\" /></a>\r\n                    <div className=\"justify-content-center search-wrap\">\r\n                        <ul className=\"d-none d-lg-flex top-list justify-content-center\">\r\n                            <li><a href=\"/subjectpost/18\" type=\"_blank\">特惠活动</a> </li>\r\n                            <li><a href=\"/myOrders\">订单查询</a> </li>\r\n                            <li><a href=\"/product/mscu/COA\" target=\"_blank\">COA</a> </li>\r\n                            <li><a href=\"/product/mscu/MSDS\" target=\"_blank\">SDS</a> </li>\r\n                            <li><a href=\"/quickOrder\" target=\"_blank\">批量订购</a></li>\r\n                        </ul>\r\n                        <div className=\"custom-search-input\">\r\n                            <div className=\"input-group col-md-12\">\r\n                                \r\n                                {searchTypeUI}\r\n                                <span className=\"input-group-btn\" onClick={(e: any) => { this.searchClick();return false }}>\r\n                                    <button className=\"btn\" type=\"button\">\r\n                                        <img src=\"/images/icon/magnifier.svg\" />\r\n                                    </button>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button className=\"navbar-toggle navbar-toggler navbar-toggler-right collapsed\" type=\"button\" data-toggle=\"collapse\"\r\n                        data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\"\r\n                        aria-label=\"Toggle navigation\">\r\n                        <span className=\"bar1\"></span>\r\n                        <span className=\"bar2\"></span>\r\n                        <span className=\"bar3\"></span>\r\n                    </button>\r\n                    <div className=\"collapse navbar-collapse\" id=\"navbarResponsive\">\r\n                        <ul className=\"navbar-nav ml-auto\">\r\n                            <li className=\"nav-item dropdown\">\r\n                                <a className=\"nav-link dropdown-toggle\" href=\"/product-catalog\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                                    aria-expanded=\"false\">\r\n                                    产品<b className=\"caret\"></b>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right m-0\" aria-labelledby=\"navbarDropdownPortfolio\">\r\n                                    {\r\n                                        Object.keys(ProductCategorys).map((name: string) => {\r\n                                            let id = env.testing === true ? ProductCategorys[name].id_test : ProductCategorys[name].id;\r\n                                            return <a key={name} className=\"dropdown-item text-center\" href={`/product-catalog/${id}`}>{name}</a>;\r\n                                        })\r\n                                    }\r\n                                </div>\r\n                            </li>\r\n\r\n                            {/* 服务菜单 二级菜单开发中\r\n                            <li className=\"nav-item dropdown\">\r\n                                <a className=\"nav-link dropdown-toggle\" href=\"#\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                                    aria-expanded=\"false\">\r\n                                    服务<b className=\"caret\"></b>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right m-0\" aria-labelledby=\"navbarDropdownBlog\">\r\n                                    <a className=\"dropdown-item text-center\" href=\"/myOrders\">订单查询</a>\r\n                                    <a className=\"dropdown-item text-center\" href=\"/pointshop\">积分查询</a>\r\n                                </div>\r\n                            </li> */}\r\n                            <li className=\"nav-item dropdown\">\r\n                                <a className=\"nav-link dropdown-toggle\" href=\"#\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                                    aria-expanded=\"false\">\r\n                                    会员<b className=\"caret\"></b>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right m-0\" aria-labelledby=\"navbarDropdownBlog\">\r\n                                    <a className=\"dropdown-item text-center\" href=\"/password\">修改密码</a>\r\n                                    <a className=\"dropdown-item text-center\" href=\"/meInfo\">账户信息</a>\r\n                                    <a className=\"dropdown-item text-center\" href=\"/contact\">地址管理</a>\r\n                                    <hr className=\"my-1\" />\r\n                                    <a className=\"dropdown-item text-center\" href=\"/favorites\">商品收藏</a>\r\n                                    <a className=\"dropdown-item text-center\" href=\"/pointshop\">积分管理</a>\r\n                                    <a className=\"dropdown-item text-center\" href=\"/couponManage\">卡券管理</a>\r\n                                    <hr className=\"my-1\" />\r\n                                    <a className=\"dropdown-item text-center\" href=\"/myOrders\">订单记录</a>\r\n                                    <a className=\"dropdown-item text-center\" href=\"/invoice\">发票管理</a>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n        </header>\r\n    }\r\n}\r\n\r\nexport class NavFooterView extends View<CApp> {\r\n    render() {\r\n        return <div className=\"d-none d-sm-block footer footer-m reset-z-footer-bg\" id=\"end-page-footer\">\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-3 col-6\">\r\n                        <img src=\"/images/icon/footer-logo.svg\" className=\"footer-logo\" />\r\n                        <p>服务科技与工业发展 造福人类</p>\r\n                        <img src=\"/images/qrcode.jpg\" style={{width:100}} className=\"mt-lg-50 qrcode\" />\r\n                        <p className=\"follow\">关注微信公众号</p>\r\n                        {/* <img src=\"/images/qrcode.jpg\" className=\"w-75 mt-lg-28 qrcode\" /> */}\r\n                    </div>\r\n                    <div className=\"col-lg-3 col-6\">\r\n                        <div className=\"footer-title\">百灵威集团</div>\r\n                        <ul>\r\n                            <li><a href=\"/ch/about\" target=\"_blank\">公司简介</a></li>\r\n                            <li><a href=\"/ch/promise\" target=\"_blank\">企业承诺</a></li>\r\n                            <li><a href=\"/ch/recommended-brand\" target=\"_blank\">合作品牌</a></li>\r\n                            <li><a href=\"/job\" target=\"_blank\">招贤纳士</a></li>\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"col-lg-3 col-6\">\r\n                        <div className=\"footer-title\">浏览</div>\r\n                        <ul>\r\n                            <li><a href=\"/information\" target=\"_blank\">资讯中心</a></li>\r\n                            <li><a href=\"/product/mscu/msds\" target=\"_blank\">安全说明书(SDS)</a></li>\r\n                            <li><a href=\"/product-catalog\">产品</a></li>\r\n                            <ul className=\"ml-3\">\r\n                                {\r\n                                    Object.keys(ProductCategorys).map((name: string) => {\r\n                                        let id = env.testing === true ? ProductCategorys[name].id_test : ProductCategorys[name].id;\r\n                                        return <li key={name}><a href={`/product-catalog/${id}`}>{name}</a></li>\r\n                                    })\r\n                                }\r\n                            </ul>\r\n                            <li><a href=\"/hazard-purchase\" className=\"text-danger\" target=\"_blank\">危险品购买提示</a></li>\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"col-lg-3 col-6\">\r\n                        <div className=\"footer-title\">\r\n                            <a href=\"/ch/contact\" target=\"_blank\">联系我们</a>\r\n                        </div>\r\n                        <div className=\"contact\">\r\n                            电话1 (QQ): 400 666 7788\r\n                        </div>\r\n                        <div className=\"contact\">\r\n                            电话2：(86) 10 59309000\r\n                        </div>\r\n                        <div className=\"contact\">\r\n                            传真：<br />+86 10 8284 9933\r\n                        </div>\r\n                        <div className=\"contact\">\r\n                            电子邮件：<br />\r\n                            <a href=\"mailto:jkinfo@jkchemical.com\">jkinfo@jkchemical.com</a><br />\r\n                            <a href=\"mailto:jkinfo@jk-sci.com\">jkinfo@jk-sci.com</a>\r\n                        </div>\r\n                        <div className=\"contact\">\r\n                            <a href=\"/ch/contact\" target=\"_blank\">更多联系方式</a>\r\n                        </div>\r\n                        <div className=\"footer-social\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"footer-bottom mt-2 py-1\">\r\n                <div className=\"container\">\r\n                    <div className=\"row text-center\">\r\n                        <div className=\"col-sm-5 pr-0\">\r\n                            严禁在未经同意的情况下使用本网站所有信息\r\n                            | <a href=\"/legal\" target=\"_blank\">法律声明</a>\r\n                            | <a href=\"/privacy-cn\" target=\"_blank\">隐私政策</a>\r\n                        </div>\r\n                        <div className=\"col-sm-7 pl-0\">\r\n                            <img className=\"align-top\" src=\"/images/gongan.png\" alt=\"\" />\r\n                            <a href=\"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502044888\" target=\"_blank\">京公网安备 11010502044888号</a>&nbsp;\r\n                            {/* 京公安网备11010502027473 */}\r\n                            | <a href=\"https://beian.miit.gov.cn\" target=\"_blank\">京ICP备09071033号-3</a>&nbsp;\r\n                            | <a href=\"/images/上海百灵威营业执照副本.pdf\" target=\"_blank\">上海工商</a>&nbsp;\r\n                            | <a href=\"/images/危险化学品经营许可证副本.jpg\" target=\"_blank\">危险化学品经营许可证</a>\r\n                            | <a href=\"/images/营业执照副本.jpg\" target=\"_blank\"> 营业执照(三证合一)</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Elements, nav, User, WebNav, env } from 'tonva-react';\r\nimport { CApp } from \"./CApp\";\r\nimport { NavHeaderView, NavFooterView } from './webNav';\r\nimport { VMainWebNav } from './webNav';\r\n\r\n\r\nexport class CWeb extends CApp {\r\n\r\n    //protected abstract async onPageStart(params:any):Promise<void>;\r\n\r\n    get webNav(): WebNav<any> {\r\n        return {\r\n            VNavRawHeader: NavHeaderView,\r\n            VNavRawFooter: NavFooterView,\r\n        }\r\n    }\r\n\r\n    protected beforeInit() {\r\n        nav.setIsWebNav();\r\n    }\r\n\r\n    protected afterInit() {\r\n        if (!env.isMobile) {\r\n            nav.pageWebNav = this.pageWebNav;\r\n        }\r\n    }\r\n\r\n    protected async afterStart(): Promise<void> {\r\n        await super.afterStart();\r\n\r\n        this.hookElements();\r\n        window.onfocus = () => {\r\n            nav.reloadUser();\r\n        }\r\n    }\r\n\r\n    private hookElements() {\r\n        let elements: Elements = {\r\n            login: this.renderLogin,\r\n            homeCart: this.renderHomeCart,\r\n        }\r\n        for (const p in elements) {\r\n            let elRoot = document.getElementById(p);\r\n            if (elRoot) {\r\n                elements[p](elRoot);\r\n            }\r\n        }\r\n    }\r\n\r\n    private renderLogin = (element: HTMLElement) => {\r\n        ReactDOM.render(this.cMe.renderLoginState(), element);\r\n    }\r\n\r\n    private renderHomeCart = (element: HTMLElement) => {\r\n        ReactDOM.render(this.cCart.renderCartLabel_web(), element);\r\n    }\r\n\r\n    protected async internalStart(params: any) {\r\n    }\r\n\r\n    showMain() {\r\n        this.openVPage(VMainWebNav);\r\n    }\r\n\r\n    setHomeRoute() {\r\n        nav.onNavRoute(async (params: any) => {\r\n            // window.location.href = process.env.REACT_APP_HOME_PATH;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param user \r\n     */\r\n    protected async onChangeLogin(user: User) {\r\n        await super.onChangeLogin(user);\r\n        if (user) {\r\n            // 登陆后\r\n\r\n        } else {\r\n            // 退出后\r\n        }\r\n    }\r\n}","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI, uqStringify } from \"tonva-react\";\r\nimport { TuidCarrier } from \"./JkDeliver\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCarrier):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderMain } from \"./JkDeliver\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tcustomer: {\r\n\t\t\"name\": \"customer\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Customer\"\r\n\t} as FieldItemId,\r\n\tcontact: {\r\n\t\t\"name\": \"contact\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Contact\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.no, fields.customer, fields.contact, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderMain\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: OrderMain):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderDetail } from \"./JkDeliver\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmain: {\r\n\t\t\"name\": \"main\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Main\"\r\n\t} as FieldItemId,\r\n\titem: {\r\n\t\t\"name\": \"item\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Item\"\r\n\t} as FieldItemId,\r\n\tproduct: {\r\n\t\t\"name\": \"product\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Product\"\r\n\t} as FieldItemId,\r\n\tquantity: {\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Quantity\"\r\n\t} as FieldItemNum,\r\n\tamount: {\r\n\t\t\"name\": \"amount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Amount\"\r\n\t} as FieldItemNum,\r\n\tprice: {\r\n\t\t\"name\": \"price\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Price\"\r\n\t} as FieldItemNum,\r\n\tlotNumber: {\r\n\t\t\"name\": \"lotNumber\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"LotNumber\"\r\n\t} as FieldItemString,\r\n\twarehouse: {\r\n\t\t\"name\": \"warehouse\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Warehouse\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.main, fields.item, fields.product, fields.quantity, fields.amount, fields.price, fields.lotNumber, fields.warehouse, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: OrderDetail):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { DeliverMain } from \"./JkDeliver\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tcustomer: {\r\n\t\t\"name\": \"customer\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Customer\"\r\n\t} as FieldItemId,\r\n\tcontact: {\r\n\t\t\"name\": \"contact\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Contact\"\r\n\t} as FieldItemId,\r\n\twarehouse: {\r\n\t\t\"name\": \"warehouse\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Warehouse\"\r\n\t} as FieldItemId,\r\n\t$create: {\r\n\t\t\"name\": \"$create\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"$create\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.no, fields.customer, fields.contact, fields.warehouse, fields.$create, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"DeliverMain\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: DeliverMain):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { DeliverDetail } from \"./JkDeliver\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmain: {\r\n\t\t\"name\": \"main\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Main\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.main, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"DeliverDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: DeliverDetail):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { DeliverMainEx } from \"./JkDeliver\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tdeliverId: {\r\n\t\t\"name\": \"deliverId\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"DeliverId\"\r\n\t} as FieldItemString,\r\n\twarehouseName: {\r\n\t\t\"name\": \"warehouseName\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"WarehouseName\"\r\n\t} as FieldItemString,\r\n\taddressString: {\r\n\t\t\"name\": \"addressString\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"AddressString\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.deliverId, fields.warehouseName, fields.addressString, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"DeliverMainEx\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: DeliverMainEx):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { DxDeliverMain } from \"./JkDeliver\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tstaff: {\r\n\t\t\"name\": \"staff\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Staff\"\r\n\t} as FieldItemId,\r\n\trows: {\r\n\t\t\"name\": \"rows\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Rows\"\r\n\t} as FieldItemInt,\r\n\tpickRows: {\r\n\t\t\"name\": \"pickRows\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"PickRows\"\r\n\t} as FieldItemInt,\r\n\tcarrier: {\r\n\t\t\"name\": \"carrier\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Carrier\"\r\n\t} as FieldItemId,\r\n\twaybillNumber: {\r\n\t\t\"name\": \"waybillNumber\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"WaybillNumber\"\r\n\t} as FieldItemString,\r\n\tdeliverTime: {\r\n\t\t\"name\": \"deliverTime\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"DeliverTime\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.staff, fields.rows, fields.pickRows, fields.carrier, fields.waybillNumber, fields.deliverTime, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"DxDeliverMain\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: DxDeliverMain):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { DxDeliverDetail } from \"./JkDeliver\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tdeliverDone: {\r\n\t\t\"name\": \"deliverDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"DeliverDone\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.deliverDone, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"DxDeliverDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: DxDeliverDetail):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCoupon } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCoupon):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidChemical } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidChemical):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidSalesRegion } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidSalesRegion):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCurrency } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCurrency):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidPackType } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidPackType):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidAddress } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidAddress):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCountry } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCountry):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidProvince } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidProvince):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCity } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCity):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCounty } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCounty):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidInvoiceType } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidInvoiceType):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCustomer } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCustomer):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidOrganization } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidOrganization):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidContact } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidContact):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidInvoiceInfo } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidInvoiceInfo):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidBrand } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidBrand):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidProductX } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidProductX):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidWarehouse } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidWarehouse):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidWebUser } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidWebUser):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidBuyerAccount } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidBuyerAccount):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCommonText } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCommonText):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidExpressLogistics } from \"./JkOrder\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidExpressLogistics):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderDetail } from \"./JkOrder\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmain: {\r\n\t\t\"name\": \"main\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Main\"\r\n\t} as FieldItemId,\r\n\twarehouse: {\r\n\t\t\"name\": \"warehouse\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Warehouse\"\r\n\t} as FieldItemId,\r\n\titem: {\r\n\t\t\"name\": \"item\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Item\"\r\n\t} as FieldItemId,\r\n\tproduct: {\r\n\t\t\"name\": \"product\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Product\"\r\n\t} as FieldItemId,\r\n\tquantity: {\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Quantity\"\r\n\t} as FieldItemNum,\r\n\tamount: {\r\n\t\t\"name\": \"amount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Amount\"\r\n\t} as FieldItemNum,\r\n\tprice: {\r\n\t\t\"name\": \"price\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Price\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.main, fields.warehouse, fields.item, fields.product, fields.quantity, fields.amount, fields.price, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: OrderDetail):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderMain } from \"./JkOrder\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tcustomer: {\r\n\t\t\"name\": \"customer\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Customer\"\r\n\t} as FieldItemId,\r\n\tcontact: {\r\n\t\t\"name\": \"contact\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Contact\"\r\n\t} as FieldItemId,\r\n\tsumQuanity: {\r\n\t\t\"name\": \"sumQuanity\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"SumQuanity\"\r\n\t} as FieldItemNum,\r\n\tsumAmount: {\r\n\t\t\"name\": \"sumAmount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"SumAmount\"\r\n\t} as FieldItemNum,\r\n\tcouponNo: {\r\n\t\t\"name\": \"couponNo\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"CouponNo\"\r\n\t} as FieldItemString,\r\n\tsheetId: {\r\n\t\t\"name\": \"sheetId\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"SheetId\"\r\n\t} as FieldItemId,\r\n\tshippingContact: {\r\n\t\t\"name\": \"shippingContact\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"ShippingContact\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.no, fields.customer, fields.contact, fields.sumQuanity, fields.sumAmount, fields.couponNo, fields.sheetId, fields.shippingContact, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderMain\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: OrderMain):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderMainEx } from \"./JkOrder\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tseller: {\r\n\t\t\"name\": \"seller\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Seller\"\r\n\t} as FieldItemString,\r\n\tsalesman: {\r\n\t\t\"name\": \"salesman\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Salesman\"\r\n\t} as FieldItemId,\r\n\tsalesRegion: {\r\n\t\t\"name\": \"salesRegion\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"SalesRegion\"\r\n\t} as FieldItemId,\r\n\tbuyerAccount: {\r\n\t\t\"name\": \"buyerAccount\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"BuyerAccount\"\r\n\t} as FieldItemId,\r\n\torganization: {\r\n\t\t\"name\": \"organization\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Organization\"\r\n\t} as FieldItemId,\r\n\tcurrency: {\r\n\t\t\"name\": \"currency\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Currency\"\r\n\t} as FieldItemId,\r\n\tpoNumber: {\r\n\t\t\"name\": \"poNumber\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"PoNumber\"\r\n\t} as FieldItemString,\r\n\tcarrier: {\r\n\t\t\"name\": \"carrier\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Carrier\"\r\n\t} as FieldItemId,\r\n\tcommentsAboutDeliver: {\r\n\t\t\"name\": \"commentsAboutDeliver\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"CommentsAboutDeliver\"\r\n\t} as FieldItemString,\r\n\tcreateDate: {\r\n\t\t\"name\": \"createDate\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"CreateDate\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.seller, fields.salesman, fields.salesRegion, fields.buyerAccount, fields.organization, fields.currency, fields.poNumber, fields.carrier, fields.commentsAboutDeliver, fields.createDate, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderMainEx\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: OrderMainEx):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderDetailEx } from \"./JkOrder\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\torderItemId: {\r\n\t\t\"name\": \"orderItemId\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"OrderItemId\"\r\n\t} as FieldItemString,\r\n\tendUser: {\r\n\t\t\"name\": \"endUser\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"EndUser\"\r\n\t} as FieldItemId,\r\n\tbrand: {\r\n\t\t\"name\": \"brand\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Brand\"\r\n\t} as FieldItemId,\r\n\tretail: {\r\n\t\t\"name\": \"retail\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Retail\"\r\n\t} as FieldItemNum,\r\n\tretailCurrency: {\r\n\t\t\"name\": \"retailCurrency\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"RetailCurrency\"\r\n\t} as FieldItemId,\r\n\tbottomPrice: {\r\n\t\t\"name\": \"bottomPrice\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"BottomPrice\"\r\n\t} as FieldItemNum,\r\n\tbottomPriceCurrency: {\r\n\t\t\"name\": \"bottomPriceCurrency\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"BottomPriceCurrency\"\r\n\t} as FieldItemId,\r\n\tcostPrice: {\r\n\t\t\"name\": \"costPrice\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"CostPrice\"\r\n\t} as FieldItemNum,\r\n\tcostPriceCurrency: {\r\n\t\t\"name\": \"costPriceCurrency\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"CostPriceCurrency\"\r\n\t} as FieldItemId,\r\n\tpoItemNumber: {\r\n\t\t\"name\": \"poItemNumber\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"PoItemNumber\"\r\n\t} as FieldItemString,\r\n\tmark: {\r\n\t\t\"name\": \"mark\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Mark\"\r\n\t} as FieldItemString,\r\n\ttradeType: {\r\n\t\t\"name\": \"tradeType\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"TradeType\"\r\n\t} as FieldItemString,\r\n\ttaxRate: {\r\n\t\t\"name\": \"taxRate\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"TaxRate\"\r\n\t} as FieldItemNum,\r\n\tpromotionId: {\r\n\t\t\"name\": \"promotionId\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"PromotionId\"\r\n\t} as FieldItemString,\r\n\tcreateDate: {\r\n\t\t\"name\": \"createDate\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"CreateDate\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.orderItemId, fields.endUser, fields.brand, fields.retail, fields.retailCurrency, fields.bottomPrice, fields.bottomPriceCurrency, fields.costPrice, fields.costPriceCurrency, fields.poItemNumber, fields.mark, fields.tradeType, fields.taxRate, fields.promotionId, fields.createDate, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderDetailEx\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: OrderDetailEx):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { DxOrderDetail } from \"./JkOrder\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tdeliver: {\r\n\t\t\"name\": \"deliver\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Deliver\"\r\n\t} as FieldItemNum,\r\n\tdeliverDone: {\r\n\t\t\"name\": \"deliverDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"DeliverDone\"\r\n\t} as FieldItemNum,\r\n\tdeliverTime: {\r\n\t\t\"name\": \"deliverTime\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"DeliverTime\"\r\n\t} as undefined,\r\n\tdeliverReturn: {\r\n\t\t\"name\": \"deliverReturn\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"DeliverReturn\"\r\n\t} as FieldItemNum,\r\n\tdeliverReturnDone: {\r\n\t\t\"name\": \"deliverReturnDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"DeliverReturnDone\"\r\n\t} as FieldItemNum,\r\n\treceive: {\r\n\t\t\"name\": \"receive\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Receive\"\r\n\t} as FieldItemNum,\r\n\treceiveDone: {\r\n\t\t\"name\": \"receiveDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"ReceiveDone\"\r\n\t} as FieldItemNum,\r\n\treceiveTime: {\r\n\t\t\"name\": \"receiveTime\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"ReceiveTime\"\r\n\t} as undefined,\r\n\treceiveReturn: {\r\n\t\t\"name\": \"receiveReturn\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"ReceiveReturn\"\r\n\t} as FieldItemNum,\r\n\treceiveReturnDone: {\r\n\t\t\"name\": \"receiveReturnDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"ReceiveReturnDone\"\r\n\t} as FieldItemNum,\r\n\tinvoice: {\r\n\t\t\"name\": \"invoice\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Invoice\"\r\n\t} as FieldItemNum,\r\n\tinvoiceDone: {\r\n\t\t\"name\": \"invoiceDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"InvoiceDone\"\r\n\t} as FieldItemNum,\r\n\tinvoiceTime: {\r\n\t\t\"name\": \"invoiceTime\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"InvoiceTime\"\r\n\t} as undefined,\r\n\tinvoiceReturn: {\r\n\t\t\"name\": \"invoiceReturn\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"InvoiceReturn\"\r\n\t} as FieldItemNum,\r\n\tinvoiceReturnDone: {\r\n\t\t\"name\": \"invoiceReturnDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"InvoiceReturnDone\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.deliver, fields.deliverDone, fields.deliverTime, fields.deliverReturn, fields.deliverReturnDone, fields.receive, fields.receiveDone, fields.receiveTime, fields.receiveReturn, fields.receiveReturnDone, fields.invoice, fields.invoiceDone, fields.invoiceTime, fields.invoiceReturn, fields.invoiceReturnDone, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"DxOrderDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: DxOrderDetail):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { DxOrderMainState } from \"./JkOrder\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tstate: {\r\n\t\t\"name\": \"state\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"State\"\r\n\t} as undefined,\r\n\tcreateDate: {\r\n\t\t\"name\": \"createDate\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"CreateDate\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.state, fields.createDate, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"DxOrderMainState\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: DxOrderMainState):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { IxOrderDetailFee } from \"./JkOrder\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tix: {\r\n\t\t\"name\": \"ix\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Ix\"\r\n\t} as FieldItemId,\r\n\txi: {\r\n\t\t\"name\": \"xi\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Xi\"\r\n\t} as FieldItemId,\r\n\tfee: {\r\n\t\t\"name\": \"fee\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Fee\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.xi, fields.fee, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"IxOrderDetailFee\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: IxOrderDetailFee):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { IxOrderMainFee } from \"./JkOrder\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tix: {\r\n\t\t\"name\": \"ix\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Ix\"\r\n\t} as FieldItemId,\r\n\txi: {\r\n\t\t\"name\": \"xi\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Xi\"\r\n\t} as FieldItemId,\r\n\tfee: {\r\n\t\t\"name\": \"fee\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Fee\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.xi, fields.fee, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"IxOrderMainFee\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: IxOrderMainFee):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { IxOrderDetailCoupon } from \"./JkOrder\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tix: {\r\n\t\t\"name\": \"ix\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Ix\"\r\n\t} as FieldItemId,\r\n\txi: {\r\n\t\t\"name\": \"xi\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Xi\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.xi, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"IxOrderDetailCoupon\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: IxOrderDetailCoupon):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { IxOrderMainCustomerCoupon } from \"./JkOrder\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tixx: {\r\n\t\t\"name\": \"ixx\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Ixx\"\r\n\t} as FieldItemId,\r\n\tix: {\r\n\t\t\"name\": \"ix\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Ix\"\r\n\t} as FieldItemId,\r\n\txi: {\r\n\t\t\"name\": \"xi\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Xi\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.ixx, fields.xi, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"IxOrderMainCustomerCoupon\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: IxOrderMainCustomerCoupon):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","//=== UqApp builder created on Thu Sep 09 2021 08:37:43 GMT+0800 (中国标准时间) ===//\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { IDXValue, Uq, UqTuid, UqAction, UqSheet, UqBook, UqQuery, UqMap, UqHistory, UqPending, UqID, UqIDX, UqIX } from \"tonva-react\";\r\n\r\n\r\n//===============================\r\n//======= UQ 百灵威系统工程部/order ========\r\n//===============================\r\n\r\nexport enum EnumFeeType {\r\n\tpacking = 11,\r\n\trefrigeration = 12,\r\n\tfreezing = 13,\r\n\tproxyFreight = 14\r\n}\r\n\r\nexport enum EnumOrderState {\r\n\tmatching = 11,\r\n\tdelivering = 12,\r\n\tdelivered = 13,\r\n\tcompleted = 14,\r\n\tcanceled = 15,\r\n\tpendingPayment = 21,\r\n\tpaid = 22\r\n}\r\n\r\nexport interface Tuid$user {\r\n\tid?: number;\r\n\tname: string;\r\n\tnick: string;\r\n\ticon: string;\r\n\tassigned: string;\r\n\tpoke: number;\r\n}\r\n\r\nexport interface Tuid$sheet {\r\n\tid?: number;\r\n\tno: string;\r\n\tuser: number;\r\n\tdate: any;\r\n\tsheet: number;\r\n\tversion: number;\r\n\tflow: number;\r\n\tapp: number;\r\n\tstate: number;\r\n\tdiscription: string;\r\n\tdata: string;\r\n\tprocessing: number;\r\n}\r\n\r\nexport interface TuidCoupon {\r\n\tid?: number;\r\n\tcode: string;\r\n\tuser: number;\r\n\tcustomer: number;\r\n\tdiscount: number;\r\n\tpreferential: number;\r\n\tvaliditydate: any;\r\n\tisValid: number;\r\n}\r\n\r\nexport interface TuidChemical {\r\n\tid?: number;\r\n\tCAS: string;\r\n}\r\n\r\nexport interface TuidSalesRegion {\r\n\tid?: number;\r\n\tname: string;\r\n\tcurrency: number;\r\n\tno: string;\r\n}\r\n\r\nexport interface TuidCurrency {\r\n\tid?: number;\r\n\tname: string;\r\n\tsuffix: string;\r\n}\r\n\r\nexport interface TuidPackType {\r\n\tid?: number;\r\n\tname: string;\r\n\tdescription: string;\r\n}\r\n\r\nexport interface TuidAddress {\r\n\tid?: number;\r\n\tcountry: number;\r\n\tprovince: number;\r\n\tcity: number;\r\n\tcounty: number;\r\n\tdescription: string;\r\n}\r\n\r\nexport interface TuidCountry {\r\n\tid?: number;\r\n\tcode: string;\r\n\tenglishName: string;\r\n\tchineseName: string;\r\n\tno: string;\r\n}\r\n\r\nexport interface TuidProvince {\r\n\tid?: number;\r\n\tcountry: number;\r\n\tenglishName: string;\r\n\tchineseName: string;\r\n\tno: string;\r\n}\r\n\r\nexport interface TuidCity {\r\n\tid?: number;\r\n\tprovince: number;\r\n\tenglishName: string;\r\n\tchineseName: string;\r\n\tno: string;\r\n}\r\n\r\nexport interface TuidCounty {\r\n\tid?: number;\r\n\tcity: number;\r\n\tenglishName: string;\r\n\tchineseName: string;\r\n\tno: string;\r\n}\r\n\r\nexport interface TuidInvoiceType {\r\n\tid?: number;\r\n\tdescription: string;\r\n}\r\n\r\nexport interface TuidCustomer {\r\n\tid?: number;\r\n\tname: string;\r\n}\r\n\r\nexport interface TuidOrganization {\r\n\tid?: number;\r\n\tname: string;\r\n}\r\n\r\nexport interface TuidContact {\r\n\tid?: number;\r\n\tname: string;\r\n\torganizationName: string;\r\n\tmobile: string;\r\n\ttelephone: string;\r\n\temail: string;\r\n\taddress: number;\r\n\taddressString: string;\r\n}\r\n\r\nexport interface TuidInvoiceInfo {\r\n\tid?: number;\r\n\ttitle: string;\r\n\ttaxNo: string;\r\n\taddress: string;\r\n\ttelephone: string;\r\n\tbank: string;\r\n\taccountNo: string;\r\n}\r\n\r\nexport interface TuidBrand {\r\n\tid?: number;\r\n\tname: string;\r\n\tno: string;\r\n}\r\n\r\nexport interface TuidProductX {\r\n\tid?: number;\r\n\tbrand: number;\r\n}\r\n\r\nexport interface TuidWarehouse {\r\n\tid?: number;\r\n\tname: string;\r\n}\r\n\r\nexport interface TuidWebUser {\r\n\tid?: number;\r\n\tname: string;\r\n\tno: number;\r\n\tpassword: string;\r\n\ticon: string;\r\n}\r\n\r\nexport interface TuidBuyerAccount {\r\n\tid?: number;\r\n}\r\n\r\nexport interface TuidCommonText {\r\n\tid?: number;\r\n\tcontent: string;\r\n}\r\n\r\nexport interface TuidExpressLogistics {\r\n\tid?: number;\r\n}\r\n\r\nexport interface ParamSetCart {\r\n\tproduct: number;\r\n\tpack: number;\r\n\tprice: number;\r\n\tcurrency: number;\r\n\tquantity: number;\r\n}\r\nexport interface ResultSetCart {\r\n}\r\n\r\nexport interface ParamRemoveFromCart {\r\n\trows: {\r\n\t\tproduct: number;\r\n\t\tpack: number;\r\n\t}[];\r\n\r\n}\r\nexport interface ResultRemoveFromCart {\r\n}\r\n\r\nexport interface ParamMergeCart {\r\n\trows: {\r\n\t\tproduct: number;\r\n\t\tpack: number;\r\n\t\tquantity: number;\r\n\t}[];\r\n\r\n}\r\nexport interface ResultMergeCart {\r\n}\r\n\r\nexport interface SheetOrder {\r\n\twebUser: number;\r\n\torganization: number;\r\n\tcustomer: number;\r\n\tshippingContact: number;\r\n\tinvoiceContact: number;\r\n\tinvoiceType: number;\r\n\tinvoiceInfo: number;\r\n\tamount: number;\r\n\tcurrency: number;\r\n\tfreightFee: number;\r\n\tfreightFeeRemitted: number;\r\n\tcoupon: number;\r\n\tcouponOffsetAmount: number;\r\n\tcouponRemitted: number;\r\n\tpoint: number;\r\n\tcomments: string;\r\n\tsalesRegion: number;\r\n\torderItems: {\r\n\t\tproduct: number;\r\n\t\tpack: number;\r\n\t\tprice: number;\r\n\t\tquantity: number;\r\n\t\tsubAmount: number;\r\n\t\trefrigerationFee: number;\r\n\t\tfreezingFee: number;\r\n\t\tpackingFee: number;\r\n\t\tproxyFreightFee: number;\r\n\t}[];\r\n}\r\nexport interface VerifyOrder {\r\n}\r\n\r\nexport interface ParamGetCart {\r\n}\r\nexport interface ReturnGetCart$page {\r\n\tdate: any;\r\n\tproduct: number;\r\n\tpack: number;\r\n\tprice: number;\r\n\tcurrency: number;\r\n\tquantity: number;\r\n}\r\nexport interface ResultGetCart {\r\n\t$page: ReturnGetCart$page[];\r\n}\r\n\r\nexport interface Param$poked {\r\n}\r\nexport interface Return$pokedRet {\r\n\tpoke: number;\r\n}\r\nexport interface Result$poked {\r\n\tret: Return$pokedRet[];\r\n}\r\n\r\nexport interface ParamCart {\r\n\tuser: number;\r\n\tproduct: number;\r\n}\r\nexport interface ReturnCart$page {\r\n\tpack: number;\r\n\tprice: number;\r\n\tcurrency: number;\r\n\tquantity: number;\r\n\tdate: any;\r\n}\r\nexport interface ResultCart {\r\n\t$page: ReturnCart$page[];\r\n}\r\n\r\nexport interface ParamWebUserAccount {\r\n\twebUser: number;\r\n}\r\nexport interface ReturnWebUserAccount$page {\r\n\tcurrency: number;\r\n\t总订单金额: number;\r\n\t总到货金额: number;\r\n\t总开票金额: number;\r\n\t总付款金额: number;\r\n}\r\nexport interface ResultWebUserAccount {\r\n\t$page: ReturnWebUserAccount$page[];\r\n}\r\n\r\nexport interface ParamOrderState {\r\n}\r\nexport interface ReturnOrderState$page {\r\n\tOrder: number;\r\n\t总金额: number;\r\n\t已付金额: number;\r\n\t发货完成: number;\r\n}\r\nexport interface ResultOrderState {\r\n\t$page: ReturnOrderState$page[];\r\n}\r\n\r\nexport interface ParamOrderHistory {\r\n\twebUser: number;\r\n\tproduct: number;\r\n\tpack: number;\r\n\tprice: number;\r\n\tquantity: number;\r\n\tamount: number;\r\n\trefrigerationFee: number;\r\n\tfreezingFee: number;\r\n\tpackingFee: number;\r\n\tproxyFreightFee: number;\r\n\tcurrency: number;\r\n\tsalesRegion: number;\r\n}\r\nexport interface ReturnOrderHistory$page {\r\n\tdate: any;\r\n\twebUser: number;\r\n\tproduct: number;\r\n\tpack: number;\r\n\tprice: number;\r\n\tquantity: number;\r\n\tamount: number;\r\n\trefrigerationFee: number;\r\n\tfreezingFee: number;\r\n\tpackingFee: number;\r\n\tproxyFreightFee: number;\r\n\tcurrency: number;\r\n\tsalesRegion: number;\r\n\ttype: number;\r\n\tsheet: number;\r\n\trow: number;\r\n\tuser: number;\r\n}\r\nexport interface ResultOrderHistory {\r\n\t$page: ReturnOrderHistory$page[];\r\n}\r\n\r\nexport interface OrderDetail {\r\n\tid?: number;\r\n\tmain?: number;\r\n\twarehouse: number;\r\n\titem: number;\r\n\tproduct: number;\r\n\tquantity: number;\r\n\tprice: number;\r\n\tlotNumber: string;\r\n\tcreateDate: any;\r\n}\r\n\r\nexport interface OrderMain {\r\n\tid?: number;\r\n\tno?: string;\r\n\twebUser: number;\r\n\tcustomer: number;\r\n\tbuyerAccount: number;\r\n\tshippingContact: number;\r\n\tinvoiceContact: number;\r\n\tinvoiceType: number;\r\n\tinvoiceInfo: number;\r\n\tsumAmount: number;\r\n\tcurrency: number;\r\n\tcouponNo: string;\r\n\tsheetId: number;\r\n\tcreateDate: any;\r\n}\r\n\r\nexport interface OrderMainEx {\r\n\tid?: number;\r\n\tseller: string;\r\n\tsalesman: number;\r\n\tsalesRegion: number;\r\n\tbuyerAccount: number;\r\n\torganization: number;\r\n\tcurrency: number;\r\n\tpoNumber: string;\r\n\tcarrier: number;\r\n\tcommentsAboutDeliver: string;\r\n\tcreateDate: any;\r\n}\r\n\r\nexport interface OrderDetailEx {\r\n\tid?: number;\r\n\torderItemId: string;\r\n\tendUser: number;\r\n\tbrand: number;\r\n\tretail: number;\r\n\tretailCurrency: number;\r\n\tbottomPrice: number;\r\n\tbottomPriceCurrency: number;\r\n\tcostPrice: number;\r\n\tcostPriceCurrency: number;\r\n\tpoItemNumber: string;\r\n\tmark: string;\r\n\ttradeType: string;\r\n\ttaxRate: number;\r\n\tpromotionId: string;\r\n\tcreateDate: any;\r\n}\r\n\r\nexport interface DxOrderDetail {\r\n\tid: number;\r\n\tdeliver?: number;\r\n\tdeliverDone?: number;\r\n\tdeliverTime?: any;\r\n\treceive?: number;\r\n\treceiveDone?: number;\r\n\treceiveTime?: any;\r\n\tinvoice?: number;\r\n\tinvoiceDone?: number;\r\n\tinvoiceTime?: any;\r\n\t$act?: number;\r\n}\r\n\r\nexport interface DxOrderMainState {\r\n\tid: number;\r\n\tstate?: any;\r\n\tcreateDate?: any;\r\n\t$act?: number;\r\n}\r\n\r\nexport interface ActParamDxOrderDetail {\r\n\tid: number|IDXValue;\r\n\tdeliver?: number|IDXValue;\r\n\tdeliverDone?: number|IDXValue;\r\n\tdeliverTime?: any|IDXValue;\r\n\treceive?: number|IDXValue;\r\n\treceiveDone?: number|IDXValue;\r\n\treceiveTime?: any|IDXValue;\r\n\tinvoice?: number|IDXValue;\r\n\tinvoiceDone?: number|IDXValue;\r\n\tinvoiceTime?: any|IDXValue;\r\n\t$act?: number;\r\n}\r\n\r\nexport interface ActParamDxOrderMainState {\r\n\tid: number|IDXValue;\r\n\tstate?: any|IDXValue;\r\n\tcreateDate?: any|IDXValue;\r\n\t$act?: number;\r\n}\r\n\r\nexport interface IxOrderDetailFee {\r\n\tix: number;\r\n\txi: number;\r\n\tfee: number;\r\n}\r\n\r\nexport interface IxOrderMainFee {\r\n\tix: number;\r\n\txi: number;\r\n\tfee: number;\r\n}\r\n\r\nexport interface IxOrderDetailCoupon {\r\n\tix: number;\r\n\txi: number;\r\n}\r\n\r\nexport interface IxOrderMainCustomerCoupon {\r\n\tixx: number;\r\n\tix: number;\r\n\txi: number;\r\n}\r\n\r\nexport interface ParamActs {\r\n\torderDetail?: OrderDetail[];\r\n\torderMain?: OrderMain[];\r\n\torderMainEx?: OrderMainEx[];\r\n\torderDetailEx?: OrderDetailEx[];\r\n\tdxOrderDetail?: ActParamDxOrderDetail[];\r\n\tdxOrderMainState?: ActParamDxOrderMainState[];\r\n\tixOrderDetailFee?: IxOrderDetailFee[];\r\n\tixOrderMainFee?: IxOrderMainFee[];\r\n\tixOrderDetailCoupon?: IxOrderDetailCoupon[];\r\n\tixOrderMainCustomerCoupon?: IxOrderMainCustomerCoupon[];\r\n}\r\n\r\n\r\nexport interface UqExt extends Uq {\r\n\tActs(param:ParamActs): Promise<any>;\r\n\r\n\t$user: UqTuid<Tuid$user>;\r\n\t$sheet: UqTuid<Tuid$sheet>;\r\n\tCoupon: UqTuid<TuidCoupon>;\r\n\tChemical: UqTuid<TuidChemical>;\r\n\tSalesRegion: UqTuid<TuidSalesRegion>;\r\n\tCurrency: UqTuid<TuidCurrency>;\r\n\tPackType: UqTuid<TuidPackType>;\r\n\tAddress: UqTuid<TuidAddress>;\r\n\tCountry: UqTuid<TuidCountry>;\r\n\tProvince: UqTuid<TuidProvince>;\r\n\tCity: UqTuid<TuidCity>;\r\n\tCounty: UqTuid<TuidCounty>;\r\n\tInvoiceType: UqTuid<TuidInvoiceType>;\r\n\tCustomer: UqTuid<TuidCustomer>;\r\n\tOrganization: UqTuid<TuidOrganization>;\r\n\tContact: UqTuid<TuidContact>;\r\n\tInvoiceInfo: UqTuid<TuidInvoiceInfo>;\r\n\tBrand: UqTuid<TuidBrand>;\r\n\tProductX: UqTuid<TuidProductX>;\r\n\tWarehouse: UqTuid<TuidWarehouse>;\r\n\tWebUser: UqTuid<TuidWebUser>;\r\n\tBuyerAccount: UqTuid<TuidBuyerAccount>;\r\n\tCommonText: UqTuid<TuidCommonText>;\r\n\tExpressLogistics: UqTuid<TuidExpressLogistics>;\r\n\tSetCart: UqAction<ParamSetCart, ResultSetCart>;\r\n\tRemoveFromCart: UqAction<ParamRemoveFromCart, ResultRemoveFromCart>;\r\n\tMergeCart: UqAction<ParamMergeCart, ResultMergeCart>;\r\n\tOrder: UqSheet<SheetOrder, VerifyOrder>;\r\n\tCart: UqBook<ParamCart, ResultCart>;\r\n\tWebUserAccount: UqBook<ParamWebUserAccount, ResultWebUserAccount>;\r\n\tOrderState: UqBook<ParamOrderState, ResultOrderState>;\r\n\tGetCart: UqQuery<ParamGetCart, ResultGetCart>;\r\n\t$poked: UqQuery<Param$poked, Result$poked>;\r\n\tSalesRegionWarehouse: UqMap;\r\n\tOrderBuyerAccount: UqMap;\r\n\tOrderTransportation: UqMap;\r\n\tOrderHistory: UqHistory<ParamOrderHistory, ResultOrderHistory>;\r\n\tOrderReceivable: UqPending<any, any>;\r\n\tOrderDetail: UqID<any>;\r\n\tOrderMain: UqID<any>;\r\n\tOrderMainEx: UqID<any>;\r\n\tOrderDetailEx: UqID<any>;\r\n\tDxOrderDetail: UqIDX<any>;\r\n\tDxOrderMainState: UqIDX<any>;\r\n\tIxOrderDetailFee: UqIX<any>;\r\n\tIxOrderMainFee: UqIX<any>;\r\n\tIxOrderDetailCoupon: UqIX<any>;\r\n\tIxOrderMainCustomerCoupon: UqIX<any>;\r\n}\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI, uqStringify } from \"tonva-react\";\r\nimport { TuidOrganization } from \"./JkCollectPayment\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidOrganization):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI, uqStringify } from \"tonva-react\";\r\nimport { TuidCustomer } from \"./JkCollectPayment\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCustomer):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI, uqStringify } from \"tonva-react\";\r\nimport { TuidCurrency } from \"./JkCollectPayment\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCurrency):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderDetail } from \"./JkCollectPayment\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmain: {\r\n\t\t\"name\": \"main\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Main\"\r\n\t} as FieldItemId,\r\n\titem: {\r\n\t\t\"name\": \"item\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Item\"\r\n\t} as FieldItemId,\r\n\tproduct: {\r\n\t\t\"name\": \"product\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Product\"\r\n\t} as FieldItemId,\r\n\tquantity: {\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Quantity\"\r\n\t} as FieldItemNum,\r\n\tamount: {\r\n\t\t\"name\": \"amount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Amount\"\r\n\t} as FieldItemNum,\r\n\tprice: {\r\n\t\t\"name\": \"price\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Price\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.main, fields.item, fields.product, fields.quantity, fields.amount, fields.price, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: OrderDetail):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderMain } from \"./JkCollectPayment\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tcustomer: {\r\n\t\t\"name\": \"customer\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Customer\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.no, fields.customer, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderMain\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: OrderMain):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { ReceiveDetail } from \"./JkCollectPayment\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmain: {\r\n\t\t\"name\": \"main\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Main\"\r\n\t} as FieldItemId,\r\n\tamount: {\r\n\t\t\"name\": \"amount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Amount\"\r\n\t} as FieldItemNum,\r\n\tcreateDate: {\r\n\t\t\"name\": \"createDate\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"CreateDate\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.main, fields.amount, fields.createDate, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"ReceiveDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: ReceiveDetail):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { ReceiveMain } from \"./JkCollectPayment\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\torganization: {\r\n\t\t\"name\": \"organization\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Organization\"\r\n\t} as FieldItemId,\r\n\tcustomer: {\r\n\t\t\"name\": \"customer\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Customer\"\r\n\t} as FieldItemId,\r\n\tcurrency: {\r\n\t\t\"name\": \"currency\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Currency\"\r\n\t} as FieldItemId,\r\n\tdirection: {\r\n\t\t\"name\": \"direction\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Direction\"\r\n\t} as undefined,\r\n\tisValid: {\r\n\t\t\"name\": \"isValid\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"IsValid\"\r\n\t} as undefined,\r\n\tcomments: {\r\n\t\t\"name\": \"comments\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Comments\"\r\n\t} as FieldItemString,\r\n\treceiveWay: {\r\n\t\t\"name\": \"receiveWay\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"ReceiveWay\"\r\n\t} as undefined,\r\n\treceiveNr: {\r\n\t\t\"name\": \"receiveNr\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"ReceiveNr\"\r\n\t} as FieldItemString,\r\n\treceiveDate: {\r\n\t\t\"name\": \"receiveDate\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"ReceiveDate\"\r\n\t} as undefined,\r\n\treceiver: {\r\n\t\t\"name\": \"receiver\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Receiver\"\r\n\t} as FieldItemId,\r\n\tcreateDate: {\r\n\t\t\"name\": \"createDate\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"CreateDate\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.organization, fields.customer, fields.currency, fields.direction, fields.isValid, fields.comments, fields.receiveWay, fields.receiveNr, fields.receiveDate, fields.receiver, fields.createDate, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"ReceiveMain\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: ReceiveMain):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { DxOrderDetail } from \"./JkCollectPayment\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\treceive: {\r\n\t\t\"name\": \"receive\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Receive\"\r\n\t} as FieldItemNum,\r\n\treceiveDone: {\r\n\t\t\"name\": \"receiveDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"ReceiveDone\"\r\n\t} as FieldItemNum,\r\n\treceiveReturn: {\r\n\t\t\"name\": \"receiveReturn\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"ReceiveReturn\"\r\n\t} as FieldItemNum,\r\n\treceiveReturnDone: {\r\n\t\t\"name\": \"receiveReturnDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"ReceiveReturnDone\"\r\n\t} as FieldItemNum,\r\n\tinvoice: {\r\n\t\t\"name\": \"invoice\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Invoice\"\r\n\t} as FieldItemNum,\r\n\tinvoiceDone: {\r\n\t\t\"name\": \"invoiceDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"InvoiceDone\"\r\n\t} as FieldItemNum,\r\n\tinvoiceReturn: {\r\n\t\t\"name\": \"invoiceReturn\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"InvoiceReturn\"\r\n\t} as FieldItemNum,\r\n\tinvoiceReturnDone: {\r\n\t\t\"name\": \"invoiceReturnDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"InvoiceReturnDone\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.receive, fields.receiveDone, fields.receiveReturn, fields.receiveReturnDone, fields.invoice, fields.invoiceDone, fields.invoiceReturn, fields.invoiceReturnDone, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"DxOrderDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: DxOrderDetail):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { DxOrderDetailReturn } from \"./JkCollectPayment\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\treceiveReturn: {\r\n\t\t\"name\": \"receiveReturn\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"ReceiveReturn\"\r\n\t} as FieldItemNum,\r\n\treceiveReturnDone: {\r\n\t\t\"name\": \"receiveReturnDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"ReceiveReturnDone\"\r\n\t} as FieldItemNum,\r\n\tinvoiceReturn: {\r\n\t\t\"name\": \"invoiceReturn\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"InvoiceReturn\"\r\n\t} as FieldItemNum,\r\n\tinvoiceReturnDone: {\r\n\t\t\"name\": \"invoiceReturnDone\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"InvoiceReturnDone\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.receiveReturn, fields.receiveReturnDone, fields.invoiceReturn, fields.invoiceReturnDone, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"DxOrderDetailReturn\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: DxOrderDetailReturn):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import { Res, setRes, TFunc, UI, uqStringify } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { DxReceiveMain } from \"./JkCollectPayment\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tamount: {\r\n\t\t\"name\": \"amount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Amount\"\r\n\t} as FieldItemNum,\r\n\tusedAmount: {\r\n\t\t\"name\": \"usedAmount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"UsedAmount\"\r\n\t} as FieldItemNum,\r\n\treturnAmount: {\r\n\t\t\"name\": \"returnAmount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"ReturnAmount\"\r\n\t} as FieldItemNum,\r\n\tleftAmount: {\r\n\t\t\"name\": \"leftAmount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"LeftAmount\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nconst fieldArr: FieldItem[] = [\r\n\tfields.amount, fields.usedAmount, fields.returnAmount, fields.leftAmount, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"DxReceiveMain\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: DxReceiveMain):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","//=== UqApp builder created on Thu Sep 09 2021 08:37:43 GMT+0800 (中国标准时间) ===//\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { IDXValue, Uq, UqTuid, UqQuery, UqID, UqIDX } from \"tonva-react\";\r\n\r\n\r\n//===============================\r\n//======= UQ 百灵威系统工程部/CollectPayment ========\r\n//===============================\r\n\r\nexport enum EnumReceiveDirection {\r\n\tin = 1,\r\n\tout = -1\r\n}\r\n\r\nexport enum EnumReceiveWay {\r\n\tbank = 1,\r\n\tweixin = 2,\r\n\talipay = 3,\r\n\tcash = 4\r\n}\r\n\r\nexport interface Tuid$user {\r\n\tid?: number;\r\n\tname: string;\r\n\tnick: string;\r\n\ticon: string;\r\n\tassigned: string;\r\n\tpoke: number;\r\n}\r\n\r\nexport interface Tuid$sheet {\r\n\tid?: number;\r\n\tno: string;\r\n\tuser: number;\r\n\tdate: any;\r\n\tsheet: number;\r\n\tversion: number;\r\n\tflow: number;\r\n\tapp: number;\r\n\tstate: number;\r\n\tdiscription: string;\r\n\tdata: string;\r\n\tprocessing: number;\r\n}\r\n\r\nexport interface TuidOrganization {\r\n\tid?: number;\r\n}\r\n\r\nexport interface TuidCustomer {\r\n\tid?: number;\r\n}\r\n\r\nexport interface TuidCurrency {\r\n\tid?: number;\r\n}\r\n\r\nexport interface Param$poked {\r\n}\r\nexport interface Return$pokedRet {\r\n\tpoke: number;\r\n}\r\nexport interface Result$poked {\r\n\tret: Return$pokedRet[];\r\n}\r\n\r\nexport interface OrderDetail {\r\n\tid?: number;\r\n\tmain?: number;\r\n\titem: number;\r\n\tproduct: number;\r\n\tquantity: number;\r\n\tamount: number;\r\n\tprice: number;\r\n}\r\n\r\nexport interface OrderMain {\r\n\tid?: number;\r\n\tno?: string;\r\n\tcustomer: number;\r\n}\r\n\r\nexport interface ReceiveDetail {\r\n\tid?: number;\r\n\tmain?: number;\r\n\tamount: number;\r\n\tcreateDate: any;\r\n}\r\n\r\nexport interface ReceiveMain {\r\n\tid?: number;\r\n\torganization: number;\r\n\tcustomer: number;\r\n\tcurrency: number;\r\n\tdirection: any;\r\n\tisValid: number;\r\n\tcomments: string;\r\n\treceiveWay: any;\r\n\treceiveNr: string;\r\n\treceiveDate: any;\r\n\treceiver: number;\r\n\tcreateDate: any;\r\n}\r\n\r\nexport interface DxOrderDetail {\r\n\tid: number;\r\n\treceive?: number;\r\n\treceiveDone?: number;\r\n\tinvoice?: number;\r\n\tinvoiceDone?: number;\r\n\t$act?: number;\r\n}\r\n\r\nexport interface DxOrderDetailReturn {\r\n\tid: number;\r\n\treceiveReturn?: number;\r\n\treceiveReturnDone?: number;\r\n\tinvoiceReturn?: number;\r\n\tinvoiceReturnDone?: number;\r\n\t$act?: number;\r\n}\r\n\r\nexport interface DxReceiveMain {\r\n\tid: number;\r\n\tamount?: number;\r\n\tusedAmount?: number;\r\n\treturnAmount?: number;\r\n\tleftAmount?: number;\r\n\t$act?: number;\r\n}\r\n\r\nexport interface ActParamDxOrderDetail {\r\n\tid: number|IDXValue;\r\n\treceive?: number|IDXValue;\r\n\treceiveDone?: number|IDXValue;\r\n\tinvoice?: number|IDXValue;\r\n\tinvoiceDone?: number|IDXValue;\r\n\t$act?: number;\r\n}\r\n\r\nexport interface ActParamDxOrderDetailReturn {\r\n\tid: number|IDXValue;\r\n\treceiveReturn?: number|IDXValue;\r\n\treceiveReturnDone?: number|IDXValue;\r\n\tinvoiceReturn?: number|IDXValue;\r\n\tinvoiceReturnDone?: number|IDXValue;\r\n\t$act?: number;\r\n}\r\n\r\nexport interface ActParamDxReceiveMain {\r\n\tid: number|IDXValue;\r\n\tamount?: number|IDXValue;\r\n\tusedAmount?: number|IDXValue;\r\n\treturnAmount?: number|IDXValue;\r\n\tleftAmount?: number|IDXValue;\r\n\t$act?: number;\r\n}\r\n\r\nexport interface ParamActs {\r\n\torderDetail?: OrderDetail[];\r\n\torderMain?: OrderMain[];\r\n\treceiveDetail?: ReceiveDetail[];\r\n\treceiveMain?: ReceiveMain[];\r\n\tdxOrderDetail?: ActParamDxOrderDetail[];\r\n\tdxOrderDetailReturn?: ActParamDxOrderDetailReturn[];\r\n\tdxReceiveMain?: ActParamDxReceiveMain[];\r\n}\r\n\r\n\r\nexport interface UqExt extends Uq {\r\n\tActs(param:ParamActs): Promise<any>;\r\n\r\n\t$user: UqTuid<Tuid$user>;\r\n\t$sheet: UqTuid<Tuid$sheet>;\r\n\tOrganization: UqTuid<TuidOrganization>;\r\n\tCustomer: UqTuid<TuidCustomer>;\r\n\tCurrency: UqTuid<TuidCurrency>;\r\n\t$poked: UqQuery<Param$poked, Result$poked>;\r\n\tOrderDetail: UqID<any>;\r\n\tOrderMain: UqID<any>;\r\n\tReceiveDetail: UqID<any>;\r\n\tReceiveMain: UqID<any>;\r\n\tDxOrderDetail: UqIDX<any>;\r\n\tDxOrderDetailReturn: UqIDX<any>;\r\n\tDxReceiveMain: UqIDX<any>;\r\n}\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidChemical } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidChemical):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidSalesRegion } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidSalesRegion):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCurrency } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCurrency):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidPackType } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidPackType):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidLanguage } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidLanguage):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidBrand } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidBrand):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidStuff } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidStuff):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI, uqStringify } from \"tonva-react\";\r\nimport { TuidProductX } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidProductX):JSX.Element {\r\n\tlet {brand, origin, description, descriptionC, imageUrl, no} = item;\r\n\tlet desc: string, descVice: string;\r\n\tif (description) {\r\n\t\tdesc = description;\r\n\t\tif (descriptionC) {\r\n\t\t\tif (descriptionC !== description) {\r\n\t\t\t\tdescVice = descriptionC;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tdesc = descriptionC;\r\n\t}\r\n\tlet vBrand: any = undefined;\r\n\treturn <>\r\n\t\t<div>{no && <small className=\"text-muted\">{no}</small>} <b>{desc}</b></div>\r\n\t\t{descVice && <div>{descVice}</div>}\r\n\t\t<div>{vBrand}</div>\r\n\t</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidProductCategory } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidProductCategory):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidLot } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidLot):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidPackSalesLevel } from \"./JkProduct\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidPackSalesLevel):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCurrency } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCurrency):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidContact } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidContact):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCustomer } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCustomer):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidInvoiceType } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidInvoiceType):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidResearch } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidResearch):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidProvince } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidProvince):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidDepartment } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidDepartment):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidBuyerAccount } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidBuyerAccount):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidOrganization } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidOrganization):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCountry } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCountry):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidInvoiceInfo } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidInvoiceInfo):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCity } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCity):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidPost } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidPost):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCounty } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCounty):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidSalesRegion } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidSalesRegion):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidEmployee } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidEmployee):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidAddress } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidAddress):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidDomain } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidDomain):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidProductX } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidProductX):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidBrand } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidBrand):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI } from \"tonva-react\";\r\nimport { TuidCustomerSettingType } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidCustomerSettingType):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Res, setRes, TFunc, FieldItem, FieldItemNumber, FieldItemString, FieldItemId, UI, uqStringify } from \"tonva-react\";\r\nimport { TuidVIPCardType } from \"./JkCustomer\";\r\n\r\nconst resRaw: Res<any> = {\r\n\t$zh: {\r\n\t},\r\n\t$en: {\r\n\t}\r\n};\r\nconst res: any = {};\r\nsetRes(res, resRaw);\r\n\r\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\r\n\treturn res[str as string] ?? str;\r\n}\r\n\r\nexport function render(item: TuidVIPCardType):JSX.Element {\r\n\treturn <>{uqStringify(item)}</>;\r\n};\r\n","import * as React from 'react';\r\nimport logo from '../images/logo_mobi.png';\r\n\r\nexport const jnkTop = <div className=\"d-flex align-items-center position-relative\">\r\n    <img className=\"h-3c position-absolute\" src={logo} alt=\"百灵威\" />\r\n    <div className=\"h3 flex-fill text-center\">\r\n        <span className=\"text-primary mr-3\">百灵威</span>\r\n    </div>\r\n</div>;\r\n","import { tv } from 'tonva-react';\r\n\r\nexport const tvAddress = (values: any) => {\r\n    let { country, province, city, county } = values;\r\n    return <>\r\n        {tv(country)}{tv(province, undefined, undefined, () => <></>)}{tv(city, undefined, undefined, () => <></>)}{tv(county, undefined, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nexport const tvCountry = (values: any) => {\r\n    return <> {values.chineseName} </>;\r\n}\r\n\r\nexport const tvCurrency = (values: any) => {\r\n    return <> {values.name} </>;\r\n}\r\n\r\nexport const common = {\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    currency: tvCurrency,\r\n};\r\n","/* eslint-disable */\r\nimport { tv } from 'tonva-react';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nexport const tvProduct = (values: any) => {\r\n    let product = values;\r\n    let { brand, description, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"row d-flex\">\r\n        <div className=\"col-12\">\r\n            <div className=\"row py-2\">\r\n                <div className=\"col-12\"><strong>{description}</strong></div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {item('CAS', CAS)}\r\n                        {item('纯度', purity)}\r\n                        {item('分子式', molecularFomula)}\r\n                        {item('分子量', molecularWeight)}\r\n                        {item('产品编号', origin)}\r\n                        {tv(brand, (values: any) => <>{item(\"品牌\", values.name)}</>)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst tvPackx = (values: any) => {\r\n    let { radiox, radioy, unit } = values;\r\n    if (radiox !== 1) return <>{radiox} * {radioy}{unit}</>;\r\n    return <>{radioy}{unit}</>;\r\n}\r\n\r\nfunction item(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 text-muted pr-0\">{caption}:</div>\r\n        <div className=\"col-8\">{value}</div>\r\n    </>;\r\n}\r\n\r\nconst tvProductCategory = (values: any) => {\r\n    let { children } = values;\r\n    return <>\r\n        aaa\r\n    </>\r\n};\r\n\r\nexport const product = {\r\n    productx: tvProduct,\r\n    packx: tvPackx,\r\n    productCategory: tvProductCategory,\r\n}\r\n","import { tv } from 'tonva-react';\r\nimport { tvAddress, tvCountry } from './common';\r\n\r\nexport const tvContact = (values: any) => {\r\n    let { name, mobile, organizationName, address, addressString } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        <b>\r\n            {name}\r\n        </b>\r\n        &nbsp; {mobile} &nbsp; {organizationName}<br />\r\n        <small>{tv(address)} {addressString}</small>\r\n    </div>\r\n}\r\n\r\nexport const tvInvoiceType = (values: any) => {\r\n    let { description } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        {description}\r\n    </div>\r\n}\r\n\r\nexport const tvInvoiceInfo = (values: any) => {\r\n    let { title, taxNo } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        <b>\r\n            {title}\r\n        </b>\r\n        &nbsp; {taxNo}\r\n    </div>\r\n}\r\n\r\nexport const customer = {\r\n    contact: tvContact,\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    invoiceInfo: tvInvoiceInfo,\r\n    invoiceType: tvInvoiceType\r\n}\r\n","//=== UqApp builder created on Tue Jan 12 2021 23:14:51 GMT-0500 (GMT-05:00) ===//\r\nimport { jnkTop } from \"me/loginTop\";\r\nimport { AppConfig, DevConfig } from \"tonva-react\";\r\nimport { tvs } from \"tvs\";\r\n\r\nconst bz: DevConfig = {\r\n\tname: 'bizdev',\r\n\talias: 'bz',\r\n}\r\n\r\nconst jk: DevConfig = {\r\n\tname: '百灵威系统工程部',\r\n\talias: 'jk',\r\n}\r\n\r\nexport const appConfig: AppConfig = {\r\n\tversion: '0.1.5',\r\n\tapp: {\r\n\t\tdev: jk,\r\n\t\tname: 'cart',\r\n\t},\r\n\tuqs: [\r\n\t\t/*\r\n\t\t{\r\n\t\t\tdev: bz,\r\n\t\t\tname: 'hello-tonva',\r\n\t\t\talias: 'HelloTonva',\r\n\t\t\tversion: '0.1.0',\r\n\t\t},\r\n\t\t*/\r\n\t\t{\r\n\t\t\tdev: jk,\r\n\t\t\tname: 'deliver',\r\n\t\t\tversion: '0.1.1',\r\n\t\t},\r\n\t\t{\r\n\t\t\tdev: jk,\r\n\t\t\tname: 'order',\r\n\t\t\tversion: '0.1.1',\r\n\t\t},\r\n\t\t{\r\n\t\t\tdev: jk,\r\n\t\t\tname: 'collectPayment',\r\n\t\t\talias: 'CollectPayment',\r\n\t\t\tversion: '0.1.1',\r\n\t\t},\r\n\t\t{\r\n\t\t\tdev: jk,\r\n\t\t\tname: 'product',\r\n\t\t\tversion: '0.1.1',\r\n\t\t},\r\n\t\t{\r\n\t\t\tdev: jk,\r\n\t\t\tname: 'customer',\r\n\t\t\tversion: '0.1.1',\r\n\t\t},\r\n\t],\r\n\tnoUnit: true,\r\n\ttvs,\r\n\toem: undefined,\r\n\tloginTop: jnkTop\r\n};\r\n","import { TVs } from 'tonva-react';\r\nimport { common } from \"./common\";\r\nimport { warehouse } from \"./warehouse\";\r\nimport { product } from \"./product\";\r\nimport { order } from \"./order\";\r\nimport { customer } from './customer';\r\n\r\nexport const tvs:TVs = {\r\n    common: common,\r\n    warehouse: warehouse,\r\n    product: product,\r\n    order: order,\r\n    customer: customer,\r\n}","const tvWarehouse = (values: any) => {\r\n    let { name } = values;\r\n    return <div>\r\n        {name}\r\n    </div>\r\n}\r\n\r\nexport const warehouse = {\r\n    warehouse: tvWarehouse,\r\n}\r\n","import { tvProduct } from \"./product\";\r\nimport { tvAddress, tvCountry, tvCurrency } from \"./common\";\r\nimport { tvContact } from \"./customer\";\r\n\r\nexport const order = {\r\n    productx: tvProduct,\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    contact: tvContact,\r\n    currency: tvCurrency,\r\n}\r\n","/* eslint-disable */\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './index.css';\r\nimport './App.css';\r\nimport 'antd/dist/antd.css';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { NavView, start, nav, startPage, env } from 'tonva-react';\r\nimport { CApp, CWeb, appConfig } from 'tapp';\r\nimport * as qs from 'querystringify';\r\nimport { GLOABLE } from 'global';\r\n\r\n/*\r\nlet elRoot = document.getElementById('root');\r\nif (!elRoot) {\r\n    elRoot = document.createElement('div');\r\n    elRoot.style.display = 'none';\r\n    document.body.append(elRoot);\r\n}\r\nReactDOM.render(<App />, elRoot);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n*/\r\n\r\n//let { location } = document;\r\n//if (location.host && false) {\r\n\r\n(async function () {\r\n    nav.setSettings(appConfig);\r\n    loadBaiduTongji();\r\n    let onLogined: () => Promise<void>;\r\n\r\n    if (env.isMobile || window.location.pathname.endsWith('/app')) {\r\n        require('style-loader!./css/style.css');\r\n        require('style-loader!./css/rst.css');\r\n        onLogined = async () => {\r\n            await start(CApp, appConfig);\r\n        }\r\n    }\r\n    else {\r\n        require('style-loader!./css/style.css');\r\n        loadQQScript();\r\n        onLogined = async () => {\r\n            await startPage(CWeb, appConfig);\r\n        };\r\n    }\r\n\r\n    let userPassword = async () => {\r\n        let { search } = window.location;\r\n        if (search) {\r\n            let query: any = qs.parse(search.toLowerCase());\r\n            if (search.startsWith('?lgtk=')) {\r\n                let result = await fetch(GLOABLE.EPEC.AUTOLOGIN + '?lgtk=' + query?.lgtk);\r\n                if (result.ok) {\r\n                    let res = await result.json();\r\n                    return res;\r\n                };\r\n            };\r\n        };\r\n        return; /* { user: 'xxxx', password: 'xxxxx' }; */\r\n    }\r\n\r\n    const App: React.FC = () => {\r\n        return <NavView onLogined={onLogined} notLogined={onLogined} userPassword={userPassword} />;\r\n    }\r\n\r\n\r\n    let elRoot = document.getElementById('root');\r\n    if (!elRoot) {\r\n        elRoot = document.createElement('div');\r\n        elRoot.style.display = 'none';\r\n        document.body.appendChild(elRoot);\r\n    }\r\n    ReactDOM.render(\r\n        <React.StrictMode>\r\n            <App />\r\n        </React.StrictMode>,\r\n        elRoot\r\n    );\r\n    // document.getElementById('root')\r\n    // If you want your app to work offline and load faster, you can change\r\n    // unregister() to register() below. Note this comes with some pitfalls.\r\n    // Learn more about service workers: https://bit.ly/CRA-PWA\r\n    serviceWorker.unregister();\r\n})();\r\n\r\nfunction loadQQScript() {\r\n    let f = document.createElement(\"script\");\r\n    f.setAttribute(\"id\", \"qd30090316631c3780361b3caa2f8195e48a7a2bd5c5\");\r\n    f.type = \"text/javascript\";\r\n    f.src = 'https://wp.qiye.qq.com/qidian/3009031663/1c3780361b3caa2f8195e48a7a2bd5c5';\r\n    // f.src = 'https://wpa.b.qq.com/cgi/wpa.php?key=XzkzODAzNjk3OV80OTI2NjBfNDAwNjY2Nzc4OF8';\r\n    document.body.appendChild(f);\r\n};\r\n\r\nfunction loadBaiduTongji() {\r\n    var _hmt: any[] = _hmt || [];\r\n    (function () {\r\n        var hm = document.createElement(\"script\");\r\n        hm.src = \"https://hm.baidu.com/hm.js?581e8230afda2afbd8a5870fad068d1e\";\r\n        var s = document.getElementsByTagName(\"script\")[0];\r\n        s.parentNode.insertBefore(hm, s);\r\n    })();\r\n}\r\n"],"sourceRoot":""}