{"version":3,"sources":["tonva/entry/changePassword.tsx"],"names":["ChangePasswordPage","schema","name","type","maxLength","required","uiSchema","items","orgPassword","widget","label","placeholder","newPassword","newPassword1","submit","className","onSubmit","context","a","data","setError","centerAppApi","CenterAppApi","undefined","changePassword","nav","replace","header","back","this","onButtonClick","fieldLabelSize","React"],"mappings":"kPAIaA,EAAb,4MACYC,OAAuB,CAC3B,CAACC,KAAK,cAAeC,KAAM,SAAUC,UAAW,GAAIC,UAAU,GAC9D,CAACH,KAAK,cAAeC,KAAM,SAAUC,UAAW,GAAIC,UAAU,GAC9D,CAACH,KAAK,eAAgBC,KAAM,SAAUC,UAAW,GAAIC,UAAU,GAC/D,CAACH,KAAK,SAAUC,KAAM,WAL9B,EAOYG,SAAqB,CACzBC,MAAO,CACHC,YAAa,CACTC,OAAQ,WACRC,MAAO,qBACPC,YAAa,8CAEjBC,YAAa,CACTH,OAAQ,WACRC,MAAO,qBACPC,YAAa,8CAEjBE,aAAc,CACVJ,OAAQ,WACRC,MAAO,2BACPC,YAAa,oDAEjBG,OAAQ,CACJL,OAAQ,SACRC,MAAO,eACPK,UAAW,qBA3B3B,EAgCYC,SAhCZ,uCAgCuB,WAAOd,EAAae,GAApB,uBAAAC,EAAA,2DACgCD,EAAQE,KAAlDX,EADU,EACVA,YAAaI,EADH,EACGA,YAAaC,EADhB,EACgBA,aAC3BD,IAAgBC,EAFL,uBAGXI,EAAQG,SAAS,eAAgB,sEAHtB,iCAMXC,EAAe,IAAIC,IAAa,WAAOC,GAN5B,SAOCF,EAAaG,eAAe,CAAChB,YAAaA,EAAaI,YAAYA,IAPpE,WAQH,IARG,+BASXK,EAAQG,SAAS,cAAe,kCATrB,kCAYfK,MAAIC,QAAQ,gBAAC,OAAD,CAAMC,OAAO,2BAAOC,KAAK,SACjC,uBAAKb,UAAU,qBAAf,gDAbW,+DAhCvB,+GAqDQ,OAAO,gBAAC,OAAD,CAAMY,OAAO,4BAChB,gBAAC,OAAD,CACIZ,UAAU,MACVd,OAAQ4B,KAAK5B,OACbK,SAAUuB,KAAKvB,SACfwB,cAAeD,KAAKb,SACpBe,eAAgB,SA3DhC,GAAwCC","file":"static/js/5.3b70ba00.chunk.js","sourcesContent":["import * as React from 'react';\nimport { Page, Form, ItemSchema, UiSchema, StringSchema, UiPasswordItem, Context, ButtonSchema, UiButton, nav } from '../components';\nimport { CenterAppApi } from '../net';\n\nexport class ChangePasswordPage extends React.Component {\n    private schema: ItemSchema[] = [\n        {name:'orgPassword', type: 'string', maxLength: 60, required: true} as StringSchema,\n        {name:'newPassword', type: 'string', maxLength: 60, required: true} as StringSchema,\n        {name:'newPassword1', type: 'string', maxLength: 60, required: true} as StringSchema,\n        {name:'submit', type: 'submit'} as ButtonSchema\n    ];\n    private uiSchema: UiSchema = {\n        items: {\n            orgPassword: {\n                widget: 'password',\n                label: '原密码',\n                placeholder: '输入原来的密码'\n            } as UiPasswordItem,\n            newPassword: {\n                widget: 'password',\n                label: '新密码',\n                placeholder: '输入新设的密码'\n            } as UiPasswordItem,\n            newPassword1: {\n                widget: 'password',\n                label: '确认密码', \n                placeholder: '再次输入新设密码'\n            } as UiPasswordItem,\n            submit: {\n                widget: 'button',\n                label: '提交',\n                className: 'btn btn-primary'\n            } as UiButton,\n        }\n    };\n\n    private onSubmit = async (name:string, context: Context):Promise<any> => {\n        let {orgPassword, newPassword, newPassword1} = context.data;\n        if (newPassword !== newPassword1) {\n            context.setError('newPassword1', '新密码错误，请重新输入');\n            return;\n        }\n        let centerAppApi = new CenterAppApi('tv/', undefined);\n        let ret = await centerAppApi.changePassword({orgPassword: orgPassword, newPassword:newPassword});\n        if (ret === false) {\n            context.setError('orgPassword', '原密码错误');\n            return;\n        }\n        nav.replace(<Page header=\"修改密码\" back=\"close\">\n            <div className=\"m-3  text-success\">\n                密码修改成功！\n            </div>\n        </Page>);\n        return;\n    }\n\n    render() {\n        return <Page header=\"修改密码\">\n            <Form\n                className=\"m-3\" \n                schema={this.schema}\n                uiSchema={this.uiSchema}\n                onButtonClick={this.onSubmit}\n                fieldLabelSize={2} />\n        </Page>;\n    }\n}\n"],"sourceRoot":""}