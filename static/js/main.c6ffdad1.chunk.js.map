{"version":3,"sources":["mainSubs/mainSubs.tsx","mainSubs/render.tsx","images/logo_pointShop.png","images/signInIcon.png","images/exChangeIcon.png","images/homeTopicMap.jpg","images/TriangleShadingO.png","images/TriangleShadingT.png","images/signTopicMap.png","images/signViceMap.png","images/Homemadelogo.png","images/point.png","images/pdf.png","images/wxpaylogo.png","images/alipaylogo.png","images/wxpayproposed.png","images/alipayproposed.png","images/unionpaylogo.png","../node_modules/pdfh5/js sync","images/giftPlate.png","images/已下架.png","images/infb.jpg","images/pig.png","images/积分图标P.png","images/已签到.png","tools/groupByProduct.ts","cart/Cart.ts","CurrentUser.ts","CBase.ts","home/VSearchHeader.tsx","home/VSiteHeader.tsx","home/VSlider.tsx","tools/browser.ts","cartenv.ts","home/VHome.tsx","tools/CustomHeaderTemplate.tsx","home/VScanCode.tsx","home/CHome.tsx","cart/VCartLabel.tsx","cart/VCartLabel_Web.tsx","tools/minusPlusWidget.tsx","cart/VCart.tsx","cart/CCart.tsx","tools/productImage.tsx","product/VProductView.tsx","tools/randomColor.ts","pointMarket/VExchangeOrder.tsx","pointMarket/VPointRule.tsx","pointMarket/basicRefer.ts","pointMarket/VMyPoint.tsx","customer/VContactList.tsx","tools/inputValidations.ts","customer/VContact.tsx","customer/VAddress.tsx","customer/CAddress.tsx","customer/CSelectContact.tsx","pointMarket/OrderSuccess.tsx","pointMarket/pointOrder.ts","pointMarket/VExchangeHistoryDetail.tsx","pointMarket/VExchangeHistory.tsx","pointMarket/VRevenueExpenditure.tsx","pointMarket/VPointProductDetail.tsx","pointMarket/VSelectedLable.tsx","pointMarket/VDefaultPost.tsx","pointMarket/CPointProduct.tsx","pointMarket/VPointProduct.tsx","product/VProduct.tsx","product/VProductList.tsx","mainSubs/loader.ts","tools/productChemical.ts","product/itemLoader.ts","product/VProductDelivery.tsx","product/VChemicalInfo.tsx","product/VProductList_Web.tsx","product/VProduct_Web.tsx","product/VPDFView.tsx","product/VVerifyCode.tsx","product/CProduct.tsx","order/VCreateOrder.tsx","order/Order.ts","order/OrderSuccess.tsx","order/VMyOrders.tsx","order/VOrderDetail.tsx","customer/VInvoiceInfo.tsx","customer/CInvoiceInfo.tsx","coupon/Coupon.ts","order/COrder.tsx","productCategory/VRootCategory.tsx","productCategory/VCategory.tsx","productCategory/CProductCategory.tsx","member/VMember.tsx","member/CMember.tsx","me/about.tsx","me/contactUs.tsx","me/EditMeInfo.tsx","me/loginTop.tsx","tvs/common.tsx","tvs/product.tsx","tvs/customer.tsx","configuration.ts","tvs/index.tsx","tvs/warehouse.tsx","tvs/order.tsx","me/aboutThisApp.tsx","me/VMe.tsx","me/EditMeInfoFirstOrder.tsx","customer/VFavorites.tsx","customer/VProductFavorateLabel.tsx","customer/CFavorites.tsx","me/VLoginState.tsx","me/VLoginState_Web.tsx","me/CMe.tsx","ui/main.tsx","coupon/VVIPCard.tsx","coupon/VSharedCoupon.tsx","coupon/VCouponAvailable.tsx","coupon/VVIPCardDiscount.tsx","coupon/VCouponManage.tsx","coupon/CCoupon.tsx","ync/VYncProjects.tsx","ync/CYncProjects.tsx","pointMarket/VLottery.tsx","pointMarket/VMyLotteryPrize.tsx","pointMarket/prizeOrder.ts","pointMarket/CLottery.tsx","pointMarket/VPointSign.tsx","pointMarket/CSignIn.tsx","payment/VPayment.tsx","payment/CPayment.tsx","CApp.ts","App.tsx","serviceWorker.ts","index.tsx","images/logo.png","mainSubs/index.ts","images/AnalyticalChemistry.png","images/LabSupplies.png","images/LifeScience.png","images/MaterialScience.png","images/OrganicChemistry.png"],"names":["ViewBase","model","ViewMainSubs","main","sub","renderSubs","subsContainer","renderSubItems","subViews","subs","this","map","v","index","key","module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","groupByProduct","packItems","result","sort","a","b","price","packItem","product","pack","quantity","retail","currency","packRow","cpi","find","undefined","packs","push","Cart","cApp","cartStore","disposer","cartItems","count","observable","box","amount","editButton","calcSum","cp","$isSelected","$isDeleted","pi","Number","NaN","set","parseFloat","toFixed","add","cartItemExists","Tuid","equ","createdate","Date","now","splice","packExists","added","length","unshift","storeCart","removeStrike","data","console","log","list","autorun","isLogined","uqs","currentSalesRegion","CartRemote","CartLocal","load","cartData","PriceX","promises","forEach","obj","salesRegion","Promise","all","prices","priceMap","discountinued","expireDate","cartDataGrouped","i","productId","packId","cpp","findIndex","filter","rows","pe","cartItemIndex","cartItem","removeFromCart","CartStore","order","GetCart","page","ret","$page","SetCart","submit","param","RemoveFromCart","productTuid","packTuid","ProductX","div","cartstring","localStorage","getItem","JSON","parse","cartDataBoxed","productbox","boxId","packbox","removeItem","TuidDiv","setItem","stringify","WebUser","name","nick","icon","guest","token","gender","salutation","departmentName","telephone","email","fax","address","addressString","zipCode","VIPDiscount","webUserVIPCard","_user","webUserSettings","setUser","user","loadWebUser","currentCustomer","buyerAccount","organizationName","invoiceInfo","shippingContact","invoiceContact","firstName","mobile","webUserTuid","webuser","salesTask","WebUserContact","WebUserSetting","WebUserCustomer","WebUserBuyerAccount","RecordLogin","webUser","WebUserVIPCard","VIPCardDiscount","query","coupon","vipCard","ip","app","contact","value","Customer","customer","init","accountValue","buyerAccounts","WebUserContacts","table","contactId","arr1","Contact","save","newContact","newContactId","addContact","newContactBox","setDefaultShippingContact","del","saveDefaultSettings","invoiceTypeId","invoiceInfoId","invoiceType","webUserContact","积分商城","getPoints","computed","customerSettings","Contractor","CustomerContacts","CustomerSetting","customerContactorMap","contractor","setDefaultSettings","CUqBase","_cApp","_uqs","CBase","CUqApp","CSub","type","c","CAppBase","VSearchHeader","onSearch","controller","cProduct","topKey","nav","popTo","start","size","className","placeholder","View","VSiteHeader","left","src","logo","alt","style","height","width","right","renderSearchHeader","VSlider","banners","random","Math","floor","path","browser","u","navigator","userAgent","appVersion","trident","indexOf","presto","webKit","gecko","match","ios","android","uc","iPhone","iPad","webApp","html5Plus","GLOABLE_PRODUCTION","CHINA","CHINESE","SALESREGION_CN","ROOTCATEGORY","47","OrganicChemistry","labelColor","470","AnalyticalChemistry","1013","LifeScience","1219","MaterialScience","1545","LabSupplies","TIPDISPLAYTIME","ANDROIDAPPADDRESS","PIRVACYURL","CONTENTSITE","GLOABLE_TEST","7","430","986","1214","GLOABLE","env","testing","VHome","downloadApp","window","open","pageContent","renderCategoryRootList","siteHeader","renderVm","header","onClick","VPage","CustomHeaderTemplate","content","bg","textC","back","classNames","background","minHeight","cursor","color","minWidth","padding","VScanCode","scan","media","plus","barcode","Barcode","onmarked","text","QR","EAN13","EAN8","reg","verArr","test","Ver","charAt","shiftArr","split","includes","scanCodetoProductDetail","scanClose","alert","close","closePage","observer","setTimeout","role","openPage","CHome","PageItems","homeSections","sectionTuid","openScanCode","openVPage","renderView","cProductCategory","renderRootList","getSlideShow","webBuilder","GetSlideShow","origin","GetProductByOrigin","productByOrigin","showProductDetail","tab","VCartLabel","showCart","cart","badge","pointer","get","VCartLabel_Web","document","location","href","MinusPlusWidget","minusClick","getValue","setValue","plusClick","ref","input","p","parentElement","tagName","disabled","renderContent","renderTemplet","cn","hasError","itemSchema","required","cursorPointer","minusColor","plusColor","hasFocus","hasAction","readOnly","hasValue","isNaN","minus","invisible","defaultValue","onChange","onKeyDown","onFocus","evt","onBlur","maxLength","renderErrors","UpdownWidget","cartSchema","arr","VCart","CheckOutButton","checkOut","strikeOut","check","renderCartItem","item","onProductClick","renderCartProduct","packsRow","tv","renderDeliveryTime","uiSchema","selectable","deletable","restorable","items","widget","Templet","ArrContainer","label","RowContainer","RowSeperator","WidgetClass","onChanged","onQuantityChanged","cartForm","schema","formData","whetherToEdit","params","footer","cancel","empty","React","CCart","selectedCartItems","context","prev","parentData","onRowStateChanged","selected","deleted","loginCallback","currentUser","loginCallBack","doFirstOrderChecking","isDeleted","getSelectedItems","showLogin","cMe","allowOrdering","toPersonalAccountInfo","doCheckOut","cOrder","createOrderFromCart","tabPage","altimagePath","ProductImage","props","chemicalId","substr","altImage","PointProductImage","pointProductImagePath","VCartProuductView","brand","description","descriptionC","imageUrl","productPropItem","renderChemicalInfoInCart","renderBrand","VProductPrice","renderProduct","productBox","getProudct","renderFavoritesLabel","isValid","getProductAndDiscount","discount","vipPrice","promotionPrice","minPrice","visible","initPrices","salesRegionId","getProductPrice","priceUI","SalesRegionId","renderPrice","retailUI","min","Infinity","VProductWithPrice","renderProductPrice","caption","captionClass","capClass","valClass","unsoldProductsUI","stopPropagation","VProuductView2","CAS","purity","molecularFomula","molecularWeight","randomColor","VExchangeOrder","pageDesc","OrderSource","EXCHANGEORDER","nullContact","renderPointProduct","pointProduct","point","title","border","pointIcon","onSubmitOwn","submitOrder","onSubmit","orderData","cLottery","prizeOrderData","shippingAddressIsBlank","renderTipsUI","chevronRight","shippingAddressBlankTip","renderContact","onSelectShippingContact","pointProductsSelected","pointsSum","pointToExchanging","render","VMyPrizeExchangeOrder","PRIZEORDER","myPrizeLib","VPointRule","RevenueExpenditure","VMyPoint","pointRules","pointblock","action","recommendOrHot","more","toWhere","theme","imgArr","zIndex","slice","clm","PointProductDetailLevel","DIRECT","none","myEffectivePoints","myPointTobeExpired","myTotalPoints","pointProductGenre","newPointProducts","hotPointProducts","openExchangeHistory","openRevenueExpenditure","openPointProduct","openPointProductDetail","openPointSign","cSignIn","dateYear","getFullYear","nowPoint","nowPointTip","actions","homeTopicMap","backgroundSize","logo_pointShop","flex","signInIcon","exChangeIcon","renderGenreItem","triangleShadingO","triangleShadingT","topicClump","newRecommend","hotProduct","renderPointRecord","comments","date","VContactList","onContactRender","onEditContact","onContactSelected","onNewContact","userContacts","contactList","telephoneValidation","mobileValidation","emailValidation","faxValidation","addressDetailValidation","zipCodeValidation","organizationNameValidation","nameValidation","VContact","userContactData","form","rules","pickId","pickAddress","addressValue","country","province","city","county","chineseName","isDefault","onSaveContact","buttonClick","onFormButtonClick","saveContact","onDelContact","vCall","VConfirmDeleteContact","delContact","buttonDel","contactData","_","clone","defaultOrganizationName","defaultName","defaultMobile","fromOrderCreation","onButtonClick","fieldLabelSize","onConfirm","returnCall","onCancel","top","VAddress","provinceId","cityId","countyId","backLevel","provinces","renderPCC","onProvinceClick","pcc","marginRight","marginBottom","getProvinceCities","cities","len","onCityClick","openPageElement","saveAddress","getCityCounties","counties","onCountyClick","getCountryProvince","CAddress","countryId","common","GetCountryProvinces","GetProvinceCities","GetCityCounties","Address","newAddress","addressId","CSelectContact","userContact","userContactId","getSetting","userSetting","getIsDefault","setDefaultContact","contactTuid","contactBox","backPage","cAddress","newC","call","getContacts","userContactMaps","CSelectShippingContact","CSelectInvoiceContact","setDefaultInvoiceContact","OrderSuccess","orderCreateResult","no","pointOrder","organization","exchangeItems","oi","subAmount","exchangeitems","reduce","pv","cv","OrderItem","VExchangeHistoryDetail","renderexchangeItem","orderItem","maxHeight","radioy","unit","grade","brief","VExchangeHistory","exchangeHistory","renderExchangeHistory","openOrderDetail","VRevenueExpenditure","showList","tipNone","matchData","pagePointHistory","signinPageHistory","onScrollBottom","scroller","VPointProductDetail","renderVDefaultPost","OffShelf","OffShelfTip","已下架","pointProductsDetail","availablePoints","pointsInsuffTip","renderSelectedLable","DetailSource","giftPlate","VSelectedLable","openSelectedPointProduct","VDefaultPost","textIndent","infb","productGenre","INDIRECT","CPointProduct","pointInterval","startPoint","endPoint","refreshMypoint","myPoints","effectiveLeftPoint","totalLeftPoint","pointYear","initPointProducts","pointProducts","el","clearSelectedPointsProducts","openMyPoint","getPointProductGenre","getNewPointProducts","getHotPointProducts","VPointProduct","DetailLevel","navCloseByOrderSuccess","fm","getPointProductLibLoad","findProduct","moment","endDate","setPointProductVisits","PointProductLib","getPointProductDetailFragment","fetch","ok","topic","getPointHistory","PointExchangeSheet","mySheets","presult","concat","orderId","getSheet","VSelectedPointProduct","openExchangeOrder","getDefaultShippingContact","SetPointProductVisits","Genre","QueryPager","GetPointHistory","first","getPointProductByDifferentPlot","plot","state","some","filterByProductGenre","currentGenre","GetPointProductByGenre","genre","pointProductFromGenre","getProductsFromGenre","PointProductGenre","pointproduct","GetNewPointProducts","GetHotPointProducts","getPointsIntervalProducts","getPointsProducts","GetPointProduct","getProductSources","PointProductSource","sourceId","IsContain","nowQuantity","element","getDataForSave","flow","getLastPlatformOrder","GetLastPlatFormOrder","validationResult","platformOrderId","getPlatFormOrder","GetPlatFormOrder","IsCouponCanUse","couponCode","couponId","IsCanUseCoupon","types","receivePoint","AddPlatformOrderPoint","rtn","openMeInfoOptions","userInfoCompletedChecking","options","openMeInfoFirstOrder","addUsedCoupon","AddUsedCoupon","defaultSetting","contact0","selectContact","cSelect","contactArr","getDefaultSetting","getContact","renderHr","HRCL","HRST","styleObj","backgroundColor","TopicDivision","CL","ST","currentInterval","themeName","tabs","rankInterval","borderC","getTabs","TabCaptionComponent","renderList","isSelected","isToDetail","isShowSelectForm","productIsNull","pointIsEnough","getRelatedUI","productIsNullTip","pointIsEnoughTip","tabPosition","VProduct","arrTemplet","renderPack","dealWithPDF","fileName","replace","renderPDF","language","ToVerifyPdf","pdfIcon","renderListItemPDF","Material","renderProductMaterial","MaterialArr","productMSDSFiles","productSpecFiles","cHome","cartLabel","cCart","renderCartLabel","viewProduct","productData","getProductSpecFile","getProductMSDSFile","VProductList","searchKey","scrollToBottom","productsPager","before","Loader","entities","schemaLoaded","loadSchemas","initData","loadToData","LoaderProductChemical","ProductChemical","productChemical","chemical","LoaderBrand","brandId","Brand","LoaderProductWithChemical","productUq","merge","brandLoader","productChemicalLoader","packx","LoaderProductChemicalWithPrices","customerDiscount","promotion","productLoader","currentLanguage","hasCustomer","GetDiscount","discountSetting","brandDiscounts","brandDiscount","currentSalesRegionId","round","getQuantity","GetPromotionPack","results","VProductDelivery","initInventoryAllocation","inventoryAllocation","getInventoryAllocation","initFutureDeliveryTimeDescription","futureDeliveryTimeDescription","getFutureDeliveryTimeDescription","warehouse","deliveryTimeDescription","values","packObj","owner","VChemicalInfoInCart","chemicalInfo","chemicalInfoContainer","getChemicalInfo","VProductList_Web","VProduct_Web","VPDFView","ParsRenderPDF","fileUrl","status","isFoundFile","pdfh5","Pdfh5","msg","currentFileName","VVerifyCode","verifyCode","verifyCodeInput","openPDFView","getPDFFileUrl","verifyInfo","getVerifyCode","preventDefault","maxWidth","CProduct","JumpSource","loader","renderProductWithPrice","priceSet","GetInventoryAllocation","cacheId","futureDeliveryTimeDescriptionContainer","GetFutureDeliveryTime","futureDeliveryTime","minValue","maxValue","cFavorites","renderProductList","searchWebByKey","renderProductWeb","fileInfo","toLocaleUpperCase","currentProduct","openVerifyCode","captcha","res","arrayBuffer","statusText","timer","getTime","ProductMSDSFile","ProductSpecFile","searchByKey","SearchProduct","keyWord","category","SearchProductByCategory","productCategoryId","productCategory","VCreateOrder","priceInit","renderOrderItem","renderOrderItemProduct","orderItemKey","renderCoupon","couponAppliedData","hasAnyCoupon","removeCoupon","tip","offsetUI","remittedUI","noOffsetUI","couponOffsetAmount","couponRemitted","cancelCouponUI","lineHeight","onBuyerAccountChanged","renderBuyerAccount","o","renderBuyerAccounts","onSelect","useShippingAddress","invoiceAddressIsBlank","invoiceIsBlank","onSelectInvoiceContact","onInvoiceInfoEdit","onCouponEdit","fontSize","invoiceAddressBlankTip","divInvoiceContact","invoiceContactUI","defaultChecked","currentTarget","checked","invoiceBlankTip","invoiceInfoUI","freightFeeUI","freightFeeRemittedUI","freightFee","freightFeeRemitted","couponUI","orderItems","productAmount","Order","pk","orderitems","subListAmount","PayAmountByOrder","VMyOrders","currentState","renderOrder","discription","getMyOrders","VOrderDetail","orderAgain","payBtn","invoiceTemplate","invoiceTypeUI","taxNo","bank","accountNo","regArr","j","commonRequired","valueAddedRequired","commonVisible","valueAddedVisible","VInvoiceInfo","saveTip","invoiceInfoData","invoice","saveInvoiceInfo","showTip","onSaveInvoice","onInvoiceTypeClick","event","parseInt","frm","buildForm","tipUI","htmlFor","origInvoice","assure","requiredFields","visibleFields","CInvoiceInfo","InvoiceInfo","newInvoiceInfo","newInvoiceInfoId","invoiceBox","InvoiceType","setDefaultInvoice","activityTime","CouponBase","expiredDate","codeShow","String","createOrderPriceStrategy","couponData","preferential","validitydate","VIPCard","Coupon","CouponSale","Credits","isAvaliable","uqsProduct","BottomDiscount","brandDiscountMap","lastDiscount","discountPrice","thisDiscountSetting","max","multiple","IsInActivePeriod","startDate","newDate","format","COrder","cCoupon","hasCoupons","buyerAccountQResult","getDefaultInvoiceContact","getDefaultInvoiceType","getDefaultInvoiceInfo","FREIGHTFEEFIXED","getCouponValidationResult","vipCardCode","toString","getValidDiscounts","applyCoupon","nowDate","usedDate","getMonth","getDate","WebUserCoupon","couponType","WebUserCouponUsed","WebUserCredits","credits","WebUserCreditsUsed","cPayment","openPayment","currentUserId","getValidCreditsForWebUser","getValidCouponsForWebUser","validCoupons","applyTo","openMyOrders","GetPendingPayment","valueOf","cInvoiceInfo","newInvoice","orderItemsGrouped","VRootCategory","categoryClick","categoryWapper","parent","openMainPage","renderRootCategory","children","productCategoryID","renderSubCategory","subsub","total","renderThirdCategory","rootCategories","root","VCategory","instruction","childWapper","instructionUi","instr","$","addClass","dangerouslySetInnerHTML","__html","innerHTML","CProductCategory","getCategoryInstruction","categoryId","ProductCategory","stopCache","GetRootCategory","secend","third","buildCategories","parentCategoryId","GetChildrenCategory","firstCategory","secendCategory","catId","f","pcid","categoryWaper","getCategoryChildren","rootCategory","searchByCategory","stylePig","backgroundImage","pig","opacity","position","VMember","recommendationCodeRef","member","recommendationCode","im","inviteCode","divPoints","pointThisWeek","pointAll","fansTitle","fansDetail","current","setReferrer","CMember","referrer","pop","internalStart","MemberAction","MemberRecommender","fans","About","marked","sections","post","phones","number","Row","ContactUs","phone","phoneIndex","eIndex","EditMeInfo","onItemChanged","newValue","preValue","userApi","userSetProp","saveLocalUser","onWebUserChanged","webUserData","changeWebUser","onWebUserContactChanged","webUserContactData","changeWebUserContact","webUserSchema","webUserUiSchema","webUserContactSchema","webUserContactUiSchema","tvAddress","tvCountry","tvCurrency","tvProduct","tvContact","appConfig","appName","version","tvs","productx","radiox","loginTop","oem","privacy","AboutThisApp","yearN","links","margin","resetAll","checkVersion","VMe","about","contactUs","openPrivacy","aboutThisApp","changePassword","openContactList","openInvoice","openCouponManage","openFavorites","meInfo","userSpan","orderStates","os","aboutRows","component","iconClass","logOutRows","bk","exit","showLogout","EditMeInfoFirstOrder","webUserContacts","addContactFromAccount","actionButton","tips","onCompleted","tipsUI","onlyRequired","note","schemaArr","VFavorites","productsFavorites","VProductFavorateLabel","favoriteOrCancel","isProductFarirates","delProductFavorites","addProductFavorites","isMyFarirates","getProductIsFavorites","CFavorites","myFavorites","productid","searchByFavorites","getMyFavirates","createDate","VLoginState","renderCarLabel","VLoginState_Web","target","renderCarLabel_Web","CMe","pick","cPointProduct","openMyCouponManage","cMyFavorites","fn","showPrivacyPage","getCommonText","textId","CommonText","callback","showLoginOut","renderCartLabel_Web","VMain","faceTabs","notify","tabsProps","getTips","invalidTip","COUPONBASE","VCoupon","renderRight","showDiscountSetting","vipCardId","renderCardDescription","cardDescription","discountShow","renderActivityDescription","renderCardReveal","CardReveal","isOpenMyCouponManage","useddate","expireddate","getEasyDate","getCodeShow","p1","p2","couponUi","VVIPCard","VCredits","VCouponUsed","year","VSharedCoupon","products","drawCouponUI","sharedCouponValidationResult","couponDrawed","loginWhenDrawCoupon","countDown","showTips","waitingSeconds","setInterval","tipsAfterDawed","renderCouponBase","VCoupleAvailable","couponInput","vipCardForWebUser","coupons","applySelectedCoupon","vipCardUI","couponsForWebUser","creditsForWebUser","VVIPCardDiscount","renderVIPCardDiscountSetting","VCouponManage","currentStatus","oss","toolTip","getCoupons","receiveCoupon","drawCoupon","applyTip","conductReveal","CouponViewOrUse","CCoupon","couponPager","getCouponDiscountSetting","getValidCardForWebUser","getValidMusterForWebUser","getMyUsedCoupon","getMyExpiredCoupon","shift","getValidVipCardForWebUser","validVIPCardForWebUser","validCouponsForWebUser","validCreditsForWebUser","creditsCode","showSharedVIPCard","vipcard","productids","autoDrawCouponBase","getProducts","showSharedCoupon","showSharedCredits","couponBaseCode","allowCurrentUser","creditsId","vipCardType","VYncProjects","YncProjectsItems","headerClassName","renderItem","returnYncProject","ProjectName","CYncProjects","OrganCode","UserId","YncProjectsResponse","getYncProjects","FormData","append","method","body","headers","json","response","VLottery","prize","lottery","lotteryProducts","productsLib","decreasingNumberOfDraws","winningProduct","speed","currIndex","isLottery","indexMR","mR","roll","clearTimeout","lotterySuccess","winning","totalCount","renderLotteryBtn","remainingNumOfDraws","display","renderPrizesBlock","transform","borderRight","borderLeft","transformOrigin","openMyLotteryPrize","borderRadius","bottom","VMyLotteryPrize","renderMyPrize","myPrize","openMyPrizeOrder","prizeOrder","CLottery","openLotteryProduct","getLotteryProducts","getLotteryNumOfDraws","basedChanceHandlePrizes","getMyPrizes","addMyPrize","PR","base","totalNumPrizes","Array","from","k","flat","VPointSign","rulesNum","renderRule","ruleContent","boxShadow","padStart","demandBlock","IsSignin","signinval","signinConsecutiveDays","signTopicMap","积分图标P","已签到","Homemadelogo","handleChange","CSignIn","isSignined","addSigninSheet","getSigninConsecutiveDays","getSigninHistory","checkIsSignin","Signin","GetPointSigninHistory","PayModes","wxpaylogo","cornerMarker","wxpayproposed","isPPSD","exponent","VPayment","resetPayModes","PPSD","OTHER","allPayMode","selectPayMode","chosenOrderBrief","payByOrder","orderBrief","orderNo","on","payModeItem","payMode","isCheck","choosePayMode","toPay","submitPayOrder","pays","CPayment","getChannels","payment","channels","channel","message","url","A","CApp","cMember","cYncProjects","afterStart","elements","login","productlist","productList","productdetail","productDetail","carts","hookElements","onfocus","ReactDOM","renderLoginState_Web","search","qs","toLowerCase","pathname","SalesRegion","Language","showMain","prouductBoxId","initTabName","getElementById","renderLoginState","dispose","setSettings","App","onLogined","notLogined","Boolean","hostname","elRoot","createElement","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c6ffdad1.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { Render } from './render';\r\n\r\nexport interface MainSubs<M, S> {\r\n    main: M;\r\n    subs: S[];\r\n}\r\n\r\nexport abstract class ViewBase<T> {\r\n    model: T;\r\n    abstract render(): JSX.Element;\r\n}\r\n\r\nexport class ViewMainSubs<M, S> extends ViewBase<MainSubs<M, S>> {\r\n    protected main: Render<M>;\r\n    protected sub: Render<S>;\r\n    constructor(main: Render<M>, sub: Render<S>) {\r\n        super();\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    protected subsContainer(subViews: JSX.Element[]): JSX.Element {\r\n        return <div>{subViews}</div>\r\n    }\r\n\r\n    protected renderSubItems(): JSX.Element[] {\r\n        let { subs } = this.model;\r\n        if (!subs) return null;\r\n        let subViews: JSX.Element[] = subs.map((v, index) => {\r\n            return <this.sub key={index} {...v} />;\r\n        });\r\n        return subViews;\r\n    }\r\n\r\n    protected renderSubs = (): JSX.Element => {\r\n        return this.subsContainer(this.renderSubItems());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        let { main } = this.model;\r\n        return <>\r\n            <this.main {...main} />\r\n            <this.renderSubs />\r\n        </>;\r\n    }\r\n}\r\n\r\nexport class ViewListMainSubs<M, S> extends ViewBase<MainSubs<M, S>[]> {\r\n    private row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>;\r\n    private main: Render<M>;\r\n    private sub: Render<S>;\r\n    constructor(\r\n        row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>,\r\n        main: Render<M>,\r\n        sub: Render<S>) {\r\n        super();\r\n        this.row = row;\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    render(): JSX.Element {\r\n        return <>\r\n            {this.model.map((v, index) => {\r\n                let view = new this.row(this.main, this.sub);\r\n                view.model = v;\r\n                return <React.Fragment key={index}>{view.render()}</React.Fragment>;\r\n            })}\r\n        </>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { MainProduct, SubPack } from './model';\r\n\r\nexport type Render<T> = (model: T) => JSX.Element;\r\n\r\nexport function renderMainProduct(model: MainProduct): JSX.Element {\r\n    return <div>\r\n        {model.description}\r\n    </div>\r\n}\r\n\r\nexport function renderSubPack(model: SubPack): JSX.Element {\r\n    let { pack, vipPrice, price, quantity, amount } = model;\r\n    return <div>\r\n        {pack.unit}, {vipPrice}, {price}, {quantity}, {amount}\r\n    </div>\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/logo_pointShop.644af5a6.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/homeTopicMap.89cdf192.jpg\";","module.exports = __webpack_public_path__ + \"static/media/TriangleShadingO.abe107d7.png\";","module.exports = __webpack_public_path__ + \"static/media/TriangleShadingT.7a55757e.png\";","module.exports = __webpack_public_path__ + \"static/media/signTopicMap.928fc4cf.png\";","module.exports = __webpack_public_path__ + \"static/media/signViceMap.6387bb88.png\";","module.exports = __webpack_public_path__ + \"static/media/Homemadelogo.06f15feb.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/wxpaylogo.0980c80b.png\";","module.exports = __webpack_public_path__ + \"static/media/alipaylogo.b9754e2d.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/alipayproposed.d1c88202.png\";","module.exports = __webpack_public_path__ + \"static/media/unionpaylogo.e2ac85ec.png\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 142;","module.exports = __webpack_public_path__ + \"static/media/giftPlate.015bdb05.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/infb.ce9e0db2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/pig.772a31a6.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/已签到.244fa3d6.png\";","import { CartPackRow } from \"cart/Cart\";\r\n\r\nexport function groupByProduct(packItems: any[]) {\r\n    let result: any[] = [];\r\n    for (let packItem of packItems.sort((a, b) => a.price - b.price)) {\r\n        let { product, pack, quantity, price, retail, currency } = packItem;\r\n        let packRow: CartPackRow = {\r\n            pack: pack,\r\n            price: price,\r\n            retail: retail,\r\n            quantity: quantity,\r\n            currency: currency && currency.id\r\n        }\r\n        let cpi = result.find(e => e.product.id === product.id);\r\n        if (cpi === undefined) {\r\n            cpi = { product: product, packs: [] };\r\n            result.push(cpi);\r\n        }\r\n        cpi.packs.push(packRow);\r\n    }\r\n    return result;\r\n}","import { observable, autorun, IReactionDisposer } from 'mobx';\r\nimport { Action, Query, TuidDiv, BoxId, Tuid } from 'tonva';\r\n//import { CCartApp } from '../CCartApp';\r\nimport { PackRow } from 'product/Product';\r\nimport { groupByProduct } from 'tools/groupByProduct';\r\nimport { CApp } from '../CApp';\r\n\r\nexport interface CartItem2 {\r\n    product: BoxId;\r\n    packs: CartPackRow[];\r\n    $isSelected?: boolean;\r\n    $isDeleted?: boolean;\r\n    createdate: number;\r\n}\r\n\r\nexport interface CartPackRow extends PackRow {\r\n    /**\r\n     * 销售成交价（在购物车中是目录价或市场活动价或协议价的最小值），订单中还会经过券的计算\r\n     */\r\n    price: number;\r\n\r\n    /**\r\n     * 订单中的初始销售成交价（订单中应用折扣券之前的价格）\r\n     */\r\n    priceInit?: number;\r\n    /**\r\n     * 订单中目录价\r\n     */\r\n    retail: number;\r\n    currency: any;\r\n}\r\n\r\nexport class Cart {\r\n    cApp: CApp;\r\n\r\n    private cartStore: CartStore;\r\n    private disposer: IReactionDisposer;\r\n\r\n    @observable data: any = {\r\n        list: observable<CartItem2>([]),\r\n    };\r\n    cartItems: CartItem2[];\r\n    count = observable.box<number>(0);\r\n    amount = observable.box<number>(0);\r\n    editButton = observable.box<boolean>(false);\r\n    constructor(cApp: CApp) {\r\n        this.cApp = cApp;\r\n        this.cartItems = this.data.list;\r\n        this.disposer = autorun(this.calcSum);\r\n    }\r\n\r\n    dispose() {\r\n        this.disposer();\r\n    }\r\n\r\n    protected calcSum = () => {\r\n        let count = 0, amount = 0;\r\n        for (let cp of this.cartItems) {\r\n            let { $isSelected, $isDeleted, packs } = cp;\r\n            if ($isDeleted === true || !($isSelected === true)) continue;\r\n            for (let pi of packs) {\r\n                let { price, quantity } = pi;\r\n                count += quantity;\r\n                if (price === Number.NaN || quantity === Number.NaN) continue;\r\n                amount += quantity * price;\r\n            }\r\n        }\r\n        this.count.set(count);\r\n        this.amount.set(parseFloat(amount.toFixed(2)));\r\n    }\r\n\r\n    async init(): Promise<void> {\r\n        let { isLogined, uqs, currentSalesRegion } = this.cApp;\r\n        if (isLogined)\r\n            this.cartStore = new CartRemote(this.cApp);\r\n        else\r\n            this.cartStore = new CartLocal(this.cApp);\r\n        let cartData = await this.cartStore.load();\r\n\r\n        // 初始化购物车中产品的目录价\r\n        let { product } = uqs;\r\n        let { PriceX } = product;\r\n        let promises: PromiseLike<void>[] = [];\r\n        cartData.forEach((e: any) => promises.push(PriceX.obj({ product: e.product, pack: e.pack, salesRegion: currentSalesRegion })));\r\n        let prices = await Promise.all(promises);\r\n        for (let index = cartData.length - 1; index >= 0; index--) {\r\n            let e: any = cartData[index];\r\n            let priceMap: any = prices.find((v: any) => Tuid.equ(v.product, e.product)\r\n                && Tuid.equ(v.pack, e.pack) && v.discountinued === 0 && v.expireDate > Date.now());\r\n            if (priceMap && priceMap.retail) {\r\n                e.retail = priceMap.retail;\r\n            } else {\r\n                cartData.splice(index, 1);\r\n            }\r\n        }\r\n\r\n        let cartDataGrouped = groupByProduct(cartData);\r\n        if (cartDataGrouped && cartDataGrouped.length > 0) {\r\n            for (let i = 0; i < cartDataGrouped.length; i++) {\r\n                let { product, packs, createdate } = cartDataGrouped[i];\r\n                this.cartItems.push({\r\n                    product: product,\r\n                    packs: packs,\r\n                    $isSelected: true,\r\n                    $isDeleted: false,\r\n                    createdate: createdate,\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    /*\r\n    private mergeToRemote(localItems: any[]) {\r\n        let originLength = localItems.length;\r\n        let nowLength = this.items.length;\r\n        if (originLength > 0) {\r\n            if (nowLength > 0) {\r\n                // 合并，谁覆盖谁？\r\n                for (let i = 0; i < originLength; i++) {\r\n                    let { product: tempProduct, pack: tempPack } = localItems[i];\r\n                    let cartItemExits = this.items.find(v => v.product === tempProduct && v.pack === tempPack);\r\n                    if (cartItemExits) {\r\n                        // 如果本地购物车中的产品已经过期，则要删除\r\n                    } else {\r\n                        this.items.push(localItems[i]);\r\n                    }\r\n                }\r\n            } else {\r\n                this.items.push(...localItems);\r\n            }\r\n            // 保存到远程\r\n        }\r\n    }\r\n    */\r\n\r\n    getQuantity(productId: number, packId: number): number {\r\n        let cp = this.cartItems.find(v => v.$isDeleted !== true && Tuid.equ(v.product, productId));\r\n        if (!cp) return 0;\r\n        let cpp = cp.packs.find(v => v.pack.id === packId);\r\n        return cpp === undefined ? 0 : cpp.quantity;\r\n    }\r\n\r\n    isDeleted(productId: number): boolean {\r\n        let i = this.cartItems.findIndex(v => v.$isDeleted === true && Tuid.equ(v.product, productId));\r\n        return i !== -1;\r\n    }\r\n\r\n    getSelectedItems(): CartItem2[] {\r\n        return this.cartItems.filter(v => {\r\n            let { $isSelected, $isDeleted } = v;\r\n            return $isSelected === true && $isDeleted !== true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    add = async (product: BoxId, pack: BoxId, quantity: number, price: number, retail: number, currency: any) => {\r\n        let cartItemExists = this.cartItems.find((e) => Tuid.equ(e.product, product));\r\n        if (!cartItemExists) {\r\n            cartItemExists = {\r\n                product: product,\r\n                packs: [{ pack: pack, quantity: quantity, price: price, retail: retail, currency: currency }],\r\n                $isSelected: true,\r\n                $isDeleted: false,\r\n                createdate: Date.now()\r\n            };\r\n            this.cartItems.push(cartItemExists);\r\n        }\r\n        else {\r\n            let { $isDeleted, packs } = cartItemExists;\r\n            if ($isDeleted === true)\r\n                packs.splice(0);\r\n\r\n            let packExists: CartPackRow = packs.find(e => Tuid.equ(e.pack, pack));\r\n            if (packExists === undefined) {\r\n                let added = false;\r\n                for (let index = packs.length - 1; index >= 0; index--) {\r\n                    if (packs[index].price < price) {\r\n                        packs.splice(index + 1, 0, { pack: pack, quantity: quantity, price: price, retail: retail, currency: currency });\r\n                        added = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!added)\r\n                    packs.unshift({ pack: pack, quantity: quantity, price: price, retail: retail, currency: currency })\r\n                // packs.push();\r\n            }\r\n            else {\r\n                packExists.quantity = quantity;\r\n                packExists.price = price;\r\n                packExists.currency = currency;\r\n            }\r\n            cartItemExists.$isSelected = true;\r\n            cartItemExists.$isDeleted = false;\r\n            cartItemExists.createdate = Date.now();\r\n        }\r\n\r\n        await this.cartStore.storeCart(product, pack, quantity, price, currency);\r\n    }\r\n    removeStrike = async (data: any) => {\r\n        console.log(data);\r\n        // data.forEach((el: CartItem2) => {\r\n        //     el.packs.forEach(async (v: any) => {\r\n        //         await this.cartStore.storeCart(el.product, v.pack, v.quantity, v.price, v.currency);\r\n        //     })\r\n        // });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param rows\r\n     */\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        if (rows && rows.length > 0) {\r\n            rows.forEach(pe => {\r\n                let cartItemIndex = this.cartItems.findIndex(e => e.product.id === pe.productId);\r\n                if (cartItemIndex >= 0) {\r\n                    let cartItem = this.cartItems[cartItemIndex];\r\n                    let i = cartItem.packs.findIndex(e => e.pack.id === pe.packId)\r\n                    if (i >= 0) {\r\n                        cartItem.packs.splice(i, 1);\r\n                        if (cartItem.packs.length === 0) {\r\n                            this.cartItems.splice(cartItemIndex, 1);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            this.cartStore.removeFromCart(rows);\r\n        }\r\n    }\r\n\r\n    /*\r\n    setDeletedMark(productId: number, packId: number) {\r\n        let cp = this.items.find(v => v.$isDeleted !== true && v.product === productId && v.pack === packId);\r\n        if (cp !== undefined)\r\n            cp.$isDeleted = true;\r\n    }\r\n\r\n    async removeDeletedItem() {\r\n        let rows: { product: number, packItem: CartPackRow }[] = [];\r\n        for (let cp of this.items) {\r\n            let { quantity, $isDeleted } = cp;\r\n            if ($isDeleted === true || quantity === 0) {\r\n                // TODO:\r\n            }\r\n        }\r\n        if (rows.length === 0) return;\r\n        await this.cartStore.removeFromCart(rows);\r\n\r\n        // 下面是从本地数据结构中删除\r\n        for (let cp of this.items) {\r\n            let { packs } = cp;\r\n            let packIndexes: number[] = [];\r\n            let len = packs.length;\r\n            for (let i = 0; i < len; i++) {\r\n                if (packs[i].quantity === 0) packIndexes.push(i);\r\n            }\r\n            for (let i = packIndexes.length - 1; i >= 0; i--) packs.splice(packIndexes[i], 1);\r\n        }\r\n\r\n        let itemIndexes: number[] = [];\r\n        let len = this.items.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let { $isDeleted, packs } = this.items[i];\r\n            if ($isDeleted === true || packs.length === 0) itemIndexes.push(i);\r\n        }\r\n        for (let i = itemIndexes.length - 1; i >= 0; i--) this.items.splice(itemIndexes[i], 1);\r\n    }\r\n\r\n    async clear() {\r\n        this.items.forEach(v => v.$isDeleted = true);\r\n        await this.removeDeletedItem();\r\n    }\r\n    */\r\n\r\n}\r\n\r\nabstract class CartStore {\r\n\r\n    protected cApp: CApp;\r\n    constructor(cApp: CApp) {\r\n        this.cApp = cApp;\r\n    }\r\n    abstract get isLocal(): boolean;\r\n    abstract async load(): Promise<CartItem2[]>;\r\n    abstract async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any): Promise<void>;\r\n    abstract async removeFromCart(rows: [{ productId: number, packId: number }]): Promise<void>;\r\n}\r\n\r\nclass CartRemote extends CartStore {\r\n    //private getCartQuery: Query;\r\n    //private setCartAction: Action;\r\n    //private removeFromCartAction: Action;\r\n\r\n    get isLocal(): boolean { return false }\r\n\r\n    /*\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        let { cUqOrder } = this.cApp;\r\n        this.getCartQuery = cUqOrder.query('getcart')\r\n        this.setCartAction = cUqOrder.action('setcart');\r\n        this.removeFromCartAction = cUqOrder.action('removefromcart');\r\n    }\r\n    */\r\n\r\n    async load(): Promise<CartItem2[]> {\r\n        let ret = await this.cApp.uqs.order.GetCart.page(undefined, 0, 100);\r\n        return ret && ret.$page && ret.$page.filter(v => v.product && v.pack) as any;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param product\r\n     * @param pack\r\n     * @param quantity\r\n     * @param price\r\n     * @param currency\r\n     */\r\n    async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any) {\r\n        await this.cApp.uqs.order.SetCart.submit({\r\n            product: product.id,\r\n            pack: pack.id,\r\n            price: price,\r\n            currency: currency,\r\n            quantity: quantity\r\n        });\r\n    }\r\n\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        let param = rows.map(e => { return { product: e.productId, pack: e.packId } });\r\n        await this.cApp.uqs.order.RemoveFromCart.submit({ rows: param });\r\n    }\r\n}\r\n\r\nconst LOCALCARTNAME: string = \"cart\";\r\nclass CartLocal extends CartStore {\r\n\r\n    private cartData: any[] = [];\r\n    private productTuid: Tuid;\r\n    private packTuid: TuidDiv;\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        this.productTuid = this.cApp.uqs.product.ProductX;\r\n        this.packTuid = this.productTuid.div('packx');\r\n    }\r\n\r\n    get isLocal(): boolean { return true }\r\n\r\n    async load(): Promise<CartItem2[]> {\r\n        try {\r\n            let cartstring = localStorage.getItem(LOCALCARTNAME);\r\n            if (cartstring === null) return [];\r\n            this.cartData = JSON.parse(cartstring);\r\n            let cartDataBoxed = [];\r\n            for (let i = 0; i < this.cartData.length; i++) {\r\n                let { product, pack, quantity, price, currency } = this.cartData[i];\r\n                if (product && pack) {\r\n                    let productbox = this.productTuid.boxId(product);\r\n                    let packbox = this.packTuid.boxId(pack);\r\n                    cartDataBoxed.push({\r\n                        product: productbox,\r\n                        pack: packbox,\r\n                        quantity: quantity,\r\n                        price: price,\r\n                        currency: currency\r\n                    } as any)\r\n                }\r\n            }\r\n            return cartDataBoxed;\r\n        }\r\n        catch (e) {\r\n            localStorage.removeItem(LOCALCARTNAME);\r\n            this.cartData = [];\r\n            return this.cartData;\r\n        }\r\n    }\r\n\r\n    async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any) {\r\n        let cartItemExists = this.cartData.find(e => Tuid.equ(e.product, product) && TuidDiv.equ(e.pack, pack));\r\n        if (cartItemExists !== undefined) {\r\n            cartItemExists.quantity = quantity;\r\n            cartItemExists.price = price;\r\n            cartItemExists.currency = currency && currency.id;\r\n        } else\r\n            this.cartData.push({ product: product.id, pack: pack.id, quantity: quantity, price: price, currency: currency && currency.id });\r\n        localStorage.setItem(LOCALCARTNAME, JSON.stringify(this.cartData));\r\n    }\r\n\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n\r\n        rows.forEach(e => {\r\n            let i = this.cartData.findIndex(v => v.product = e.productId && v.pack === e.packId);\r\n            if (i >= 0)\r\n                this.cartData.splice(i, 1);\r\n        })\r\n        localStorage.setItem(LOCALCARTNAME, JSON.stringify(this.cartData));\r\n    }\r\n}","import { User } from 'tonva';\r\nimport { BoxId } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\nimport { UQs } from './uqs';\r\n\r\nexport class WebUser {\r\n\r\n    id: number;\r\n    name: string;\r\n    nick?: string;\r\n    icon?: string;\r\n    guest: number;\r\n    token: string;\r\n\r\n    @observable firstName: string;\r\n    gender: string;\r\n    salutation: string;\r\n    @observable organizationName: string;\r\n    departmentName: string;\r\n\r\n    get defaultOrganizationName(): string {\r\n        return this.organizationName ||\r\n            (this.webUserSettings &&\r\n                (\r\n                    (this.webUserSettings.invoiceInfo && this.webUserSettings.invoiceInfo.obj['title'])\r\n                    || (this.webUserSettings.shippingContact && this.webUserSettings.shippingContact.obj['organizationName'])\r\n                    || (this.webUserSettings.invoiceContact && this.webUserSettings.invoiceContact.obj['organizationName'])\r\n                )\r\n            );\r\n    }\r\n\r\n    get defaultName(): string {\r\n        return this.firstName ||\r\n            (this.webUserSettings &&\r\n                ((\r\n                    this.webUserSettings.shippingContact && this.webUserSettings.shippingContact.obj['name'])\r\n                    || (this.webUserSettings.invoiceContact && this.webUserSettings.invoiceContact.obj['name'])\r\n                )\r\n            );\r\n    }\r\n\r\n    get defaultMobile(): string {\r\n        return this.mobile ||\r\n            (this.webUserSettings &&\r\n                ((\r\n                    this.webUserSettings.shippingContact && this.webUserSettings.shippingContact.obj['mobile'])\r\n                    || (this.webUserSettings.invoiceContact && this.webUserSettings.invoiceContact.obj['mobile'])\r\n                )\r\n            );\r\n    }\r\n\r\n    telephone: string;\r\n    @observable mobile: string;\r\n    email: string;\r\n    fax: string;\r\n    address: BoxId;\r\n    addressString: string;\r\n    zipCode: string;\r\n    VIPDiscount: any;\r\n    webUserVIPCard: any;\r\n    @computed get allowOrdering() {\r\n        // 这个地方要改成相关账号吧？\r\n        return this.currentCustomer !== undefined ||\r\n            (this.mobile && this.firstName && this.organizationName);\r\n    }\r\n\r\n    private _user: User;\r\n\r\n    private webUserSettings: any;\r\n\r\n    private uqs: UQs;\r\n\r\n\r\n    constructor(uqs: UQs) {// cUsqWebUser: CUq, cUsqCustomer: CUq) {\r\n        this.uqs = uqs;\r\n    }\r\n\r\n    setUser = async (user: User) => {\r\n        if (user !== undefined) {\r\n            this._user = user;\r\n            this.id = user.id;\r\n            this.name = user.name;\r\n            this.nick = user.nick;\r\n            this.icon = user.icon;\r\n            this.guest = user.guest;\r\n            this.token = user.token;\r\n\r\n            await this.loadWebUser();\r\n        }\r\n    }\r\n\r\n    private async loadWebUser() {\r\n        let { id, _user } = this;\r\n        if (this._user !== undefined) {\r\n            let { webuser: webUserTuid, salesTask } = this.uqs;\r\n            let { WebUser, WebUserContact, WebUserSetting, WebUserCustomer, WebUserBuyerAccount, RecordLogin } = webUserTuid;\r\n            let webUser = await WebUser.load(this.id);\r\n            if (webUser) {\r\n                let { firstName, gender, salutation, organizationName, departmentName } = webUser;\r\n                this.firstName = firstName;\r\n                this.gender = gender;\r\n                this.salutation = salutation;\r\n                this.organizationName = organizationName;\r\n                this.departmentName = departmentName;\r\n                this.webUserVIPCard = await webUserTuid.WebUserVIPCard.obj({ webUser: this });\r\n                if (this.webUserVIPCard !== undefined) {\r\n                    // this.VIPDiscount = await vipCardType.VIPCardTypeDiscount.query({ vipCard: this.webUserVIPCard.vipCardType })\r\n                    this.VIPDiscount = await salesTask.VIPCardDiscount.query({ coupon: this.webUserVIPCard.vipCard });\r\n                }\r\n\r\n                await RecordLogin.submit({ webUser: webUser, ip: \"\", app: \"shop\" });\r\n            }\r\n\r\n\r\n            let contact = await WebUserContact.obj({ \"webUser\": id });\r\n            if (contact) {\r\n                let { telephone, mobile, email, fax, address, addressString, zipCode } = contact;\r\n                this.telephone = telephone;\r\n                this.mobile = mobile;\r\n                this.email = email;\r\n                this.fax = fax;\r\n                this.address = address;\r\n                this.addressString = addressString;\r\n                this.zipCode = zipCode;\r\n            }\r\n\r\n            this.webUserSettings = await WebUserSetting.obj({ webUser: id }) || { webUser: id };\r\n\r\n            let value = await WebUserCustomer.obj({ webUser: id });\r\n            if (value !== undefined) {\r\n                this.currentCustomer = new Customer(value.customer, this.uqs);\r\n                await this.currentCustomer.init();\r\n            }\r\n            let accountValue = await WebUserBuyerAccount.query({ webUser: id });\r\n            let { ret: buyerAccounts } = accountValue;\r\n            if (buyerAccounts && buyerAccounts.length > 0) {\r\n                // TODO: 暂时不考虑有多个相关账号的情况\r\n                this.buyerAccount = buyerAccounts[0].buyerAccount;\r\n            }\r\n        }\r\n    }\r\n\r\n    get isLogined(): boolean {\r\n        return this._user !== undefined;\r\n    }\r\n    get hasCustomer(): boolean {\r\n        return this.currentCustomer !== undefined;\r\n    }\r\n    currentCustomer: Customer;\r\n    buyerAccount: any;\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            return await this.currentCustomer.getContacts()\r\n        }\r\n        */\r\n        return await this.uqs.webuser.WebUserContacts.table({ webUser: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.addContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        await this.uqs.webuser.WebUserContacts.add({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async addContactFromAccount() {\r\n        let { firstName, organizationName, mobile, telephone, email, address, addressString } = this;\r\n        if (firstName && organizationName && mobile && address && addressString) {\r\n            let newContact = await this.uqs.customer.Contact.save(undefined, {\r\n                name: firstName,\r\n                organizationName: organizationName,\r\n                mobile: mobile,\r\n                telephone: telephone,\r\n                email: email,\r\n                address: address,\r\n                addressString: addressString\r\n            })\r\n            if (newContact) {\r\n                let { id: newContactId } = newContact;\r\n                await this.addContact(newContactId);\r\n                let newContactBox = this.uqs.customer.Contact.boxId(newContactId);\r\n                this.setDefaultShippingContact(newContactBox);\r\n            }\r\n        }\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.delContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        await this.uqs.webuser.WebUserContacts.del({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async getSetting() {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            return this.currentCustomer.getSetting();\r\n        }\r\n        */\r\n        return this.webUserSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultShippingContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        this.webUserSettings.shippingContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoiceContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        this.webUserSettings.invoiceContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoice(invoiceTypeId, invoiceInfoId);\r\n            return;\r\n        }\r\n        */\r\n        // await this.webUserSettingMap.add({ webUser: this.id, arr1: [{ invoiceType: invoiceTypeId, invoiceInfo: invoiceInfoId }] });\r\n        this.webUserSettings.invoiceType = invoiceTypeId;\r\n        this.webUserSettings.invoiceInfo = invoiceInfoId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async saveDefaultSettings() {\r\n        await this.uqs.webuser.WebUserSetting.add(this.webUserSettings);\r\n    }\r\n\r\n\r\n    async changeWebUser(webUser: any) {\r\n        await this.uqs.webuser.WebUser.save(this.id, webUser);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        webUserContact.webUser = this.id;\r\n        await this.uqs.webuser.WebUserContact.add(webUserContact);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async getPoints() {\r\n        return await this.uqs.积分商城.getPoints.table({ webuser: this.id });\r\n    }\r\n\r\n};\r\n\r\nexport class Customer {\r\n    private readonly uqs: UQs;\r\n    id: number;\r\n\r\n    private customerSettings: any;\r\n    Contractor: any;\r\n\r\n    constructor(customer: BoxId, uqs: UQs) {\r\n        this.id = customer.id;\r\n        this.uqs = uqs;\r\n    };\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        return await this.uqs.customer.CustomerContacts.table({ customer: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        await this.uqs.customer.CustomerContacts.add({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        await this.uqs.customer.CustomerContacts.del({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async init() {\r\n        this.customerSettings = await this.uqs.customer.CustomerSetting.obj({ customer: this.id }) || { customer: this.id };\r\n        let customerContactorMap: any = await this.uqs.customer.CustomerContacts.obj({ customer: this.id });\r\n        if (customerContactorMap)\r\n            this.Contractor = customerContactorMap.contractor;\r\n    }\r\n\r\n    getSetting() {\r\n        return this.customerSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        this.customerSettings.shippingContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        this.customerSettings.invoiceContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        this.customerSettings.invoiceType = invoiceTypeId;\r\n        this.customerSettings.invoiceInfo = invoiceInfoId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultSettings() {\r\n        await this.uqs.customer.CustomerSetting.add(this.customerSettings);\r\n    }\r\n\r\n}","import { CSub, CBase, CAppBase, IConstructor } from 'tonva';\r\nimport { UQs } from './uqs';\r\nimport { CApp } from './CApp';\r\n\r\nexport abstract class CUqBase extends CBase {\r\n    get cApp(): CApp { return this._cApp; }\r\n    protected get uqs(): UQs { return this._uqs as UQs };\r\n}\r\n\r\nexport abstract class CUqSub<T extends CUqBase> extends CSub<T> {\r\n    get cApp(): CApp { return this.cApp; }\r\n    protected get uqs(): UQs { return this._uqs as UQs };\r\n    protected get owner(): T { return this._owner as T }\r\n}\r\n\r\nexport abstract class CUqApp extends CAppBase {\r\n    get uqs(): UQs { return this._uqs };\r\n\r\n    protected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n        let c = new type(this);\r\n        c.init();\r\n        return c;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav } from 'tonva';\r\nimport { CHome } from './CHome';\r\nimport { SearchBox } from 'tonva';\r\n\r\nexport class VSearchHeader extends View<CHome> {\r\n\r\n    private onSearch = async (key: string, param: 'home' | 'insearch' | 'productdetail') => {\r\n        let { cProduct, topKey } = this.controller.cApp;\r\n        if (param !== 'home') {\r\n            nav.popTo(topKey);\r\n        }\r\n\r\n        cProduct.start(key);\r\n    }\r\n\r\n    render(param: 'home' | 'insearch' | 'productdetail') {\r\n        let size: any = param === 'home' ? \"md\" : 'sm';\r\n        return <SearchBox className=\"w-100\"\r\n            size={size}\r\n            onSearch={(key: string) => this.onSearch(key, param)}\r\n            placeholder=\"搜索品名、编号、CAS、MDL等\" />\r\n    }\r\n}","import * as React from 'react';\r\nimport { LMR, FA, View } from 'tonva';\r\nimport logo from '../images/logo.png';\r\nimport { CHome } from './CHome';\r\nimport 扫一扫 from 'images/扫一扫.png';\r\nexport class VSiteHeader extends View<CHome> {\r\n    render() {\r\n        let currentSalesRegion = <FA name=\"globe\" />\r\n        let left = <img className=\"m-1 ml-2\" src={logo} alt=\"logo\" style={{ height: \"3rem\", width: \"2.5rem\" }} />;\r\n        //let cart = this.controller.cApp.cCart.renderCartLabel();\r\n        // let right = undefined; // \r\n        let right = undefined;\r\n        /* if (navigator.userAgent.indexOf(\"Html5Plus\") > -1) {\r\n            right = <img src={扫一扫} alt=\"\" className=\"mr-2\" style={{ width: 24 }} onClick={this.controller.openScanCode} />;\r\n        } */\r\n        /*\r\n        <div className=\"d-flex flex-row mr-1 align-items-center\">\r\n            {currentSalesRegion} &nbsp;\r\n            <button onClick={()=>nav.start()}>Try</button>\r\n        </div>;*/\r\n        return <LMR\r\n            className=\"mb-1 align-items-center bg-white\"\r\n            left={left} right={right}>\r\n            <div className=\"px-3 py-4\">\r\n                {this.controller.renderSearchHeader('md')}\r\n            </div>\r\n        </LMR>\r\n        //<div className=\"h4 px-3 mb-0\">百灵威科技</div>\r\n    }\r\n}","import React from 'react';\r\nimport { View } from 'tonva';\r\nimport { CHome } from './CHome';\r\nimport Slider from \"react-slick\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nconst sliderSetting = {\r\n    dots: false,\r\n    infinite: true,\r\n    speed: 500,\r\n    autoplay: true,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n    arrows: false,\r\n    isArrows: true,\r\n    isDots: true\r\n};\r\n\r\nexport class VSlider extends View<CHome> {\r\n\r\n    public render(param: any) {\r\n\r\n        let { banners } = this.controller;\r\n        if (banners.length > 0) {\r\n            let random = Math.floor(Math.random() * 10 % banners.length);\r\n            return <img src={banners[random].path} className=\"d-block w-100\" alt=\"...\"></img>\r\n        }\r\n\r\n        /**\r\n        return <Slider {...sliderSetting} className=\"bg-white\" >\r\n            {this.controller.banners.map((banner, index) => <div key={index} >\r\n                <img src={banner.path} className=\"d-block w-100\" alt=\"...\"></img>\r\n            </div>)}\r\n        </Slider>\r\n        **/\r\n    }\r\n}\r\n","export let browser = {\r\n    versions: function () {\r\n        var u = navigator.userAgent, app = navigator.appVersion;\r\n        return {\r\n            trident: u.indexOf('Trident') > -1,                            //IE内核\r\n            presto: u.indexOf('Presto') > -1,                              //opera内核\r\n            webKit: u.indexOf('AppleWebKit') > -1,                         //苹果、谷歌内核\r\n            gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') === -1,    //火狐内核\r\n            mobile: !!u.match(/AppleWebKit.*Mobile.*/),                    //是否为移动终端\r\n            ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),               //ios终端\r\n            android: u.indexOf('Android') > -1, //android终端或者uc浏览器\r\n            uc: u.indexOf('Linux') > -1, //android终端或者uc浏览器\r\n            iPhone: u.indexOf('iPhone') > -1,                              //是否为iPhone或者QQHD浏览器\r\n            iPad: u.indexOf('iPad') > -1,                                  //是否iPad\r\n            webApp: u.indexOf('Safari') === -1,                             //是否web应该程序，没有头部与底部\r\n            html5Plus: u.indexOf('Html5Plus') > -1                      //是否微信 （2015-01-22新增）\r\n        };\r\n    }()\r\n};\r\n","import AnalyticalChemistry from './images/AnalyticalChemistry.png';\r\nimport LabSupplies from './images/LabSupplies.png';\r\nimport LifeScience from './images/LifeScience.png';\r\nimport MaterialScience from './images/MaterialScience.png';\r\nimport OrganicChemistry from './images/OrganicChemistry.png';\r\nimport { env } from 'tonva';\r\n\r\n\r\n// 生产配置\r\nconst GLOABLE_PRODUCTION = {\r\n    CHINA: 44,\r\n    CHINESE: 196,\r\n    SALESREGION_CN: 1,\r\n    ROOTCATEGORY: {\r\n        47: {\r\n            src: OrganicChemistry,\r\n            labelColor: 'text-info',\r\n        },\r\n        470: {\r\n            src: AnalyticalChemistry,\r\n            labelColor: 'text-success',\r\n        },\r\n        1013: {\r\n            src: LifeScience,\r\n            labelColor: 'text-danger',\r\n        },\r\n        1219: {\r\n            src: MaterialScience,\r\n            labelColor: 'text-warning',\r\n        },\r\n        1545: {\r\n            src: LabSupplies,\r\n            labelColor: 'text-primary',\r\n        },\r\n    } as any,\r\n    TIPDISPLAYTIME: 3000,\r\n    ANDROIDAPPADDRESS: \"https://shop.jkchemical.com/download/jk-shop.apk\",\r\n    PIRVACYURL: \"https://shop.jkchemical.com/privacy/shop.txt\",\r\n    CONTENTSITE: \"https://web.jkchemical.com\",\r\n    // CONTENTSITE: \"http://localhost:6061\",\r\n\r\n}\r\n\r\n// 测试环境配置\r\nconst GLOABLE_TEST = {\r\n    CHINA: 43,\r\n    CHINESE: 197,\r\n    SALESREGION_CN: 4,\r\n    ROOTCATEGORY: {\r\n        7: {\r\n            src: OrganicChemistry,\r\n            labelColor: 'text-info',\r\n        },\r\n        430: {\r\n            src: AnalyticalChemistry,\r\n            labelColor: 'text-success',\r\n        },\r\n        986: {\r\n            src: LifeScience,\r\n            labelColor: 'text-danger',\r\n        },\r\n        1214: {\r\n            src: MaterialScience,\r\n            labelColor: 'text-warning',\r\n        },\r\n        1545: {\r\n            src: LabSupplies,\r\n            labelColor: 'text-primary',\r\n        },\r\n    } as any,\r\n    TIPDISPLAYTIME: 3000,\r\n    ANDROIDAPPADDRESS: \"https://shop.jkchemical.com/download/jk-shop.apk\",\r\n    PIRVACYURL: \"https://c.jkchemical.com/privacy/shop.txt\",\r\n    // CONTENTSITE: \"https://c.jkchemical.com/jk-web\",\r\n    CONTENTSITE: \"http://211.5.9.39:6061\",\r\n    // CONTENTSITE: \"http://localhost:6061\",\r\n}\r\n\r\nexport const GLOABLE = env.testing === true ? GLOABLE_TEST : GLOABLE_PRODUCTION;\r\n//export { GLOABLE_PRODUCTION as GLOABLE };\r\n//export { GLOABLE_TEST as GLOABLE };","import * as React from 'react';\r\nimport { Page, View, VPage } from 'tonva';\r\nimport { CHome } from './CHome';\r\nimport { VSiteHeader } from './VSiteHeader';\r\nimport { VSlider } from './VSlider';\r\nimport { browser } from 'tools/browser';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\nexport class VHome extends VPage<CHome> {\r\n\r\n    async open(param?: any) {\r\n        // this.openPage(this.page);\r\n    }\r\n\r\n    /*\r\n    render(param: any): JSX.Element {\r\n        return <this.pageContent />\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header={false}>\r\n            <this.pageContent />\r\n        </Page>;\r\n    };\r\n    */\r\n\r\n    downloadApp = () => {\r\n        if (browser.versions.android)\r\n            window.open(GLOABLE.ANDROIDAPPADDRESS);\r\n    }\r\n\r\n    header() {\r\n        let header = <></>;\r\n        if (!browser.versions.html5Plus && browser.versions.android) {\r\n            header = <div className=\"bg-warning w-100 px-1 d-flex justify-content-between\" onClick={this.downloadApp}>\r\n                <span className=\"pt-2 small text-danger\">\r\n                    APP购物更方便\r\n                </span>\r\n                <button type=\"button\" className=\"btn btn-primary btn-sm\">立即安装</button>\r\n            </div>\r\n        }\r\n        return header;\r\n    }\r\n\r\n    content() {\r\n        return <this.pageContent />\r\n    }\r\n\r\n    private pageContent = () => {\r\n        let { controller } = this;\r\n        let { renderCategoryRootList } = controller;\r\n        let siteHeader = this.renderVm(VSiteHeader);\r\n        return <>\r\n            {siteHeader}\r\n            <div className=\"mb-3\">\r\n                {this.renderVm(VSlider)}\r\n            </div>\r\n            {renderCategoryRootList()}\r\n        </>\r\n    };\r\n}","import * as React from 'react';\r\nimport { FA, nav } from 'tonva';\r\nimport classNames from 'classnames';\r\n\r\nexport const CustomHeaderTemplate = (content?: any, right?: any, bg?: any, textC?: any, back?: any) => {\r\n    return <header className={classNames('d-flex align-items-center p-0 justify-content-between', bg ? bg : 'bg-white')} style={{ background: bg, minHeight: '3rem' }}>\r\n        <nav className={`d-flex align-items-center justify-content-center ${textC ? textC : 'text-white'}`}\r\n            style={{ cursor: 'pointer', width: \"2.5rem\", height: \"2.3rem\", color: textC, }}\r\n            onClick={() => { nav.back(); if (back) back() }}>\r\n            <FA name=\"angle-left\" />\r\n        </nav>\r\n        <div className=\"flex-fill\">{content}</div>\r\n        <aside className=\"d-flex justify-content-end align-items-stretch\" style={{ minWidth: '2.3rem', padding: 2 }}>{right}</aside>\r\n    </header>\r\n}","import { observer } from 'mobx-react';\r\nimport * as React from 'react';\r\nimport { VPage } from 'tonva';\r\nimport { CustomHeaderTemplate } from 'tools/CustomHeaderTemplate';\r\nimport { CHome } from './CHome';\r\n\r\nconst ScanCodeTip: string = '只可扫本司产品二维码';\r\n\r\nexport class VScanCode extends VPage<CHome> {\r\n\r\n    scan: any;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    media = () => {\r\n        if (navigator.userAgent.indexOf(\"Html5Plus\") > -1) {\r\n            // @ts-ignore \r\n            this.scan = new plus.barcode.Barcode('bcid');\r\n            this.scan.onmarked = this.onmarked;\r\n            this.scan.start();\r\n        }\r\n    }\r\n\r\n    onmarked = async (type: any, result: any) => {\r\n        var text = '未知: ';\r\n        switch (type) {\r\n            // @ts-ignore \r\n            case plus.barcode.QR:\r\n                text = 'QR';\r\n                break;\r\n            // @ts-ignore \r\n            case plus.barcode.EAN13:\r\n                text = 'EAN13';\r\n                break;\r\n            // @ts-ignore \r\n            case plus.barcode.EAN8:\r\n                text = 'EAN8';\r\n                break;\r\n        }\r\n        console.log('result==>', result);// '912152 LT40U57 Jkchemical 1'   \r\n        let reg = /(Jkchemical)/, verArr = [1];\r\n        if (text === 'QR' && reg.test(result)) {\r\n            let Ver = result.charAt(result.length - 1);\r\n            let shiftArr = result.split(' ');\r\n            if (verArr.includes(Number(Ver))) {\r\n                let { scanCodetoProductDetail } = this.controller;\r\n                this.scanClose();\r\n                await scanCodetoProductDetail(shiftArr[0]);\r\n            }\r\n        } else {\r\n            alert('此码无法解析额');\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    scanClose = () => {\r\n        if (navigator.userAgent.indexOf(\"Html5Plus\") > -1) {\r\n            // @ts-ignore \r\n            this.scan.close();\r\n        }\r\n    }\r\n\r\n    close = () => {\r\n        this.scanClose();\r\n        this.closePage();\r\n    }\r\n\r\n    private page = observer(() => {\r\n        this.media();\r\n        setTimeout(() => {\r\n            this.media();\r\n        }, 5);\r\n        let header = <div className='w-100 text-center text-light'>扫一扫</div>;\r\n        return <div className=\"w-100 h-100 d-flex flex-column\">\r\n            <div className=\"w-100\">\r\n                {CustomHeaderTemplate(header, '', '#555555', '', this.close)}\r\n            </div>\r\n            <div className=\"alert alert-warning py-0 w-100 rounded-0 m-0 text-center\" role=\"alert\">{ScanCodeTip}</div>\r\n            <main className=\"flex-fill\">\r\n                <div id='bcid' className=\"w-100 h-100\" style={{ background: '#F5F5F5' }}></div>\r\n            </main>\r\n        </div>;\r\n    });\r\n}","import { QueryPager, Tuid } from 'tonva';\r\nimport { PageItems } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VSearchHeader } from './VSearchHeader';\r\nimport { VHome } from './VHome';\r\nimport { VScanCode } from './VScanCode';\r\n\r\nclass HomeSections extends PageItems<any> {\r\n\r\n    private sectionTuid: Tuid;\r\n\r\n    constructor(sectionTuid: Tuid) {\r\n        super();\r\n        this.firstSize = this.pageSize = 13;\r\n        this.sectionTuid = sectionTuid;\r\n    }\r\n\r\n    protected async loadResults(param: any, pageStart: any, pageSize: number): Promise<{ [name: string]: any[] }> {\r\n        let ret = await this.sectionTuid.search(\"\", pageStart, pageSize);\r\n        return { $page: ret };\r\n    }\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.sectionTuid.search(\"\", pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        if (item === undefined) return 0;\r\n        return item.id;\r\n    }\r\n}\r\n\r\nexport class CHome extends CUqBase {\r\n\r\n    homeSections: HomeSections;\r\n    sectionTuid: Tuid;\r\n\r\n    banners: any[] = [];\r\n    async internalStart(param: any) {\r\n\r\n        /*\r\n        let { cProductCategory } = this.cApp;\r\n        await cProductCategory.start();\r\n        this.openVPage(VHome);\r\n        */\r\n    }\r\n\r\n    openScanCode = () => {\r\n        this.openVPage(VScanCode)\r\n    }\r\n\r\n    renderSearchHeader = (size?: string) => {\r\n        return this.renderView(VSearchHeader, size);\r\n    }\r\n\r\n    renderCategoryRootList = () => {\r\n        let { cProductCategory } = this.cApp;\r\n        return cProductCategory.renderRootList();\r\n    }\r\n\r\n    getSlideShow = async () => {\r\n        let list = await this.uqs.webBuilder.GetSlideShow.table({});\r\n        list.forEach(v => {\r\n            this.banners.push({ path: v.path, src: v.src });\r\n        })\r\n    }\r\n\r\n    scanCodetoProductDetail = async (origin: any) => {\r\n        let { cProduct, currentSalesRegion } = this.cApp;\r\n        let productByOrigin = await this.uqs.product.GetProductByOrigin.obj({ origin, salesRegion: currentSalesRegion.id });\r\n        await cProduct.showProductDetail(productByOrigin.id, 'ScanCode');\r\n    }\r\n\r\n    // tab = () => this.renderView(VHome);\r\n    tab: VHome = new VHome(this);\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from 'tonva';\r\nimport { CCart } from './CCart';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VCartLabel extends View<CCart> {\r\n\r\n    private showCart = async () => {\r\n        let { cart } = this.controller.cApp;\r\n        cart.editButton.set(false);\r\n        this.controller.start();\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    };\r\n\r\n    private content = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let count: any = cart.count.get();\r\n        let badge, onClick, pointer;\r\n        if (count > 0) {\r\n            onClick = this.showCart;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={onClick}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from 'tonva';\r\nimport { CCart } from './CCart';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VCartLabel_Web extends View<CCart> {\r\n\r\n    private showCart = async () => {\r\n        document.location.href = '../shop/?type=cart';\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    };\r\n\r\n    private content = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let count: any = cart.count.get();\r\n        let badge, onClick, pointer;\r\n        if (count > 0) {\r\n            onClick = this.showCart;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={onClick}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { UpdownWidget } from 'tonva';\r\n\r\nconst keys = [107, 109, 110, 187, 189];\r\n\r\nexport class MinusPlusWidget extends UpdownWidget {\r\n    @observable protected value: any;\r\n    @observable protected disabled: boolean;\r\n    // @observable protected hasFocus: boolean;\r\n\r\n    protected isValidKey(key: number): boolean {\r\n        if (keys.find(v => v === key) !== undefined) return false;\r\n        return super.isValidKey(key);\r\n    }\r\n\r\n\t/*\r\n    protected onBlur = (evt: React.FocusEvent<any>) => {\r\n        super.onBlur(evt);\r\n        this.hasFocus = false;\r\n    }\r\n\r\n    protected onFocus(evt: React.FocusEvent<any>) {\r\n        super.onFocus(evt);\r\n        this.hasFocus = true;\r\n\t}\r\n\t*/\r\n\r\n    protected onChange(evt: React.ChangeEvent<any>) {\r\n    }\r\n\r\n    private minusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v - 1);\r\n    }\r\n    private plusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v + 1);\r\n    }\r\n\r\n    private ref = (input: HTMLInputElement) => {\r\n        this.input = input;\r\n        if (this.input === null) return;\r\n        let p: HTMLElement;\r\n        for (p = this.input; ; p = p.parentElement) {\r\n            if (!p) break;\r\n            if (p.tagName !== 'FIELDSET') continue;\r\n            if ((p as any)['disabled'] === true) {\r\n                this.disabled = true;\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    private renderContent = observer((): JSX.Element => {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn: any = {\r\n            //'form-control': true,\r\n        };\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        let hasFocus = this.hasFocus; // document.hasFocus() && document.activeElement === this.input;\r\n        let hasAction = this.readOnly !== true && this.disabled !== true;\r\n        let hasValue = isNaN(this.value) === false && this.value !== undefined && this.value > 0;\r\n        let cursorPointer: string,\r\n            minusColor: string, minusClick: any,\r\n            plusColor: string, plusClick: any;\r\n        if (this.disabled === true) {\r\n            cursorPointer = 'cursor-pointer';\r\n            minusColor = plusColor = 'text-light';\r\n        }\r\n        else {\r\n            minusClick = this.minusClick;\r\n            plusClick = this.plusClick;\r\n            minusColor = 'text-danger-2'; //'text-black-50';\r\n            plusColor = 'text-danger';\r\n        }\r\n        let minus = <i className={classNames('fa',\r\n            'fa-minus-circle', 'fa-lg', minusColor, cursorPointer,\r\n            { invisible: !(hasFocus === true || (hasAction === true && hasValue === true)) })}\r\n            onClick={minusClick} />;\r\n        let input = <input ref={this.ref}\r\n            className={classNames(this.className, cn, 'mx-1 w-4c form-control',\r\n                { invisible: !(hasFocus === true || hasValue === true) })}\r\n            type=\"text\"\r\n            defaultValue={this.value}\r\n            onChange={this.onChange}\r\n            placeholder={this.placeholder}\r\n            readOnly={this.readOnly}\r\n            disabled={this.disabled}\r\n            onKeyDown={this.onKeyDown}\r\n            onFocus={(evt: React.FocusEvent<any>) => this.onFocus(evt)}\r\n            onBlur={(evt: React.FocusEvent<any>) => this.onBlur(evt)}\r\n            maxLength={10} />;\r\n\r\n        let plus = <i className={classNames('fa fa-plus-circle fa-lg',\r\n            plusColor, cursorPointer,\r\n            { invisible: !(hasAction === true) })}\r\n            onClick={plusClick} />;\r\n        return <div className=\"d-flex align-items-center\">{minus}{input}{plus}\r\n            {this.renderErrors()}\r\n        </div>;\r\n    });\r\n\r\n    render() {\r\n        return <this.renderContent />;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, Form, ObjectSchema, NumSchema, ArrSchema, UiSchema, UiArr, FormField, UiCustom } from 'tonva';\r\nimport { FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { MinusPlusWidget } from '../tools';\r\nimport { CCart } from './CCart';\r\nimport { CartPackRow, CartItem2 } from './Cart';\r\n\r\nconst cartSchema = [\r\n    {\r\n        name: 'list',\r\n        type: 'arr',\r\n        arr: [\r\n            { name: 'checked', type: 'boolean' },\r\n            { name: 'product', type: 'object' } as ObjectSchema,\r\n            {\r\n                name: 'packs', type: 'arr', arr: [\r\n                    { name: 'pack', type: 'object' } as ObjectSchema,\r\n                    { name: 'price', type: 'number' } as NumSchema,\r\n                    { name: 'retail', type: 'number' } as NumSchema,\r\n                    { name: 'quantity', type: 'number' } as NumSchema,\r\n                    { name: 'currency', type: 'object' } as ObjectSchema\r\n                ]\r\n            }\r\n        ],\r\n    } as ArrSchema\r\n];\r\n\r\nexport class VCart extends VPage<CCart> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    protected CheckOutButton = observer(() => {\r\n        let { checkOut, strikeOut, cApp } = this.controller;\r\n        let { cart } = cApp;\r\n        let amount = cart.amount.get();\r\n        let check = cart.editButton.get() ? '删除' : \"去结算\";\r\n        let content = cart.editButton.get() ? <>{check}</> : amount > 0 ?\r\n            <>{check} (¥{amount})</> :\r\n            <>{check}</>;\r\n        if (cart.editButton.get()) {\r\n            return <div className=\"d-flex justify-content-end\">\r\n                <button className=\"btn btn-success w-25 mx-5\"\r\n                    type=\"button\"\r\n                    onClick={strikeOut}>\r\n                    {content}\r\n                </button>\r\n            </div>;\r\n        } else {\r\n            return <div className=\"d-flex justify-content-center\">\r\n                <button className=\"btn btn-success w-75 mx-5\"\r\n                    type=\"button\"\r\n                    onClick={checkOut} disabled={amount <= 0}>\r\n                    {content}\r\n                </button>\r\n            </div>;\r\n        }\r\n    });\r\n\r\n    render(params: any): JSX.Element {\r\n        return <this.tab />;\r\n    }\r\n\r\n    private renderCartItem = (item: CartItem2) => {\r\n        let { product } = item;\r\n        let { controller } = this;\r\n        let { onProductClick, renderCartProduct } = controller;\r\n        return <div className=\"pr-1\">\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\" onClick={() => onProductClick(product)}>\r\n                    {renderCartProduct(product)}\r\n                </div>\r\n                <div className=\"col-lg-6\"><FormField name=\"packs\" /></div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow) => {\r\n        let { pack, price, currency } = item;\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-6c mr-4 text-right\"><span className=\"text-danger h5\">¥{price}</span></div>\r\n                <FormField name=\"quantity\" />\r\n            </div>\r\n            <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        selectable: true,\r\n        deletable: true,\r\n        restorable: true,\r\n        items: {\r\n            list: {\r\n                widget: 'arr',\r\n                Templet: this.renderCartItem,\r\n                ArrContainer: (label: any, content: JSX.Element) => content,\r\n                RowContainer: (content: JSX.Element) => <div className=\"py-3\">{content}</div>,\r\n                items: {\r\n                    packs: {\r\n                        widget: 'arr',\r\n                        Templet: this.packsRow,\r\n                        selectable: false,\r\n                        deletable: false,\r\n                        ArrContainer: (label: any, content: JSX.Element) => content,\r\n                        RowContainer: (content: JSX.Element) => content,\r\n                        RowSeperator: <div className=\"border border-gray border-top my-3\" />,\r\n                        items: {\r\n                            quantity: {\r\n                                widget: 'custom',\r\n                                className: 'text-center',\r\n                                WidgetClass: MinusPlusWidget as any,\r\n                                onChanged: this.controller.onQuantityChanged\r\n                            } as UiCustom\r\n                        },\r\n                    } as UiArr\r\n                }\r\n            } as UiArr\r\n        }\r\n    }\r\n\r\n    protected cartForm = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let { data: cartData } = cart;\r\n        return <Form className=\"bg-white flex-fill overflow-auto\" schema={cartSchema} uiSchema={this.uiSchema} formData={cartData} />\r\n    });\r\n\r\n    private empty() {\r\n        return <div className=\"py-5 text-center bg-white\">你的购物车空空如也</div>\r\n    }\r\n    /**\r\n     * 是否编辑\r\n     */\r\n    private whetherToEdit = () => {\r\n        // let { cart } = this.controller.cApp;\r\n        // cart.editButton.set(!cart.editButton.get());\r\n    }\r\n    private page = observer((params: any): JSX.Element => {\r\n        let { cart } = this.controller.cApp;\r\n        let footer: any, content: any;\r\n        let cancel = cart.editButton.get() ? '取消' : '编辑';\r\n        let right = <small className=\"mr-3\" onClick={this.whetherToEdit}>{cancel}</small>\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            content = this.empty();\r\n            footer = undefined;\r\n        }\r\n        else {\r\n            content = React.createElement(this.cartForm);\r\n            footer = React.createElement(this.CheckOutButton);\r\n        }\r\n        // return <Page header=\"购物车\" right={right} footer={footer}>\r\n        //     {content}\r\n        // </Page>;\r\n        return <Page header=\"购物车\" footer={footer}>\r\n            {content}\r\n        </Page>;\r\n    })\r\n\r\n    private tab = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let header = <header className=\"py-2 text-center bg-info text-white\">\r\n            <FA className=\"align-middle\" name=\"shopping-cart\" size=\"2x\" /> &nbsp; <span className=\"h5 align-middle\">购物车</span>\r\n        </header>;\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            return <>\r\n                {header}\r\n                {this.empty()}\r\n            </>;\r\n        }\r\n\r\n        let content = React.createElement(this.cartForm);\r\n        let footer = React.createElement(this.CheckOutButton);\r\n        return <>\r\n            {content}\r\n            {footer}\r\n        </>;\r\n    });\r\n\r\n    header() {\r\n        let { cart } = this.controller.cApp;\r\n        let cancel = cart.editButton.get() ? '取消' : '编辑';\r\n        let header = <header className=\"py-2 text-center bg-info text-white position-relative\">\r\n            <FA className=\"mr-3\" name=\"shopping-cart\" size=\"lg\" />\r\n            <span>购物车</span>\r\n            {/* <small className=\"position-absolute\" onClick={this.whetherToEdit} style={{ right: 20 }} >{cancel}</small> */}\r\n        </header>;\r\n        return header;\r\n    }\r\n\t/*\r\n\tfooter() {\r\n\t\treturn <div className=\"p-3 d-flex justify-content-center\"><this.CheckOutButton /></div>;\r\n\t}\r\n\t*/\r\n\r\n    content() {\r\n        return <this.tab />\r\n    }\r\n}","import * as React from 'react';\r\nimport { RowContext, nav, User, BoxId } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VCartLabel } from './VCartLabel';\r\nimport { VCartLabel_Web } from './VCartLabel_Web';\r\nimport { VCart } from './VCart';\r\nimport { CartPackRow, CartItem2 } from './Cart';\r\n\r\nexport class CCart extends CUqBase {\r\n\r\n    private selectedCartItems: CartItem2[];\r\n\r\n    protected async internalStart(param: any) {\r\n        this.openVPage(VCart);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * 显示购物车图标\r\n     */\r\n    renderCartLabel() {\r\n        return this.renderView(VCartLabel);\r\n    }\r\n\r\n    renderCartLabel_Web() {\r\n        return this.renderView(VCartLabel_Web);\r\n    }\r\n\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data, parentData } = context;\r\n        let { product } = parentData;\r\n        let { pack, price, retail, currency } = data as CartPackRow;\r\n        let { cart } = this.cApp;\r\n        if (value > 0)\r\n            await cart.add(product, pack, value, price, retail, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: product.id, packId: pack.id }]);\r\n    }\r\n\r\n    onRowStateChanged = async (context: RowContext, selected: boolean, deleted: boolean) => {\r\n        alert('onRowStateChanged')\r\n    }\r\n\r\n    private loginCallback = async (user: User): Promise<void> => {\r\n        let { cApp } = this;\r\n        await cApp.currentUser.setUser(user);\r\n        await cApp.loginCallBack(user);\r\n        this.closePage(1);\r\n        await this.doFirstOrderChecking();\r\n    };\r\n\r\n    onProductClick = (product: BoxId) => {\r\n        let { cart, cProduct } = this.cApp;\r\n        if (!cart.isDeleted(product.id)) {\r\n            cProduct.showProductDetail(product);\r\n        }\r\n    }\r\n    /**\r\n     * 商品从购物车永久性删除\r\n     */\r\n    strikeOut = async () => {\r\n        let { cart } = this.cApp;\r\n        this.selectedCartItems = cart.getSelectedItems();\r\n        await cart.removeStrike(this.selectedCartItems)\r\n\r\n\r\n        // let combinedData = this.selectedCartItems.map((el: CartItem2) => {\r\n        //     return el.packs.map((v: any) => {\r\n        //         return {\r\n        //             productId: el.product, packId: v.pack\r\n        //         }\r\n        //     })\r\n        // }).flat();\r\n        // combinedData.forEach(async (el: any) => {\r\n        //     await cart.removeFromCart(el);\r\n        // })\r\n    }\r\n\r\n    checkOut = async () => {\r\n        let { cart } = this.cApp;\r\n        this.selectedCartItems = cart.getSelectedItems();\r\n        if (this.selectedCartItems === undefined) return;\r\n        if (!this.isLogined) {\r\n            nav.showLogin(this.loginCallback, true);\r\n        } else {\r\n            await this.doFirstOrderChecking();\r\n        }\r\n    }\r\n\r\n    private doFirstOrderChecking = async () => {\r\n        let { cMe, currentUser } = this.cApp;\r\n        if (!currentUser.allowOrdering) {\r\n            cMe.toPersonalAccountInfo(this.doCheckOut);\r\n            // cMe.openMeInfoFirstOrder({\r\n            //     onlyRequired: false,\r\n            //     caption: \"请补充账户信息\",\r\n            //     note: <>\r\n            //         化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。\r\n            //     为此，需要您重新提供非虚拟的、可核查的信息。这些信息包括下面所有带有 <span className=\"text-danger\">*</span> 的信息。\r\n            //     </>,\r\n            //     actionButton: {\r\n            //         value: \"下一步\",\r\n            //         action: this.doCheckOut\r\n            //     }\r\n            // });\r\n        } else {\r\n            await this.doCheckOut();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 导航到CheckOut界面\r\n     */\r\n    doCheckOut = async () => {\r\n\r\n        let { cOrder } = this.cApp;\r\n        let { selectedCartItems } = this;\r\n        if (selectedCartItems === undefined) return;\r\n        await cOrder.createOrderFromCart(selectedCartItems);\r\n        // await cOrder.start(this.selectedCartItems);\r\n    }\r\n\r\n    tab = () => this.renderView(VCart);\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    renderCartProduct = (product: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderCartProduct(product);\r\n    }\r\n\r\n    tabPage: VCart = new VCart(this);\r\n}\r\n","import * as React from 'react';\r\nimport { Image } from 'tonva';\r\n\r\nconst imagePath = \"https://www.jkchemical.com/static/Structure/\";\r\nconst pointProductImagePath = \"https://www.jkchemical.com/static/images/pointshop\";\r\nconst altimagePath = \"https://www.jkchemical.com/static/Structure/999.png\";\r\n\r\ninterface ProductImageProps {\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    chemicalId: string;\r\n}\r\n\r\nexport function ProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    return <Image src={chemicalId && (imagePath + chemicalId.substr(0, 3) + '/' + chemicalId + '.png')}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}\r\n\r\n// export function PointProductImage(props: ProductImageProps) {\r\n\r\n//     let { style, className, chemicalId } = props;\r\n//     return <Image src={chemicalId && (pointProductImagePath + '/' + chemicalId + '.png')}\r\n//         style={style} className={className} altImage={altimagePath} />;\r\n// }\r\n\r\nexport function PointProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    if (chemicalId && /[0-9]$/.test(chemicalId))\r\n        chemicalId = pointProductImagePath + '/' + chemicalId + '.png';\r\n\r\n    return <Image src={chemicalId && chemicalId}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}","import * as React from 'react';\r\nimport { View, tv, FormField, ObjectSchema, NumSchema, UiSchema, UiCustom, RowContext, BoxId, Form, ItemSchema, ArrSchema, UiArr } from 'tonva';\r\nimport { CProduct } from './CProduct';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { observer } from 'mobx-react';\r\nimport { MinusPlusWidget } from 'tools';\r\nimport { observable } from 'mobx';\r\nimport classNames from 'classnames';\r\nimport { VProductFavorateLabel } from 'customer/VProductFavorateLabel';\r\n\r\nexport class VCartProuductView extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        return <>{tv(param, this.renderCartProduct)}</>;\r\n    }\r\n\r\n\r\n    private renderCartProduct = (product: any) => {\r\n        let { id, brand, description, descriptionC, origin, imageUrl } = product;\r\n\r\n        return <div className=\"row d-flex mb-3 px-2\">\r\n            <div className=\"col-12\">\r\n                <div className=\"py-2\">\r\n                    <strong>{description}</strong>\r\n                </div>\r\n                <div className=\"pb-2\">\r\n                    <strong>{descriptionC}</strong>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-4c h-4c\" />\r\n                    </div>\r\n                    <div className=\"col-9\">\r\n                        <div className=\"row\">\r\n                            {productPropItem('编号', origin)}\r\n                            {this.controller.renderChemicalInfoInCart(product)}\r\n                            {tv(brand, renderBrand)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    };\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport class VProuductView extends View<CProduct> {\r\n\r\n    @observable product: any;\r\n    @observable discount: number;\r\n\r\n    render(product: BoxId): JSX.Element {\r\n        return <this.renderProduct productBox={product} />;\r\n    }\r\n\r\n    private async getProudct(product: BoxId) {\r\n        if (this.product === undefined) {\r\n            let ret = await this.controller.getProductAndDiscount(product);\r\n            this.product = ret.product;\r\n            this.discount = ret.discount;\r\n        }\r\n    }\r\n\r\n    private renderProduct = observer((param: any) => {\r\n        let { productBox } = param;\r\n        this.getProudct(productBox);\r\n        if (!this.product)\r\n            return null;\r\n        let { renderChemicalInfoInCart, renderFavoritesLabel } = this.controller;\r\n        let { id, brand, description, descriptionC, origin, imageUrl, isValid } = this.product;\r\n        return <div className=\"d-block mb-4 px-3\">\r\n            <div className=\"d-flex py-2\">\r\n                <div>\r\n                    <div><strong>{description}</strong></div>\r\n                    <div>{descriptionC}</div>\r\n                </div>\r\n                <div>\r\n                    {renderFavoritesLabel(id)}\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {productPropItem('产品编号', origin)}\r\n                        {renderChemicalInfoInCart(productBox)}\r\n                        {tv(brand, renderBrand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    })\r\n}\r\n\r\n/**\r\n * 显示产品包装价格，配合CProduct.renderProductPrice使用\r\n * 需要的参数product必须是BoxId(或者object?)\r\n */\r\nexport class VProductPrice extends View<CProduct> {\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'pack', type: 'object' } as ObjectSchema,\r\n        { name: 'quantity', type: 'number' } as NumSchema,\r\n        { name: 'retail', type: 'number' } as NumSchema,\r\n        { name: 'vipPrice', type: 'number' } as NumSchema,\r\n        { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n        { name: 'currency', type: 'string' },\r\n    ];\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp } = this.controller;\r\n        let { cart } = cApp;\r\n        if (value > 0)\r\n            await cart.add(this.product, pack, value, price, retail, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: this.product.id, packId: pack.id }]);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            pack: { visible: false },\r\n            retail: { visible: false },\r\n            vipPrice: { visible: false },\r\n            promotionPrice: { visible: false },\r\n            currency: { visible: false },\r\n            quantity: {\r\n                widget: 'custom',\r\n                label: null,\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget,\r\n                onChanged: this.onQuantityChanged as any\r\n            } as UiCustom\r\n        }\r\n    }\r\n\r\n    @observable private prices: any;\r\n    private initPrices = async (product: BoxId, salesRegionId: number, discount: number) => {\r\n        if (this.prices === undefined)\r\n            this.prices = await this.controller.getProductPrice(product, salesRegionId, discount);\r\n    }\r\n\r\n    private renderPrice(item: any) {\r\n        let { pack, retail, vipPrice, promotionPrice } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <Form schema={this.schema} uiSchema={this.uiSchema} formData={item} />\r\n                </div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n        return right;\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private product: BoxId;\r\n    render(param: any): JSX.Element {\r\n        let { product, discount } = param;\r\n        this.product = product;\r\n        let { currentSalesRegion } = this.controller.cApp;\r\n        return <this.content product={product} SalesRegionId={currentSalesRegion} discount={discount} />;\r\n    }\r\n\r\n    private content = observer((param?: any) => {\r\n        let priceUI;\r\n        let { product, SalesRegionId, discount } = param;\r\n\r\n        let { renderDeliveryTime } = this.controller;\r\n        this.initPrices(product, SalesRegionId, discount);\r\n        if (this.prices && this.prices.length > 0) {\r\n            priceUI = this.prices.map((v: any, index: number) => {\r\n                let { pack, retail } = v;\r\n                if (retail) {\r\n                    return <div className=\"px-2\" key={pack.id}>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <div><b>{tv(pack)}</b></div>\r\n                                <div>{renderDeliveryTime(pack)}</div>\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                {this.renderPrice(v)}\r\n                            </div>\r\n                        </div>\r\n                    </div>;\r\n                } else {\r\n                    return <small>请询价</small>\r\n                }\r\n            });\r\n        }\r\n        return <>\r\n            {priceUI}\r\n        </>;\r\n    })\r\n}\r\n\r\nexport class VProductWithPrice extends View<CProduct> {\r\n    @observable product: any;\r\n    @observable discount: number;\r\n\r\n    render(product: BoxId): JSX.Element {\r\n        return <this.renderProduct productBox={product} />;\r\n    }\r\n\r\n    private async getProudct(product: BoxId) {\r\n        if (this.product === undefined) {\r\n            let ret = await this.controller.getProductAndDiscount(product);\r\n            this.product = ret.product;\r\n            this.discount = ret.discount;\r\n        }\r\n    }\r\n\r\n    private renderProduct = observer((param: any) => {\r\n        let { productBox } = param;\r\n        this.getProudct(productBox);\r\n        if (!this.product)\r\n            return null;\r\n        let { renderChemicalInfoInCart, renderProductPrice } = this.controller;\r\n        let { id, brand, description, descriptionC, origin, imageUrl } = this.product;\r\n        return <div className=\"d-block mb-2 px-3\">\r\n            <div className=\"py-2\">\r\n                <div><strong>{description}</strong></div>\r\n                <div>{descriptionC}</div>\r\n            </div>\r\n            <div className=\"row py-2\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {productPropItem('产品编号', origin)}\r\n                        {renderChemicalInfoInCart(productBox)}\r\n                        {tv(brand, renderBrand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"border-top pt-2\">\r\n                {renderProductPrice(productBox, this.discount)}\r\n            </div>\r\n        </div>\r\n    })\r\n    /*\r\n    render(product: BoxId): JSX.Element {\r\n        let { renderProduct, renderProductPrice } = this.controller;\r\n        return <div className=\"d-flex flex-column\">\r\n            <div>{renderProduct(product)}</div>\r\n            <div className=\"p-2 border-top\">{renderProductPrice(product, 1)}</div>\r\n        </div>\r\n    }\r\n    */\r\n}\r\n\r\nexport function renderBrand(brand: any) {\r\n    return productPropItem('品牌', brand.name);\r\n}\r\n\r\nexport function productPropItem(caption: string, value: any, captionClass?: string) {\r\n    if (value === null || value === undefined || value === '0') return null;\r\n    let capClass = captionClass ? classNames(captionClass) : classNames(\"text-muted\");\r\n    let valClass = captionClass ? classNames(captionClass) : \"\";\r\n    return <>\r\n        <div className={classNames(\"col-6 col-sm-2 pr-0 small\", capClass)}> {caption}</div>\r\n        <div className={classNames(\"col-6 col-sm-4\", valClass)}>{value}</div>\r\n    </>;\r\n}\r\n/**\r\n * 产品未售提示UI\r\n */\r\nexport function unsoldProductsUI(discountinued: number) {\r\n    if (discountinued && discountinued === 1)\r\n        return <div onClick={(e: any) => e.stopPropagation()} className='w-100 carousel-control-prev'><b className=\"alert-primary alert\">该产品已下架！</b></div>\r\n    else\r\n        return <></>\r\n}\r\n/**\r\n * 显示产品信息（不包含包装价格），特定于参数包含相关的CAS/Purity等信息），现应用于产品列表\r\n * @param product\r\n */\r\n/* export function renderProduct(product: any) {\r\n    let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl, discountinued } = product;\r\n    return <div className=\"d-block mb-4 px-3 bg-white\">\r\n        <div className=\"py-2\">\r\n            <div className=\"mr-3\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n        </div>\r\n        <div className=\"row\">\r\n            <div className=\"col-3\">\r\n                <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n            </div>\r\n            <div className=\"col-9\">\r\n                <div className=\"row\">\r\n                    {productPropItem('产品编号', origin)}\r\n                    {productPropItem('CAS', CAS)}\r\n                    {productPropItem('纯度', purity)}\r\n                    {productPropItem('分子式', molecularFomula)}\r\n                    {productPropItem('分子量', molecularWeight)}\r\n                    {tv(brand, renderBrand)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        {unsoldProductsUI(discountinued)}\r\n    </div>\r\n} */\r\n\r\nexport class VProuductView2 extends View<CProduct> {\r\n\r\n    @observable product: any;\r\n    @observable discount: number;\r\n\r\n    render(product: any): JSX.Element {\r\n        return <this.renderProduct product={product} />;\r\n    }\r\n\r\n    private renderProduct = observer((param: any) => {\r\n        let { product } = param;\r\n        let { renderFavoritesLabel } = this.controller;\r\n        let { id, brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl, discountinued } = product;\r\n        return <div className=\"d-block mb-4 px-3 bg-white\">\r\n            <div className=\"py-2\">\r\n                <div className=\"mr-3\"><strong>{description}</strong></div>\r\n                <div>{descriptionC}</div>\r\n                <div>\r\n                    {renderFavoritesLabel(id)}\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {productPropItem('产品编号', origin)}\r\n                        {productPropItem('CAS', CAS)}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('分子式', molecularFomula)}\r\n                        {productPropItem('分子量', molecularWeight)}\r\n                        {tv(brand, renderBrand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {unsoldProductsUI(discountinued)}\r\n        </div>\r\n    })\r\n}\r\n\r\n/**\r\n * 收藏列表（有收藏与取消功能）\r\n */\r\n/* export class VProductCarryFavorites extends View<CProduct>{\r\n    render(param: any): JSX.Element {\r\n        let { product } = param;\r\n        return <div className='position-relative'>\r\n            {renderProduct(product)}\r\n            <div className='position-absolute' style={{ top: 20, right: -10 }}>\r\n                {this.renderVm(VProductFavorateLabel, product.id)}\r\n            </div>\r\n        </div>\r\n    }\r\n} */","export function randomColor() {\r\n    let arr = ['#ad2031', '#239ab7', '#80a040', '#811f63', '#1B12AC'];\r\n    let i = Math.floor(Math.random() * arr.length);\r\n    return arr[i];\r\n    // return '#' + Math.random().toString(16).substr(-6);\r\n}","import * as React from 'react';\r\nimport { VPage, nav, Page, LMR, FA, tv, List } from 'tonva';\r\nimport { CPointProduct, OrderSource } from './CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { observable } from 'mobx';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { randomColor } from 'tools/randomColor';\r\nimport { pointIcon } from 'tools/images';\r\n\r\nexport class VExchangeOrder extends VPage<CPointProduct> {\r\n    @observable protected shippingAddressIsBlank: boolean = false;\r\n    protected pageDesc: string = OrderSource.EXCHANGEORDER;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private nullContact = () => {\r\n        return <span className=\"text-primary\">选择收货地址</span>;\r\n    }\r\n\r\n    protected renderPointProduct = (pointProduct: any) => {\r\n        let { product, point, quantity } = pointProduct;\r\n        if (quantity > 0) {\r\n            return <>\r\n                {tv(product, (v) => {\r\n                    return <div className=\"w-100 d-flex flex-column mb-4\">{/* 20vh  */}\r\n                        <div title={v.description} className=\"w-100\" style={{ height: '35vw',border:`2px solid ${randomColor()}` }} ><PointProductImage chemicalId={v.imageUrl} className=\"w-100 h-100\" /></div>\r\n                        <div className=\"small w-100\">\r\n                            <div className=\"text-truncate w-100 my-1\">{v.descriptionC}</div>\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                {/*  <div>\r\n                                    <FA name='database' className=\"text-warning\" />\r\n                                    <span className=\"text-danger h5\"> {point}</span>\r\n                                </div> */}\r\n                                <div className='d-flex'>\r\n                                    <img src={pointIcon} alt=\"\" style={{ height: 24 }} />\r\n                                    <span className=\"text-danger h5 m-0 ml-1 align-self-end\"> {v.point}</span>\r\n                                </div>\r\n                                <div>*{quantity}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                })}\r\n            </>\r\n        }\r\n    }\r\n\r\n    protected onSubmitOwn = async () => {\r\n        let { submitOrder } = this.controller;\r\n        await submitOrder();\r\n    }\r\n\r\n    protected onSubmit = async () => {\r\n        let { orderData, cApp } = this.controller;\r\n        let { cLottery } = cApp;\r\n        // 必填项验证\r\n        let { shippingContact } = this.pageDesc === OrderSource.EXCHANGEORDER ? orderData : cLottery.prizeOrderData;\r\n        if (!shippingContact) {\r\n            this.shippingAddressIsBlank = true;\r\n            setTimeout(() => this.shippingAddressIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n        await this.onSubmitOwn();\r\n    }\r\n\r\n    protected renderTipsUI = () => {\r\n        let chevronRight = <FA name=\"chevron-right\" className=\"cursor-pointer\" />\r\n        let shippingAddressBlankTip = this.shippingAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>\r\n            : null;\r\n        return {\r\n            chevronRight,\r\n            shippingAddressBlankTip\r\n        }\r\n    }\r\n\r\n    protected renderContact = () => {\r\n        let { chevronRight, shippingAddressBlankTip } = this.renderTipsUI();\r\n        let { orderData, onSelectShippingContact, cApp } = this.controller;\r\n        let data = this.pageDesc === OrderSource.EXCHANGEORDER ? orderData.shippingContact : cApp.cLottery.prizeOrderData.shippingContact;\r\n        return <div className=\"px-2\">\r\n            <div className=\"row py-3 bg-white mb-1\" onClick={() => onSelectShippingContact()}>\r\n                <div className=\"col-3 text-muted pr-0\">收货地址:</div>\r\n                <div className=\"col-9\">\r\n                    <LMR className=\"w-100 align-items-center\" right={chevronRight}>{tv(data, undefined, undefined, this.nullContact)}</LMR>\r\n                    {shippingAddressBlankTip}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    protected page = observer(() => {\r\n        let { pointProductsSelected, pointToExchanging: pointsSum } = this.controller;\r\n        let header = <div className=\"w-100 text-center\">兑换确认</div>;\r\n        let footer = <div className=\"d-block\">\r\n            <div className=\"w-100 px-3 d-flex justify-content-between\">\r\n                <div>总计:<span className=\"text-danger ml-2 mr-1 h2\" >{pointsSum}</span>分</div>\r\n                <button type=\"button\" className=\"btn btn-danger m-1\" onClick={this.onSubmit}>确认兑换</button>\r\n            </div>\r\n        </div>;\r\n\r\n        return <Page header={header} right={<></>} footer={footer}>\r\n            {this.renderContact()}\r\n            <List items={pointProductsSelected} item={{ render: this.renderPointProduct, className: 'w-50 px-3' }}\r\n                className=\"d-flex flex-wrap bg-transparent mt-2\"\r\n            ></List>\r\n        </Page>\r\n    })\r\n}\r\n\r\n\r\n/**\r\n * 领取奖品页面\r\n */\r\nexport class VMyPrizeExchangeOrder extends VExchangeOrder {\r\n    @observable shippingAddressIsBlank: boolean = false;\r\n    protected pageDesc: string = OrderSource.PRIZEORDER;\r\n\r\n    renderPointProduct = (pointProduct: any) => {\r\n        return <div>11111</div>\r\n    }\r\n\r\n    /*  protected onSubmitOwn = async () => {\r\n         let { cLottery } = this.controller.cApp;\r\n         await cLottery.submitOrder();\r\n     } */\r\n\r\n    protected page = observer(() => {\r\n        let { cApp } = this.controller;\r\n        let { cLottery } = cApp;\r\n        let footer = <div className=\"d-block\">\r\n            <div className=\"w-100 px-3 d-flex justify-content-end\">\r\n                <button type=\"button\" className=\"btn btn-danger m-1\" onClick={this.onSubmit}>确认领取</button>\r\n            </div>\r\n        </div>;\r\n\r\n        return <Page header=\"奖品领取预览\" footer={footer}>\r\n            {this.renderContact()}\r\n            <List items={cLottery.myPrizeLib} item={{ render: this.renderPointProduct }}\r\n\r\n            ></List>\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { Page } from 'tonva';\r\n\r\nexport class VPointRule extends React.Component {\r\n\r\n    render() {\r\n        return <Page header=\"积分规则\">\r\n            <div className='bg-white p-2'>\r\n                {/* <ol className=\"mb-3\">\r\n                    <li>订购产品满1元积1分（活动期间积分按活动规则执行），积分按消费额累计；付款后，积分变为有效积分，可以使用；</li>\r\n                    <li>特价产品、产业型产品等不产生积分；</li>\r\n                    <li>积分有效期为自然年三年，过期作废（示例：2010年1-12月份产生的积分在2012年12月31日作废清零，以此类推）；</li>\r\n                    <li>积分目前仅限兑换百灵威积分商城中的产品使用，不兑换现金；</li>\r\n                    <li>此积分政策只针对百灵威终端客户，经销商等不产生积分；</li>\r\n                </ol> */}\r\n                <div className=\" text-muted small\">\r\n                    <p className=\"m-0 pb-1\"><b>1，订购产品满1元积1分（活动期间积分按活动规则执行），积分按消费额累计；付款后，积分变为有效积分，可以使用；</b></p>\r\n                    <p className=\"m-0 pb-1\"><b>2，特价产品、产业型产品等不产生积分；</b></p>\r\n                    <p className=\"m-0 pb-1\"><b>3，积分有效期为自然年三年，过期作废（示例：2010年1-12月份产生的积分在2012年12月31日作废清零，以此类推）；</b></p>\r\n                    <p className=\"m-0 pb-1\"><b>4，积分目前仅限兑换百灵威积分商城中的产品使用，不兑换现金；</b></p>\r\n                    <p><b>5，此积分政策只针对百灵威终端客户，经销商等不产生积分；</b></p>\r\n                </div >\r\n                <div className=\"text-muted small py-2\">\r\n                    <p>百灵威保留本积分活动中条款的解释权利，并有根据需要取消本活动或增删、修订本规定的权利，并于百灵威官网、邮件、报纸或其他途径公告后生效。</p>\r\n                    <p>如有疑问，请致电百灵威客服中心：400-666-7788</p>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n","export const RevenueExpenditure = {\r\n    POINTHISTORY: '收支明细',\r\n    SIGNINHISTORY: '签到明细',\r\n}","import * as React from 'react';\r\nimport { VPage, Page, nav, List, FA, DropdownActions, DropdownAction, EasyDate, tv } from \"tonva\";\r\nimport { CPointProduct, PointProductDetailLevel, topicClump } from \"./CPointProduct\";\r\nimport { observer } from 'mobx-react-lite';\r\nimport { VPointRule } from './VPointRule';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport classNames from 'classnames';\r\nimport { logo_pointShop, signInIcon, exChangeIcon, homeTopicMap, triangleShadingO, triangleShadingT } from 'tools/images';\r\nimport { RevenueExpenditure } from './basicRefer';\r\nimport { randomColor } from 'tools/randomColor';\r\n\r\nexport class VMyPoint extends VPage<CPointProduct> {\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    /**\r\n     * 积分规则页面\r\n     */\r\n    private pointRules = () => nav.push(<VPointRule />);\r\n\r\n    /* 积分详情页面 \r\n    private getPointHistory = async () => {\r\n        this.controller.pointDetails();\r\n    }*/\r\n\r\n    private pointblock = (name: any, action: any, icon: any, width?: any) => {\r\n        return <div className={`text-center mx-2 mb-2 ${width}`} onClick={() => action()}>\r\n            <img src={icon} alt=\"\" className=\"w-2c h-2c\" />\r\n            <div className={`text-light small`}>{name}</div>\r\n        </div>\r\n    }\r\n\r\n    private recommendOrHot = (name: string, more: any, toWhere: any, theme?: string, imgArr?: any, action?: any) => {\r\n        let pointProductImage = (pointProduct: any, index: any) => {            \r\n            let { product } = pointProduct;\r\n            let clm = index !== 0 ? (index === 1 ? 'justify-content-center' : 'justify-content-end') : '';\r\n            return <div className={`d-flex align-items-center ${clm}`}>{tv(product, (v) => {\r\n                    return <PointProductImage chemicalId={v.imageUrl} className=\"bg-transparent p-0\" style={{width:'91.6%',height:'23vw',border:`2px solid ${randomColor()}`}} />\r\n                 })\r\n            }</div>\r\n        }\r\n        return <div className=\"mb-4\" style={{ zIndex: 9 }}>\r\n            <h6 className='d-flex justify-content-between align-content-end bg-transparent '>\r\n                <small className={classNames(theme ? theme : '', 'align-self-end')} style={{ color: theme ? theme : '' }}>{name}</small>\r\n                <span style={{ color: '#808080' }} className=\"pl-2\" onClick={() => more(name)} ><small >更多 </small><FA name='angle-right' /></span>\r\n            </h6>\r\n            <List className=\"d-flex w-100 bg-transparent justify-content-between\"\r\n                items={imgArr.slice(0, 3)}\r\n                item={{\r\n                    render:pointProductImage, //(v: any) => <PointProductImage chemicalId={v.imageUrl ? v.imageUrl : '1'} className=\"w-100 px-1 bg-transparent\" style={{border:`2px solid ${randomColor()}`}} />,\r\n                    onClick: (v) => toWhere(v,PointProductDetailLevel.DIRECT),\r\n                    className: \"col-4 p-0 bg-transparent\"\r\n                }}\r\n                none='暂无产品' />\r\n        </div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { myEffectivePoints, myPointTobeExpired, myTotalPoints, pointProductGenre, newPointProducts, hotPointProducts,\r\n            openExchangeHistory, openRevenueExpenditure, openPointProduct, openPointProductDetail, cApp } = this.controller;\r\n        let { openPointSign } = cApp.cSignIn;\r\n        var date = new Date();\r\n        let dateYear = date.getFullYear();\r\n\r\n        let nowPoint = myPointTobeExpired;\r\n        let nowPointTip = nowPoint > 0 ?\r\n            <div className=\"alert alert-warning py-0 w-100 small rounded-0 m-0\" role=\"alert\">\r\n                <span className=\"text-muted\">友情提示: 将有{nowPoint}积分于{dateYear}-12-31过期</span>\r\n            </div>\r\n            : null;\r\n\r\n        let actions: DropdownAction[] = [\r\n            {\r\n                icon: 'get-pocket',\r\n                caption: RevenueExpenditure.POINTHISTORY,\r\n                action: () => openRevenueExpenditure(RevenueExpenditure.POINTHISTORY)\r\n            },\r\n            {\r\n                icon: 'history',\r\n                caption: '兑换记录',\r\n                action: openExchangeHistory\r\n            },\r\n            {\r\n                icon: 'book',\r\n                caption: '积分规则',\r\n                action: this.pointRules\r\n            }\r\n        ];\r\n        let right = <DropdownActions className=\"align-self-center mr-1 bg-transparent border-0 text-light\" icon=\"navicon\" actions={actions} />;\r\n\r\n        let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">『 无任何类型 』</div>\r\n\r\n        return <Page header=\"积分管理\" right={right} className=\"h-100 bg-white\">\r\n            <div>\r\n                <div className=\"d-flex flex-column pb-4 w-100\" style={{ background: `url(${homeTopicMap}) no-repeat`, backgroundSize: '100% 100%' }}>\r\n                    <>{nowPointTip}</>\r\n                    <img src={logo_pointShop} alt=\"img\" className=\"w-8c mt-4 ml-4 mb-3\" />\r\n                    < div className=\"d-flex mx-3 mt-2 ml-4 text-light justify-content-between\" >\r\n                        <div>\r\n                            <div><small>当前</small> <span className=\"h5\">{myEffectivePoints}</span> <small>分可用</small></div>\r\n                            <div className=\"mt-2\">{myTotalPoints > 0 ? <small>总分: {myTotalPoints}</small> : null}</div>\r\n                        </div>\r\n                        <div className=\"d-flex justify-content-end mt-1\" style={{ flex: 1 }}>\r\n                            {this.pointblock(\"签到\", openPointSign, signInIcon)}\r\n                            {this.pointblock(\"兑换\", openPointProduct, exChangeIcon)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"pt-3\">\r\n                {/* 产品类别 */}\r\n                {\r\n                    pointProductGenre.length\r\n                        ? <div>\r\n                            {/* style={{ background: `url(${triangleShadingO}) no-repeat scroll bottom right`, backgroundSize: '10%', }} */}\r\n                            <List className=\"d-flex flex-wrap pt-2 text-center px-2 bg-transparent justify-content-between\"\r\n                                items={pointProductGenre}\r\n                                item={{ render: this.renderGenreItem, onClick: (v) => openPointProduct(v), className: 'w-25 bg-transparent' }} none={none} />\r\n                            <p className=\"d-flex m-0 justify-content-end pr-1\"><img src={triangleShadingO} alt=\"\" className=\"h-3c\" /></p>\r\n                        </div>\r\n                        : null\r\n                }\r\n                {/* 新品推荐 热门产品 */}\r\n                <div className='mb-2 px-4 bg-transparent position-relative' style={{ background: `url(${triangleShadingT}) no-repeat 2% 50% `, backgroundSize: '38px' }}>\r\n                    {newPointProducts.length ? this.recommendOrHot(topicClump.newRecommend, openPointProduct, openPointProductDetail, undefined, newPointProducts) : null}\r\n                    {hotPointProducts.length ? this.recommendOrHot(topicClump.hotProduct, openPointProduct, openPointProductDetail, undefined, hotPointProducts) : null}\r\n                </div>\r\n            </div>\r\n        </Page >;\r\n    });\r\n\r\n    private renderGenreItem = (item: any) => {\r\n        let { name, imageUrl } = item;\r\n        return <div>\r\n            <label className=\"w-100 d-flex flex-column justify-content-center\">\r\n                {\r\n                    imageUrl\r\n                        ? <div className=\"m-auto\"><PointProductImage chemicalId={imageUrl ? imageUrl : ':0-0268.png'} className=\"w-2c\" /></div>\r\n                        // ? <div className=\"w-25 m-auto\"><PointProductImage chemicalId={imageUrl ? imageUrl : ':0-0268.png'} className=\"w-100\" /></div>\r\n                        : <FA name=\"leaf\" className='mt-2 text-success mb-2' size='lg' />\r\n                }\r\n                <div className='text-dark small'>{name}</div>\r\n            </label>\r\n        </div>\r\n    }\r\n}\r\n\r\nexport function renderPointRecord(item: any) {\r\n    let { comments, point, date } = item;\r\n    return <div className=\"d-flex w-100 justify-content-between align-content-center small px-3 py-2\">\r\n        <div>\r\n            <div className=\"text-muted\">{comments}</div>\r\n            <div className=\"text-muted small\"><EasyDate date={date} /></div>\r\n        </div>\r\n        <div className=\"d-table h-100\">\r\n            <div className=\"font-weight-bolder h-100 d-table-cell align-middle text-danger\">{point >= 0 ? '+' : ''}{point}</div>\r\n        </div>\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { List, LMR, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VContactList extends VPage<CSelectContact> {\r\n\r\n    async open() {\r\n\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onContactRender = (contact: any) => {\r\n        let { onEditContact, onContactSelected } = this.controller;\r\n        let right = <div className=\"p-2 cursor-pointer text-info\" onClick={() => onEditContact(contact)}>\r\n            <FA name=\"edit\" />\r\n        </div>\r\n        return <LMR right={right} className=\"px-3 py-2\">\r\n            <div onClick={() => onContactSelected(contact)}>\r\n                {tv(contact)}\r\n            </div>\r\n        </LMR>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { onNewContact, userContacts } = this.controller;\r\n        let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={() => onNewContact()} >添加新地址</button>;\r\n        let contactList = <List items={userContacts} item={{ render: this.onContactRender }} none=\"无地址\" />;\r\n        return <Page footer={footer} header=\"管理地址\">\r\n            {contactList}\r\n        </Page>\r\n    })\r\n}","\r\nexport function telephoneValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"固定电话格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function mobileValidation(value: string) {\r\n    if (value && !/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(value))\r\n        return \"手机号格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function emailValidation(value: string) {\r\n    if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n        return \"Email格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function faxValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"传真号码格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function addressDetailValidation(value: string) {\r\n    return (value && value.length > 200) ? \"详细地址最多200个字！\" : undefined;\r\n}\r\n\r\nexport function zipCodeValidation(value: string) {\r\n    return (value && value.length > 15) ? \"邮编过长，请修改后录入！\" : undefined;\r\n}\r\n\r\n\r\nexport function organizationNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function departmentNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"部门名称名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function salutationValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function nameValidation(value: string) {\r\n    return (value && value.length > 50) ? \"姓名最多50个字！\" : undefined;\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { VPage, Page, Form, Schema, UiSchema, Context, UiInputItem, UiIdItem, BoxId } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { addressDetailValidation, emailValidation, telephoneValidation, mobileValidation, organizationNameValidation, nameValidation } from 'tools/inputValidations';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'name', type: 'string', required: true },\r\n    { name: 'organizationName', type: 'string', required: true },\r\n    { name: 'mobile', type: 'string', required: true },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'email', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: true },\r\n    { name: 'addressString', type: 'string', required: true },\r\n    { name: 'isDefault', type: 'boolean', required: false },\r\n];\r\n\r\nexport class VContact extends VPage<CSelectContact> {\r\n\r\n    private userContactData: any;\r\n    private form: Form;\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            name: { widget: 'text', label: '姓名', placeholder: '姓名', rules: nameValidation } as UiInputItem,\r\n            organizationName: { widget: 'text', label: '单位名称', placeholder: '单位名称', rules: organizationNameValidation } as UiInputItem,\r\n            mobile: { widget: 'text', label: '手机号', placeholder: '手机号', rules: mobileValidation } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '电话', rules: telephoneValidation } as UiInputItem,\r\n            email: { widget: 'email', label: 'Email', placeholder: 'Email', rules: emailValidation } as UiInputItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区', placeholder: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await this.controller.pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <div className=\"text-truncate\">\r\n                            {country && country.id && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province && province.id && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city && city.id && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county && county.id && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </div>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', placeholder: '详细地址', className: \"text-truncate\", rules: addressDetailValidation } as UiInputItem,\r\n            isDefault: { widget: 'checkbox', label: '作为默认地址' },\r\n            submit: { widget: 'button', label: '提交' },\r\n        }\r\n    }\r\n\r\n    async open(userContactData: any) {\r\n        this.userContactData = userContactData;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onSaveContact = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.saveContact(context.form.data);\r\n    }\r\n\r\n    private onDelContact = async () => {\r\n        let { contact } = this.userContactData;\r\n        if (await this.vCall(VConfirmDeleteContact, contact) === true) {\r\n            await this.controller.delContact(contact);\r\n            this.closePage();\r\n        };\r\n    }\r\n\r\n    private page = () => {\r\n        let contactData = _.clone(this.userContactData.contact);\r\n\r\n        let buttonDel: any;\r\n        if (contactData !== undefined) {\r\n            buttonDel = <button className=\"btn btn-sm btn-info\" onClick={this.onDelContact}>删除</button>;\r\n        } else {\r\n            let { defaultOrganizationName, defaultName, defaultMobile, address, addressString } = this.controller.cApp.currentUser;\r\n            contactData = {\r\n                'organizationName': defaultOrganizationName,\r\n                'name': defaultName,\r\n                'mobile': defaultMobile,\r\n                'address': address,\r\n                'addressString': addressString\r\n            };\r\n        }\r\n        let { fromOrderCreation } = this.controller;\r\n        let footer = <button type=\"button\"\r\n            className=\"btn btn-primary w-100\"\r\n            onClick={this.onSaveContact}>{fromOrderCreation ? '保存并使用' : '保存'}</button>;\r\n        return <Page header=\"地址信息\" footer={footer} right={buttonDel}>\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    formData={contactData}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nclass VConfirmDeleteContact extends VPage<CSelectContact> {\r\n    async open(contact: any) {\r\n        this.openPage(this.page, contact);\r\n    }\r\n\r\n    private onConfirm = async () => {\r\n        await this.returnCall(true);\r\n        this.closePage();\r\n    }\r\n\r\n    private onCancel = async () => {\r\n        await this.returnCall(false);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = (contact: any) => {\r\n        return <Page header=\"删除地址\" back=\"close\">\r\n            <div className=\"w-75 mx-auto border border-primary rounded my-3 p-3 bg-white\">\r\n                <div className=\"p-4 position-relative\">\r\n                    <i className=\"fa fa-question-circle position-absolute fa-2x text-warning\" style={{ left: 0, top: 0 }} />\r\n                    <b className=\"\">是否删除该地址？</b>\r\n                </div>\r\n                <div className=\"d-flex mt-3 justify-content-end\">\r\n                    <button className=\"btn btn-danger mr-3\" onClick={this.onConfirm}>删除地址</button>\r\n                    <button className=\"btn btn-outline-info mr-3\" onClick={this.onCancel}>取消</button>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, BoxId } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { FA } from 'tonva';\r\nimport { CAddress } from './CAddress';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\nexport class VAddress extends VPage<CAddress> {\r\n    private provinceId: number;\r\n    private cityId: number;\r\n    private countyId: number;\r\n    private backLevel = 0;\r\n\r\n    async open(param: any) {\r\n        let provinces = await this.controller.getCountryProvince(GLOABLE.CHINA);\r\n        this.openPage(this.page, { provinces: provinces });\r\n    }\r\n\r\n    private page = (param: any) => {\r\n        this.backLevel++;\r\n        return <Page header=\"选择所在省市\">\r\n            <div className=\"row no-gutters\">\r\n                {param.provinces.map((v: any) => this.renderPCC(v.province, this.onProvinceClick))}\r\n            </div>\r\n        </Page>\r\n    }\r\n\r\n    private renderPCC = (pcc: BoxId, onClick: any) => {\r\n        return <div key={pcc.id} className=\"col-6 col-md-4 col-lg-3 cursor-pointer\">\r\n            {tv(pcc, (value) => {\r\n                let { id, chineseName } = value;\r\n                return <>\r\n                    <div className=\"pt-1 pb-1 px-2\" onClick={() => onClick(id)}\r\n                        style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n                    >\r\n                        <span className=\"ml-1 align-middle\">\r\n                            <FA name=\"chevron-right\" className=\"text-info small\" />\r\n                            &nbsp; {chineseName}\r\n                        </span>\r\n                    </div>\r\n                </>;\r\n            })}\r\n        </div>\r\n    }\r\n\r\n    private onProvinceClick = async (provinceId: any) => {\r\n        this.provinceId = provinceId;\r\n        let cities = await this.controller.getProvinceCities(provinceId);\r\n        if (cities) {\r\n            let len = cities.length;\r\n            if (len === 1) {\r\n                await this.onCityClick(cities[0].city.id);\r\n                return;\r\n            }\r\n            if (len > 1) {\r\n                this.backLevel++;\r\n                this.openPageElement(<Page header=\"选择所在城市\">\r\n                    <div className=\"row no-gutters\">\r\n                        {cities.map(v => this.renderPCC(v.city, this.onCityClick))}\r\n                    </div>\r\n                </Page>);\r\n                return;\r\n            }\r\n        } else {\r\n            this.closePage(this.backLevel);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCityClick = async (cityId: any) => {\r\n        this.cityId = cityId;\r\n        let counties = await this.controller.getCityCounties(cityId);\r\n        if (counties && counties.length > 0) {\r\n            this.backLevel++;\r\n            this.openPageElement(<Page header=\"选择所在区县\">\r\n                <div className=\"row no-gutters\">\r\n                    {counties.map(v => this.renderPCC(v.county, this.onCountyClick))}\r\n                </div>\r\n            </Page>);\r\n        } else {\r\n            this.closePage(this.backLevel);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCountyClick = async (countyId: any) => {\r\n        this.countyId = countyId;\r\n        this.closePage(this.backLevel);\r\n        this.saveAddress();\r\n    }\r\n\r\n    private saveAddress = async () => {\r\n        await this.controller.saveAddress(GLOABLE.CHINA, this.provinceId, this.cityId, this.countyId);\r\n    }\r\n}\r\n","import { VAddress } from './VAddress';\r\nimport { CUqBase } from '../CBase';\r\n\r\nexport class CAddress extends CUqBase {\r\n    protected async internalStart() {\r\n        this.openVPage(VAddress);\r\n    }\r\n\r\n    getCountryProvince = async (countryId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetCountryProvinces.table({ country: countryId });\r\n    }\r\n\r\n    getProvinceCities = async (provinceId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetProvinceCities.table({ province: provinceId });\r\n    }\r\n\r\n    getCityCounties = async (cityId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetCityCounties.table({ city: cityId });\r\n    }\r\n\r\n    saveAddress = async (countryId: number, provinceId: number, cityId?: number, countyId?: number): Promise<any> => {\r\n        let { Address } = this.uqs.common;\r\n        let newAddress = await Address.save(undefined, { country: countryId, province: provinceId, city: cityId, county: countyId });\r\n        let addressId = newAddress && Address.boxId(newAddress.id);\r\n        this.returnCall(addressId);\r\n    }\r\n}\r\n","import { observable } from 'mobx';\r\nimport { Context, BoxId } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VContactList } from './VContactList';\r\nimport { VContact } from './VContact';\r\nimport { CAddress } from './CAddress';\r\n\r\nexport abstract class CSelectContact extends CUqBase {\r\n    fromOrderCreation: boolean;\r\n\r\n    @observable userContacts: BoxId[] = [];\r\n\r\n    async internalStart(fromOrderCreation: boolean/*contactType: ContactType*/) {\r\n        this.fromOrderCreation = fromOrderCreation;\r\n        let userContactMaps = await this.cApp.currentUser.getContacts();\r\n        this.userContacts = userContactMaps.map((v: any) => v.contact);\r\n        this.openVPage(VContactList);\r\n        if (this.fromOrderCreation && (!this.userContacts || this.userContacts.length === 0)) {\r\n            this.onNewContact();\r\n        }\r\n    }\r\n\r\n    protected abstract async getIsDefault(userSetting: any, userContactId: number): Promise<boolean>;\r\n\r\n    /**\r\n     * 打开地址新建界面\r\n     */\r\n    onNewContact = async () => {\r\n        this.openVPage(VContact, { contact: undefined });\r\n    }\r\n\r\n    /**\r\n     * 打开地址编辑界面\r\n     */\r\n    onEditContact = async (userContact: BoxId) => {\r\n        let userContactId = userContact.id;\r\n        let contact = await this.uqs.customer.Contact.load(userContactId);\r\n        let userSetting = await this.cApp.currentUser.getSetting();\r\n        contact.isDefault = await this.getIsDefault(userSetting, userContactId);\r\n        let userContactData: any = { contact: contact };\r\n        this.openVPage(VContact, userContactData);\r\n    }\r\n\r\n    delContact = async (contact: any) => {\r\n        let { id } = contact;\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.delContact(id);\r\n        if (contact.isDefault) {\r\n            this.setDefaultContact(undefined);\r\n        }\r\n        let index = this.userContacts.findIndex(v => v.id === id);\r\n        if (index > -1)\r\n            this.userContacts.splice(index, 1);\r\n    }\r\n\r\n    saveContact = async (contact: any) => {\r\n        let { Contact: contactTuid } = this.uqs.customer;\r\n        let newContact = await contactTuid.save(undefined, contact);\r\n        let { id: newContactId } = newContact;\r\n        let contactBox = contactTuid.boxId(newContactId);\r\n\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.addContact(newContactId);\r\n        this.userContacts.push(contactBox);\r\n        let { id, isDefault } = contact;\r\n        if (isDefault === true || this.userContacts.length === 1) {\r\n            await this.setDefaultContact(contactBox);\r\n        }\r\n        // contact.id !== undefined表示是修改了已有的contact(我们只能用“替换”表示“修改”，所以此时需要删除原contact)\r\n        if (id !== undefined) {\r\n            await currentUser.delContact(id);\r\n            let index = this.userContacts.findIndex(v => v.id === id);\r\n            if (index > -1)\r\n                this.userContacts.splice(index, 1);\r\n        }\r\n        this.backPage();\r\n        if (this.fromOrderCreation) {\r\n            this.onContactSelected(contactBox);\r\n        }\r\n    }\r\n\r\n    protected abstract async setDefaultContact(contactId: BoxId): Promise<any>;\r\n\r\n    onContactSelected = (contact: BoxId) => {\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(contact);\r\n        }\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = this.newC(CAddress); // new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n}\r\n\r\nexport class CSelectShippingContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        if (userSetting !== undefined) {\r\n            let { shippingContact } = userSetting;\r\n            return shippingContact && shippingContact.id === userContactId;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultShippingContact(contactId);\r\n    }\r\n}\r\n\r\nexport class CSelectInvoiceContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        if (userSetting !== undefined) {\r\n            let { invoiceContact } = userSetting;\r\n            return invoiceContact && invoiceContact.id === userContactId;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoiceContact(contactId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CPointProduct } from './CPointProduct';\r\n\r\nexport class OrderSuccess extends VPage<CPointProduct> {\r\n\r\n    async open(orderCreateResult: any) {\r\n        this.openPage(this.page, orderCreateResult);\r\n    }\r\n\r\n    private page = (orderCreateResult: any) => {\r\n        return <Page header=\"兑换成功\" back=\"close\">\r\n            <div className=\"p-3 bg-white mb-3\">\r\n                <div className=\"mb-3\">兑换成功，感谢您对百灵威的厚爱！</div>\r\n                <p className=\"\">\r\n                    订单: <span className=\"h5 text-info\">{orderCreateResult.no}</span><br /><br />\r\n                    我们将立刻处理您的订单，请注意查收到货短信。\r\n                </p>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import { BoxId } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\n\r\nexport class pointOrder {\r\n\r\n    webUser: any;   // OK\r\n    organization: BoxId;\r\n    customer: any;  //OK\r\n    salesRegion: BoxId;   // OK\r\n\r\n    @observable shippingContact: BoxId; //OK\r\n    @observable exchangeItems: OrderItem[] = [];\r\n\r\n    @computed get amount() {\r\n        return this.exchangeItems.reduce((pv, cv) => (pv + cv.subAmount), 0);\r\n    };\r\n\r\n    getDataForSave() {\r\n        let exchangeItems: any[] = [];\r\n        this.exchangeItems.forEach(oi => {\r\n            exchangeItems.push({\r\n                product: oi.product, point: oi.point, quantity: oi.quantity //, pack: oi.pack,\r\n                , subAmount: oi.quantity * oi.point\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            amount: this.amount,\r\n            exchangeitems: exchangeItems, // 前面的必须是小写的\r\n            salesRegion: this.salesRegion\r\n        }\r\n    }\r\n}\r\n\r\nexport class OrderItem {\r\n    product: BoxId;\r\n    @observable pack: BoxId;\r\n    @observable quantity: any;\r\n    @observable point: any;\r\n    @computed get subAmount() {\r\n        return this.quantity * this.point;\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, EasyDate } from 'tonva';\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { tv, List } from 'tonva';\r\nimport { OrderItem } from './pointOrder';\r\nimport { PointProductImage } from 'tools/productImage';\r\n\r\nexport class VExchangeHistoryDetail extends VPage<CPointProduct> {\r\n\r\n    async open(order: any) {\r\n\r\n        this.openPage(this.page, order);\r\n    }\r\n\r\n    private renderexchangeItem = (orderItem: OrderItem) => {\r\n        let { product, pack, quantity, point } = orderItem;\r\n        return <>\r\n            {tv(product, (v) => {\r\n                return <div className=\"row m-1 w-100\">\r\n                    <div title={v.description} className=\"col-4 m-0 p-0\"><PointProductImage chemicalId={v.imageUrl} className=\"w-100\" style={{maxHeight:\"23vw\"}} /></div>\r\n                    <div className=\"col-8 small\">\r\n                        <div><label>{v.descriptionC}</label></div>\r\n                        <div className=\"d-flex justify-content-between my-3\">\r\n                            <div className=\"mt-1\"><b>{pack ? <>{tv(pack, (c) => <>{c.radioy}{c.unit}</>)}</> : v.grade}</b></div>\r\n                            <div>\r\n                                <span className=\"text-danger h6\">{(point * quantity)}</span>\r\n                                <small className=\"text-muted\">分 ({point} × {quantity})</small>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </>;\r\n    }\r\n\r\n    private page = (order: any) => {\r\n        let { brief, data } = order;\r\n        let { no, date } = brief;\r\n        let { exchangeItems, shippingContact, amount } = data;\r\n\r\n        let header = <>订单详情: {no}</>\r\n        return <Page header={header}>\r\n            <List items={exchangeItems} item={{ render: this.renderexchangeItem }} />\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">收货地址:</div>\r\n                <div className=\"col-9\">{tv(shippingContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">下单时间:</div>\r\n                <div className=\"col-9 text-right\"><EasyDate date={date} /></div>\r\n            </div>\r\n            <div className=\"bg-white p-3 my-1 text-right\">\r\n                <span className=\"text-danger font-weight-bold\">总积分: {amount}</span>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, EasyDate } from 'tonva';\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { List } from 'tonva';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nexport class VExchangeHistory extends VPage<CPointProduct> {\r\n\r\n    private exchangeHistory: any[] = [];        /*积分产品列表 */\r\n    async open(param?: any) {\r\n        this.exchangeHistory = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderExchangeHistory = (pointProduct: any, index: number) => {\r\n        let { openOrderDetail } = this.controller;\r\n        let { id, no, date } = pointProduct;\r\n        return <div className=\"p-3 justify-content-between\">\r\n            <div className=\"mr-5\" onClick={() => openOrderDetail(id)}><span className=\"small text-muted\">兑换单号: </span><strong>{no}</strong></div>\r\n            <div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n        </div>;\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return <Page header=\"兑换历史记录\">\r\n            <List items={this.exchangeHistory} item={{ render: this.renderExchangeHistory }} none=\"暂无记录\"></List>\r\n        </Page>;\r\n    });\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Scroller } from 'tonva';\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { List } from 'tonva';\r\nimport { observer } from 'mobx-react-lite';\r\n// import moment from 'moment';\r\nimport { renderPointRecord } from './VMyPoint';\r\nimport { RevenueExpenditure } from './basicRefer';\r\n\r\nexport class VRevenueExpenditure extends VPage<CPointProduct> {\r\n    private showList: any = [];\r\n    private tipNone: string = '『 无 』';\r\n    async open(param?: any) {\r\n        this.openPage(this.page, { header: param });\r\n    }\r\n\r\n    /* private renderItem = (item: any) => {\r\n        let { date, comments, point } = item;\r\n        let generateDate = moment(date).format('YYYY-MM-DD HH:mm:ss');\r\n        return <div className=\"d-flex w-100 justify-content-between align-content-center px-3 py-2\">\r\n            <div>\r\n                <div className=\"text-muted\"><small><b>{comments}</b></small></div>\r\n                <div style={{ fontSize: \"40%\" }} className=\"text-muted\">{generateDate}</div>\r\n                <div style={{ fontSize: \"40%\" }} className=\"text-muted\"><EasyDate date={date}></EasyDate></div>\r\n            </div>\r\n            <div className=\"d-table h-100\">\r\n                <div className=\"font-weight-bolder h-100 d-table-cell align-middle\" style={{ color: \"#ff0000\" }}>{point >= 0 ? '+' : ''}{point}</div>\r\n            </div>\r\n        </div>\r\n    } */\r\n\r\n    private matchData = (header: string) => {\r\n        let { pagePointHistory, cApp } = this.controller;\r\n        let { POINTHISTORY, SIGNINHISTORY } = RevenueExpenditure;\r\n        switch (header) {\r\n            case POINTHISTORY:\r\n                this.showList = pagePointHistory;\r\n                this.tipNone = '『 未曾拥有过 不曾失去过 』';\r\n                return;\r\n            case SIGNINHISTORY:\r\n                this.showList = cApp.cSignIn.signinPageHistory;\r\n                this.tipNone = '『 从未得到过 开启首签之旅 』';\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    protected onScrollBottom = async (scroller: Scroller) => {\r\n        this.showList.more();\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { header } = param;\r\n        this.matchData(header);\r\n        let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">{this.tipNone}</div>;\r\n\r\n        return <Page header={header} onScrollBottom={this.onScrollBottom}>\r\n            <List items={this.showList} item={{ render: renderPointRecord }} none={none} />\r\n        </Page>;\r\n    });\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, FA, tv, Form, UiSchema, UiCustom } from 'tonva';\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { MinusPlusWidget } from 'tools';\r\nimport { schema, TopicDivision } from './VPointProduct';\r\nimport giftPlate from 'images/giftPlate.png';\r\nimport { observable } from 'mobx';\r\nimport 已下架 from 'images/已下架.png';\r\n\r\nexport class VPointProductDetail extends VPage<CPointProduct> {\r\n    @observable DetailSource: number;\r\n    async open(param?: any) {\r\n        this.DetailSource = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            product: { visible: false },\r\n            // pack: { visible: false },\r\n            quantity: {\r\n                widget: 'custom',\r\n                label: null,\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget,\r\n                onChanged: this.controller.onQuantityChanged as any\r\n            } as UiCustom,\r\n            // point: { visible: false },\r\n            // imageUrl: { visible: false },\r\n        }\r\n    }\r\n\r\n    private renderVDefaultPost = () => {\r\n        return this.controller.renderVDefaultPost();\r\n    }\r\n\r\n    protected renderPointProduct = (pointProduct: any) => {\r\n        let { product, OffShelf } = pointProduct;\r\n        let OffShelfTip: any = undefined;\r\n        if(OffShelf) OffShelfTip = <div className=\"position-absolute\" style={{top:0,left:0}}>\r\n            <img src={已下架} alt=\"\" style={{width:'18vw'}} />\r\n        </div>\r\n        return <>\r\n            {tv(product, (v) => {\r\n                return <div className=\"w-100 px-4 position-relative\">\r\n                    {OffShelfTip}\r\n                    <div title={v.description}><PointProductImage chemicalId={v.imageUrl} className=\"w-100 h-min-12c\" style={{}} /></div>\r\n                    <div className=\"small\">\r\n                        <div className=\"mt-2\">{v.descriptionC}</div>\r\n                        <div className=\"my-2\">{v.grade}</div>\r\n                        <div className=\"row m-0 p-0\">\r\n                            <div className=\"col-5 m-0 p-0\">\r\n                                <span className=\"text-danger h5\">{v.point}</span>\r\n                                <small>分</small>\r\n                            </div>\r\n                            <div className=\"col-7 d-flex justify-content-end align-items-right m-0 p-0\">\r\n                                {\r\n                                    !OffShelf\r\n                                    ? <Form schema={schema} uiSchema={this.uiSchema} formData={pointProduct} className=\"mr-2\" />\r\n                                    : null\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </>\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { pointToExchanging, myEffectivePoints, pointProductsDetail } = this.controller;\r\n        let availablePoints = (myEffectivePoints - pointToExchanging) >= 0 ? (myEffectivePoints - pointToExchanging) : 0;\r\n        let pointsInsuffTip = availablePoints === 0 ? <span className=\"text-danger small\">( <FA name=\"exclamation-circle\" />积分不足 )</span> : null;\r\n        let right = this.controller.renderSelectedLable(this.DetailSource);\r\n        let footer = <div className=\"d-flex justify-content-between m-2\">\r\n            <div className=\"align-self-center\">当前可用:<span className=\"text-danger h4\" >{availablePoints}</span>分 {pointsInsuffTip}</div>\r\n        </div>;\r\n\r\n        return <Page header='产品详情' right={right} footer={footer} className=\"bg-white\">\r\n            <div className=\"\">{this.renderPointProduct(pointProductsDetail)}</div>{/* nav-tabs */}\r\n            <div className=\"d-flex mt-2\"><img src={giftPlate} alt=\"\" className=\"m-auto w-75\" /></div>\r\n            {/* {pointProductsDetail.htmlFragment\r\n                ? <div className=\"mx-2 mt-1\">\r\n                    {TopicDivision('产品介绍')}\r\n                    <div dangerouslySetInnerHTML={{ __html: pointProductsDetail.htmlFragment }} className=\"w-100\"></div>\r\n                </div>\r\n                : <>{this.renderVDefaultPost()}</>\r\n            } */}\r\n        </Page>;\r\n    });\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CPointProduct } from './CPointProduct';\r\n\r\nexport class VSelectedLable extends View<CPointProduct> {\r\n\r\n    render(param?: any): JSX.Element { \r\n        return <this.content param={param} />\r\n    };\r\n\r\n    private content = observer((param?: any) => {\r\n        let { pointProductsSelected, openSelectedPointProduct } = this.controller;\r\n        let { length } = pointProductsSelected;\r\n        let count = 0\r\n        let badge, onClick:any, pointer;\r\n        if (length) {\r\n            for (let i of pointProductsSelected) {\r\n                count += i.quantity;\r\n            }\r\n        }\r\n        if (count > 0) {\r\n            onClick = openSelectedPointProduct;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={()=>{if(onClick){onClick(param.param)}}}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","import * as React from 'react';\r\nimport { View } from 'tonva';\r\nimport { CPointProduct } from './CPointProduct';\r\nimport infb from 'images/infb.jpg'\r\n\r\nexport class VDefaultPost extends View<CPointProduct> {\r\n\r\n    render(): JSX.Element {\r\n        return <this.content />;\r\n    }\r\n\r\n    private content = (): any => {\r\n        return <div className=\"pt-2 px-2 bg-white\">\r\n            {/* <div className=\"border-bottom border-danger h5 py-1 mb-2\">公司概况</div> */}\r\n            <div style={{ textIndent: '2em' }}>\r\n                <p>百灵威科技有限公司是一家致力于研发和生产化学及相关产品，集敏捷制造、全球营销和现代物流为一体的高科技企业。百灵威在中国内地、香港，欧洲及北美等多个国家和地区设有物流中心，实行专业化、个性化的一站式服务，为全球超过200,000 名科技和工业领域的客户提供产品资源及配套技术服务。</p>\r\n                <p>百灵威现代化的研发制造基地拥有一支富有创造天赋的专业团队，新技术、新产品层出不穷，J&K®、Amethyst®、J&K Scientific® 产品已多达30,000 种以上，并呈几何级数增长。作为国际化的资源平台公司，百灵威致力于促进全球产业链的合作，不断推进集约式发展，集成资源600,000 余种，包括高纯有机试剂、无机试剂、生化试剂、分析试剂、标准品、金属有机催化剂、医药中间体、超精细材料、以及实验室仪器、耗材等众多产品。百灵威的柔性生产线能够快速提供小批量、多品种的原料，满足实验、中试以至规模化生产的需要。</p>\r\n                <p>百灵威秉承“诚实守信、开拓创新、合作共赢、实现卓越”的价值观，致力于与化学、生物医药、精细化工、食品工业、现代农业、电子、日化、石化、纺织、生命科学、环境保护、疾病控制、新能源、新材料、航空航天等领域的客户建立互信、长久的合作关系，为实现“促进科技与工业发展，造福人类”的使命而不懈努力！</p>\r\n                <img alt=\"\" src={infb} className=\"w-100\" />\r\n            </div>\r\n        </div >\r\n    };\r\n}\r\n","import { BoxId, RowContext, nav, User, QueryPager } from 'tonva';\r\nimport { CUqBase } from 'CBase';\r\nimport { observable } from 'mobx';\r\nimport { VPointProduct, VSelectedPointProduct } from 'pointMarket/VPointProduct';\r\nimport { VExchangeOrder } from './VExchangeOrder';\r\nimport { VMyPoint } from './VMyPoint';\r\nimport { CSelectShippingContact } from 'customer/CSelectContact';\r\nimport { OrderSuccess } from './OrderSuccess';\r\nimport { pointOrder, OrderItem } from './pointOrder';\r\nimport { VExchangeHistoryDetail } from './VExchangeHistoryDetail';\r\nimport { VExchangeHistory } from './VExchangeHistory';\r\n// import { VPlatformOrderPoint } from './VPlatformOrderPoint';\r\nimport { VRevenueExpenditure } from './VRevenueExpenditure';\r\nimport { VPointProductDetail } from './VPointProductDetail';\r\nimport { VSelectedLable } from './VSelectedLable';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { VDefaultPost } from './VDefaultPost';\r\nimport moment from 'moment';\r\n\r\nexport const topicClump = {\r\n    productGenre: '产品分类',\r\n    newRecommend: '新品推荐',\r\n    hotProduct: '热门产品',\r\n}\r\n\r\nexport const OrderSource = {\r\n    EXCHANGEORDER: '兑换订单',\r\n    PRIZEORDER: '奖品订单',\r\n}\r\n\r\nexport const PointProductDetailLevel = {\r\n    DIRECT: 3,\r\n    INDIRECT:4,\r\n}\r\n\r\nexport class CPointProduct extends CUqBase {\r\n\r\n    @observable myPoints: any[] = [];                  /* 我的积分 */\r\n    @observable myEffectivePoints: number = 0;         /* 我的积分(计算后) */\r\n    @observable myTotalPoints: number = 0;             /* 我的积分(计算后) */\r\n    @observable myPointTobeExpired: number = 0;        /* 我的快过期积分 */\r\n\r\n    @observable navCloseByOrderSuccess: number = 0;    /* 兑换成功后关闭页面层数 */\r\n\r\n    @observable pointProducts: any[] = [];             /* 可兑产品列表 */\r\n    @observable newPointProducts: any[] = [];          /* 新品推荐 */\r\n    @observable hotPointProducts: any[] = [];          /* 热门产品 */\r\n    @observable pointProductsSelected: any[] = [];     /* 已选择产品列表 */\r\n    @observable pointProductsDetail: any;              /* 详情产品 */\r\n    @observable pointToExchanging: number = 0;              /* 将要兑换的积分总计 */\r\n    @observable orderData: pointOrder = new pointOrder();   /* 正在提交的产品列表*/\r\n    @observable couponId: number;                      /* 积分码 */\r\n    @observable platformOrderId: any;                  /* 平台合同号 */\r\n    @observable platformOrder: any[] = [];             /* 平台合同 */\r\n    @observable pagePointHistory: QueryPager<any>;     /* 积分详情 */\r\n    @observable pointProductGenre: any[] = [];         /* 产品类型列表 */\r\n\r\n    pointInterval: any = { startPoint: 0, endPoint: 10000 };\r\n\r\n    protected async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 刷新积分\r\n     */\r\n    refreshMypoint = async () => {\r\n        let { currentUser } = this.cApp;\r\n        this.myPoints = await currentUser.getPoints();\r\n        this.myEffectivePoints = this.myPoints.reduce((v, e) => { return v + e.effectiveLeftPoint }, 0);\r\n        this.myTotalPoints = this.myPoints.reduce((v, e) => { return v + e.totalLeftPoint }, 0)\r\n        let date = new Date();\r\n        let dateYear = date.getFullYear();\r\n        this.myPointTobeExpired = this.myPoints.reduce((v, e) => { return v + ((dateYear - e.pointYear) > 1 ? e.effectiveLeftPoint : 0) }, 0);\r\n    }\r\n\r\n    /**\r\n     * 初始化可兑换产品列表(暂时弃用)\r\n     */\r\n    initPointProducts = () => {\r\n        if (this.pointProductsSelected.length) {\r\n            for (let i of this.pointProductsSelected) {\r\n                this.pointProducts.forEach((el: any) => {\r\n                    if (i.product.id === el.product.id) el.quantity = i.quantity;\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 清空选择的积分产品  \r\n     */\r\n    clearSelectedPointsProducts = () => {\r\n        this.orderData.exchangeItems = undefined;\r\n        this.pointProductsSelected.length = 0;\r\n        this.pointToExchanging = 0;\r\n    }\r\n\r\n    /**\r\n     * 积分管理页面\r\n     */\r\n    openMyPoint = async (param?: any) => {\r\n        await this.refreshMypoint();        /* 刷新积分 */\r\n        await this.getPointProductGenre();  /* 获取产品类型 */\r\n        this.newPointProducts = await this.getNewPointProducts();    /* 获取新品推荐 */\r\n        this.hotPointProducts = await this.getHotPointProducts();    /* 获取热门产品 */\r\n        this.openVPage(VMyPoint);\r\n    }\r\n\r\n    /**\r\n     * 可兑换产品页面\r\n     */\r\n    openPointProduct = async (name?: any) => {\r\n        // this.initPointProducts();\r\n        this.openVPage(VPointProduct, name);\r\n    }\r\n\r\n    /**\r\n     * 可兑换产品的详情(可生成浏览量)\r\n     */\r\n    openPointProductDetail = async (pointProduct: any,DetailLevel: number) => {\r\n        this.navCloseByOrderSuccess = DetailLevel; \r\n        this.pointProductsDetail = pointProduct;\r\n        if (this.pointProductsSelected.length) {\r\n            for (let i of this.pointProductsSelected) {\r\n                if (pointProduct.product.id === i.product.id)\r\n                    this.pointProductsDetail.quantity = i.quantity;\r\n            }\r\n        } else\r\n            this.pointProductsDetail.quantity = 0;\r\n        let fm = 'YYYY-MM-DD HH:mm:ss';\r\n        this.pointProductsDetail.OffShelf = false;\r\n        let findProduct = await this.getPointProductLibLoad(pointProduct.product.id);\r\n        if (findProduct !== undefined && moment(undefined, fm) >= moment(findProduct.endDate, fm))\r\n            this.pointProductsDetail.OffShelf = true;\r\n        // this.pointProductsDetail.htmlFragment = await this.getPointProductDetailFragment(this.pointProductsDetail);\r\n        await this.setPointProductVisits(pointProduct.product.obj);//生成浏览量\r\n        this.openVPage(VPointProductDetail,DetailLevel);\r\n    }\r\n\r\n    /**\r\n     * 据商品id 获取对应的商品所有信息\r\n     */\r\n    getPointProductLibLoad = async (id: number) => {\r\n        return await this.uqs.积分商城.PointProductLib.load(id);\r\n    }\r\n\r\n    /**\r\n     * 获取积分商品详情的html片段(编译后)\r\n     */\r\n    getPointProductDetailFragment = async (pointProduct: any) => {\r\n        // this.pointProductsDetail.htmlFragment = '<div style=\"color:red;text-align:center;margin-top:2rem;\">帖文 待开发</div>';\r\n        let result = await window.fetch(GLOABLE.CONTENTSITE + '/partial/pointproductdetail/' + pointProduct.product.id);\r\n        if (result.ok) {\r\n            let content = await result.text();\r\n            return content;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 积分收支明细页面\r\n     */\r\n    openRevenueExpenditure = async (topic?: any) => {\r\n        await this.getPointHistory();\r\n        this.openVPage(VRevenueExpenditure, topic)\r\n    }\r\n\r\n    /**\r\n     * 积分兑换记录页面\r\n     */\r\n    openExchangeHistory = async () => {\r\n        let promises: PromiseLike<any>[] = [];\r\n        promises.push(this.uqs.积分商城.PointExchangeSheet.mySheets(undefined, 1, -10));\r\n        promises.push(this.uqs.积分商城.PointExchangeSheet.mySheets(\"#\", 1, -100));\r\n        let presult = await Promise.all(promises);\r\n        let exchangeHistory = presult[0].concat(presult[1]);\r\n        this.openVPage(VExchangeHistory, exchangeHistory);\r\n    }\r\n\r\n    /**\r\n     * 历史兑换单详情页面\r\n     */\r\n    openOrderDetail = async (orderId: number) => {\r\n        let order = await this.uqs.积分商城.PointExchangeSheet.getSheet(orderId);\r\n        this.openVPage(VExchangeHistoryDetail, order);\r\n    }\r\n\r\n    /**\r\n     * 已选择的可兑换产品页面\r\n     */\r\n    openSelectedPointProduct = async (DetailLevel: number) => {\r\n        this.navCloseByOrderSuccess = DetailLevel;        \r\n        this.pointProductsSelected = this.pointProductsSelected.filter(v => v.quantity !== 0);\r\n        this.openVPage(VSelectedPointProduct);\r\n    }\r\n\r\n    /**\r\n     * 确认兑换订单预览页面\r\n     */\r\n    openExchangeOrder = async () => {\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        }\r\n        this.pointProductsSelected = this.pointProductsSelected.filter(v => v.quantity !== 0);\r\n        this.openVPage(VExchangeOrder);\r\n    }\r\n\r\n    /**\r\n     * 已选择的可兑换产品图标\r\n     */\r\n    renderSelectedLable(DetailLevel: number) {\r\n        return this.renderView(VSelectedLable,DetailLevel);\r\n    }\r\n\r\n    /**\r\n     * 默认帖文\r\n     */\r\n    renderVDefaultPost() {\r\n        return this.renderView(VDefaultPost);\r\n    }\r\n\r\n    // /*领取积分 */\r\n    // openPointDrawing = async (credits?: string) => {\r\n    //     /* \r\n    //     let lastPlatformId = await this.getLastPlatformOrder();\r\n    //     if (lastPlatformId)\r\n    //         this.platformOrder = await this.getPlatFormOrder(this.platformOrderId);\r\n    //     */\r\n    //     this.openVPage(VPlatformOrderPoint, credits);\r\n    // }\r\n\r\n    /* 展示 积分详情*/\r\n    /* pointDetails = async () => {\r\n        this.getPointHistory();\r\n        this.openVPage(VPointDetails);\r\n    } */\r\n\r\n    /**\r\n     * 浏览商品(数据埋点,生产浏览量PV)\r\n     */\r\n    setPointProductVisits = async (pointProduct: any) => {\r\n        return this.uqs.积分商城.SetPointProductVisits.submit({ pointProduct });\r\n    }\r\n\r\n    /**\r\n     * 获取产品类型\r\n     */\r\n    getPointProductGenre = async () => {\r\n        let { Genre } = this.uqs.积分商城;\r\n        this.pointProductGenre = await Genre.all();\r\n    }\r\n\r\n    /**\r\n     * 获取积分详情的数据\r\n     */\r\n    getPointHistory = () => {\r\n        this.pagePointHistory = new QueryPager(this.uqs.积分商城.GetPointHistory, 15, 30);\r\n        this.pagePointHistory.first({ key: \"\" });\r\n    }\r\n\r\n    /**\r\n     * 获取可兑换产品(据 分类、新品推荐、热门产品)\r\n     */\r\n    getPointProductByDifferentPlot = async (plot: any) => {\r\n        let { productGenre, newRecommend, hotProduct } = topicClump;\r\n        let state = typeof plot === 'object' && this.pointProductGenre.some((v) => v.name === plot.name) ? productGenre : plot;\r\n        switch (state) {\r\n            case productGenre:\r\n                this.pointProducts = await this.filterByProductGenre(plot);\r\n                break;\r\n            case newRecommend:\r\n                this.pointProducts = await this.getNewPointProducts();\r\n                break;\r\n            case hotProduct:\r\n                this.pointProducts = await this.getHotPointProducts();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        // this.initPointProducts();\r\n    }\r\n\r\n    /**\r\n     * 据类型筛选商品\r\n     */\r\n    filterByProductGenre = async (currentGenre: any) => {\r\n        // let pointProductFromGenre = await this.getProductsFromGenre(currentGenre);\r\n        let pointProductFromGenre = await this.uqs.积分商城.GetPointProductByGenre.table({ genre: currentGenre });\r\n        return pointProductFromGenre.map((v) => { return { genre: v.genre, product: v.pointProduct } });\r\n    }\r\n\r\n    /**\r\n     * 获取指定分类所属的商品\r\n     */\r\n    getProductsFromGenre = async (genre: any) => {\r\n        return await this.uqs.积分商城.PointProductGenre.table({ genre, pointproduct: undefined });\r\n    }\r\n\r\n    /**\r\n     * 获取新品推荐的产品\r\n     */\r\n    getNewPointProducts = async () => {\r\n        let result = await this.uqs.积分商城.GetNewPointProducts.table({});\r\n        return result.sort((a,b)=>a.point-b.point).map((v) => { return { product: v.id } });\r\n    }\r\n\r\n    /**\r\n     * 获取热门产品\r\n     */\r\n    getHotPointProducts = async () => {\r\n        let result = await this.uqs.积分商城.GetHotPointProducts.table({});\r\n        return result.sort((a,b)=>a.point-b.point).map((v) => { return { product: v.id } });\r\n    }\r\n\r\n    /**\r\n     * 获取积分区间的积分产品\r\n     */\r\n    getPointsIntervalProducts = async (state: any) => {\r\n        switch (state) {\r\n            case 'below':\r\n                this.pointInterval = { startPoint: 0, endPoint: 10000 };\r\n                break;\r\n            case 'firstLevel':\r\n                this.pointInterval = { startPoint: 10000, endPoint: 50000 };\r\n                break;\r\n            case 'twoLevel':\r\n                this.pointInterval = { startPoint: 50000, endPoint: 150000 };\r\n                break;\r\n            case 'above':\r\n                this.pointInterval = { startPoint: 150000, endPoint: Infinity };\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.pointProducts = await this.getPointsProducts();\r\n        // this.initPointProducts();\r\n        return this.pointProducts;\r\n    }\r\n\r\n    /**\r\n     * 获取积分商城产品(积分划分)\r\n     */\r\n    getPointsProducts = async () => {\r\n        return await this.uqs.积分商城.GetPointProduct.table(this.pointInterval);\r\n    }\r\n\r\n    /**\r\n     * 获取商品源（兑换下单可用）\r\n     */\r\n    getProductSources = async (pointProduct: any) => {\r\n        return await this.uqs.积分商城.PointProductSource.obj({ pointProduct, sourceId: undefined });\r\n    }\r\n\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let IsContain = 0;\r\n        let nowQuantity = value - (prev ? prev : 0);\r\n        /* let availablePoints = this.myEffectivePoints - this.pointToExchanging;\r\n        if (availablePoints <= 0) return;    */ \r\n        // 当前产品详情的数量\r\n        this.pointProductsDetail.quantity = value;\r\n        // this.pointToExchanging = this.pointToExchanging + (data.point * nowQuantity);\r\n        this.pointToExchanging = this.pointToExchanging + (data.product.obj.point * nowQuantity);\r\n        this.pointProductsSelected.forEach(element => {\r\n            if (element.product.id === data.product.id) {\r\n                element.quantity = element.quantity + nowQuantity;\r\n                IsContain = IsContain + 1;\r\n            }\r\n        });\r\n        if (IsContain === 0) {\r\n            data.point = data.product.obj.point;\r\n            this.pointProductsSelected.push(data);\r\n        }\r\n    }\r\n\r\n    private createOrderFromCart = async () => {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        this.orderData.webUser = currentUser.id;\r\n        this.orderData.salesRegion = currentSalesRegion.id;\r\n        if (currentUser.currentCustomer !== undefined) {\r\n            this.orderData.customer = currentUser.currentCustomer.id;\r\n        }\r\n        if (this.pointProductsSelected !== undefined && this.pointProductsSelected.length > 0) {\r\n            this.orderData.exchangeItems = this.pointProductsSelected.map((e: any) => {\r\n                if (e.quantity > 0) {\r\n                    var item = new OrderItem();\r\n                    item.product = e.product;\r\n                    // item.pack = e.pack;\r\n                    item.quantity = e.quantity;\r\n                    item.point = e.point;\r\n                    return item;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * 生成兑换单兑换积分\r\n     */\r\n    submitOrder = async () => {\r\n        this.createOrderFromCart();\r\n\r\n        let PointExchangeSheet = this.uqs.积分商城.PointExchangeSheet;\r\n        let getDataForSave = this.orderData.getDataForSave();\r\n        let result: any = await PointExchangeSheet.save(\"PointExchangeSheet\", getDataForSave);\r\n        let { id, flow, state } = result;\r\n        await PointExchangeSheet.action(id, flow, state, \"submit\");\r\n\r\n        //暂时扣除已经兑换的积分;\r\n        this.myEffectivePoints = this.myEffectivePoints - this.pointToExchanging;\r\n        this.myTotalPoints = this.myTotalPoints - this.pointToExchanging;\r\n        if (this.pointToExchanging > this.myPointTobeExpired) {\r\n            this.myPointTobeExpired = 0;\r\n        } else {\r\n            this.myPointTobeExpired = this.myPointTobeExpired - this.pointToExchanging;\r\n        }\r\n\r\n        //兑换后清空选择的积分产品\r\n        /* this.orderData.exchangeItems = undefined;\r\n        this.pointProductsSelected.length = 0;\r\n        this.pointToExchanging = 0; */\r\n        this.clearSelectedPointsProducts();\r\n\r\n        // 打开下单成功显示界面\r\n        // nav.popTo(this.cApp.topKey);\r\n        this.closePage(this.navCloseByOrderSuccess);\r\n        this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    /**\r\n     * 获取当前webuser对应customer的最近一个订单 TODO:delete\r\n     */\r\n    getLastPlatformOrder = async () => {\r\n\r\n        let { currentCustomer } = this.cApp.currentUser;\r\n        let validationResult = await this.uqs.积分商城.GetLastPlatFormOrder.submit({ customer: currentCustomer && currentCustomer.id });\r\n        let { platformOrderId } = validationResult;\r\n        this.platformOrderId = validationResult.platformOrderId;\r\n        return platformOrderId;\r\n    }\r\n\r\n    getPlatFormOrder = async (platformOrderId: string) => {\r\n        return await this.uqs.积分商城.GetPlatFormOrder.table({ platformOrderId: platformOrderId });\r\n    }\r\n\r\n    IsCouponCanUse = async (couponCode: string) => {\r\n        this.couponId = 0;\r\n        let { currentUser } = this.cApp;\r\n        let { salesTask } = this.uqs;\r\n        let validationResult = await salesTask.IsCanUseCoupon.submit({ code: couponCode, webUser: currentUser && currentUser.id });\r\n\r\n        let { result, id, types } = validationResult;\r\n        if (result === 1) {\r\n            this.couponId = id;\r\n            if (types !== 'credits')\r\n                result = 0;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 领取积分码 TODO:delete\r\n     */\r\n    receivePoint = async (orderId: string) => {\r\n        let { currentCustomer } = this.cApp.currentUser;\r\n        let { AddPlatformOrderPoint } = this.uqs.积分商城;\r\n        let result = await AddPlatformOrderPoint.submit({ orderId: orderId, couponId: this.couponId, customer: currentCustomer && currentCustomer.id });\r\n        let rtn = result.result;\r\n\r\n        return rtn;\r\n    }\r\n\r\n    private openMeInfoOptions: any;\r\n    /**\r\n     * 检查客户信息是否完善（不完善需补充完善后方可领取积分）\r\n     */\r\n    userInfoCompletedChecking = (options: any): boolean => {\r\n\r\n        if (!this.isLogined) {\r\n            this.openMeInfoOptions = options;\r\n            nav.showLogin(this.loginCallback, true);\r\n            return false;\r\n        } else {\r\n            let { cMe, currentUser } = this.cApp;\r\n            if (!currentUser.allowOrdering) {\r\n                cMe.openMeInfoFirstOrder(options);\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\n    private loginCallback = async (user: User): Promise<void> => {\r\n        let { cApp } = this;\r\n        await cApp.currentUser.setUser(user);\r\n        await cApp.loginCallBack(user);\r\n        this.closePage(1);\r\n\r\n        let { cMe, currentUser } = this.cApp;\r\n        if (!currentUser.allowOrdering) {\r\n            cMe.openMeInfoFirstOrder(this.openMeInfoOptions);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * TODO: delete\r\n     */\r\n    addUsedCoupon = async () => {\r\n        let { AddUsedCoupon } = this.uqs.积分商城;\r\n        let result = await AddUsedCoupon.submit({ couponId: this.couponId });\r\n        let rtn = result.result;\r\n        return rtn;\r\n    }\r\n\r\n    private defaultSetting: any;\r\n    private async getDefaultSetting() {\r\n        if (this.defaultSetting) return this.defaultSetting;\r\n        let { currentUser } = this.cApp;\r\n        return this.defaultSetting = await currentUser.getSetting() || {};\r\n    }\r\n    private contact0: BoxId;\r\n    private async getContact(): Promise<BoxId> {\r\n        if (this.contact0 === null) return;\r\n        if (this.contact0 !== undefined) return this.contact0;\r\n        let { currentUser } = this.cApp;\r\n        let contactArr = await currentUser.getContacts();\r\n        if (contactArr === undefined || contactArr.length === 0) {\r\n            this.contact0 = null;\r\n            return;\r\n        }\r\n        return this.contact0 = contactArr[0].contact;\r\n    }\r\n    async getDefaultShippingContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.shippingContact || await this.getContact();\r\n    }\r\n\r\n    selectContact = async () => {\r\n        let cSelect = this.newC(CSelectShippingContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        return contactBox;\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        this.orderData.shippingContact = await this.selectContact()\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Form, List, tv, ObjectSchema, NumSchema, UiSchema, UiCustom, FA, Tabs, TabProp, TabCaptionComponent, StringSchema } from 'tonva';\r\nimport { CPointProduct, PointProductDetailLevel } from 'pointMarket/CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { MinusPlusWidget } from 'tools';\r\nimport { observable } from 'mobx';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { color } from 'order/VMyOrders';\r\nimport { randomColor } from 'tools/randomColor';\r\nimport { pointIcon, triangleShadingO } from 'tools/images';\r\n\r\nexport const renderHr = (HRCL?: any, HRST?: any) => {\r\n    let styleObj = HRST ? HRST : { backgroundColor: '#007bff' };\r\n    return <div className={`flex-fill ${HRCL ? HRCL : 'px-2 text-primary'}`}><hr style={{ height: 1, border: 'none', ...styleObj }} /></div>\r\n};\r\n\r\nexport const TopicDivision = (topic: any, CL?: any, ST?: any, HRCL?: any, HRST?: any) => {\r\n    return <div className={`text-center w-100 py-2 ${CL ? CL : 'px-2 text-primary'} d-flex justify-content-between align-items-center`} style={ST}>\r\n        {renderHr(HRCL, HRST)}{topic}{renderHr(HRCL, HRST)}\r\n    </div>\r\n}\r\n\r\n\r\nexport const schema = [\r\n    { name: 'product', type: 'object' } as ObjectSchema,\r\n    // { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    // { name: 'point', type: 'number' } as NumSchema,\r\n    // { name: 'imageUrl', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport class VPointProduct extends VPage<CPointProduct> {\r\n    @observable protected isShowSelectForm: boolean = false;\r\n    @observable protected productIsNull: boolean = false;\r\n    @observable protected pointIsEnough: boolean = false;\r\n    private currentInterval: string;\r\n    private themeName: string = '积分商城';\r\n    private tabs: TabProp[];\r\n    protected none: JSX.Element = <div className=\"my-4 text-secondary d-flex justify-content-center\">『 暂无可兑换产品 』</div>;\r\n    rankInterval: any = [\r\n        { caption: '1万以下', state: 'below', icon: 'superpowers', borderC: '#2c93ad' },\r\n        { caption: '1-5万', state: 'firstLevel', icon: 'superpowers', borderC: '#3CC43C' },\r\n        { caption: '5-15万', state: 'twoLevel', icon: 'superpowers', borderC: '#7c1e5e' },\r\n        { caption: '15万以上', state: 'above', icon: 'superpowers', borderC: '#0e2c8c' },\r\n    ];\r\n    async open(param?: any) {\r\n        if (param) {\r\n            this.themeName = param.name ? param.name : param;\r\n            await this.controller.getPointProductByDifferentPlot(param);\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n    private getTabs = async () => {\r\n        let { pointProducts, getPointsIntervalProducts } = this.controller;\r\n        this.tabs = this.rankInterval.map((v: any) => {\r\n            let { caption, state, icon, borderC } = v;\r\n            return {\r\n                name: caption,\r\n                // caption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n                caption: (selected: boolean) => this.TabCaptionComponent(caption, icon, borderC, (selected ? '#ffffff' : 'transparent')),\r\n                content: () => {\r\n                    return <>{this.renderList()}</>\r\n                },\r\n                isSelected: this.currentInterval === state,\r\n                load: async () => {\r\n                    this.currentInterval = state;\r\n                    pointProducts = await getPointsIntervalProducts(this.currentInterval);\r\n                }\r\n            };\r\n        });\r\n    }\r\n\r\n    private TabCaptionComponent = (label: string, icon: string, borderC: string, color: string) => <div\r\n        className={'py-2 d-flex justify-content-center align-items-center flex-column cursor-pointer '}>\r\n        <small className=\"w-4c text-center rounded-sm font-weight-bold\" style={{ color: borderC, border: `1px solid ${borderC}`, background: color }}>{label}</small>\r\n    </div>;\r\n\r\n    protected renderList = (isToDetail?: boolean) => {\r\n        let { pointProducts, openPointProductDetail } = this.controller;\r\n        return <div style={{ background: `url(${triangleShadingO}) no-repeat 99% 230px,url(${triangleShadingO}) no-repeat 1% 480px`, backgroundSize: '2.5%' }}>\r\n            <List items={pointProducts} item={{ render: this.renderPointProduct, onClick: (v)=>{openPointProductDetail(v,PointProductDetailLevel.INDIRECT)}, className: 'w-50 px-3 bg-transparent' }} none={this.none}\r\n                className={`${pointProducts.length !== 0 ? 'd-flex flex-wrap bg-transparent mt-2' : ''}`}\r\n            ></List>\r\n        </div>\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            product: { visible: false },\r\n            // pack: { visible: false },\r\n            quantity: {\r\n                widget: 'custom',\r\n                label: null,\r\n                className: 'text-center w-2c',\r\n                WidgetClass: MinusPlusWidget,\r\n                onChanged: this.controller.onQuantityChanged as any\r\n            } as UiCustom,\r\n            // point: { visible: false },\r\n            // imageUrl: { visible: false },\r\n        }\r\n    }\r\n\r\n    protected renderPointProduct = (pointProduct: any) => {\r\n        let { product } = pointProduct;\r\n        return <>\r\n            {tv(product, (v) => {\r\n                return <div className=\"w-100 d-flex flex-column mb-4\">{/* height: 20vh  */}\r\n                    <div title={v.description} className=\"w-100\" style={{ height: '35vw' }} ><PointProductImage chemicalId={v.imageUrl} className=\"w-100 h-100\" style={{border:`2px solid ${randomColor()}`}} /></div>\r\n                    <div className=\"small w-100\">\r\n                        <div className=\"text-truncate w-100\">{v.descriptionC}</div>\r\n                        <>\r\n                            {\r\n                                this.isShowSelectForm\r\n                                    ? <div className=\"w-100 d-flex justify-content-between align-items-right mt-1\">{/* justify-content-end */}\r\n                                        <small className=\"align-self-center mb-3 text-primary\" ><FA name=\"shopping-bag\" size='2x' /></small>\r\n                                        <Form schema={schema} uiSchema={this.uiSchema} formData={pointProduct} className=\"mr-2\" />\r\n                                    </div>\r\n                                    : null\r\n                            }\r\n                            <div className='d-flex'>\r\n                                {/* <FA name='database' className=\"text-warning\" /> */}\r\n                                <img src={pointIcon} alt=\"\" style={{ height: 24 }} />\r\n                                <span className=\"text-danger h5 m-0 ml-1 align-self-end\"> {v.point}</span>{/* <small>分</small> */}\r\n                            </div>\r\n                        </>\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </>\r\n    }\r\n\r\n    protected openExchangeOrder = async () => {\r\n        // 未选择产品\r\n        let { pointToExchanging, myEffectivePoints } = this.controller;\r\n\r\n        if (pointToExchanging < 1) {\r\n            this.productIsNull = true;\r\n            this.pointIsEnough = false;\r\n            setTimeout(() => this.productIsNull = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n        // 积分不足\r\n        if (pointToExchanging > myEffectivePoints) {\r\n            this.productIsNull = false;\r\n            this.pointIsEnough = true;\r\n            setTimeout(() => this.pointIsEnough = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n\r\n        this.controller.openExchangeOrder();\r\n    }\r\n\r\n    protected getRelatedUI = () => {\r\n        let { pointToExchanging, myEffectivePoints } = this.controller;\r\n        let productIsNullTip = this.productIsNull ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" />未选择产品</div>\r\n            : null;\r\n        let pointIsEnoughTip = this.pointIsEnough ?\r\n            <div className=\"text-danger small m-0 p-0\"><FA name=\"exclamation-circle\" />积分不足<br />剩余{myEffectivePoints}分</div>\r\n            : null;\r\n\r\n        let footer = <div className=\"d-block\">\r\n            <div className=\"w-100 px-3 d-flex justify-content-between\">\r\n                <div>总计:<span className=\"text-danger ml-2 mr-1 h2\" >{pointToExchanging}</span>分</div>\r\n                <div>{productIsNullTip}{pointIsEnoughTip}</div>\r\n                <button type=\"button\" className=\"btn btn-danger m-1\" onClick={this.openExchangeOrder}>去兑换</button>\r\n            </div>\r\n        </div>;\r\n        return footer;\r\n    }\r\n\r\n    protected page = observer(() => {\r\n        this.getTabs();\r\n        let right = this.controller.renderSelectedLable(PointProductDetailLevel.DIRECT);\r\n        return <Page header={this.themeName} right={right}>\r\n            {\r\n                this.themeName === '积分商城'\r\n                    ? <Tabs tabs={this.tabs} tabPosition=\"top\" size=\"lg\" />\r\n                    : <>\r\n                        {/* {TopicDivision(this.themeName)} */}\r\n                        {this.renderList()}\r\n                    </>\r\n            }\r\n        </Page >;\r\n    });\r\n}\r\n\r\n/**\r\n * 已选择的兑换产品列表\r\n */\r\nexport class VSelectedPointProduct extends VPointProduct {\r\n    isShowSelectForm: boolean = true;\r\n    protected none: JSX.Element = <div className=\"mt-4 text-secondary d-flex justify-content-center\">『 已清空您所选择的产品 』</div>;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    page = observer(() => {\r\n        let { pointProductsSelected, clearSelectedPointsProducts } = this.controller;\r\n        let footer = this.getRelatedUI();\r\n\r\n        // let right = <div className=\"mr-2\" onClick={clearSelectedPointsProducts}><FA name=\"trash-o\" className='text-light' /></div>;\r\n        // let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">『 已清空您所选择的产品 』</div>;\r\n        return <Page header='已选择兑换产品' right={<></>} footer={footer} >\r\n            <List\r\n                items={pointProductsSelected}\r\n                item={{ render: this.renderPointProduct, className: \"w-50 px-3\" }}\r\n                none={this.none}\r\n                className=\"d-flex flex-wrap bg-transparent mt-2\"\r\n            />\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { CProduct } from './CProduct';\r\nimport {\r\n    VPage, Page, Form, ItemSchema, NumSchema, UiSchema, Field,\r\n    ObjectSchema, RowContext, UiCustom, FormField, BoxId, FA, List\r\n} from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { MinusPlusWidget } from '../tools/minusPlusWidget';\r\nimport { ProductPackRow } from './Product';\r\nimport { ViewMainSubs, MainProductChemical } from 'mainSubs';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { productPropItem, renderBrand } from './VProductView';\r\nimport { VProductFavorateLabel } from 'customer/VProductFavorateLabel';\r\nimport { pdfIcon } from 'tools/images';\r\nimport { TopicDivision } from 'pointMarket/VPointProduct';\r\nimport { browser } from 'tools/browser';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n];\r\n\r\nexport class VProduct extends VPage<CProduct> {\r\n    private productBox: BoxId;\r\n    private discount: number;\r\n\r\n    async open(param: any) {\r\n        let { productData, product, discount } = param;\r\n        let { getProductSpecFile, getProductMSDSFile } = this.controller;\r\n        this.productBox = product;\r\n        this.discount = discount;\r\n        await getProductMSDSFile(product);\r\n        await getProductSpecFile(product);\r\n        this.openPage(this.page, productData);\r\n    }\r\n\r\n    private renderProduct = (product: MainProductChemical) => {\r\n\r\n        let { id, brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"mb-3 px-2\">\r\n            <div className=\"py-2\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n            <div className=\"row mt-3\">\r\n                <div className=\"col-12 col-sm-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-12 col-sm-9\">\r\n                    <div className=\"row mx-3\">\r\n                        {productPropItem('产品编号', origin, \"font-weight-bold\")}\r\n                        {productPropItem('CAS', CAS, \"font-weight-bold\")}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('分子式', molecularFomula)}\r\n                        {productPropItem('分子量', molecularWeight)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {this.controller.renderFavoritesLabel(id)}\r\n        </div>\r\n        // { this.renderVm(VProductFavirateLabel, this.productBox) }\r\n    }\r\n\r\n    private arrTemplet = (item: ProductPackRow) => {\r\n        let { pack, retail, vipPrice, promotionPrice } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\"><FormField name=\"quantity\" /></div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div><b>{tv(pack)}</b></div>\r\n                    <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp } = this.controller;\r\n        let { cart } = cApp;\r\n        if (value > 0)\r\n            await cart.add(this.productBox, pack, value, price, retail, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: this.productBox.id, packId: pack.id }]);\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n        items: {\r\n            quantity: {\r\n                widget: 'custom',\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget as any,\r\n                onChanged: this.onQuantityChanged\r\n            } as UiCustom\r\n        },\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"mx-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n    private dealWithPDF = (fileName: string) => {\r\n        let shiftArr =fileName ? fileName.replace(/\\.pdf/ig, '').split('_'):[];\r\n        switch (shiftArr[1]) {\r\n            case 'DE':\r\n                return '德文';\r\n            case 'EN':\r\n                return '英文';\r\n            case 'EN-US':\r\n                return '英美';\r\n            case 'CN':\r\n                return '中文';\r\n            default:\r\n                return '中文';\r\n        }\r\n    }\r\n\r\n    private renderPDF = (content: any) => {\r\n        let { fileName } = content;      \r\n        let language = this.dealWithPDF(fileName);\r\n        let { ToVerifyPdf } = this.controller;\r\n        return <div className=\"mx-2 d-flex flex-column text-center\" onClick={() => { ToVerifyPdf({content,product: this.productBox}) }}>\r\n            <img src={pdfIcon} alt=\"\" style={{ width: 24 }} />\r\n            <div className=\"small\">{language}</div>\r\n        </div>\r\n    }\r\n\r\n    renderListItemPDF = (Material: any) => {\r\n        let { type, content } = Material;\r\n        if (content.length) {\r\n            return <div className=\"d-flex pt-2 border-bottom\">\r\n                <div className=\"w-3c align-self-center mr-2 mb-2\" >{type}</div>\r\n                <List items={content} item={{ render: this.renderPDF, className: 'px-2 border-left' }} className=\"d-flex bg-light mb-1\" />\r\n            </div>\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderProductMaterial = () => {\r\n        let { productMSDSFiles, productSpecFiles } = this.controller;\r\n        let MaterialArr = [{ type: 'MSDS', content: productMSDSFiles }, { type: 'SPEC', content: productSpecFiles }];//COA EUM\r\n        return <>\r\n            <List items={MaterialArr} item={{ render: this.renderListItemPDF }} />\r\n        </>\r\n    }\r\n\r\n    private page = (product: any) => {\r\n\r\n        let { cApp, productMSDSFiles, productSpecFiles } = this.controller;\r\n        /* let CurrentUA = browser.versions.mobile;\r\n        let productPdfM = CurrentUA && (productMSDSFiles.length || productSpecFiles.length) ? true : false; */\r\n\r\n        let header = cApp.cHome.renderSearchHeader();\r\n        let cartLabel = cApp.cCart.renderCartLabel();\r\n        if (true) {\r\n            let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n            viewProduct.model = product;\r\n\r\n            return <Page header={header} right={cartLabel}>\r\n                <div className=\"px-2 py-2 bg-white mb-3\">{viewProduct.render()}</div>\r\n                <div className=\"py-2 px-3 bg-light\">\r\n                    {TopicDivision('产品资料')}\r\n                    <div>{this.renderProductMaterial()}</div>\r\n                </div>\r\n                {/* {\r\n                    productPdfM\r\n                        ? <div className=\"py-2 px-3 bg-light\">\r\n                            {TopicDivision('产品资料')}\r\n                            <div>{this.renderProductMaterial()}</div>\r\n                        </div>\r\n                        : null\r\n                } */}\r\n            </Page>\r\n        } else {\r\n            /*\r\n            下面的做法大概不行，因为嵌套的层次较深，且都是observer的，上层observable的变化会嵌套执行下层的代码，而下层代码的render\r\n            会操作数据库，得不偿失（和React的可能还不一样，React只会更新必要的html，不会再执行查询DB的操作）\r\n            */\r\n            let { controller, productBox } = this;\r\n            let { renderProductWithPrice } = controller;\r\n            return <Page header={header} right={cartLabel}>\r\n                <div className=\"px-2 py-2 bg-white mb-3\">\r\n                    {renderProductWithPrice(productBox)}\r\n                </div>\r\n            </Page>\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Scroller } from 'tonva';\r\nimport { CProduct } from './CProduct';\r\nimport { List } from 'tonva';\r\nimport logo from '../images/logo.png';\r\nimport magnifier from '../images/magnifier.svg'\r\nimport { BrowserRouter as Router, Route, Link, Switch } from 'react-router-dom';\r\n// import { renderProduct } from './VProductView';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nexport class VProductList extends VPage<CProduct> {\r\n    private searchKey: string;\r\n    async open(key: string) {\r\n        this.searchKey = key;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onProductClick = async (product: any) => {\r\n        await this.controller.showProductDetail(product.id);\r\n    }\r\n\r\n    private onScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        let { productsPager } = this.controller;\r\n        //await this.controller.pageProducts.more();\r\n        productsPager.more();\r\n    }\r\n\r\n    private renderProduct = (p: any) => {\r\n        // console.log(p);\r\n        return this.controller.cApp.cProduct.renderProduct(p);\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { productsPager, cApp } = this.controller;\r\n        let { cHome, cCart } = cApp;\r\n        let header = cHome.renderSearchHeader();\r\n        let cart = cCart.renderCartLabel();\r\n        let none = <div className=\"p-3 text-warning\">[无]</div>\r\n\r\n        return <Page header={header} right={cart} onScrollBottom={this.onScrollBottom}>\r\n            <div className=\"bg-white py-2 px-3 mb-1\"><small className=\" small text-muted\">搜索: </small>{this.searchKey}</div>\r\n            <List before={''} none={none} items={productsPager} item={{ render: this.renderProduct, onClick: this.onProductClick }} />\r\n        </Page>\r\n\r\n        /*\r\n        return <div className=\"bg-light tv-page\" onScroll={(e: any) => this.onScrollBottom(e)}>\r\n            <header className=\"d-flex align-items-center p-1\">\r\n                <nav className=\"navbar navbar-expand-md\">\r\n                    <Link to=\"/\" className=\"navbar-brand mr-1\">\r\n                        {<img className=\"m-1 ml-2\" src={logo} alt=\"logo\" style={{ height: \"3rem\", width: \"2.5rem\" }} />}\r\n                    </Link>\r\n                    <form className=\"custom-search-input\">\r\n                        <div className=\"input-group\">\r\n                            <input name=\"keyInput\" type=\"text\" className=\"form-control\" style={{ borderRadius: 30 }} placeholder=\"Search\" />\r\n                            <div className=\"input-group-append\">\r\n                                <button className=\"btn\" type=\"submit\">\r\n                                    <img src={magnifier} alt=\"magnifier\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                    <button className=\"narbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navBarResponsive\"\r\n                        aria-controls=\"navBarResponsive\" aria-expanded=\"false\">\r\n                        <span className=\"narbar-toggler-icon\">nav</span>\r\n                    </button>\r\n\r\n                    <div className=\"collapse navbar-collapse\" id=\"navBarResponsive\">\r\n                        <ul className=\"navbar-nav mr-auto\">\r\n                            <li className=\"nav-item dropdown\">\r\n                                <a className=\"nav-link dropdown-toggle\" href=\"#\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                                    aria-expanded=\"false\">\r\n                                    产品<b className=\"caret\"></b>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdownPortfolio\">\r\n                                </div>\r\n                            </li>\r\n                            <li className=\"nav-item dropdown\">\r\n                                <a className=\"nav-link dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                                    aria-expanded=\"false\">\r\n                                    服务<b className=\"caret\"></b>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdownBlog\">\r\n                                    <a className=\"dropdown-item\"\r\n                                        href=\"http://www.jkchemical.com/Member/Center/SaleOrderList.aspx?language=ch\">订单查询\r\n                                </a>\r\n                                    <a className=\"dropdown-item\"\r\n                                        href=\"https://www.jkchemical.com/PointsSearch.aspx?language=ch\">积分查询</a>\r\n\r\n                                </div>\r\n                            </li>\r\n                            <li className=\"nav-item dropdown\">\r\n                                <a className=\"nav-link dropdown-toggle\" id=\"navbarDropdownBlog\" data-toggle=\"dropdown\"\r\n                                    aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                    会员<b className=\"caret\"></b>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdownBlog\">\r\n                                    <a className=\"dropdown-item\"\r\n                                        href=\"https://www.jkchemical.com/ChangePassword.aspx?language=ch\">修改密码</a>\r\n                                </div>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <div id=\"login\">\r\n                                </div>\r\n                            </li>\r\n                            <li className=\"nav-item display-none\">\r\n                                <a className=\"nav-link shopping-cart\"\r\n                                    href=\"https://www.jkchemical.com/Member/Share/Shopping.aspx?language=ch\">\r\n                                    <img src=\"<%=$root%>img/commerce-and-shopping.svg\" width=\"40px\" />\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </nav>\r\n            </header>\r\n            <main>\r\n                <div className=\"bg-white py-2 px-3 mb-1\"><small className=\" small text-muted\">搜索: </small>{this.searchKey}</div>\r\n                <List before={''} none={none} items={productsPager} item={{ render: this.renderProduct }} />\r\n            </main>\r\n           <Route path=\"/search/:key\" render={(props: any) => {\r\n                let { match, location, history } = props;\r\n                let { params } = match;\r\n                this.controller.searchByKey(params.key);\r\n                return <main>\r\n                    <div className=\"bg-white py-2 px-3 mb-1\"><small className=\" small text-muted\">搜索: </small>{this.searchKey}</div>\r\n                    <List before={''} none={none} items={productsPager} item={{ render: this.renderProduct }} />\r\n                </main>\r\n            }} /> \r\n\r\n        </div>\r\n        */\r\n    });\r\n\r\n    render = (key: any) => {\r\n        this.searchKey = key;\r\n        return <this.page />\r\n    }\r\n}","import { Entity } from 'tonva';\r\nimport { CApp } from '../CApp';\r\n//import { CCartApp } from 'CCartApp';\r\n\r\nexport abstract class Loader<T> {\r\n    protected cApp: CApp;\r\n    private entities: Entity[] = [];\r\n    private schemaLoaded: boolean = false;\r\n    constructor(cApp: CApp) {\r\n        this.cApp = cApp;\r\n        //this.initEntities();\r\n    }\r\n\r\n    //protected abstract initEntities(): void;\r\n\r\n    protected async loadSchemas() {\r\n        if (this.schemaLoaded === true) return;\r\n        await Promise.all(this.entities);\r\n        this.schemaLoaded = true;\r\n    }\r\n\r\n    async load(param: any): Promise<T> {\r\n        await this.loadSchemas();\r\n        let data = this.initData();\r\n        await this.loadToData(param, data);\r\n        return data;\r\n    }\r\n    protected abstract async loadToData(param: any, data: T): Promise<void>;\r\n    protected abstract initData(): T;\r\n}\r\n","import { Loader } from '../mainSubs/loader';\r\n\r\nexport class LoaderProductChemical extends Loader<any> {\r\n    protected async loadToData(productId: number, data: any): Promise<void> {\r\n\r\n        let productChemical = await this.cApp.uqs.product.ProductChemical.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n    }\r\n\r\n    protected initData(): any {\r\n        return {};\r\n    }\r\n}","import _ from 'lodash';\r\nimport { ProductPackRow } from './Product';\r\nimport { Loader } from '../mainSubs/loader';\r\nimport { MainSubs, MainProductChemical, MainBrand } from '../mainSubs';\r\nimport { LoaderProductChemical } from '../tools/productChemical';\r\n\r\nexport class LoaderBrand extends Loader<MainBrand> {\r\n    protected async loadToData(brandId: number, data: MainBrand): Promise<void> {\r\n        let brand = await this.cApp.uqs.product.Brand.load(brandId);\r\n        data.id = brand.id;\r\n        data.name = brand.name;\r\n    }\r\n\r\n    protected initData(): MainBrand {\r\n        return {} as MainBrand;\r\n    }\r\n}\r\n\r\nexport class LoaderProductWithChemical extends Loader<MainProductChemical> {\r\n\r\n    protected async loadToData(productId: number, data: MainProductChemical): Promise<void> {\r\n\r\n        let { cApp } = this;\r\n        let { currentUser, uqs } = cApp;\r\n        let { product: productUq, webuser } = uqs;\r\n        let product = await productUq.ProductX.load(productId);\r\n        if (product === undefined)\r\n            return;\r\n        _.merge(data, product);\r\n\r\n        let brandLoader = new LoaderBrand(this.cApp);\r\n        data.brand = await brandLoader.load(data.brand.id);\r\n\r\n        let productChemicalLoader = new LoaderProductChemical(this.cApp);\r\n        let productChemical: any = await productChemicalLoader.load(productId);\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n\r\n        data.packs = [];\r\n        product.packx.forEach((e: any) => {\r\n            data.packs.push(e);\r\n        });\r\n    }\r\n\r\n    protected initData(): MainProductChemical {\r\n        return {} as MainProductChemical;\r\n    }\r\n}\r\n\r\nexport class LoaderProductChemicalWithPrices extends Loader<MainSubs<MainProductChemical, ProductPackRow>> {\r\n\r\n    protected initData(): MainSubs<MainProductChemical, ProductPackRow> {\r\n        return { main: {} as MainProductChemical, subs: [] as ProductPackRow[] };\r\n    }\r\n\r\n    protected async loadToData(productId: any, data: MainSubs<MainProductChemical, ProductPackRow>): Promise<void> {\r\n        let { customerDiscount, product, promotion } = this.cApp.uqs;\r\n        let productLoader = new LoaderProductWithChemical(this.cApp);\r\n        data.main = await productLoader.load(productId);\r\n\r\n        let discount = 0;\r\n        let { currentUser, currentSalesRegion, cart, currentLanguage } = this.cApp;\r\n        //线上客户是否是线下客户 协议折扣  discount\r\n        if (currentUser.hasCustomer) {\r\n            let discountSetting = await customerDiscount.GetDiscount.obj({ brand: data.main.brand.id, customer: currentUser.currentCustomer });\r\n            if (discountSetting && discountSetting.discount)\r\n                discount = discountSetting.discount;\r\n        }\r\n\r\n        // 协议客户与vip客户不同存\r\n        if (currentUser.webUserVIPCard !== undefined) {\r\n            let brandDiscounts = currentUser.VIPDiscount;\r\n            let brandDiscount = brandDiscounts.ret.find((e: any) => e.brand.id === data.main.brand.id);\r\n            // 协议与vip折扣比较 取其大值  (两者不可同存)\r\n            if (brandDiscount && brandDiscount.discount > discount)\r\n                discount = brandDiscount && brandDiscount.discount;\r\n        }\r\n\r\n        let { id: currentSalesRegionId } = currentSalesRegion;\r\n        let prices = await product.PriceX.table({ product: productId, salesRegion: currentSalesRegionId });\r\n        data.subs = prices.filter(e => e.discountinued === 0 && e.expireDate > Date.now()).sort((a, b) => a.retail - b.retail).map(element => {\r\n            let ret: any = {};\r\n            ret.pack = element.pack;\r\n            ret.retail = element.retail;\r\n            if (discount !== 0)\r\n                ret.vipPrice = Math.round(element.retail * (1 - discount));\r\n            ret.currency = currentSalesRegion.currency;\r\n            ret.quantity = cart.getQuantity(productId, element.pack.id)\r\n            return ret;\r\n        });\r\n\r\n        let promises: PromiseLike<any>[] = [];\r\n        data.subs.forEach(v => {\r\n            promises.push(promotion.GetPromotionPack.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n\r\n        for (let i = 0; i < data.subs.length; i++) {\r\n            let promotion = results[i];\r\n            let discount = promotion && promotion.discount;\r\n            if (discount)\r\n                data.subs[i].promotionPrice = Math.round((1 - discount) * data.subs[i].retail);\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { tv, View } from 'tonva';\r\nimport { CProduct } from './CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VProductDelivery extends View<CProduct> {\r\n\r\n    @observable private inventoryAllocation: any[];\r\n    @observable private futureDeliveryTimeDescription: string;\r\n\r\n    render(param: any): JSX.Element {\r\n        let { obj: packObj, id: packId } = param;\r\n        let { owner: productId } = packObj;\r\n        let { controller } = this;\r\n        let { currentSalesRegion } = controller.cApp;\r\n        return <this.content packId={packId} productId={productId} currentSalesRegion={currentSalesRegion} />;\r\n    }\r\n\r\n    private initInventoryAllocation = async (productId: number, packId: number, salesRegionId: number) => {\r\n        if (this.inventoryAllocation === undefined)\r\n            this.inventoryAllocation = await this.controller.getInventoryAllocation(productId, packId, salesRegionId);\r\n    }\r\n\r\n    private initFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n        if (this.futureDeliveryTimeDescription === undefined)\r\n            this.futureDeliveryTimeDescription = await this.controller.getFutureDeliveryTimeDescription(productId, salesRegionId);\r\n    }\r\n\r\n    private content = observer((param: any): any => {\r\n\r\n        let deliveryTimeUI;\r\n        let { packId, productId, currentSalesRegion } = param;\r\n        if (productId) {\r\n            this.initInventoryAllocation(productId, packId, currentSalesRegion);\r\n            this.initFutureDeliveryTimeDescription(productId, currentSalesRegion);\r\n        }\r\n        if (this.inventoryAllocation === undefined || this.futureDeliveryTimeDescription === undefined)\r\n            return null;\r\n        if (this.inventoryAllocation && this.inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = this.inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                if (quantity > 0) {\r\n                    return <div key={index} className=\"text-success\">\r\n                        {tv(warehouse, (values: any) => <span className=\"small\">{values.name}</span>)}: {(quantity > 10 ? '>10' : quantity)}\r\n                        {deliveryTimeDescription}\r\n                    </div>\r\n                } else {\r\n                    return undefined;\r\n                }\r\n            });\r\n        } else {\r\n            deliveryTimeUI = <div>{this.futureDeliveryTimeDescription && '期货: ' + this.futureDeliveryTimeDescription}</div>;\r\n        }\r\n        return deliveryTimeUI;\r\n    })\r\n}","import * as React from 'react';\r\nimport { tv, View } from 'tonva';\r\nimport { CProduct } from './CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { productPropItem } from './VProductView';\r\n\r\nexport class VChemicalInfoInCart extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        let { id: productId } = param;\r\n        if (typeof productId === 'object')\r\n            productId = productId.id;\r\n        let { controller } = this;\r\n        controller.getChemicalInfo(productId);\r\n        return <this.content productId={productId} />;\r\n    }\r\n\r\n    private content = observer((param: any) => {\r\n\r\n        let { productId } = param;\r\n        let { chemicalInfoContainer } = this.controller;\r\n        let chemicalInfo = chemicalInfoContainer[productId];\r\n        if (chemicalInfo !== undefined) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = chemicalInfo;\r\n            return <>\r\n                {productPropItem('CAS', CAS)}\r\n                {productPropItem('纯度', purity)}\r\n                {productPropItem('分子式', molecularFomula)}\r\n                {productPropItem('分子量', molecularWeight)}\r\n            </>\r\n        }\r\n        return <></>;\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport { CProduct } from './CProduct';\r\nimport { List, View, Page, Scroller } from 'tonva';\r\n// import { renderProduct } from './VProductView';\r\n\r\nexport class VProductList_Web extends View<CProduct> {\r\n\r\n    private onProductClick = async (product: any) => {\r\n        // await this.controller.showProductDetail(product.id);\r\n        let id = product.id;\r\n        document.location.href = '../product/' + + id.obj.id;\r\n    }\r\n\r\n    private renderProduct = (p: any) => {\r\n        // console.log(p);\r\n        return this.controller.cApp.cProduct.renderProduct(p);\r\n    }\r\n\r\n    render(key: string) {\r\n        let { productsPager, cApp } = this.controller;\r\n        let none = <div className=\"p-3 text-warning\">[无]</div>\r\n        return <div>\r\n            <div className=\"bg-white py-2 px-3 mb-1\"><small className=\" small text-muted\">搜索: </small>{key}</div>\r\n            <List before={''} none={none} items={productsPager} item={{ render: this.renderProduct, onClick: this.onProductClick }} />\r\n        </div>\r\n\r\n    }\r\n}","import * as React from 'react';\r\nimport { CProduct } from './CProduct';\r\nimport {\r\n    VPage, Page, Form, ItemSchema, NumSchema, UiSchema, Field,\r\n    ObjectSchema, RowContext, UiCustom, FormField, BoxId, View\r\n} from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { MinusPlusWidget } from '../tools/minusPlusWidget';\r\nimport { ProductPackRow } from './Product';\r\nimport { ViewMainSubs, MainProductChemical } from 'mainSubs';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { productPropItem, renderBrand } from './VProductView';\r\nimport { ProductItem } from '../tools/ProductItem';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n];\r\n\r\nexport class VProduct_Web extends View<CProduct> {\r\n\r\n    private productBox: BoxId;\r\n    private discount: number;\r\n    private product: any;\r\n\r\n    private renderProduct = (product: MainProductChemical) => {\r\n        // console.log(this.product);\r\n        // console.log(product);\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"mb-3 px-2\">\r\n            <div className=\"py-2\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n            <div className=\"row mt-3\">\r\n                <div className=\"col-12 col-sm-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-12 col-sm-9\">\r\n                    <div className=\"row mx-3\">\r\n                        {productPropItem('产品编号', origin, \"font-weight-bold\")}\r\n                        {productPropItem('CAS', CAS, \"font-weight-bold\")}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('分子式', molecularFomula)}\r\n                        {productPropItem('分子量', molecularWeight)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private arrTemplet = (item: ProductPackRow) => {\r\n        let { pack, retail, vipPrice, promotionPrice } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\"><FormField name=\"quantity\" /></div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div><b>{tv(pack)}</b></div>\r\n                    <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp } = this.controller;\r\n        let { cart } = cApp;\r\n        if (value > 0)\r\n            await cart.add(this.productBox, pack, value, price, retail, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: this.productBox.id, packId: pack.id }]);\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n        items: {\r\n            quantity: {\r\n                widget: 'custom',\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget as any,\r\n                onChanged: this.onQuantityChanged\r\n            } as UiCustom\r\n        },\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"mx-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n\r\n    render(param: any): JSX.Element {\r\n\r\n        let { productData, product, discount } = param;\r\n        this.productBox = product;\r\n        this.discount = discount;\r\n        this.product = productData;\r\n        let { cApp } = this.controller;\r\n        let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n        viewProduct.model = this.product;\r\n\r\n        return <div className=\"px-2 py-2 bg-white mb-3\">{viewProduct.render()}</div>\r\n    }\r\n}","import * as React from 'react';\r\nimport { CProduct } from './CProduct';\r\nimport { VPage, Page } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react-lite';\r\nimport Pdfh5 from 'pdfh5'\r\nimport \"pdfh5/css/pdfh5.css\";\r\n\r\nexport class VPDFView extends VPage<CProduct> {\r\n    @observable pdfh5: any;\r\n    @observable fileName: string = '';      /* 文件名称 */\r\n    @observable fileUrl: any;               /* 文件路径 */\r\n    @observable isFoundFile: boolean = true;/* 文件是否存在 */\r\n\r\n    async open(param?: any) {\r\n        this.fileName = this.controller.currentFileName;\r\n        this.fileUrl = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    ParsRenderPDF = () => {\r\n        if (this.fileUrl.status) {\r\n            this.isFoundFile = false;\r\n        } else {\r\n            this.isFoundFile = true;\r\n            this.pdfh5 = new Pdfh5(\"#PDFVIEW\", {\r\n                // pdfurl: this.fileUrl\r\n                data: this.fileUrl\r\n            });\r\n        }\r\n    }\r\n\r\n    // showAci\r\n\r\n\r\n    private page = observer(() => {\r\n        let header = <div className=\"w-100 text-center\">{this.fileName}</div>;\r\n        let right = <></>;// <div className=\"mr-2\" onClick={() => this.isShowActionSheet = true}><FA name='ellipsis-h' /></div>;\r\n        setTimeout(() => {this.ParsRenderPDF()}, 50);\r\n        \r\n        return <Page header={header} right={right} >\r\n            {/* <div className=\"position-fixed d-flex flex-column justify-content-end\" style={{ top: 0, left: 0, bottom: 0, right: 0, background: 'rgba(0, 0, 0, .3)' }}>\r\n                <div className=\"\">\r\n                    <div>\r\n                        <button className=\"btn btn-light w-100\">下载</button>\r\n                    </div>\r\n                    <footer className=\"mt-2\">\r\n                        <button className=\"btn btn-light w-100\" onClick={() => this.isShowActionSheet = false}>取消</button>\r\n                    </footer>\r\n                </div>\r\n            </div> */}\r\n            {\r\n                this.isFoundFile \r\n                    ? <div id=\"PDFVIEW\" className=\"w-100\" style={{ height: '91vh' }}></div>\r\n                    : <div className=\"text-center py-5\">{this.fileUrl.msg}</div>\r\n            }\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { CProduct } from './CProduct';\r\nimport { VPage, Page } from 'tonva';\r\nimport { observable } from 'mobx';\r\n\r\nimport { observer } from 'mobx-react-lite';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\nexport class VVerifyCode extends VPage<CProduct> {\r\n    @observable verifyCodeInput: HTMLInputElement;\r\n    @observable verifyInfo: string;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    onSubmit = async () => {\r\n        let verifyCode = this.verifyCodeInput.value;\r\n        let {openPDFView, getPDFFileUrl } = this.controller;\r\n        if (!verifyCode) {\r\n            this.verifyInfo = '验证码不可为空';\r\n            setTimeout(() => this.verifyInfo = undefined, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n        this.verifyCodeInput.value = '';      \r\n        let content:any = await getPDFFileUrl(verifyCode);        \r\n        if (content.status && content.status === 412) {\r\n            this.verifyInfo = content.msg;\r\n            setTimeout(() => this.verifyInfo = undefined, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        } else {\r\n            this.closePage(); \r\n            await openPDFView(content);\r\n        }\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { verifyCode, getVerifyCode } = this.controller;\r\n        let header = <div className=\"w-100 text-center\">验证码</div>;\r\n        return <Page header={header} right={<></>} >\r\n            <div className=\"d-flex flex-column px-5 pt-3\">\r\n                <div className='d-flex '>\r\n                    <img src={verifyCode} alt=\"\" className=\"border p-1 rounded-lg\" />\r\n                    <button className=\"btn btn-link btn-block w-6c align-self-end py-0\" onClick={() => getVerifyCode()}>换一张</button>\r\n                </div>\r\n                <form onSubmit={(e) => { e.preventDefault(); this.onSubmit() }} >\r\n                    <input ref={v => this.verifyCodeInput = v} type=\"text\" className='form-control border-primary mt-2' placeholder='输入验证码' style={{ maxWidth: '20rem' }} />\r\n                </form>\r\n                \r\n                {this.verifyInfo && <div className='small text-danger'>* {this.verifyInfo}</div>}\r\n                <button className=\"btn btn-sm btn-outline-primary mt-2\" type=\"button\" onClick={this.onSubmit} style={{ maxWidth: '20rem' }}>确 认</button>\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import { observable } from 'mobx';\r\nimport { BoxId, nav, QueryPager, User } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VProduct } from './VProduct';\r\nimport { VProductList } from './VProductList';\r\nimport { LoaderProductChemicalWithPrices } from './itemLoader';\r\nimport { VProductDelivery } from './VProductDelivery';\r\nimport { VCartProuductView, VProductWithPrice, VProductPrice, VProuductView2 } from './VProductView';\r\nimport { VChemicalInfoInCart } from './VChemicalInfo';\r\nimport { VProductList_Web } from './VProductList_Web';\r\nimport { VProduct_Web } from './VProduct_Web';\r\nimport { ProductItem } from '../tools/ProductItem';\r\nimport { CFavorites } from '../customer/CFavorites';\r\nimport { VPDFView } from './VPDFView';\r\nimport { VVerifyCode } from './VVerifyCode';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\n/*\r\nclass PageProducts extends PageItems<any> {\r\n\r\n    private searchProductQuery: Query;\r\n\r\n    constructor(searchProductQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchProductQuery = searchProductQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchProductQuery.page(param, pageStart, pageSize, false);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.seq;\r\n    }\r\n}\r\n*/\r\n/**\r\n *\r\n */\r\nexport class CProduct extends CUqBase {\r\n    //pageProducts: PageProducts;\r\n    productsPager: QueryPager<any>;\r\n    @observable productSpecFiles: any[] = [];\r\n    @observable productMSDSFiles: any[] = [];\r\n    @observable futureDeliveryTimeDescriptionContainer: { [cacheId: string]: string } = {};\r\n    @observable chemicalInfoContainer: { [productId: number]: any } = {};\r\n    @observable verifyCode: any;\r\n    @observable currentFileName: any;\r\n    @observable currentLanguage: any;\r\n    @observable currentProduct: any;\r\n    protected async internalStart(param?: any) {\r\n        this.searchByKey(param);\r\n        this.openVPage(VProductList, param);\r\n    }\r\n\r\n    renderProductList2(key: any) {\r\n        return this.renderView(VProductList, key);\r\n    }\r\n\r\n    searchByKey(key: string) {\r\n        let { currentSalesRegion } = this.cApp;\r\n        //this.pageProducts = new PageProducts(this.uqs.product.SearchProduct);\r\n        this.productsPager = new QueryPager<any>(this.uqs.product.SearchProduct, 10, 10);\r\n        //this.pageProducts.first({ keyWord: key, salesRegion: currentSalesRegion.id });\r\n        this.productsPager.first({ keyWord: key, salesRegion: currentSalesRegion.id })\r\n        console.log(this.productsPager);\r\n    }\r\n\r\n    searchWebByKey(key: string) {\r\n        let { currentSalesRegion } = this.cApp;\r\n        //this.pageProducts = new PageProducts(this.uqs.product.SearchProduct);\r\n        this.productsPager = new QueryPager<any>(this.uqs.product.SearchProduct, 3, 3);\r\n        //this.pageProducts.first({ keyWord: key, salesRegion: currentSalesRegion.id });\r\n        this.productsPager.first({ keyWord: key, salesRegion: currentSalesRegion.id })\r\n    }\r\n\r\n    async searchByCategory(category: any) {\r\n        let { currentSalesRegion } = this.cApp;\r\n        //this.pageProducts = new PageProducts(this.uqs.product.SearchProductByCategory);\r\n        this.productsPager = new QueryPager<any>(this.uqs.product.SearchProductByCategory, 10, 10);\r\n        let { productCategoryId, name } = category;\r\n        //this.pageProducts.first({ productCategory: productCategoryId, salesRegion: currentSalesRegion.id });\r\n        await this.productsPager.first({ productCategory: productCategoryId, salesRegion: currentSalesRegion.id })\r\n        this.openVPage(VProductList, name);\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    showProductDetail = async (productId: BoxId | any, JumpSource?: any) => {\r\n\r\n        if (productId) {\r\n            let discount = 0, product = productId;\r\n            /*\r\n            product = await this.uqs.product.ProductX.load(productId);\r\n            let { currentUser } = this.cApp;\r\n            if (currentUser.hasCustomer) {\r\n                let discountSetting = await this.uqs.customerDiscount.GetDiscount.obj({ brand: product.brand.id, customer: currentUser.currentCustomer });\r\n                discount = discountSetting && discountSetting.discount;\r\n            }\r\n            */\r\n            let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n            let productData = await loader.load(productId);\r\n            if (JumpSource) this.closePage();\r\n            this.openVPage(VProduct, { productData, product, discount });\r\n        }\r\n    }\r\n\r\n    /*   renderProductCarryFavorites = (product: any) => {\r\n          return this.renderView(VProductCarryFavorites, { product: product });\r\n      } */\r\n\r\n    renderProductPrice = (product: BoxId, discount: number) => {\r\n        return this.renderView(VProductPrice, { product: product, discount: discount });\r\n    }\r\n\r\n    renderProductWithPrice = (product: BoxId) => {\r\n        return this.renderView(VProductWithPrice, product);\r\n    }\r\n\r\n    getProductPrice = async (product: BoxId, salesRegionId: number, discount: number) => {\r\n        let { id: productId } = product;\r\n        let { currentSalesRegion, cart, currentLanguage, uqs } = this.cApp;\r\n\r\n        let prices = await uqs.product.PriceX.table({ product: product, salesRegion: salesRegionId });\r\n        let priceSet = prices.filter(e => e.discountinued === 0 && e.expireDate > Date.now()).sort((a, b) => a.retail - b.retail).map(element => {\r\n            let ret: any = {};\r\n            ret.pack = element.pack;\r\n            ret.retail = element.retail;\r\n            if (discount !== 0)\r\n                ret.vipPrice = Math.round(element.retail * (1 - discount));\r\n            ret.currency = currentSalesRegion.currency;\r\n            ret.quantity = cart.getQuantity(productId, element.pack.id)\r\n            return ret;\r\n        });\r\n        let promises: PromiseLike<any>[] = [];\r\n        priceSet.forEach(v => {\r\n            promises.push(uqs.promotion.GetPromotionPack.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n\r\n        for (let i = 0; i < priceSet.length; i++) {\r\n            let promotion = results[i];\r\n            let discount = promotion && promotion.discount;\r\n            if (discount)\r\n                priceSet[i].promotionPrice = Math.round((1 - discount) * priceSet[i].retail);\r\n        }\r\n        return priceSet;\r\n    }\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        return this.renderView(VProductDelivery, pack);\r\n    }\r\n\r\n    getInventoryAllocation = async (productId: number, packId: number, salesRegionId: number) => {\r\n        return await this.uqs.warehouse.GetInventoryAllocation.table({ product: productId, pack: packId, salesRegion: this.cApp.currentSalesRegion });\r\n    }\r\n\r\n    getFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n        let cacheId = productId + '_' + salesRegionId;\r\n        if (this.futureDeliveryTimeDescriptionContainer[cacheId] === undefined) {\r\n            let futureDeliveryTime = await this.uqs.product.GetFutureDeliveryTime.table({ product: productId, salesRegion: salesRegionId });\r\n            if (futureDeliveryTime.length > 0) {\r\n                let { minValue, maxValue, unit, deliveryTimeDescription } = futureDeliveryTime[0];\r\n                this.futureDeliveryTimeDescriptionContainer[cacheId] = minValue + (maxValue > minValue ? '~' + maxValue : '') + ' ' + unit;\r\n            } else {\r\n                this.futureDeliveryTimeDescriptionContainer[cacheId] = null;\r\n            }\r\n        }\r\n        return this.futureDeliveryTimeDescriptionContainer[cacheId];\r\n    }\r\n\r\n    renderChemicalInfoInCart = (product: BoxId) => {\r\n        return this.renderView(VChemicalInfoInCart, product);\r\n    }\r\n\r\n    getChemicalInfo = async (productId: number) => {\r\n        if (this.chemicalInfoContainer[productId] === undefined) {\r\n            this.chemicalInfoContainer[productId] = await this.uqs.product.ProductChemical.obj({ product: productId });\r\n        }\r\n    }\r\n\r\n    renderFavoritesLabel = (product: number) => {\r\n        let { cApp } = this;\r\n        let { cFavorites } = cApp;\r\n        return cFavorites.renderFavoritesLabel(product);\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    renderProduct = (product: any) => {\r\n        return this.renderView(VProuductView2, product);\r\n    }\r\n\r\n    getProductAndDiscount = async (productId: BoxId) => {\r\n        let product = await this.uqs.product.ProductX.load(productId);\r\n        let discount = 0;\r\n        let { currentUser } = this.cApp;\r\n        if (currentUser.hasCustomer) {\r\n            let discountSetting = await this.uqs.customerDiscount.GetDiscount.obj({ brand: product.brand.id, customer: currentUser.currentCustomer });\r\n            discount = discountSetting && discountSetting.discount;\r\n        }\r\n        return { product: product, discount: discount };\r\n    }\r\n\r\n    renderCartProduct = (product: BoxId) => {\r\n        return this.renderView(VCartProuductView, product);\r\n    }\r\n\r\n\r\n    renderProductList = (key: string) => {\r\n        this.searchWebByKey(key);\r\n        return this.renderView(VProductList_Web, key)\r\n    }\r\n\r\n    renderProductWeb = async (key: any) => {\r\n        if (key) {\r\n            let discount = 0;\r\n            let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n            let productData = await loader.load(key);\r\n            let param: ProductItem = {\r\n                product: this.cApp.uqs.product.ProductX.boxId(key),\r\n                productData: productData,\r\n                discount: discount,\r\n            }\r\n            return this.renderView(VProduct_Web, param);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 在线预览PDF,开启验证\r\n     */\r\n    ToVerifyPdf = async (fileInfo: any) => {\r\n        let { currentUser } = this.cApp;\r\n        let { content, product } = fileInfo;\r\n        let reg = /\\w*\\//ig\r\n        this.currentFileName = content.fileName ? content.fileName.replace(reg, '').toLocaleUpperCase() : undefined;\r\n        this.currentLanguage = content.language;\r\n        this.currentProduct = product;\r\n        let loginCallback = async (user: User) => {\r\n            await currentUser.setUser(user);\r\n            this.closePage(1);\r\n            await this.openVerifyCode();\r\n        };\r\n        if (!this.isLogined)\r\n            nav.showLogin(loginCallback, true);\r\n        else\r\n            await this.openVerifyCode();\r\n    }\r\n\r\n    /**\r\n     * 验证码页面\r\n     */\r\n    openVerifyCode = async () => {\r\n        this.getVerifyCode();\r\n        this.openVPage(VVerifyCode);\r\n    }\r\n\r\n    /**\r\n     * PDF文件预览页面\r\n     */\r\n    openPDFView = async (fileUrl: any) => {\r\n        this.openVPage(VPDFView, fileUrl);\r\n    }\r\n\r\n    /**\r\n     * 获取PDF文件流\r\n     */\r\n    getPDFFileUrl = async (captcha: string) => {\r\n        let lang = this.currentLanguage ? this.currentLanguage.id : undefined;\r\n        let productId = this.currentProduct ? this.currentProduct.id : undefined;        \r\n        let res = await window.fetch(GLOABLE.CONTENTSITE + `/partial/productpdffile/${captcha}/${32}/${7084}`);//7084\r\n        // let res = await window.fetch(GLOABLE.CONTENTSITE + `/partial/productpdffile/${captcha}/${lang}/${productId}`);\r\n        if (res.status === 200) {\r\n            let content = await res.arrayBuffer();\r\n            return content;\r\n        } else {\r\n            return {\r\n                status:res.status,\r\n                msg: res.status !== 412 ? res.statusText : '验证码错误!'\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取验证码\r\n     */\r\n    getVerifyCode = async () => {\r\n        let timer = (new Date()).getTime()\r\n        this.verifyCode = GLOABLE.CONTENTSITE + `/partial/captcha/?timer=${timer}`;//'http://dummyimage.com/200x100';\r\n    }\r\n\r\n    /**\r\n     * 获取产品MSDS文件\r\n     */\r\n    getProductMSDSFile = async (product: any) => {\r\n        this.productMSDSFiles = await this.uqs.product.ProductMSDSFile.table({ product:7084 });\r\n        this.productMSDSFiles = this.productMSDSFiles.sort((a: any, b: any) => b.language.id - a.language.id);\r\n    }\r\n\r\n    /**\r\n     * 获取产品Spec文件\r\n     */\r\n    getProductSpecFile = async (product: any) => {\r\n        this.productSpecFiles = await this.uqs.product.ProductSpecFile.table({ product:11 });\r\n    }\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, tv, List, LMR, FA } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { OrderItem } from './Order';\r\nimport { CartPackRow } from '../cart/Cart';\r\nimport classNames from 'classnames';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\nexport class VCreateOrder extends VPage<COrder> {\r\n\r\n    @observable private useShippingAddress: boolean = true;\r\n    @observable private shippingAddressIsBlank: boolean = false;\r\n    @observable private invoiceAddressIsBlank: boolean = false;\r\n    @observable private invoiceIsBlank: boolean = false;\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private nullContact = () => {\r\n        return <span className=\"text-primary\">选择收货地址</span>;\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow, index: number) => {\r\n        let { pack, quantity, retail, price, priceInit } = item;\r\n\r\n        let retailUI: any;\r\n        if (price !== retail) {\r\n            retailUI = <del>¥{retail * quantity}</del>;\r\n        }\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger h5\"><small>¥</small>{parseFloat((price * quantity).toFixed(2))}</span>\r\n                    <small className=\"text-muted\">(¥{parseFloat(price.toFixed(2))} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n            <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: OrderItem) => {\r\n        let { product, packs } = orderItem;\r\n        let { controller, packsRow } = this;\r\n        return <div>\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\">{controller.renderOrderItemProduct(product)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private orderItemKey = (orderItem: OrderItem) => {\r\n        return orderItem.product.id;\r\n    }\r\n\r\n    private renderCoupon = observer((param: any) => {\r\n        let { couponAppliedData, hasAnyCoupon, removeCoupon } = this.controller;\r\n        if (couponAppliedData['id'] === undefined) {\r\n            let tip = hasAnyCoupon ? \"有可用优惠卡/券，点击使用\" : \"输入优惠券/积分码\";\r\n            return <span className=\"text-primary\">{tip}</span>;\r\n        } else {\r\n            let { code, types } = couponAppliedData;\r\n            let { couponOffsetAmount, couponRemitted, point } = param;\r\n            let offsetUI, remittedUI, noOffsetUI;\r\n            let cancelCouponUI = <div\r\n                className=\"position-absolute text-primary border text-center border-primary dropdown-menu-right rounded-circle\"\r\n                style={{ border: 1, cursor: 'pointer', width: 19, height: 19, lineHeight: 1, top: 5, right: 5 }}\r\n                onClick={(e) => { e.stopPropagation(); removeCoupon(); }}\r\n            >&times;</div>\r\n            if (types === \"credits\") {\r\n                offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">积分:</div>\r\n                    <div className=\"text-right text-danger\">{point}<small>分</small></div>\r\n                </div>\r\n            }\r\n            else if (couponOffsetAmount || couponRemitted) {\r\n                if (couponOffsetAmount) {\r\n                    offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                        <div className=\"text-muted\">折扣:</div>\r\n                        <div className=\"text-right text-danger\"><small>¥</small>{couponOffsetAmount.toFixed(2)}</div>\r\n                    </div>\r\n                }\r\n                if (couponRemitted) {\r\n                    remittedUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                        <div className=\"text-muted\">抵扣:</div>\r\n                        <div className=\"text-right text-danger\"><small>¥</small>{couponRemitted.toFixed(2)}</div>\r\n                    </div>\r\n                }\r\n            } else {\r\n                noOffsetUI = <div>谢谢惠顾</div>;\r\n            }\r\n            return <div className=\"mr-2 position-relative border-primary border px-3 py-1 rounded\">\r\n                <div className=\"text-success\">{code.substr(0, 4)} {code.substr(4)}</div>\r\n                {offsetUI}\r\n                {remittedUI}\r\n                {noOffsetUI}\r\n                {cancelCouponUI}\r\n            </div>\r\n        }\r\n    });\r\n\r\n    private onBuyerAccountChanged = () => {\r\n\r\n    }\r\n\r\n    private renderBuyerAccount = (item: any) => {\r\n        let { buyerAccount } = item;\r\n        return <div>{tv(buyerAccount, (v) => {\r\n            let { id, description, organization } = v;\r\n            return <>{description}{tv(organization, (o) => {\r\n                return <>{o.name}</>\r\n            }, undefined, () => null)}</>\r\n        })}</div>\r\n    }\r\n\r\n    private renderBuyerAccounts = observer(() => {\r\n        let { buyerAccounts } = this.controller;\r\n        if (!buyerAccounts || buyerAccounts.length === 0) return null;\r\n        return <div className=\"row py-3 bg-white mb-1\">\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">订单账号:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <List items={buyerAccounts} item={{ render: this.renderBuyerAccount, onSelect: this.onBuyerAccountChanged }}></List>\r\n            </div>\r\n        </div>\r\n    })\r\n\r\n    private onSubmit = async () => {\r\n        let { orderData } = this.controller;\r\n        // 必填项验证\r\n        let { shippingContact, invoiceContact, invoiceType, invoiceInfo } = orderData;\r\n        if (!shippingContact) {\r\n            this.shippingAddressIsBlank = true;\r\n            setTimeout(() => this.shippingAddressIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n        if (!invoiceContact) {\r\n            if (this.useShippingAddress) {\r\n                orderData.invoiceContact = shippingContact; //contactBox;\r\n                this.invoiceAddressIsBlank = false;\r\n            } else {\r\n                this.invoiceAddressIsBlank = true;\r\n                setTimeout(() => this.invoiceAddressIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n                return;\r\n            }\r\n        }\r\n        if (!invoiceType || !invoiceInfo) {\r\n            this.invoiceIsBlank = true;\r\n            setTimeout(() => this.invoiceIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n\r\n        this.controller.submitOrder();\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { cApp, orderData, onSelectShippingContact, onSelectInvoiceContact, onInvoiceInfoEdit, onCouponEdit } = this.controller;\r\n        let { currentUser } = cApp;\r\n        let footer = <div className=\"w-100 px-3 py-1\" style={{ backgroundColor: \"#f8f8f8\" }}>\r\n            <div className=\"d-flex justify-content-left\">\r\n                <div className=\"text-danger flex-grow-1\" style={{ fontSize: '1.8rem' }}><small>¥</small>{orderData.amount}</div>\r\n                <button type=\"button\"\r\n                    className={classNames('btn', 'w-30', { 'btn-danger': currentUser.allowOrdering, 'btn-secondary': !currentUser.allowOrdering })}\r\n                    onClick={this.onSubmit} disabled={!currentUser.allowOrdering}>提交订单\r\n                </button>\r\n            </div>\r\n        </div>;\r\n\r\n        let chevronRight = <FA name=\"chevron-right\" className=\"cursor-pointer\" />\r\n        let shippingAddressBlankTip = this.shippingAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>\r\n            : null;\r\n        let invoiceAddressBlankTip = this.invoiceAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票地址</div> : null;\r\n\r\n        let divInvoiceContact: any = null;\r\n        if (this.useShippingAddress === false) {\r\n            if (orderData.invoiceContact !== undefined) {\r\n                divInvoiceContact = <div className=\"col-8 col-sm-10 offset-4 offset-sm-2 d-flex\">\r\n                    {tv(orderData.invoiceContact, undefined, undefined, this.nullContact)}\r\n                    <div>{chevronRight}</div>\r\n                </div>\r\n            } else {\r\n                divInvoiceContact = <div className=\"col-8 offset-4 offset-sm-2\">\r\n                    <button className=\"btn btn-outline-primary\"\r\n                        onClick={onSelectInvoiceContact}>选择发票地址</button>\r\n                    {invoiceAddressBlankTip}\r\n                </div>\r\n            }\r\n        }\r\n\r\n        let invoiceContactUI = <div className=\"row py页-3 bg-white mb-1\">\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票地址:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <div>\r\n                    <label className=\"cursor-pointer\">\r\n                        <input type=\"checkbox\"\r\n                            defaultChecked={this.useShippingAddress}\r\n                            onChange={e => {\r\n                                this.useShippingAddress = e.currentTarget.checked;\r\n                                orderData.invoiceContact = undefined;\r\n                                this.invoiceAddressIsBlank = false;\r\n                            }} /> 同收货地址\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            {divInvoiceContact}\r\n        </div>\r\n\r\n        let invoiceBlankTip = this.invoiceIsBlank ? <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票信息</div> : null;\r\n        let invoiceInfoUI = <div className=\"row py-3 bg-white mb-1\" onClick={onInvoiceInfoEdit}>\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票信息:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                    {tv(orderData.invoiceType, (v) => <>{v.description}</>, undefined, () => <span className=\"text-primary\">填写发票信息</span>)}\r\n                    {tv(orderData.invoiceInfo, (v) => <> -- {v.title}</>, undefined, () => <></>)}\r\n                    {invoiceBlankTip}\r\n                </LMR>\r\n            </div>\r\n        </div>\r\n\r\n        let freightFeeUI = <></>;\r\n        let freightFeeRemittedUI = <></>;\r\n        if (orderData.freightFee) {\r\n            freightFeeUI = <>\r\n                <div className=\"col-4 col-sm-2 pb-2 text-muted\">运费:</div>\r\n                <div className=\"col-8 col-sm-10 text-right text-danger\"><small>¥</small>{orderData.freightFee}</div>\r\n            </>\r\n            if (orderData.freightFeeRemitted) {\r\n                freightFeeRemittedUI = <>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">运费减免:</div>\r\n                    <div className=\"col-8 col-sm-10 text-right text-danger\"><small>¥</small>{orderData.freightFeeRemitted}</div>\r\n                </>\r\n            }\r\n        }\r\n\r\n        let couponUI = <div className=\"row py-3 bg-white mb-1\" onClick={onCouponEdit}>\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">优惠卡券:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                    {React.createElement(this.renderCoupon,\r\n                        {\r\n                            couponOffsetAmount: orderData.couponOffsetAmount,\r\n                            couponRemitted: orderData.couponRemitted,\r\n                            point: orderData.point\r\n                        })}\r\n                </LMR>\r\n            </div>\r\n        </div>\r\n\r\n        return <Page header=\"订单预览\" footer={footer}>\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 bg-white mb-1\" onClick={onSelectShippingContact}>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">收货地址:</div>\r\n                    <div className=\"col-8 col-sm-10\">\r\n                        <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                            {tv(orderData.shippingContact, undefined, undefined, this.nullContact)}\r\n                        </LMR>\r\n                        {shippingAddressBlankTip}\r\n                    </div>\r\n                </div>\r\n                {invoiceContactUI}\r\n                {invoiceInfoUI}\r\n            </div>\r\n            <List items={orderData.orderItems} item={{ render: this.renderOrderItem, key: this.orderItemKey as any }} />\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 pr-3 bg-white my-1\">\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">商品总额:</div>\r\n                    <div className=\"col-8 col-sm-10 text-right\"><small>¥</small>{orderData.productAmount}</div>\r\n                    {freightFeeUI}\r\n                    {freightFeeRemittedUI}\r\n                </div >\r\n                {couponUI}\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import { BoxId } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\nimport { CartPackRow } from 'cart/Cart';\r\n\r\nexport class Order {\r\n\r\n    webUser: any;\r\n    organization: BoxId;\r\n    customer: any;\r\n\r\n    @observable shippingContact: BoxId;\r\n    @observable invoiceContact: BoxId;\r\n    @observable invoiceType: BoxId;\r\n    @observable invoiceInfo: BoxId;\r\n    @observable orderItems: OrderItem[] = [];\r\n\r\n    @observable freightFee: number;\r\n    @observable freightFeeRemitted: number;\r\n\r\n    /*\r\n    @computed get amount() {\r\n        return parseFloat((this.orderItems.reduce((pv, cv) => (pv + cv.subAmount), 0) +\r\n            (this.freightFee ? this.freightFee : 0) +\r\n            (this.freightFeeRemitted ? this.freightFeeRemitted : 0) +\r\n            (this.couponOffsetAmount ? this.couponOffsetAmount : 0) +\r\n            (this.couponRemitted ? this.couponRemitted : 0)).toFixed(2));\r\n    };\r\n    */\r\n    /**\r\n     * 总金额\r\n     */\r\n    @computed get amount() {\r\n        return parseFloat((this.orderItems.reduce((pv, cv) => (pv + cv.subAmount), 0) +\r\n            (this.freightFee ? this.freightFee : 0) +\r\n            (this.freightFeeRemitted ? this.freightFeeRemitted : 0)).toFixed(2));\r\n    };\r\n    // @computed get productAmount() {\r\n    //     return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subAmount, 0).toFixed(2));\r\n    // };\r\n    /**\r\n     * 商品总额(未应用券的价格) -----> 已修 应用目录价计算(总额恒定)\r\n     */\r\n    @computed get productAmount() {\r\n        return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subListAmount, 0).toFixed(2));\r\n    };\r\n    currency: BoxId;\r\n    @observable coupon: BoxId;\r\n    @observable couponOffsetAmount: number;\r\n    @observable couponRemitted: number;\r\n    @observable point: number;\r\n    comments: string;\r\n    salesRegion: BoxId;\r\n\r\n    getDataForSave() {\r\n        let orderItems: any[] = [];\r\n        this.orderItems.forEach(oi => {\r\n            oi.packs.forEach(pk => {\r\n                this.currency = pk.currency;\r\n                orderItems.push({\r\n                    product: oi.product, pack: pk.pack, price: pk.price, quantity: pk.quantity\r\n                    , subAmount: pk.quantity * pk.price, retail: pk.retail\r\n                })\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            invoiceContact: this.invoiceContact,\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: this.invoiceInfo,\r\n            amount: this.amount,\r\n            currency: this.currency,\r\n            freightFee: this.freightFee,\r\n            freightFeeRemitted: this.freightFeeRemitted,\r\n            coupon: this.coupon,\r\n            couponOffsetAmount: this.couponOffsetAmount,\r\n            couponRemitted: this.couponRemitted,\r\n            point: this.point,\r\n            comments: this.comments,\r\n            orderitems: orderItems, // 前面的必须是小写的orderitems\r\n            salesRegion: this.salesRegion,\r\n        }\r\n    }\r\n}\r\n\r\nexport class OrderItem {\r\n\r\n    product: BoxId;\r\n    @observable packs: CartPackRow[];\r\n    @computed get subAmount() {\r\n        return this.packs.reduce((p, c) => {\r\n            return p + c.price * c.quantity\r\n        }, 0);\r\n    }\r\n    @computed get subListAmount() {\r\n        return this.packs.reduce((p, c) => {\r\n            return p + c.retail * c.quantity\r\n        }, 0);\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, FA } from 'tonva';\r\nimport { COrder } from './COrder';\r\n\r\nexport class OrderSuccess extends VPage<COrder> {\r\n\r\n    async open(orderCreateResult: any) {\r\n\r\n        this.openPage(this.page, orderCreateResult);\r\n    }\r\n\r\n    private page = (orderCreateResult: any) => {\r\n        let {PayAmountByOrder } = this.controller;\r\n        return <Page header=\"下单成功\" back=\"close\">\r\n            <div className=\"py-4 px-3 bg-white mb-3 d-flex\">\r\n                <FA name=\"list-alt\" className=\"text-success mr-3\" size=\"4x\" />\r\n                <div>\r\n                    <p className=\"text-primary\"><span className=\"h4\">下单成功！</span></p>\r\n                    <p className=\"\">\r\n                        订单: <span className=\"h5 text-info\">{orderCreateResult.no}</span><br /><br />\r\n                        <span className=\"text-muted\">我们会加紧处理，请注意查收短信。</span>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div className=\"my-5 w-100 text-center\">\r\n                <button className=\"w-50 btn btn-primary\"\r\n                    onClick={() => { PayAmountByOrder(orderCreateResult) }}>支付\r\n                </button>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Tabs, TabCaptionComponent, TabsProps, TabProp } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { List, EasyDate } from 'tonva';\r\nimport { observable } from 'mobx';\r\n\r\nexport const color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\n\r\nexport class VMyOrders extends VPage<COrder> {\r\n\r\n\t/*\r\n    @observable private pendingOrders: any[];\r\n    @observable private processingOrders: any[];\r\n    @observable private completedOrders: any[];\r\n\t@observable private allOrders: any[];\r\n\t*/\r\n\t@observable private list: any[];\r\n\tprivate currentState: string;\r\n\tprivate tabs: TabProp[];\r\n\r\n\t/*\r\n    async open(param: any) {\r\n        this.currentState = param;\r\n        this.openPage(this.page);\r\n\t}\r\n\t*/\r\n\r\n\tinit(param: any) {\r\n\t\tthis.currentState = param;\r\n\t\tlet { getMyOrders } = this.controller;\r\n\t\tlet oss = [\r\n\t\t\t{ caption: '待审核', state: 'processing', icon: 'desktop' },\r\n\t\t\t{ caption: '待发货', state: 'completed', icon: 'truck' },\r\n\t\t\t{ caption: '所有订单', state: 'all', icon: 'file-text-o' },\r\n\t\t];\r\n\t\tthis.tabs = oss.map(v => {\r\n\t\t\tlet { caption, state, icon } = v;\r\n\t\t\treturn {\r\n\t\t\t\tname: caption,\r\n\t\t\t\tcaption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n\t\t\t\tcontent: () => {\r\n\t\t\t\t\treturn <List items={this.list} item={{ render: this.renderOrder }} none=\"[无]\" />\r\n\t\t\t\t},\r\n\t\t\t\tisSelected: this.currentState === state,\r\n\t\t\t\tload: async () => {\r\n\t\t\t\t\tthis.currentState = state;\r\n\t\t\t\t\tthis.list = await getMyOrders(this.currentState);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tprivate renderOrder = (order: any, index: number) => {\r\n\t\tlet { openOrderDetail } = this.controller;\r\n\t\tlet { id, no, date, discription, flow } = order;\r\n\t\treturn <div className=\"m-3 justify-content-between cursor-pointer\" onClick={() => openOrderDetail(id)}>\r\n\t\t\t<div><span className=\"small text-muted\">订单: </span><strong>{no}</strong></div>\r\n\t\t\t<div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n\t\t</div>;\r\n\t}\r\n\r\n\theader() {\r\n\t\treturn '我的订单';\r\n\t}\r\n\r\n\tcontent(): JSX.Element {\r\n\t\treturn <Tabs tabs={this.tabs} tabPosition=\"top\" />;\r\n\t}\r\n\r\n\tprivate page = () => {\r\n\r\n\t\tlet { getMyOrders } = this.controller;\r\n\t\tlet oss = [\r\n\t\t\t{ caption: '待审核', state: 'processing', icon: 'desktop' },\r\n\t\t\t{ caption: '待发货', state: 'completed', icon: 'truck' },\r\n\t\t\t{ caption: '所有订单', state: 'all', icon: 'file-text-o' },\r\n\t\t];\r\n\t\tlet tabs = oss.map(v => {\r\n\t\t\tlet { caption, state, icon } = v;\r\n\t\t\treturn {\r\n\t\t\t\tname: caption,\r\n\t\t\t\tcaption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n\t\t\t\tcontent: () => {\r\n\t\t\t\t\treturn <List items={this.list} item={{ render: this.renderOrder }} none=\"[无]\" />\r\n\t\t\t\t},\r\n\t\t\t\tisSelected: this.currentState === state,\r\n\t\t\t\tload: async () => {\r\n\t\t\t\t\tthis.currentState = state;\r\n\t\t\t\t\tthis.list = await getMyOrders(this.currentState);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t\t/*\r\n        let tabs = [{\r\n            name: '待审核',\r\n            caption: (selected: boolean) => TabCaptionComponent(\"待审核\", \"desktop\", color(selected)),\r\n            content: () => {\r\n                return <List items={this.processingOrders} item={{ render: this.renderOrder }} none=\"无待审核订单\" />\r\n            },\r\n            isSelected: this.currentState === 'processing',\r\n            load: async () => {\r\n                this.currentState = 'processing';\r\n                this.processingOrders = await getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            name: '待发货',\r\n            caption: (selected: boolean) => TabCaptionComponent(\"待发货\", \"truck\", color(selected)),\r\n            content: () => {\r\n                return <List items={this.completedOrders} item={{ render: this.renderOrder }} none=\"还没有已完成的订单\" />\r\n            },\r\n            isSelected: this.currentState === 'completed',\r\n            load: async () => {\r\n                this.currentState = 'completed';\r\n                this.completedOrders = await getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            name: '所有订单',\r\n            caption: (selected: boolean) => TabCaptionComponent(\"所有订单\", \"file-text-o\", color(selected)),\r\n            content: () => {\r\n                return <List items={this.allOrders} item={{ render: this.renderOrder }} none=\"还没有订单\" />\r\n            },\r\n            isSelected: this.currentState === 'all',\r\n            load: async () => {\r\n                this.currentState = 'all';\r\n                this.allOrders = await getMyOrders(this.currentState);\r\n            }\r\n\t\t}];\r\n\t\t*/\r\n\t\t// return <Page header=\"我的订单\" tabs={tabs} tabPosition=\"top\" />\r\n\t\t//return <Tabs tabs={tabs} tabPosition='top' />\r\n\t\treturn <Page header=\"我的订单\">\r\n\t\t\t<Tabs tabs={tabs} tabPosition=\"top\" />\r\n\t\t</Page>\r\n\t}\r\n}","import * as React from 'react';\r\nimport { VPage, Page, BoxId, EasyDate } from 'tonva';\r\nimport { COrder } from './COrder';\r\nimport { tv } from 'tonva';\r\nimport { List } from 'tonva';\r\nimport { OrderItem } from './Order';\r\nimport { CartItem2 } from 'cart/Cart';\r\n\r\nexport class VOrderDetail extends VPage<COrder> {\r\n\r\n    async open(order: any) {\r\n\r\n        this.openPage(this.page, order);\r\n    }\r\n\r\n\r\n    private packsRow = (item: any, index: number) => {\r\n        let { pack, quantity, price, currency } = item;\r\n\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{parseFloat((price * quantity).toFixed(2))}</span>\r\n                    <small className=\"text-muted\">(¥{parseFloat(price.toFixed(2))} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: OrderItem) => {\r\n        let { product, packs } = orderItem;\r\n        let { controller, packsRow } = this;\r\n        return <div>\r\n            <div className=\"row p-1 my-1\">\r\n                <div className=\"col-lg-6 pb-3\">{controller.renderOrderItemProduct(product)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    orderAgain = async (data: any) => {\r\n        let { cOrder } = this.controller.cApp;\r\n        let { orderItems } = data;\r\n\r\n        orderItems = orderItems.map((el: CartItem2) => {\r\n            return {\r\n                product: el.product,\r\n                packs: el.packs,\r\n                $isDeleted: false,\r\n                $isSelected: true,\r\n                createdate: 'undefined'\r\n            }\r\n        })\r\n        // console.log('orderItems', orderItems);\r\n        await cOrder.createOrderFromCart(orderItems)\r\n    }\r\n    private page = (order: any) => {\r\n\r\n        let { brief, data } = order;\r\n        let { id, no, state, description, date } = brief;\r\n        let { orderItems, currency, shippingContact, invoiceContact, invoiceType, invoiceInfo, amount, couponOffsetAmount, couponRemitted\r\n            , freightFee, freightFeeRemitted } = data;\r\n        let couponUI;\r\n        if (couponOffsetAmount || couponRemitted) {\r\n            let offsetUI, remittedUI;\r\n            if (couponOffsetAmount) {\r\n                offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">折扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponOffsetAmount}</div>\r\n                </div>\r\n            }\r\n            if (couponRemitted) {\r\n                remittedUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">抵扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponRemitted}</div>\r\n                </div>\r\n            }\r\n            couponUI = <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">优惠券:</div>\r\n                <div className=\"col-9\">\r\n                    {offsetUI}\r\n                    {remittedUI}\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        let freightFeeUI, freightFeeRemittedUI;\r\n        if (freightFee) {\r\n            freightFeeUI = <>\r\n                <div className=\"text-right text-danger\"><small>¥</small>{freightFee}</div>\r\n            </>\r\n            if (freightFeeRemitted) {\r\n                freightFeeRemittedUI = <>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{freightFeeRemitted}(减免)</div>\r\n                </>\r\n            }\r\n        }\r\n        let orderAgainUI = <div className=\"d-flex justify-content-center\">\r\n            <button className=\"btn btn-primary w-50\" onClick={async () => { this.orderAgain(order.data) }}>再次下单</button>\r\n        </div>\r\n\r\n        let header = <>订单详情: {no}</>            //orderAgainUI\r\n        let payBtn = <button className=\"w-100 btn btn-primary\"\r\n            onClick={() => { this.controller.PayAmountByOrder(order) }}>支付({amount}{tv(currency)})</button>\r\n        return <Page header={header} footer={payBtn}>\r\n            <List items={orderItems} item={{ render: this.renderOrderItem }} />\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">收货地址:</div>\r\n                <div className=\"col-9\">{tv(shippingContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票地址:</div>\r\n                <div className=\"col-9\">{tv(invoiceContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票信息:</div>\r\n                <div className=\"col-9\">{invoiceTemplate(invoiceType, invoiceInfo)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">运费:</div>\r\n                <div className=\"col-9\">{freightFeeUI}{freightFeeRemittedUI}</div>\r\n            </div>\r\n            {couponUI}\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">下单时间:</div>\r\n                <div className=\"col-9 text-right\"><EasyDate date={date} /></div>\r\n            </div>\r\n            <div className=\"bg-white p-3 my-1 text-right\">\r\n                <span className=\"text-danger font-weight-bold\">总金额: {amount}{tv(currency)}</span>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nfunction invoiceTemplate(invoiceType: BoxId, invoiceInfo: BoxId): JSX.Element {\r\n    return <>\r\n        {tv(invoiceType, invoiceTypeUI, undefined, () => <></>)}<br />\r\n        {tv(invoiceInfo, invoiceInfoUI, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nfunction invoiceTypeUI(values: any) {\r\n    let { id, description } = values;\r\n    return <>{description}</>;\r\n}\r\n\r\nfunction invoiceInfoUI(values: any) {\r\n    let { id, title, taxNo, address, telephone, bank, accountNo } = values;\r\n    return <>{title}</>;\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, UiSchema, UiInputItem, Form, Context, tv, BoxId, FA } from 'tonva';\r\nimport { Schema } from 'tonva';\r\nimport { CInvoiceInfo } from './CInvoiceInfo';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'title', type: 'string', required: false },\r\n    { name: 'taxNo', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: false },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'bank', type: 'string', required: false },\r\n    { name: 'accountNo', type: 'string', required: false },\r\n];\r\n\r\nconst uiSchema: UiSchema = {\r\n    items: {\r\n        id: { visible: false },\r\n        title: {\r\n            widget: 'text', label: '单位全称', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 200) ? '单位全称最多200个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        taxNo: {\r\n            widget: 'text', label: '纳税人识别码', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if (value) {\r\n                    var regArr = [/^[\\da-z]{10,15}$/i, /^\\d{6}[\\da-z]{10,12}$/i, /^[a-z]\\d{6}[\\da-z]{9,11}$/i, /^[a-z]{2}\\d{6}[\\da-z]{8,10}$/i, /^\\d{14}[\\dx][\\da-z]{4,5}$/i, /^\\d{17}[\\dx][\\da-z]{1,2}$/i, /^[a-z]\\d{14}[\\dx][\\da-z]{3,4}$/i, /^[a-z]\\d{17}[\\dx][\\da-z]{0,1}$/i, /^[\\d]{6}[\\da-z]{13,14}$/i],\r\n                        j = regArr.length;\r\n                    for (var i = 0; i < j; i++) {\r\n                        if (regArr[i].test(value)) {\r\n                            return undefined;\r\n                        }\r\n                    }\r\n                    return '纳税人识别码格式不正确，请重新输入！';\r\n                }\r\n            }\r\n        } as UiInputItem,\r\n        address: {\r\n            widget: 'text', label: '注册地址', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 200) ? '注册地址最多200个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        telephone: {\r\n            widget: 'text', label: '注册电话', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n                    return \"注册电话格式不正确，请重新输入！\";\r\n                else\r\n                    return undefined;\r\n            }\r\n        } as UiInputItem,\r\n        bank: {\r\n            widget: 'text', label: '开户银行', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 100) ? '开户银行名称最多100个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        accountNo: {\r\n            widget: 'text', label: '银行账号', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if (value && !/^([1-9]{1})(\\d{14}|\\d{18}|\\d{15})$/.test(value))\r\n                    return \"银行账号格式不正确，请重新输入！\";\r\n                else\r\n                    return undefined;\r\n            }\r\n        } as UiInputItem,\r\n        submit: { widget: 'button', label: '提交' },\r\n    }\r\n}\r\n\r\nconst commonRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: false,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: false,\r\n};\r\n\r\nconst valueAddedRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: false,\r\n}\r\n\r\nconst commonVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: false,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: true,\r\n};\r\n\r\nconst valueAddedVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: true,\r\n}\r\n\r\nexport class VInvoiceInfo extends VPage<CInvoiceInfo> {\r\n    private form: Form;\r\n    @observable showTip: boolean = false;\r\n    saveTip: string = \"\";\r\n    private invoiceInfoData: any;\r\n\r\n    async open(origInvoice?: any) {\r\n        let { invoiceType, invoiceInfo } = origInvoice;\r\n        this.invoiceType = (invoiceType && invoiceType.id) || 1;\r\n        if (invoiceInfo) {\r\n            invoiceInfo.assure();\r\n            this.invoiceInfoData = { ...invoiceInfo.obj };\r\n        } else {\r\n            this.invoiceInfoData = { 'title': this.controller.cApp.currentUser.defaultOrganizationName };\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { form } = context;\r\n        let { data } = form;\r\n        let invoice = {\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: data,\r\n        };\r\n        this.invoiceInfoData = data;\r\n\r\n        try {\r\n            await this.controller.saveInvoiceInfo(invoice);\r\n            this.saveTip = \"发票信息已经保存\";\r\n        } catch (error) {\r\n            this.saveTip = \"发票信息保存失败，请稍后再试\";\r\n        }\r\n        this.showTip = true;\r\n        setTimeout(() => { this.showTip = false; }, 2000);\r\n    }\r\n\r\n    private onSaveInvoice = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    @observable invoiceType: number;\r\n\r\n    private buildForm(): JSX.Element {\r\n        let requiredFields: any = this.invoiceType === 1 ? commonRequired : valueAddedRequired;\r\n        let visibleFields: any = this.invoiceType === 1 ? commonVisible : valueAddedVisible;\r\n        schema.forEach(e => {\r\n            let { items } = uiSchema;\r\n            e.required = requiredFields[e.name];\r\n            items[e.name].visible = visibleFields[e.name];\r\n        });\r\n        return <Form ref={v => this.form = v} className=\"my-3\"\r\n            schema={schema}\r\n            uiSchema={uiSchema}\r\n            formData={this.invoiceInfoData}\r\n            onButtonClick={this.onFormButtonClick}\r\n            fieldLabelSize={3} />\r\n    }\r\n\r\n    private onInvoiceTypeClick = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.invoiceType = parseInt(event.currentTarget.value);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let frm = this.buildForm();\r\n\r\n        let tipUI = this.showTip ? (<div className=\"alert alert-primary\" role=\"alert\">\r\n            <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n            {this.saveTip}\r\n        </div>) : null;\r\n        return <Page header=\"发票\">\r\n            <div className=\"px-3\">\r\n                <div className=\"form-group row py-3 mb-1 bg-white\">\r\n                    <div className=\"col-12 col-sm-3 pb-2 text-muted\">发票类型:</div>\r\n                    <div className=\"col-12 col-sm-9\">\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"common\" value=\"1\"\r\n                                onChange={(event) => this.onInvoiceTypeClick(event)} checked={this.invoiceType === 1}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"common\">增值税普通发票</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"valueAdded\" value=\"2\"\r\n                                onChange={(event) => this.onInvoiceTypeClick(event)} checked={this.invoiceType === 2}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"valueAdded\">增值税专用发票</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"p-3 bg-white\">\r\n                {frm}\r\n                <button type=\"button\"\r\n                    className=\"btn btn-primary w-100\"\r\n                    onClick={this.onSaveInvoice}>确定</button>\r\n                {tipUI}\r\n            </div>\r\n        </Page>\r\n    });\r\n}\r\n","//import { Controller } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VInvoiceInfo } from './VInvoiceInfo';\r\n//import { CCartApp } from 'CCartApp';\r\n//import { Tuid } from 'tonva';\r\n\r\nexport class CInvoiceInfo extends CUqBase {\r\n    fromOrderCreation: boolean;\r\n\r\n    async internalStart(origInvoice: any, fromOrderCreation: boolean) {\r\n        this.fromOrderCreation = fromOrderCreation;\r\n        this.openVPage(VInvoiceInfo, origInvoice);\r\n    }\r\n\r\n    async saveInvoiceInfo(invoice: any) {\r\n        let { invoiceType, invoiceInfo, isDefault } = invoice;\r\n        let newInvoiceInfo = await this.uqs.customer.InvoiceInfo.save(undefined, invoiceInfo);\r\n\r\n        let { id: newInvoiceInfoId } = newInvoiceInfo;\r\n        let invoiceBox = {\r\n            invoiceType: this.uqs.common.InvoiceType.boxId(invoiceType),\r\n            invoiceInfo: this.uqs.customer.InvoiceInfo.boxId(newInvoiceInfoId),\r\n        }\r\n        // if (isDefault === true || !this.fromOrderCreation) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoice(invoiceBox.invoiceType, invoiceBox.invoiceInfo);\r\n        // }\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(invoiceBox);\r\n        }\r\n    }\r\n}","import { UQs } from '../uqs';\r\nimport { Tuid, BoxId } from 'tonva';\r\nimport { Order } from 'order/Order';\r\nimport moment from 'moment';\r\n\r\nexport const activityTime = {\r\n    startDate: '2020-09-01',\r\n    endDate: '2020-09-30'\r\n}\r\n\r\nexport class CouponBase {\r\n\r\n    constructor(protected id: BoxId, private code: number, expiredDate: Date, private isValid: boolean) {\r\n        this.expiredDate = new Date(expiredDate);\r\n    }\r\n\r\n    protected expiredDate: Date;\r\n\r\n    getCodeShow() {\r\n        let codeShow = String(this.code);\r\n        let p1 = codeShow.substr(0, 4);\r\n        let p2 = codeShow.substr(4);\r\n        return p1 + ' ' + p2;\r\n    }\r\n\r\n    isAvaliable() {\r\n        return this.isValid && this.expiredDate.getTime() > Date.now()\r\n    }\r\n}\r\n\r\nexport interface OrderPriceStrategy {\r\n\r\n    applyTo(order: Order, uqs: UQs): Promise<void>;\r\n}\r\n\r\nexport function createOrderPriceStrategy(couponData: any): OrderPriceStrategy {\r\n    let { id, code, discount, preferential, validitydate, isValid, types, discountSetting } = couponData;\r\n    switch (types) {\r\n        case \"coupon\":\r\n            if (discountSetting && discountSetting.length > 0)\r\n                return new VIPCard(id, code, validitydate, isValid, discountSetting);\r\n            else\r\n                return new Coupon(id, code, validitydate, isValid, discount, preferential);\r\n            break;\r\n        case \"coupon_sale\":\r\n            return new CouponSale(id, code, validitydate, isValid, discount, preferential);\r\n            break;\r\n        case \"vipcard\":\r\n            return new VIPCard(id, code, validitydate, isValid, discountSetting);\r\n            break;\r\n        case \"credits\":\r\n            return new Credits(id, code, validitydate, isValid);\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\n/**\r\n * 优惠券的价格验证策略：成交价格取优惠券折扣价与所购产品品牌折扣价中较高者\r\n */\r\nexport class Coupon extends CouponBase implements OrderPriceStrategy {\r\n\r\n    constructor(protected id: BoxId, code: number, expiredDate: Date, isValid: boolean, protected discount: number, protected preferential: number) {\r\n        super(id, code, expiredDate, isValid);\r\n    }\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id\r\n        if (this.isAvaliable()) {\r\n            if (this.discount) {\r\n                let { orderItems, salesRegion } = orderData;\r\n                if (orderItems !== undefined && orderItems.length > 0) {\r\n                    let { salesTask, product: uqsProduct } = uqs;\r\n                    let couponOffsetAmount = 0;\r\n                    for (let i = 0; i < orderItems.length; i++) {\r\n                        let oi = orderItems[i];\r\n                        let { product, packs } = oi;\r\n                        let { ProductX } = uqsProduct;\r\n                        let productTuid: any = await ProductX.load(product)\r\n                        // 获取品牌的折扣\r\n                        let { BottomDiscount } = salesTask;\r\n                        let brandDiscountMap: any = await BottomDiscount.obj({ brand: productTuid.brand, salesRegion: salesRegion.id });\r\n\r\n                        for (let j = 0; j < packs.length; j++) {\r\n                            let pk = packs[j];\r\n                            // 折扣价格取底线折扣价和折扣价格中较高者\r\n                            let lastDiscount = Math.min((brandDiscountMap ? brandDiscountMap.discount : 0), this.discount);\r\n                            let discountPrice = Math.round(pk.retail * (1 - lastDiscount));\r\n                            // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                            pk.price = Math.round(Math.min(pk.price, discountPrice));\r\n                            couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                        };\r\n                    };\r\n                    orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n\r\n                    /*\r\n                    if (agentPrices && agentPrices.length > 0) {\r\n                        let couponOffsetAmount = 0;\r\n                        for (let i = 0; i < orderItems.length; i++) {\r\n                            let oi = orderItems[i];\r\n                            let { product, packs } = oi;\r\n\r\n                            let eachProductAgentPrice = agentPrices[i];\r\n                            for (let j = 0; j < packs.length; j++) {\r\n                                let pk = packs[j];\r\n                                let agentPrice: any = eachProductAgentPrice.find(\r\n                                    (p: any) => p.product.id === product.id &&\r\n                                        p.pack.id === pk.pack.id &&\r\n                                        p.discountinued === 0 &&\r\n                                        p.expireDate > Date.now());\r\n                                if (!agentPrice) break;\r\n\r\n                                // 折扣价格取agentPrice和折扣价格中较高者\r\n                                let discountPrice = Math.round(Math.max(agentPrice.agentPrice, pk.retail * (1 - this.discount)));\r\n                                // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                                pk.price = Math.round(Math.min(pk.price, discountPrice));\r\n                                couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                            };\r\n                        };\r\n                        orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n                    };\r\n                    */\r\n                }\r\n            }\r\n\r\n            if (this.preferential) {\r\n                orderData.couponRemitted = this.preferential * -1;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 销售发放的优惠券的价格验证策略（未使用） \r\n */\r\nexport class CouponSale extends Coupon implements OrderPriceStrategy {\r\n\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id\r\n        if (this.isAvaliable()) {\r\n            if (this.discount) {\r\n                let { orderItems } = orderData;\r\n                if (orderItems !== undefined && orderItems.length > 0) {\r\n                    let couponOffsetAmount = 0;\r\n                    for (let i = 0; i < orderItems.length; i++) {\r\n                        let oi = orderItems[i];\r\n                        let { packs } = oi;\r\n\r\n                        for (let j = 0; j < packs.length; j++) {\r\n                            let pk = packs[j];\r\n                            // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                            pk.price = Math.round(Math.min(pk.price, pk.retail * (1 - this.discount)));\r\n                            couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                        };\r\n                    };\r\n                    orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n                }\r\n            }\r\n\r\n            if (this.preferential) {\r\n                orderData.couponRemitted = this.preferential * -1;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * VIP卡的价格策略:品牌包含在VIP卡折扣表中的，价格为目录价 * 对应的(1-discount)，否则为目录价\r\n */\r\nexport class VIPCard extends CouponBase implements OrderPriceStrategy {\r\n\r\n    constructor(protected id: BoxId, code: number, expiredDate: Date, isValid: boolean, private discountSetting: any[]) {\r\n        super(id, code, expiredDate, isValid);\r\n    }\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id\r\n        if (this.isAvaliable() && this.discountSetting && this.discountSetting.length > 0) {\r\n            let { orderItems } = orderData;\r\n            if (orderItems !== undefined && orderItems.length > 0) {\r\n                let couponOffsetAmount = 0;\r\n                for (let i = 0; i < orderItems.length; i++) {\r\n                    let oi = orderItems[i];\r\n                    let { product, packs } = oi;\r\n                    // 获取明细中产品的VIP卡折扣\r\n                    let thisDiscountSetting = this.discountSetting.find((e: any) => Tuid.equ(e.brand, product.obj.brand));\r\n                    let discount = (thisDiscountSetting && thisDiscountSetting.discount) || 0;\r\n\r\n                    for (let j = 0; j < packs.length; j++) {\r\n                        let pk = packs[j];\r\n                        pk.priceInit = pk.price === Math.round(pk.retail * (1 - discount)) ? pk.retail : pk.price;\r\n                        // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                        pk.price = Math.round(Math.min(pk.price, pk.retail * (1 - discount)));\r\n                        couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                    };\r\n                };\r\n                orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class Credits extends CouponBase implements OrderPriceStrategy {\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id;\r\n        if (this.isAvaliable()) {\r\n            let { orderItems } = orderData;\r\n            if (orderItems !== undefined && orderItems.length > 0) {\r\n                let couponOffsetAmount = 0;\r\n                for (let i = 0; i < orderItems.length; i++) {\r\n                    let oi = orderItems[i];\r\n                    let { packs } = oi;\r\n                    for (let j = 0; j < packs.length; j++) {\r\n                        let pk = packs[j];\r\n                        pk.priceInit = pk.price;\r\n                        //双倍积分 无折扣 取最大的价格 \r\n                        pk.price = Math.round(Math.max(pk.price, pk.retail));\r\n                        couponOffsetAmount = 0;\r\n                    };\r\n                };\r\n                orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n            }\r\n        }\r\n        let multiple = 2;\r\n        if (IsInActivePeriod()) multiple = 4;\r\n        orderData.point = Math.round(orderData.productAmount * multiple);\r\n    }\r\n}\r\n\r\n/**\r\n * 是否在活动期\r\n */\r\nexport function IsInActivePeriod() {\r\n    let { startDate, endDate } = activityTime;\r\n    let newDate = moment().format('YYYY-MM-DD');\r\n    return newDate >= startDate && newDate <= endDate;\r\n}","import { observable } from 'mobx';\r\nimport { BoxId, Tuid } from 'tonva';\r\nimport { nav } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VCreateOrder } from './VCreateOrder';\r\nimport { Order, OrderItem } from './Order';\r\nimport { OrderSuccess } from './OrderSuccess';\r\nimport { CSelectShippingContact, CSelectInvoiceContact } from '../customer/CSelectContact';\r\nimport { VMyOrders } from './VMyOrders';\r\nimport { VOrderDetail } from './VOrderDetail';\r\nimport { CInvoiceInfo } from '../customer/CInvoiceInfo';\r\nimport { groupByProduct } from '../tools/groupByProduct';\r\nimport { CartItem2, CartPackRow } from '../cart/Cart';\r\nimport { createOrderPriceStrategy, OrderPriceStrategy } from 'coupon/Coupon';\r\n\r\nconst FREIGHTFEEFIXED = 12;\r\nconst FREIGHTFEEREMITTEDSTARTPOINT = 100;\r\n\r\nexport class COrder extends CUqBase {\r\n    @observable orderData: Order = new Order();\r\n    /**\r\n     * 存储已经被应用的卡券，以便在使用后（下单后）将其删除\r\n     */\r\n    @observable couponAppliedData: any = {};\r\n    hasAnyCoupon: boolean;\r\n    /**\r\n     * 当前webuser对应的buyeraccount，用来设置订单中的buyeraccount\r\n     */\r\n    @observable buyerAccounts: any[] = [];\r\n\r\n    protected async internalStart(param: any) {\r\n    }\r\n\r\n    createOrderFromCart = async (cartItems: CartItem2[]) => {\r\n        let { cApp, uqs } = this;\r\n        let { currentUser, currentSalesRegion, cCoupon } = cApp;\r\n        this.orderData.webUser = currentUser.id;\r\n        this.orderData.salesRegion = currentSalesRegion.id;\r\n        this.removeCoupon();\r\n        this.hasAnyCoupon = await this.hasCoupons();\r\n\r\n        let buyerAccountQResult = await uqs.webuser.WebUserBuyerAccount.query({ webUser: currentUser.id })\r\n        if (buyerAccountQResult) {\r\n            this.buyerAccounts = buyerAccountQResult.ret;\r\n            if (this.buyerAccounts && this.buyerAccounts.length === 1) {\r\n                this.orderData.customer = this.buyerAccounts[0].buyerAccount;\r\n            }\r\n        }\r\n\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceContact === undefined) {\r\n            this.orderData.invoiceContact = await this.getDefaultInvoiceContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceType === undefined) {\r\n            this.orderData.invoiceType = await this.getDefaultInvoiceType();\r\n        }\r\n\r\n        if (this.orderData.invoiceInfo === undefined) {\r\n            this.orderData.invoiceInfo = await this.getDefaultInvoiceInfo();\r\n        }\r\n\r\n        if (cartItems !== undefined && cartItems.length > 0) {\r\n            this.orderData.currency = cartItems[0].packs[0].currency;\r\n            this.orderData.orderItems = cartItems.map((e: any) => {\r\n                var item = new OrderItem();\r\n                item.product = e.product;\r\n                item.packs = e.packs.map((v: any) => { return { ...v } }).filter((v: any) => v.quantity > 0 && v.price);\r\n                item.packs.forEach((pk) => {\r\n                    pk.priceInit = pk.price;\r\n                })\r\n                return item;\r\n            });\r\n\r\n            // 运费和运费减免\r\n            this.orderData.freightFee = FREIGHTFEEFIXED;\r\n            if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n            else\r\n                this.orderData.freightFeeRemitted = 0;\r\n        }\r\n\r\n        /*\r\n        let currentCode = currentCouponCode || currentCreditCode;\r\n        if (currentCode) {\r\n            let coupon = await cCoupon.getCouponValidationResult(currentCode);\r\n            if (coupon.result === 1)\r\n                this.applyCoupon(coupon);\r\n            else {\r\n                this.cApp.currentCouponCode = undefined;\r\n                this.cApp.currentCreditCode = undefined;\r\n            }\r\n        }\r\n        */\r\n        // 如果当前webuser有VIP卡，默认下单时使用其VIP卡\r\n        let { webUserVIPCard } = currentUser;\r\n        if (webUserVIPCard !== undefined) {\r\n            let coupon = await cCoupon.getCouponValidationResult(\r\n                webUserVIPCard.vipCardCode.toString()\r\n            );\r\n            let { result, types, id } = coupon;\r\n            if (result === 1) {\r\n                if (types === \"vipcard\" || types === \"coupon\") {\r\n                    coupon.discountSetting = await cCoupon.getValidDiscounts(types, id);\r\n                }\r\n                this.applyCoupon(coupon);\r\n            }\r\n        }\r\n        this.openVPage(VCreateOrder);\r\n    }\r\n\r\n    private defaultSetting: any;\r\n    private async getDefaultSetting() {\r\n        if (this.defaultSetting) return this.defaultSetting;\r\n        let { currentUser } = this.cApp;\r\n        return this.defaultSetting = await currentUser.getSetting() || {};\r\n    }\r\n\r\n    private contact0: BoxId;\r\n    private async getContact(): Promise<BoxId> {\r\n        if (this.contact0 === null) return;\r\n        if (this.contact0 !== undefined) return this.contact0;\r\n        let { currentUser } = this.cApp;\r\n        let contactArr = await currentUser.getContacts();\r\n        if (contactArr === undefined || contactArr.length === 0) {\r\n            this.contact0 = null;\r\n            return;\r\n        }\r\n        return this.contact0 = contactArr[0].contact;\r\n    }\r\n\r\n    private async getDefaultShippingContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.shippingContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceType() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceType;\r\n    }\r\n\r\n    private async getDefaultInvoiceInfo() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceInfo;\r\n    }\r\n\r\n    /**\r\n     * 提交订单\r\n     */\r\n    submitOrder = async () => {\r\n        let { uqs, cart, currentUser } = this.cApp;\r\n        let { order, webuser, 积分商城 } = uqs;\r\n        let { orderItems } = this.orderData;\r\n\r\n        let result: any = await order.Order.save(\"order\", this.orderData.getDataForSave());\r\n        let { id: orderId, flow, state } = result;\r\n        await order.Order.action(orderId, flow, state, \"submit\");\r\n        // 如果使用了coupon/credits，需要将其标记为已使用\r\n        let { id: couponId, code, types } = this.couponAppliedData;\r\n        if (couponId) {\r\n            let nowDate = new Date();\r\n            let usedDate = `${nowDate.getFullYear()}-${nowDate.getMonth() + 1}-${nowDate.getDate()}`;\r\n            switch (types) {\r\n                case 'coupon':\r\n                    webuser.WebUserCoupon.del({ webUser: currentUser.id, coupon: couponId, arr1: [{ couponType: 1 }] });\r\n                    webuser.WebUserCouponUsed.add({ webUser: currentUser.id, arr1: [{ coupon: couponId, usedDate: usedDate }] });\r\n                    break;\r\n                case 'credits':\r\n                    积分商城.WebUserCredits.del({ webUser: currentUser.id, arr1: [{ credits: couponId }] });\r\n                    积分商城.WebUserCreditsUsed.add({ webUser: currentUser.id, arr1: [{ credits: couponId, usedDate: usedDate }] });\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        let param: [{ productId: number, packId: number }] = [] as any;\r\n        orderItems.forEach(e => {\r\n            e.packs.forEach(v => {\r\n                param.push({ productId: e.product.id, packId: v.pack.id })\r\n            })\r\n        });\r\n        cart.removeFromCart(param);\r\n\r\n        // 打开下单成功显示界面\r\n        nav.popTo(this.cApp.topKey);\r\n        this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    PayAmountByOrder = (order:any) => {\r\n        let { cPayment } = this.cApp;\r\n        cPayment.openPayment(order);\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        let cSelect = this.newC(CSelectShippingContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        this.orderData.shippingContact = contactBox;\r\n    }\r\n\r\n    onSelectInvoiceContact = async () => {\r\n        let cSelect = this.newC(CSelectInvoiceContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        this.orderData.invoiceContact = contactBox;\r\n    }\r\n\r\n    /**\r\n     * 打开输入或选择使用卡券界面\r\n     */\r\n    onCouponEdit = async () => {\r\n        let { cCoupon } = this.cApp;\r\n        let coupon = await cCoupon.call<any>(this.orderData.coupon);\r\n        if (coupon) {\r\n            await this.applyCoupon(coupon);\r\n        }\r\n    }\r\n\r\n    private hasCoupons = async (): Promise<boolean> => {\r\n        let { cCoupon, currentUser } = this.cApp;\r\n        let { id: currentUserId } = currentUser;\r\n        if (await cCoupon.getValidCreditsForWebUser(currentUserId))\r\n            return true;\r\n        let validCoupons = await cCoupon.getValidCouponsForWebUser(currentUserId);\r\n        if (validCoupons && validCoupons.length > 0)\r\n            return true;\r\n        let validCredits = await cCoupon.getValidCreditsForWebUser(currentUserId);\r\n        if (validCredits && validCoupons.length > 0)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 使用优惠券后计算折扣金额和抵扣额\r\n     */\r\n    applyCoupon = async (coupon: any) => {\r\n\r\n        this.removeCoupon();\r\n        let { result: validationResult, validitydate, isValid } = coupon;\r\n        if (validationResult === 1 && isValid === 1 && new Date(validitydate).getTime() > Date.now()) {\r\n            this.couponAppliedData = coupon;\r\n            let orderPriceStrategy: OrderPriceStrategy = createOrderPriceStrategy(coupon);\r\n            orderPriceStrategy.applyTo(this.orderData, this.uqs);\r\n            /*\r\n            this.orderData.coupon = id;\r\n            if (types === \"coupon\" || types === \"vipcard\") {\r\n                // if (discount) {\r\n                // 仍兼容原来统一折扣的模式\r\n                if ((discountSetting && discountSetting.length > 0) || discount) {\r\n                    let { orderData, uqs, cApp } = this;\r\n                    let { orderItems } = orderData;\r\n                    let { AgentPrice } = uqs.product;\r\n                    if (orderItems !== undefined && orderItems.length > 0) {\r\n                        // 获取每个明细中产品的agentprice;\r\n                        let promises: PromiseLike<any>[] = [];\r\n                        orderItems.forEach(e => {\r\n                            promises.push(AgentPrice.table({ product: e.product.id, salesRegion: cApp.currentSalesRegion.id }));\r\n                        });\r\n                        let agentPrices = await Promise.all(promises);\r\n\r\n                        if (agentPrices && agentPrices.length > 0) {\r\n                            let couponOffsetAmount = 0;\r\n                            for (let i = 0; i < orderItems.length; i++) {\r\n                                let oi = orderItems[i];\r\n                                let { product, packs } = oi;\r\n                                // 获取明细中产品的优惠券/VIP卡折扣\r\n                                if (discountSetting) {\r\n                                    let thisDiscountSetting = discountSetting.find((e: any) => Tuid.equ(e.brand, product.obj.brand));\r\n                                    discount = (thisDiscountSetting && thisDiscountSetting.discount) || discount || 0;\r\n                                }\r\n\r\n                                let eachProductAgentPrice = agentPrices[i];\r\n                                for (let j = 0; j < packs.length; j++) {\r\n                                    let pk = packs[j];\r\n                                    let agentPrice: any = eachProductAgentPrice.find(\r\n                                        (p: any) => p.product.id === product.id &&\r\n                                            p.pack.id === pk.pack.id &&\r\n                                            p.discountinued === 0 &&\r\n                                            p.expireDate > Date.now());\r\n                                    if (!agentPrice) break;\r\n\r\n                                    // 折扣价格取agentPrice和折扣价格中较高者\r\n                                    let discountPrice = Math.round(Math.max(agentPrice.agentPrice, pk.retail * (1 - discount)));\r\n                                    // pk.price = Math.round(Math.max(agentPrice.agentPrice, pk.retail * (1 - discount)));\r\n                                    // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                                    pk.price = Math.round(Math.min(pk.price, discountPrice));\r\n                                    couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                                };\r\n                            };\r\n                            this.orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n                        };\r\n                    }\r\n                }\r\n                if (preferential) {\r\n                    this.orderData.couponRemitted = preferential * -1;\r\n                }\r\n                // 运费和运费减免\r\n                this.orderData.freightFee = FREIGHTFEEFIXED;\r\n                if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                    this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n            }\r\n\r\n            if (types === \"credits\") {\r\n                this.orderData.point = Math.round(this.orderData.productAmount * 2);\r\n            }\r\n            */\r\n            // 运费和运费减免\r\n            this.orderData.freightFee = FREIGHTFEEFIXED;\r\n            if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n            else\r\n                this.orderData.freightFeeRemitted = 0;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 删除优惠券\r\n     */\r\n    removeCoupon = () => {\r\n        this.orderData.coupon = undefined;\r\n        this.couponAppliedData = {};\r\n        this.orderData.couponOffsetAmount = 0;\r\n        this.orderData.couponRemitted = 0;\r\n        this.orderData.point = 0;\r\n        this.orderData.orderItems.forEach((e: OrderItem) => e.packs.forEach((v: CartPackRow) => v.price = v.priceInit));\r\n    }\r\n\r\n    /*\r\n    * 打开我的订单列表（在“我的”界面使用）\r\n    */\r\n    openMyOrders = async (state: string) => {\r\n\r\n        this.openVPage(VMyOrders, state);\r\n    }\r\n\r\n    /**\r\n     * 根据状态读取我的订单\r\n     */\r\n    getMyOrders = async (state: string) => {\r\n        let { order } = this.uqs;\r\n        switch (state) {\r\n            case 'pendingpayment':\r\n                return await order.GetPendingPayment.table(undefined);\r\n            case 'processing':\r\n                return await order.Order.mySheets(undefined, 1, -20);\r\n            case 'completed':\r\n                return await order.Order.mySheets(\"#\", 1, -20)\r\n            case 'all':\r\n                let promises: PromiseLike<any>[] = [];\r\n                promises.push(order.Order.mySheets(undefined, 1, -20));\r\n                promises.push(order.Order.mySheets(\"#\", 1, -20));\r\n                let presult = await Promise.all(promises);\r\n                return presult[0].concat(presult[1]).sort((a: any, b: any) => new Date(b.date).valueOf() - new Date(a.date).valueOf());\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 打开发票信息编辑界面\r\n     */\r\n    onInvoiceInfoEdit = async () => {\r\n        let cInvoiceInfo = this.newC(CInvoiceInfo); // new CInvoiceInfo(this.cApp, undefined, true);\r\n        let { invoiceType, invoiceInfo } = this.orderData;\r\n        let origInvoice = {\r\n            invoiceType: invoiceType,\r\n            invoiceInfo: invoiceInfo,\r\n        }\r\n        let newInvoice = await cInvoiceInfo.call<any>(origInvoice, true);\r\n        this.orderData.invoiceType = newInvoice.invoiceType;\r\n        this.orderData.invoiceInfo = newInvoice.invoiceInfo;\r\n    }\r\n\r\n    openOrderDetail = async (orderId: number) => {\r\n\r\n        let order = await this.uqs.order.Order.getSheet(orderId);\r\n        let { data } = order;\r\n        let { orderItems } = data;\r\n        let orderItemsGrouped = groupByProduct(orderItems);\r\n        data.orderItems = orderItemsGrouped;\r\n        this.openVPage(VOrderDetail, order);\r\n    }\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    renderOrderItemProduct = (product: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderCartProduct(product);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View } from 'tonva';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { FA } from 'tonva';\r\nimport { GLOABLE } from 'cartenv';\r\n//import { observer } from 'mobx-react';\r\n\r\n/*\r\nconst imgStyle: React.CSSProperties = {\r\n    height: '1.5rem', width: '1.5rem',\r\n    marginLeft: '0.1rem',\r\n    marginRight: '0.3rem'\r\n}\r\n\r\nexport const titleTitle: React.CSSProperties = {\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport const subStyle: React.CSSProperties = {\r\n    fontSize: '0.75rem',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n*/\r\n\r\nexport class VRootCategory extends View<CProductCategory> {\r\n\r\n    private categoryClick = async (categoryWapper: any, parent: any, labelColor: string) => {\r\n        await this.controller.openMainPage(categoryWapper, parent, labelColor);\r\n    }\r\n\r\n    private renderRootCategory = (item: any, parent: any) => {\r\n        let { name, children, productCategory } = item;\r\n        let { id: productCategoryID } = productCategory;\r\n        let { src, labelColor } = GLOABLE.ROOTCATEGORY[productCategoryID];\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, undefined, labelColor)}>\r\n                <img className=\"mr-4 cat-root-img\" src={src} alt={name} />\r\n                <b>{name}</b>\r\n            </div>\r\n            <div className=\"cat-root-sub\">\r\n                <div className=\"row no-gutters\">\r\n                    {children.map((v: any) => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { name, subsub, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n            <div className=\"py-2 px-2 cat-sub\">\r\n                <div className=\"text-truncate\">\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={labelColor} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(subsub, total)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    }\r\n\r\n    private content = () => {\r\n        let { rootCategories } = this.controller;\r\n        return <>{rootCategories.map((v: any) => this.renderRootCategory(v, undefined))}</>;\r\n        // return <>{categories2.map(v => <div key={v.productCategory.id}>{tv(v, e => this.renderRoot(e))}</div>)}</>;\r\n    };\r\n\r\n    private renderRoot(root: any) {\r\n        let { productCategory } = root;\r\n        let { id } = productCategory;\r\n        console.log(id);\r\n        return <div key={id}>{id}</div>\r\n    }\r\n}\r\n\r\n\r\nexport function renderThirdCategory(subsub: string, total: number) {\r\n    /*\r\n    return <div className=\"py-1 px-1 text-muted small cat-sub-style\">\r\n        {items.length === 0 ? <>产品数量: {total > 1000 ? '>1000' : total}</> : items.map((v: any) => v.name).join(' / ')}\r\n    </div>\r\n    */\r\n    return <div className=\"py-1 px-1 text-muted small text-truncate\">\r\n        {\r\n            subsub === undefined ?\r\n                <>{total > 1000 ? '>1000' : total} 个产品</>\r\n                :\r\n                subsub\r\n        }\r\n    </div>\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, FA } from 'tonva';\r\nimport { CProductCategory } from './CProductCategory';\r\nimport marked from 'marked';\r\n//import { tv } from 'tonva';\r\nimport { renderThirdCategory } from './VRootCategory';\r\nimport { observer } from 'mobx-react';\r\nimport $ from 'jquery';\r\n\r\nexport class VCategory extends VPage<CProductCategory> {\r\n\r\n    instruction: string;\r\n    async open(categoryWapper: any) {\r\n\r\n        this.instruction = categoryWapper.instruction;\r\n        this.openPage(this.page, categoryWapper);\r\n        // let { getCategoryInstruction } = this.controller;\r\n        // this.instruction = await getCategoryInstruction(0);\r\n    }\r\n\r\n    /*\r\n    private renderChild = (childWapper: any) => {\r\n        return <div className=\"py-2\"><FA name=\"hand-o-right mr-2\"></FA>{childWapper.name}</div>\r\n    }*/\r\n\r\n    private categoryClick = async (childWapper: any, parent: any, labelColor: string) => {\r\n        await this.controller.openMainPage(childWapper, parent, labelColor);\r\n    }\r\n\r\n    /*\r\n    private breadCrumb = (item: any, parent: any) => {\r\n        return <nav arial-babel=\"breadcrumb\">\r\n            <ol className=\"breadcrumb\">\r\n                {tv(item, this.breadCrumbItem)}\r\n            </ol>\r\n        </nav>\r\n\r\n    }*/\r\n\r\n    /*\r\n    private breadCrumbItem = (values: any, parent: any) => {\r\n        if (values === undefined || values.productCategory === undefined)\r\n            return <></>;\r\n        return <>\r\n            {tv(values.productCategory.parent, this.breadCrumbItem)}\r\n            <li className=\"breadcrumb-item\" onClick={() => this.categoryClick(values, undefined, \"\")}>{values.name}</li>\r\n        </>\r\n    }*/\r\n\r\n    private renderRootCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { productCategory, name, children } = item;\r\n        let instructionUi;\r\n        if (this.instruction) {\r\n            let instr: JQuery<Element> = $(this.instruction);\r\n            $(\"a[href*='jkchemical.com']\", instr).addClass('d-none');\r\n            instructionUi = <div className=\"overflow-auto my-3 bg-light\" style={{ height: 320 }} dangerouslySetInnerHTML={{ __html: (instr[0].innerHTML || \"\") }} />;\r\n        }\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n                <b>{name}</b>\r\n                {instructionUi}\r\n            </div>\r\n            <div className=\"cat-root-sub\">\r\n                <div className=\"row no-gutters\">\r\n                    {children.map((v: any) => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { name, subsub, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n            <div className=\"py-2 px-2 cat-sub\">\r\n                <div className=\"cat-title-title\">\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={labelColor} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(subsub, total)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private page = observer((categoryWapper: any) => {\r\n        let { cHome } = this.controller.cApp;\r\n        let header = cHome.renderSearchHeader();\r\n        let cartLabel = this.controller.cApp.cCart.renderCartLabel();\r\n\r\n        let { categoryWapper: item, parent, labelColor } = categoryWapper;\r\n        return <Page header={header} right={cartLabel}>\r\n            {this.renderRootCategory(item, parent, labelColor)}\r\n        </Page>\r\n    })\r\n}","//import { observable } from 'mobx';\r\nimport _ from 'lodash';\r\nimport { CUqBase } from '../CBase';\r\nimport { VRootCategory } from './VRootCategory';\r\nimport { VCategory } from './VCategory';\r\nimport { GLOABLE } from \"cartenv\";\r\nimport './cat.css';\r\n\r\nexport class CProductCategory extends CUqBase {\r\n    rootCategories: any[] = [];\r\n    //@observable categories2: any[] = [];\r\n\r\n    async internalStart(param: any) {\r\n        this.uqs.product.ProductCategory.stopCache();\r\n\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        let results = await this.uqs.product.GetRootCategory.query({\r\n            salesRegion: currentSalesRegion.id,\r\n            language: currentLanguage.id\r\n        });\r\n        let { first, secend, third } = results;\r\n        /*\r\n        (first as any[]).forEach(element => {\r\n            this.buildCategories(element, secend, third);\r\n        });\r\n        */\r\n        this.rootCategories = (first as any[]).map(v => {\r\n            return this.buildCategories(v, secend, third);\r\n        });\r\n        /*\r\n        let result2 = await this.getRootCategoriesQuery.query({ salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n        if (result2)\r\n            this.categories2 = result2.ret;\r\n        */\r\n    }\r\n\r\n    renderRootList = () => {\r\n        return this.renderView(VRootCategory);\r\n    };\r\n\r\n    getCategoryInstruction = async (categoryId: number) => {\r\n        let res = await window.fetch(GLOABLE.CONTENTSITE + \"/partial/categoryinstruction/\" + categoryId);\r\n        if (res.ok) {\r\n            let content = await res.text();\r\n            return content;\r\n        }\r\n    };\r\n\r\n    private async getCategoryChildren(parentCategoryId: number) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        return await this.uqs.product.GetChildrenCategory.query({\r\n            parent: parentCategoryId,\r\n            salesRegion: currentSalesRegion.id,\r\n            language: currentLanguage.id\r\n        });\r\n    }\r\n\r\n    private buildCategories(categoryWapper: any, firstCategory: any[], secendCategory: any[]): any {\r\n        let { productCategory } = categoryWapper;\r\n        let catId: number = productCategory.id, children: any[] = [];\r\n        for (let f of firstCategory) {\r\n            if (f.parent !== catId) continue;\r\n            let pcid = f.productCategory.id;\r\n            let len = secendCategory.length;\r\n            let subsub = '';\r\n            for (let j = 0; j < len; j++) {\r\n                //element.children = secendCategory.filter((v: any) => v.parent === pcid);\r\n                let { name, parent } = secendCategory[j];\r\n                if (parent !== pcid) continue;\r\n                if (subsub.length > 0) subsub += ' / ';\r\n                subsub += name;\r\n                let sLen = subsub.length;\r\n                if (sLen > 40) break;\r\n            }\r\n            if (subsub.length > 0) f.subsub = subsub;\r\n            children.push(f);\r\n        }\r\n        //categoryWapper.children = firstCategory.filter((v: any) => v.parent === pcid);\r\n        let ret = _.clone(categoryWapper);\r\n        ret.children = children; // firstCategory.filter((v: any) => v.parent === pcid);\r\n        return ret;\r\n    }\r\n\r\n    async openMainPage(categoryWaper: any, parent: any, labelColor: string) {\r\n\r\n        let { productCategory, name } = categoryWaper;\r\n        let { id: productCategoryId } = productCategory;\r\n        let results = await this.getCategoryChildren(productCategoryId);\r\n        if (results.first.length !== 0) {\r\n            let rootCategory = this.buildCategories(categoryWaper, results.first, results.secend);\r\n            let instruction = await this.getCategoryInstruction(productCategoryId);\r\n            this.openVPage(VCategory, { categoryWapper: rootCategory, parent, labelColor, instruction });\r\n        } else {\r\n            let { cProduct } = this.cApp;\r\n            await cProduct.searchByCategory({ productCategoryId, name });\r\n        }\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Image } from 'tonva';\r\nimport { CMember } from './CMember';\r\nimport { LMR, Muted, FA, Media } from 'tonva';\r\nimport pig from '../images/pig.png';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst stylePig: React.CSSProperties = {\r\n    width: '100%',\r\n    height: '20rem',\r\n    backgroundImage: `url(${pig})`,\r\n    backgroundSize: 'contain',\r\n    backgroundColor: 'rgba(255,255,255,0.1)',\r\n    opacity: 0.09,\r\n    position: 'absolute',\r\n}\r\n\r\nexport class VMember extends VPage<CMember> {\r\n    private recommendationCodeRef = React.createRef<HTMLInputElement>();\r\n\r\n    async open(param: any) {\r\n\r\n    }\r\n\r\n    render(member: any): JSX.Element {\r\n\r\n        return <this.page />;\r\n    }\r\n\r\n    private submitRecommendationCode() {\r\n        let code = this.recommendationCodeRef.current.value;\r\n        if (code) {\r\n            let { setReferrer: submit } = this.controller;\r\n            submit(code);\r\n        }\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { cApp, member } = this.controller;\r\n        if (member === undefined)\r\n            return <></>;\r\n        let { currentUser } = cApp;\r\n        let { recommendationCode, point } = member;\r\n        if (!point) point = 0;\r\n\r\n        let im = <Image className=\"mr-3 w-3c h-3c\" src={currentUser.icon} />;\r\n        let inviteCode = <div className=\"small\">邀请码: {recommendationCode}</div>;\r\n\r\n        let divPoints = <div className=\"my-3 text-center bg-white h-25\" style={{ position: 'relative' }}>\r\n            <div className=\"w-100 bg-white h-20c\" style={{ position: 'absolute' }} />\r\n            <div className=\"d-flex align-items-center justify-content-center\" style={stylePig} />\r\n            <div className=\"w-100 d-flex align-items-center justify-content-center h-20c\" style={{ position: 'absolute' }}>\r\n                <div className=\"muted mr-3 small\">积分: </div>\r\n                <div className=\"text-danger\" style={{ fontSize: '2rem' }}>{point}</div>\r\n            </div>\r\n        </div>\r\n\r\n        let pointTitle = <p className=\"h4\">我的积分</p>\r\n        let pointDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>\r\n        let pointThisWeek = <><p className=\"h5 mb-0\">0</p><Muted>本周</Muted></>\r\n        let pointAll = <><p className=\"h5 mb-0\">{point}</p><Muted>累计</Muted></>\r\n\r\n        let fansTitle = <p>我的粉丝</p>\r\n        let fansDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>;\r\n        let detail = <div className=\"shadow bg-white rounded p-3 mb-1\">\r\n            <LMR left={fansTitle} right={fansDetail}></LMR>\r\n            <LMR className=\"pb-2\">\r\n                <p className=\"h4 mb-0\">0</p>\r\n                <Muted>今日</Muted>\r\n            </LMR>\r\n            <LMR left={pointThisWeek} right={pointAll} />\r\n            <LMR>\r\n                <input type=\"text\" className=\"form-control\" ref={this.recommendationCodeRef} />\r\n                <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.submitRecommendationCode()}>输入邀请码</button>\r\n            </LMR>\r\n        </div>;\r\n\r\n        return <div>\r\n            <LMR className=\"bg-white p-3 mb-1 align-items-center\"\r\n                left={im} right={inviteCode}>\r\n                <b>{currentUser.name}</b>\r\n            </LMR>\r\n            {divPoints}\r\n            {/*detail*/}\r\n        </div>\r\n    })\r\n}\r\n/*\r\n<div className=\"shadow bg-white rounded p-3 mb-1\">\r\n<LMR left={pointTitle} right={pointDetail}></LMR>\r\n<LMR className=\"pb-2\">\r\n    <p className=\"h4 mb-0\">0</p>\r\n    <Muted>今日</Muted>\r\n</LMR>\r\n<LMR left={pointThisWeek} right={pointAll} />\r\n</div>\r\n*/","import * as React from 'react';\r\n//import Loadable from 'react-loadable';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { FA } from 'tonva';\r\nimport { Controller, Loading, nav } from 'tonva';\r\nimport { Action, Map, BoxId } from 'tonva';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { VMember } from './VMember';\r\n//import { CCartApp } from 'CCartApp';\r\n//import { jnkTop } from 'me/loginTop';\r\n\r\nexport class CMember extends CUqBase {\r\n\r\n    //cApp: CCartApp;\r\n    //    cApp: CApp;\r\n    @observable member: any;\r\n    private referrer: BoxId;\r\n\r\n    protected async internalStart(param: any) {\r\n\r\n        if (this.isLogined) {\r\n            let { member } = this.uqs;\r\n            let { id: currentUserId } = this.user;\r\n            let promises: PromiseLike<any>[] = [];\r\n            promises.push(member.MemberAction.submit({}));\r\n            promises.push(member.MemberRecommender.table({ referrer: currentUserId }));\r\n            promises.push(member.MemberRecommender.table({ member: currentUserId }));\r\n            let result = await Promise.all(promises);\r\n            let { code, point } = result[0];\r\n            this.referrer = result[2];\r\n            this.member = { recommendationCode: code, point: point, fans: result[1], referrer: result[2] };\r\n        }\r\n    }\r\n\r\n    private loginCallback = async () => {\r\n        nav.pop();\r\n        await this.internalStart(undefined);\r\n    }\r\n\r\n    render = observer(() => {\r\n        if (this.isLogined) {\r\n            return this.member === undefined ? <Loading /> : this.renderView(VMember);\r\n        } else {\r\n            return <div\r\n                className=\"d-flex h-100 flex-column align-items-center justify-content-center\">\r\n                <div className=\"flex-fill\" />\r\n                <button className=\"btn btn-success w-20c\"\r\n                    onClick={() => nav.showLogin(this.loginCallback, true)}>\r\n                    <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                </button>\r\n                <div className=\"flex-fill\" />\r\n                <div className=\"flex-fill\" />\r\n            </div>;\r\n        }\r\n    })\r\n\r\n    tab = () => {\r\n        this.start();\r\n        return <this.render />;\r\n    }\r\n\r\n    setReferrer(code: string) {\r\n        if (code) {\r\n            // 写入map，方法是add，用这个方法可能会写入多次，多以在写入之前要检查有没有，有的话，就不能再调用这个方法了\r\n            // 这个逻辑我认为应该是在服务端，写入的时候要给双方积分，给多少积分的逻辑，也应该在后端，从邀请码到拥有此邀请码\r\n            // 的会员id之间的转换，逻辑也应该在后台，这个后端的逻辑写在ACTION中？\r\n            if (!this.referrer) {\r\n                let { id: currentUserId } = this.user;\r\n            }\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { Page } from 'tonva';\r\nimport marked from 'marked';\r\nimport logo from '../images/logo.png';\r\n\r\nconst content = `<p>　　百灵威科技有限公司是一家致力于研发和生产化学及相关产品，集敏捷制造、全球营销和现代物流为一体的高科技企业。\r\n百灵威在中国内地、香港，欧洲及北美等多个国家和地区设有物流中心，实行专业化、个性化的一站式服务，\r\n为全球超过200,000 名科技和工业领域的客户提供产品资源及配套技术服务。</p>\r\n<image src=\"images/aboutus/HebBirdsEye.jpg\" alt=\"BirdsEye\" class=\"pb-3\" style=\"width:100%; height:auto\">\r\n<p>　　百灵威现代化的研发制造基地拥有一支富有创造天赋的专业团队，新技术、新产品层出不穷，J&K®、Amethyst®、J&K Scientific® 产品\r\n已多达30,000 种以上，并呈几何级数增长。作为国际化的资源平台公司，百灵威致力于促进全球产业链的合作，不断推进集约式发展，\r\n集成资源600,000 余种，包括高纯有机试剂、无机试剂、生化试剂、分析试剂、标准品、金属有机催化剂、医药中间体、超精细材料、\r\n以及实验室仪器、耗材等众多产品。百灵威的柔性生产线能够快速提供小批量、多品种的原料，满足实验、中试以至规模化生产的需要。\r\n</p>\r\n<image src=\"images/aboutus/aboutUs1.jpg\" alt=\"aboutus1\" class=\"pb-3\" style=\"width:100%; height:auto\">\r\n<p>　　百灵威秉承“诚实守信、开拓创新、合作共赢、实现卓越”的价值观，致力于与化学、生物医药、精细化工、食品工业、现代农业、电子、日化、\r\n石化、纺织、生命科学、环境保护、疾病控制、新能源、新材料、航空航天等领域的客户建立互信、长久的合作关系，\r\n为实现“促进科技与工业发展，造福人类”的使命而不懈努力！\r\n</p>\r\n`\r\n\r\nexport class About extends React.Component {\r\n    render() {\r\n        let right = null;\r\n        return <Page header=\"关于百灵威\" right={right}>\r\n            <div className='bg-white p-3'>\r\n                <img className=\"h-3c position-absolute\" src={logo} alt=\"百灵威\" />\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <span className=\"text-primary mr-3\">百灵威集团</span>\r\n                </div>\r\n                <div className=\"mt-5\" dangerouslySetInnerHTML={{ __html: marked(content) }} />\r\n            </div>\r\n        </Page>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { Page } from 'tonva';\r\n\r\ninterface Phone {\r\n\tnumber: string;\r\n\tcaption: string;\r\n}\r\n\r\ninterface Section {\r\n\tcaption: string;\r\n\taddress: string;\r\n\tpost?: string;\r\n\tphones: Phone[];\r\n\tfax?: string;\r\n\temail: string[];\r\n}\r\n\r\nconst sections: Section[] = [\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd.',\r\n\t\taddress: '北京市朝阳区北辰西路69号峻峰华亭A座5层',\r\n\t\tpost: '100029',\r\n\t\tphones: [\r\n\t\t\t{ number: '4006667788', caption: '400-666-7788' },\r\n\t\t\t{ number: '+861082848833', caption: '+86 10 8284 8833' },\r\n\t\t],\r\n\t\tfax: '+86 10 8284 9933',\r\n\t\temail: ['jkinfo@jkchemical.com', 'jkinfo@jk-sci.com'],\r\n\t},\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (上海)',\r\n\t\taddress: '上海市浦东区世纪大道1777号东方希望大厦10楼H座',\r\n\t\tpost: '200122',\r\n\t\tphones: [{ number: '+862161638833', caption: '+86 21 6163 8833' }],\r\n\t\tfax: '+86 21 6163 8800',\r\n\t\temail: ['jksh@jkchemical.com', 'jksh@jk-sci.com']\r\n\t},\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (广东)',\r\n\t\taddress: '广东省广州市天河区珠江新城华夏路28号富力盈信大厦3108室',\r\n\t\tpost: '510623',\r\n\t\tphones: [{ number: '+862038889733', caption: '+86 20 3888 9733' }],\r\n\t\tfax: '+86 20 3888 8285',\r\n\t\temail: ['jkgz@jkchemical.com', 'jkgz@jk-sci.com'],\r\n\t},\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (成都)',\r\n\t\taddress: '四川省成都市高新区科园南路1号1栋8楼803号',\r\n\t\tpost: '610041',\r\n\t\tphones: [{ number: '+8602883231067', caption: '+86 028 83231067' }],\r\n\t\temail: ['jkinfo@jkchemical.com'],\r\n\t},\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (香港)',\r\n\t\taddress: 'FLAT/RM 1901, 19/F, Lee Garden One,33 Hysan Avenue, Causeway Bay, Hong Kong',\r\n\t\tphones: [{ number: '+85228105022', caption: '+852 2810 5022' }],\r\n\t\tfax: '+852 2810 5033',\r\n\t\temail: ['jkhk@jkchemical.com'],\r\n\t}\r\n];\r\n\r\nconst Row: React.FunctionComponent<any> = ({ label, content }) => {\r\n\tif (!content) return null;\r\n\treturn <div className=\"my-1\">\r\n\t\t<span className=\"small text-muted\">{label}</span>：{content}\r\n\t</div>;\r\n}\r\n\r\nexport class ContactUs extends React.Component {\r\n\trender() {\r\n\t\tlet right = null;\r\n\t\treturn <Page header=\"联系信息\" right={right}>\r\n\t\t\t<div className='bg-white pb-5'>\r\n\t\t\t\t<div className=\"h4 pb-3 border-bottom border-muted text-center p-3 mb-3\">\r\n\t\t\t\t\t<span className=\"text-primary mr-\">联系我们</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"px-3 my-3\">\r\n\t\t\t\t\t<small className=\"text-muted\">全国客服热线：</small><a href=\"tel:4006667788\">400-666-7788</a>\r\n\t\t\t\t\t<span className=\"ml-4\"><small className=\"text-muted\">QQ：</small>4006667788</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t{sections.map((v, index) => {\r\n\t\t\t\t\tlet { caption, address, post, phones, fax, email } = v;\r\n\t\t\t\t\treturn <div key={index} className=\"my-4\">\r\n\t\t\t\t\t\t<div className=\"h5 text-info border-bottom p-3\">{caption}</div>\r\n\t\t\t\t\t\t<div className=\"px-3\">\r\n\t\t\t\t\t\t\t<Row label=\"地址\" content={address} />\r\n\t\t\t\t\t\t\t<Row label=\"邮编\" content={post} />\r\n\t\t\t\t\t\t\t<Row label=\"电话\" content={\r\n\t\t\t\t\t\t\t\tphones && phones.map((phone, phoneIndex) => {\r\n\t\t\t\t\t\t\t\t\tlet { number, caption } = phone;\r\n\t\t\t\t\t\t\t\t\treturn <a key={phoneIndex} className=\"mr-5\" href={'tel:' + number}>{caption}</a>\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Row label=\"传真\" content={fax} />\r\n\t\t\t\t\t\t\t<Row label=\"电子邮件\" content={\r\n\t\t\t\t\t\t\t\temail && email.map((e, eIndex) => {\r\n\t\t\t\t\t\t\t\t\treturn <a key={eIndex} className=\"mr-5\" href={'mailto:' + e}>{e}</a>\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</Page >;\r\n\t}\r\n}\r\n/*\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.</p>\r\n<div className=\"small\">\r\n\t<p>地址：北京市朝阳区北辰西路69号峻峰华亭A座5层</p>\r\n\t<p>邮编：100029</p>\r\n\t<p>电话：<a href=\"tel:4006667788\">400-666-7788</a> / <a href=\"tel:861082848833\">+86 10 8284 8833</a></p>\r\n\t<p>传真：+86 10 8284 9933</p>\r\n\t<p>电子邮件：<a href=\"mailto:jkinfo@jkchemical.com\">jkinfo@jkchemical.com</a><a className=\"ml-3\" href=\"mailto:jkinfo@jk-sci.com\">jkinfo@jk-sci.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(上海)</p>\r\n<div className=\"small\">\r\n\t<p>地址：上海市浦东区世纪大道1777号东方希望大厦10楼H座</p>\r\n\t<p>邮编：200122</p>\r\n\t<p>电话：<a href=\"tel:+862161638833\">+86 21 6163 8833</a></p>\r\n\t<p>传真：+86 21 6163 8800</p>\r\n\t<p>电子邮件：<a href=\"mailto:jksh@jkchemical.com\">jksh@jkchemical.com</a><a className=\"ml-3\" href=\"mailto:jksh@jk-sci.com\">jksh@jk-sci.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(广东)</p>\r\n<div className=\"small\">\r\n\t<p>地址：广东省广州市天河区珠江新城华夏路28号富力盈信大厦3108室</p>\r\n\t<p>邮编：510623</p>\r\n\t<p>电话：<a href=\"tel:+862038889733\">+86 20 3888 9733</a></p>\r\n\t<p>传真：+86 20 3888 8285</p>\r\n\t<p>电子邮件：<a href=\"mailto:jkgz@jkchemical.com\">jkgz@jkchemical.com</a><a className=\"ml-3\" href=\"mailto:jkgz@jk-sci.com\">jkgz@jk-sci.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(成都)</p>\r\n<div className=\"small\">\r\n\t<p>地址：四川省成都市高新区科园南路1号1栋8楼803号</p>\r\n\t<p>邮编：610041</p>\r\n\t<p>电话：<a href=\"tel:+8602883231067\">+86 028 83231067</a></p>\r\n\t<p>电子邮件：<a href=\"mailto:jkinfo@jkchemical.com\">jkinfo@jkchemical.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(香港)</p>\r\n<div className=\"small\">\r\n\t<p>地址：FLAT/RM 1901, 19/F, Lee Garden One,33 Hysan Avenue, Causeway Bay, Hong Kong</p>\r\n\t<p>电话：<a href=\"tel:+85228105022\">+852 2810 5022</a></p>\r\n\t<p>传真：+852 2810 5033</p>\r\n\t<p>电子邮件：<a href=\"mailto:jkhk@jkchemical.com\">jkhk@jkchemical.com</a></p>\r\n</div>\r\n</div>\r\n*/","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport {\r\n    userApi, ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page,\r\n    Edit, UiSchema,\r\n    VPage, UiRadio, IdSchema, UiIdItem, Context, BoxId, tv\r\n} from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport {\r\n    faxValidation, emailValidation, mobileValidation, telephoneValidation,\r\n    addressDetailValidation, zipCodeValidation,\r\n    organizationNameValidation, departmentNameValidation,\r\n    salutationValidation, nameValidation\r\n} from '../tools/inputValidations';\r\n\r\nexport class EditMeInfo extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            nick: { widget: 'text', label: '别名', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n        }\r\n    }\r\n    @observable private data: any;\r\n\r\n    @observable private webUserData: any;\r\n\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone\r\n            , mobile, email, fax, zipCode, address, addressString } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName,\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            address: address,\r\n            addressString: addressString,\r\n            zipCode: zipCode,\r\n        }\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        (nav.user as any)[name] = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        let { schema, uiSchema, data, onItemChanged, webUserData, onWebUserChanged, webUserContactData, onWebUserContactChanged, controller } = this;\r\n        return <Page header=\"个人信息\">\r\n            <Edit schema={schema} uiSchema={uiSchema}\r\n                data={data}\r\n                onItemChanged={onItemChanged} />\r\n            <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                data={webUserData}\r\n                onItemChanged={onWebUserChanged} />\r\n            <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema(controller.pickAddress)}\r\n                data={webUserContactData}\r\n                onItemChanged={onWebUserContactChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport const webUserSchema: ItemSchema[] = [\r\n    { name: 'firstName', type: 'string', required: true } as StringSchema,\r\n    { name: 'gender', type: 'string' } as StringSchema,\r\n    { name: 'salutation', type: 'string' } as StringSchema,\r\n    { name: 'organizationName', type: 'string', required: true } as StringSchema,\r\n    { name: 'departmentName', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport const webUserUiSchema: UiSchema = {\r\n    items: {\r\n        firstName: {\r\n            widget: 'text', label: '真实姓名',\r\n            placeholder: '真实姓名',\r\n            rules: nameValidation\r\n        } as UiTextItem,\r\n        gender: { widget: 'radio', label: '性别', list: [{ value: '1', title: '男' }, { value: '0', title: '女' }] } as UiRadio,\r\n        salutation: { widget: 'text', label: '称谓', rules: salutationValidation } as UiTextItem,\r\n        organizationName: { widget: 'text', label: '单位名称', placeholder: '单位名称', rules: organizationNameValidation } as UiTextItem,\r\n        departmentName: { widget: 'text', label: '部门名称', placeholder: '部门名称', rules: departmentNameValidation } as UiTextItem,\r\n    }\r\n}\r\n\r\n// 个人联系方式信息\r\nexport const webUserContactSchema: ItemSchema[] = [\r\n    { name: 'telephone', type: 'string' } as StringSchema,\r\n    { name: 'mobile', type: 'string', required: true } as StringSchema,\r\n    { name: 'email', type: 'string' } as StringSchema,\r\n    { name: 'fax', type: 'string', required: false } as StringSchema,\r\n    { name: 'address', type: 'id', required: false } as IdSchema,\r\n    { name: 'addressString', type: 'string', required: false } as StringSchema,\r\n    { name: 'zipCode', type: 'string', required: false } as StringSchema,\r\n];\r\n\r\nexport function webUserContactUiSchema(pickAddress: any) {\r\n    return {\r\n        items: {\r\n            telephone: { widget: 'text', label: '固定电话', placeholder: '固定电话', rules: telephoneValidation } as UiTextItem,\r\n            mobile: { widget: 'text', label: '手机号', placeholder: '手机号', rules: mobileValidation } as UiTextItem,\r\n            email: { widget: 'text', label: 'Email', rules: emailValidation, placeholder: 'Email' } as UiTextItem,\r\n            fax: { widget: 'text', label: '传真', placeholder: '传真', rules: faxValidation } as UiTextItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区', placeholder: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    if (!address) return <small className=\"text-muted\">(无)</small>;\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <>\r\n                            {country !== undefined && country.id !== undefined && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province !== undefined && province.id !== undefined && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city !== undefined && city.id !== undefined && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county !== undefined && county.id !== undefined && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', placeholder: '详细地址', rules: addressDetailValidation } as UiTextItem,\r\n            zipCode: { widget: 'text', label: '邮编', placeholder: '邮编', rules: zipCodeValidation } as UiTextItem,\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport logo from '../images/logo.png';\r\n\r\nexport const jnkTop = <div className=\"d-flex align-items-center position-relative\">\r\n    <img className=\"h-3c position-absolute\" src={logo} alt=\"百灵威\" />\r\n    <div className=\"h3 flex-fill text-center\">\r\n        <span className=\"text-primary mr-3\">百灵威</span>\r\n    </div>\r\n</div>;\r\n","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\n\r\nexport const tvAddress = (values: any) => {\r\n    let { country, province, city, county } = values;\r\n    return <>\r\n        {tv(country)}{tv(province, undefined, undefined, () => <></>)}{tv(city, undefined, undefined, () => <></>)}{tv(county, undefined, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nexport const tvCountry = (values: any) => {\r\n    return <> {values.chineseName} </>;\r\n}\r\n\r\nexport const tvCurrency = (values: any) => {\r\n    return <> {values.name} </>;\r\n}\r\n\r\nexport const common = {\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    currency: tvCurrency,\r\n};\r\n","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nexport const tvProduct = (values: any) => {\r\n    let product = values;\r\n    let { brand, description, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"row d-flex\">\r\n        <div className=\"col-12\">\r\n            <div className=\"row py-2\">\r\n                <div className=\"col-12\"><strong>{description}</strong></div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {item('CAS', CAS)}\r\n                        {item('纯度', purity)}\r\n                        {item('分子式', molecularFomula)}\r\n                        {item('分子量', molecularWeight)}\r\n                        {item('产品编号', origin)}\r\n                        {tv(brand, (values: any) => <>{item(\"品牌\", values.name)}</>)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst tvPackx = (values: any) => {\r\n    let { radiox, radioy, unit } = values;\r\n    if (radiox !== 1) return <>{radiox} * {radioy}{unit}</>;\r\n    return <>{radioy}{unit}</>;\r\n}\r\n\r\nfunction item(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 text-muted pr-0\">{caption}:</div>\r\n        <div className=\"col-8\">{value}</div>\r\n    </>;\r\n}\r\n\r\nconst tvProductCategory = (values: any) => {\r\n    let { children } = values;\r\n    return <>\r\n        aaa\r\n    </>\r\n};\r\n\r\nexport const product = {\r\n    productx: tvProduct,\r\n    packx: tvPackx,\r\n    productCategory: tvProductCategory,\r\n}\r\n","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\nimport { tvAddress, tvCountry } from './common';\r\n\r\nexport const tvContact = (values: any) => {\r\n    let { name, mobile, organizationName, address, addressString } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        <b>\r\n            {name}\r\n        </b>\r\n        &nbsp; {mobile} &nbsp; {organizationName}<br />\r\n        <small>{tv(address)} {addressString}</small>\r\n    </div>\r\n}\r\n\r\nexport const tvInvoiceType = (values: any) => {\r\n    let { id, description } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        {description}\r\n    </div>\r\n}\r\n\r\nexport const tvInvoiceInfo = (values: any) => {\r\n    let { title, taxNo } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        <b>\r\n            {title}\r\n        </b>\r\n        &nbsp; {taxNo}\r\n    </div>\r\n}\r\n\r\nexport const customer = {\r\n    contact: tvContact,\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    invoiceInfo: tvInvoiceInfo,\r\n    invoiceType: tvInvoiceType\r\n}\r\n","import { AppConfig } from \"tonva\";\r\nimport { jnkTop } from \"./me/loginTop\";\r\nimport { tvs } from \"./tvs\";\r\nimport { GLOABLE } from \"cartenv\";\r\n\r\nexport { CApp } from './CApp';\r\n\r\nexport const appConfig: AppConfig = {\r\n    appName: '百灵威系统工程部/cart',\r\n    version: '1.1.125',\r\n    tvs: tvs,\r\n    loginTop: jnkTop,\r\n    oem: '百灵威',\r\n    privacy: GLOABLE.PIRVACYURL\r\n};","import { TVs } from \"tonva\";\r\nimport { common } from \"./common\";\r\nimport { warehouse } from \"./warehouse\";\r\nimport { product } from \"./product\";\r\nimport { order } from \"./order\";\r\nimport { customer } from './customer';\r\n\r\nexport const tvs:TVs = {\r\n    common: common,\r\n    warehouse: warehouse,\r\n    product: product,\r\n    order: order,\r\n    customer: customer,\r\n}","import * as React from 'react';\r\n\r\nconst tvWarehouse = (values: any) => {\r\n    let { name } = values;\r\n    return <div>\r\n        {name}\r\n    </div>\r\n}\r\n\r\nexport const warehouse = {\r\n    warehouse: tvWarehouse,\r\n}\r\n","import { tvProduct } from \"./product\";\r\nimport { tvAddress, tvCountry, tvCurrency } from \"./common\";\r\nimport { tvContact } from \"./customer\";\r\n\r\nexport const order = {\r\n    productx: tvProduct,\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    contact: tvContact,\r\n    currency: tvCurrency,\r\n}\r\n","import * as React from 'react';\r\nimport { Page, VPage, nav } from 'tonva';\r\nimport logo from '../images/logo.png';\r\nimport { appConfig } from 'configuration';\r\nimport { CMe } from './CMe';\r\nimport moment from 'moment';\r\n\r\nexport class AboutThisApp extends VPage<CMe>{\r\n\r\n    private version: any;\r\n    async open() {\r\n        this.version = await nav.checkVersion();\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = () => {\r\n        let right = null;\r\n        let yearN = moment().format(\"YYYY\");\r\n        let links: any = <div className=\"sep-product-select\" style={{ width: \"80%\", margin: \" 0 auto 0 auto\" }} />\r\n        let footer = <div className=\"small text-center text-muted py-3\" style={{background:\"#f6f6f6\"}}>\r\n            Copyright&copy;2018-{yearN} <br/>\r\n            百灵威jkchemical.com 版权所有\r\n        </div>\r\n        return <Page header=\"关于百灵威购物APP\" right={right} footer={footer}>\r\n            <div className='bg-white p-3'>\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <img src={logo} />\r\n                </div>\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <span className=\"text-primary mr-3\">百灵威购物APP</span>\r\n                </div>\r\n                <div className=\"h3 flex-fill text-center small\">\r\n                    <span className=\"text-muted mr-3\">V{appConfig.version}</span>\r\n                </div>\r\n\r\n                {\r\n                    (this.version && this.version !== appConfig.version) && <>\r\n                        {links}\r\n                        < div className=\"d-flex my-3 cursor-pointer\" style={{ width: \"70%\", margin: \" 0 auto 0 auto\" }} onClick={() => nav.resetAll()} >\r\n                            <div className=\"text-danger\">发现新版本 V{this.version}，升级APP</div>\r\n                        </div>\r\n                        {links}\r\n                    </>\r\n                }\r\n            </div>\r\n        </Page>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { nav, User, Page, Image, VPage } from 'tonva';\r\nimport { Prop, Media, IconText, FA, PropGrid, LMR } from 'tonva';\r\nimport { About } from './about';\r\nimport { ContactUs } from './contactUs';\r\nimport { observer } from 'mobx-react';\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\nimport { AboutThisApp } from './aboutThisApp';\r\nimport { appConfig } from 'configuration';\r\n\r\nexport class VMe extends VPage<CMe> {\r\n\r\n    async open(param?: any) {\r\n\r\n    }\r\n\r\n    private exit() {\r\n        nav.showLogout();\r\n    }\r\n\r\n    private about = () => nav.push(<About />);\r\n    private contactUs = () => nav.push(<ContactUs />);\r\n    private privacy = () => {\r\n        this.controller.openPrivacy();\r\n    }\r\n    private aboutThisApp = () => {\r\n        // nav.push(<AboutThisApp />);\r\n        this.openVPage(AboutThisApp)\r\n    }\r\n\r\n    private changePassword = async () => {\r\n        await nav.changePassword();\r\n    }\r\n\r\n    private openContactList = async () => {\r\n        this.controller.openContactList();\r\n    }\r\n\r\n    private openInvoice = async () => {\r\n        this.controller.openInvoice();\r\n    }\r\n\r\n    private openMyPoint = async () => {\r\n        this.controller.openMyPoint();\r\n    }\r\n\r\n    private openCouponManage = async () => {\r\n        this.controller.openCouponManage();\r\n    }\r\n\r\n    private openFavorites = async () => {\r\n        this.controller.openFavorites();\r\n    }\r\n\r\n    private meInfo = observer(() => {\r\n        let { user } = nav;\r\n        if (user === undefined) return null;\r\n        let { id, name, nick, icon } = user;\r\n        return <LMR className=\"px-3 py-2 cursor-pointer w-100 bg-primary text-white\"\r\n            left={<Image className=\"w-3c h-3c mr-3\" src={icon} />}\r\n            right={<FA className=\"align-self-end\" name=\"angle-right\" />}\r\n            onClick={() => {\r\n                this.openVPage(EditMeInfo);\r\n            }}>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-light\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </LMR>;\r\n    });\r\n\r\n    private orderStates = () => {\r\n        let { openMyOrders } = this.controller;\r\n        let oss = [\r\n            { caption: '待审核', state: 'processing', icon: 'desktop' },\r\n            { caption: '待发货', state: 'completed', icon: 'truck' },\r\n            { caption: '所有订单', state: 'all', icon: 'file-text-o' },\r\n        ];\r\n\r\n        return <div className=\"d-flex justify-content-around w-100 my-3\">\r\n            {\r\n                oss.map(((os, index) => {\r\n                    let { caption, state, icon } = os;\r\n                    return <div key={index} className=\"flex-fill d-flex flex-column align-items-center cursor-pointer\"\r\n                        onClick={() => openMyOrders(state)}>\r\n                        <FA name={icon} className=\"text-info fa-2x\" />\r\n                        <small>{caption}</small>\r\n                    </div>;\r\n                }))\r\n            }\r\n        </div>\r\n    };\r\n\r\n    render() {\r\n        return <this.page />;\r\n    }\r\n    content() {\r\n        return <this.page />;\r\n    }\r\n    header() {\r\n        return <this.meInfo />;\r\n    }\r\n\r\n    private page = observer(() => {\r\n        const { user } = nav;\r\n        let aboutRows: Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"phone\" text=\"联系我们\" />,\r\n                onClick: this.contactUs\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于百灵威\" />,\r\n                onClick: this.about\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"隐私政策\" />,\r\n                onClick: this.privacy\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <div className=\"w-100 d-flex justify-content-between\" onClick={this.aboutThisApp}>\r\n                    <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于本APP\" />\r\n                    <div className=\"py-2 small\">V{appConfig.version}</div>\r\n                </div>,\r\n            },\r\n            ''\r\n        ];\r\n\r\n        let rows: Prop[];\r\n        if (user === undefined) {\r\n            let { showLogin } = this.controller;\r\n            rows = aboutRows;\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    component: <button className=\"btn btn-success w-100 my-2\" onClick={() => showLogin()}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                    </button>\r\n                },\r\n            );\r\n        }\r\n        else {\r\n            let logOutRows: Prop[] = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    bk: '',\r\n                    component: <div className=\"text-center flex-fill\"><button className=\"btn btn-danger w-75\" onClick={this.exit}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 退出登录\r\n\t\t\t\t\t\t</button>\r\n                    </div>\r\n                },\r\n            ];\r\n\r\n            rows = [\r\n\t\t\t\t/*\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.meInfo />\r\n\t\t\t\t},\r\n\t\t\t\t*/\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <>{this.orderStates()}</>,\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"地址管理\" />,\r\n                    onClick: this.openContactList\r\n                },\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"发票管理\" />,\r\n                    onClick: this.openInvoice\r\n                },\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"积分管理\" />,\r\n                    onClick: this.openMyPoint\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"connectdevelop\" text=\"卡券管理\" />,\r\n                    onClick: this.openCouponManage\r\n                },\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"heart\" text=\"商品收藏\" />,\r\n                    onClick: this.openFavorites\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text=\"修改密码\" />,\r\n                    onClick: this.changePassword\r\n                },\r\n            ]\r\n            rows.push(...aboutRows, ...logOutRows);\r\n        }\r\n        return <PropGrid rows={rows} values={{}} />;\r\n    })\r\n}\r\n\r\nexport function userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { observable } from 'mobx';\r\nimport { ItemSchema, Page, VPage, FA, Form, Context } from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport { webUserSchema, webUserUiSchema, webUserContactSchema, webUserContactUiSchema } from './EditMeInfo';\r\nimport { observer } from 'mobx-react';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\ninterface Options {\r\n    onlyRequired: boolean;\r\n    caption: string;\r\n    note: string;\r\n    actionButton: {\r\n        value: string;\r\n        action: any;\r\n    }\r\n}\r\n\r\nexport class EditMeInfoFirstOrder extends VPage<CMe>{\r\n    private options: Options;\r\n    @observable tips: JSX.Element;\r\n    private form: Form;\r\n\r\n    async open(param: any) {\r\n        // this.onlyRequired = param;\r\n        this.options = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    @observable private webUserData: any;\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone\r\n            , mobile, email, fax, address, addressString, zipCode } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            address: address,\r\n            addressString: addressString,\r\n            zipCode: zipCode\r\n        }\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { data } = context.form;\r\n        _.merge(this.webUserData, data);\r\n        _.merge(this.webUserContactData, data);\r\n        await this.controller.changeWebUser(this.webUserData);\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n\r\n        let { currentUser } = this.controller.cApp;\r\n        if (currentUser.allowOrdering) {\r\n            this.closePage();\r\n            let webUserContacts = await currentUser.getContacts();\r\n            if (webUserContacts === undefined || webUserContacts.length === 0) {\r\n                await currentUser.addContactFromAccount();\r\n            }\r\n            await this.options.actionButton.action();\r\n        } else {\r\n            this.tips = <>以上带有 <span className='text-danger'>*</span> 的内容均须填写！</>;\r\n            setTimeout(() => {\r\n                this.tips = undefined;\r\n            }, GLOABLE.TIPDISPLAYTIME);\r\n        }\r\n    }\r\n\r\n\r\n    private onCompleted = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n\r\n        let { onlyRequired, caption, note, actionButton } = this.options;\r\n        let schemaFilter = (itemSchema: ItemSchema): boolean => {\r\n            return (onlyRequired === true && itemSchema.required === true)\r\n                || onlyRequired === undefined\r\n                || onlyRequired === false\r\n        }\r\n\r\n        let schemaArr = [];\r\n        for (let item of webUserSchema) {\r\n            if (item.required === true) schemaArr.push(item);\r\n        }\r\n        for (let item of webUserContactSchema) {\r\n            if (item.required === true) schemaArr.push(item);\r\n        }\r\n        if (onlyRequired !== true) {\r\n            for (let item of webUserSchema) {\r\n                if (item.required !== true) schemaArr.push(item);\r\n            }\r\n            for (let item of webUserContactSchema) {\r\n                if (item.required !== true) schemaArr.push(item);\r\n            }\r\n        }\r\n        let uiSchema = {};\r\n        _.merge(uiSchema, webUserUiSchema, webUserContactUiSchema(this.controller.pickAddress));\r\n\r\n        let data = _.merge(this.webUserData, this.webUserContactData);\r\n        let { value } = actionButton;\r\n        return <Page header={caption}>\r\n            <div className=\"alert alert-light my-3 py-4\" role=\"alert\">\r\n                <FA name=\"smile-o\" className=\"text-warning mr-4 my-1\" size=\"2x\" />\r\n                {note}\r\n            </div>\r\n\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schemaArr.filter(schemaFilter)}\r\n                    uiSchema={uiSchema}\r\n                    formData={data}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n\r\n            <div className=\"p-3 bg-white\">\r\n                {tipsUI}\r\n                <button type=\"button\" className=\"btn btn-primary w-100\" onClick={() => this.onCompleted()}>{value}</button>\r\n            </div>\r\n        </Page >;\r\n    });\r\n}\r\n/*\r\n<Edit schema={schemaArr.filter(schemaFilter)} uiSchema={uiSchema}\r\n    data={data}\r\n    onItemChanged={this.onMergeDataChanged} />\r\n\r\n    private onMergeDataChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n*/","import * as React from 'react';\r\nimport { VPage, Page, BoxId, List, Scroller } from 'tonva';\r\nimport { CFavorites } from './CFavorites';\r\n\r\nexport class VFavorites extends VPage<CFavorites> {\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n    private onScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        let { productsFavorites } = this.controller;\r\n        productsFavorites.more();\r\n    }\r\n    private onProductClick = async (product: BoxId) => {\r\n        let { cProduct } = this.controller.cApp;\r\n        await cProduct.showProductDetail(product.id);\r\n    }\r\n\r\n    private renderProduct = (p: any) => {\r\n        // console.log(p);\r\n        return this.controller.cApp.cProduct.renderProduct(p);\r\n    }\r\n\r\n    private page = (param: any) => {\r\n        let { productsFavorites, cApp } = this.controller;\r\n        let { cProduct } = cApp;\r\n        let none = <div className=\"p-3 text-warning mt-4 d-flex justify-content-center\">『 无任何收藏产品 』</div>\r\n        return <Page header=\"商品收藏\" onScrollBottom={this.onScrollBottom}>\r\n            <List before={''} none={none} items={productsFavorites} item={{ render: this.renderProduct, onClick: this.onProductClick }} />\r\n        </Page>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, FA, BoxId, nav } from 'tonva';\r\nimport { CProduct } from '../product/CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VProductFavorateLabel extends View<CProduct> {\r\n\r\n    @observable private isProductFarirates: boolean = false;\r\n    private favoriteOrCancel = async (product: number) => {\r\n        let { cApp } = this.controller;\r\n        let { cFavorites, currentUser, cMe } = cApp;\r\n        const { user } = nav;\r\n        if (user !== undefined) {\r\n            if (this.isProductFarirates)\r\n                await cFavorites.delProductFavorites(product);\r\n            else\r\n                await cFavorites.addProductFavorites(product);\r\n            await this.initInventoryAllocation(product);\r\n        } else {\r\n\r\n            cMe.showLogin();\r\n        }\r\n    }\r\n\r\n    private isMyFarirates = async (id: number) => {\r\n        let { cFavorites } = this.controller.cApp;\r\n        // let customerFavoritesProducts = await cFavorites.getMyFavorites();\r\n        // return customerFavoritesProducts.some((el: any) => el.product.id === id);\r\n        return await cFavorites.getProductIsFavorites(id);\r\n    }\r\n\r\n    private initInventoryAllocation = async (id: number) => {\r\n        let { currentUser } = this.controller.cApp;\r\n        if (currentUser)\r\n            this.isProductFarirates = await this.isMyFarirates(id);\r\n    }\r\n\r\n    render(param: BoxId): JSX.Element {\r\n        return <this.content productId={param} />;\r\n    }\r\n\r\n    private content = observer((param: any): any => {\r\n\r\n        let favirateLabelUI;\r\n        let { productId } = param;\r\n        let { currentUser } = this.controller.cApp;\r\n        if (currentUser)\r\n            this.initInventoryAllocation(productId);\r\n\r\n        favirateLabelUI = <div className=\"d-flex justify-content-end\">\r\n            <small onClick={(e) => { e.stopPropagation(); this.favoriteOrCancel(productId) }} style={{ zIndex: 9 }}>\r\n                <FA className=\"mr-3 text-danger\" name={`${this.isProductFarirates ? \"heart\" : 'heart-o'}`} size=\"lg\" />\r\n            </small>\r\n        </div>\r\n        return favirateLabelUI;\r\n    });\r\n}\r\n","import { VFavorites } from './VFavorites';\r\nimport { CUqBase } from '../CBase';\r\nimport { QueryPager, BoxId } from 'tonva';\r\nimport moment from 'moment';\r\nimport { VProductFavorateLabel } from './VProductFavorateLabel';\r\n\r\nexport class CFavorites extends CUqBase {\r\n    productsFavorites: QueryPager<any>;\r\n    myFavorites: any[] = [];\r\n    protected async internalStart() {\r\n        await this.searchByFavorites();\r\n        this.openVPage(VFavorites);\r\n    }\r\n\r\n    async searchByFavorites() {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        this.productsFavorites = new QueryPager<any>(this.uqs.webuser.getMyFavirates, 10, 10);\r\n        await this.productsFavorites.first({ webUser: currentUser, salesRegion: currentSalesRegion });\r\n    }\r\n\r\n    /*\r\n    async getMyFavorites() {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        let myFavorites = await this.uqs.webuser.myFavorites.query({ webUser: currentUser, salesRegion: currentSalesRegion });\r\n        return myFavorites.ret;\r\n    }\r\n    */\r\n\r\n    async getProductIsFavorites(product: number) {\r\n        let { currentUser } = this.cApp;\r\n        let myFavorites = await this.uqs.webuser.myFavorites.obj({ webUser: currentUser, product: product });\r\n        return myFavorites !== undefined;\r\n    }\r\n\r\n    async addProductFavorites(productId: number) {\r\n        let { currentUser } = this.cApp;\r\n        let createDate = moment().format('YYYY-MM-DD HH:mm:ss');\r\n        await this.uqs.webuser.myFavorites.add({ webUser: currentUser, product: productId, arr1: [{ pack: 0, date: createDate }] });\r\n    }\r\n\r\n    async delProductFavorites(productId: number) {\r\n        let { currentUser } = this.cApp;\r\n        await this.uqs.webuser.myFavorites.del({ webUser: currentUser, product: productId, arr1: [{ pack: 0 }] });\r\n    }\r\n\r\n    renderFavoritesLabel = (productid: number) => {\r\n        let { currentUser } = this.cApp;\r\n        // let myFavorite = await this.uqs.webuser.myFavorites.obj({ webUser: currentUser, product: productid });\r\n        return this.renderView(VProductFavorateLabel, productid)\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav, LMR, Image, FA } from 'tonva';\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\n\r\nexport class VLoginState extends View<CMe> {\r\n\r\n    render() {\r\n        let { user } = nav;\r\n        if (!user) {\r\n            return <div className=\"d-flex align-items-center justify-content-end small text-muted\">\r\n                <a className=\"px-2\" href=\"./shop?type=signUp\">注册</a>\r\n                <a className=\"px-2\" href=\"./shop?type=login\">登录</a>\r\n                {this.controller.renderCarLabel()}\r\n            </div>\r\n        }\r\n        let { id, name, nick, icon } = user;\r\n        return <div className=\"d-flex align-items-center justify-content-end\">\r\n            <div>\r\n                {<Image className=\"w-3c h-3c mr-3\" src={icon} />}\r\n            </div>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-muted\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </div >;\r\n    }\r\n}\r\n\r\nexport function userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav, LMR, Image, FA } from 'tonva';\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\n\r\nexport class VLoginState_Web extends View<CMe> {\r\n\r\n    render() {\r\n        let { user } = nav;\r\n        if (!user) {\r\n            /*\r\n            return <>\r\n                <a className=\"nav-link header-login\">\r\n                    注册/登录\r\n                </a>\r\n                {this.controller.renderCarLabel_Web()}\r\n            </>\r\n            */\r\n            return <div className=\"d-flex align-items-center justify-content-end small text-muted\">\r\n                <a className=\"px-2\" href=\"./shop?type=signUp\" target=\"_self\">注册</a>\r\n                <a className=\"px-2\" href=\"./shop?type=login\" target=\"_self\">登录</a>\r\n                {this.controller.renderCarLabel_Web()}\r\n            </div>\r\n        }\r\n        let { id, name, nick, icon } = user;\r\n        return <div className=\"d-flex align-items-center justify-content-end small text-muted\">\r\n            <a className=\"px-2\" href=\"./shop?type=me\" target=\"_self\">{name}</a>\r\n            <a className=\"px-2\" href=\"./shop?type=loginOut\" target=\"_self\">退出</a>\r\n            {this.controller.renderCarLabel_Web()}\r\n        </div>;\r\n    }\r\n}\r\n\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { Context, nav, VPage, User } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VMe } from './VMe';\r\nimport { CSelectShippingContact } from '../customer/CSelectContact';\r\nimport { EditMeInfoFirstOrder } from './EditMeInfoFirstOrder';\r\nimport { CInvoiceInfo } from '../customer/CInvoiceInfo';\r\nimport { CAddress } from '../customer/CAddress';\r\nimport { CFavorites } from '../customer/CFavorites';\r\nimport { CPointProduct } from 'pointMarket/CPointProduct';\r\nimport { VLoginState } from './VLoginState';\r\nimport { VLoginState_Web } from './VLoginState_Web';\r\n\r\nexport class CMe extends CUqBase {\r\n    //    cApp: CApp;\r\n    protected async internalStart(param?: any) {\r\n    }\r\n\r\n    async changeWebUser(webUser: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUser(webUser);\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUserContact(webUserContact);\r\n    }\r\n\r\n    tab = () => this.renderView(VMe);\r\n    tabPage: VMe = new VMe(this);\r\n\r\n    openMyOrders = async (state: string) => {\r\n        let { cOrder } = this.cApp;\r\n        await cOrder.openMyOrders(state);\r\n    }\r\n\r\n    openContactList = async () => {\r\n        let contactList = this.newC(CSelectShippingContact); // new CSelectShippingContact(this.cApp, undefined, false);\r\n        await contactList.start(false);\r\n    }\r\n\r\n    openInvoice = async () => {\r\n        let cInvoiceInfo = this.newC(CInvoiceInfo); // new CInvoiceInfo(this.cApp, undefined, false);\r\n        let { currentUser } = this.cApp;\r\n        let defaultSetting = await currentUser.getSetting();\r\n\r\n        let origInvoice = _.pick(defaultSetting, ['invoiceType', 'invoiceInfo']);\r\n        cInvoiceInfo.start(origInvoice);\r\n    }\r\n\r\n    openMyPoint = async () => {\r\n        /* let cPointProduct = this.newC(CPointProduct);// new CSelectShippingContact(this.cApp, undefined, false);\r\n        await cPointProduct.start(); */\r\n        await this.cApp.cPointProduct.openMyPoint();\r\n    }\r\n    /**\r\n     * 卡券管理\r\n     */\r\n    openCouponManage = async () => {\r\n        let { cCoupon } = this.cApp;\r\n        await cCoupon.openMyCouponManage();\r\n        // let cCouponManage = this.newC(CCouponManage);\r\n        // await cCouponManage.start();\r\n    }\r\n\r\n    /**\r\n     * 商品收藏\r\n     */\r\n    openFavorites = async () => {\r\n        let cMyFavorites = this.newC(CFavorites);\r\n        await cMyFavorites.start();\r\n    }\r\n\r\n    toPersonalAccountInfo = async (fn: Function) => {\r\n        await this.openMeInfoFirstOrder({\r\n            onlyRequired: false,\r\n            caption: \"请补充账户信息\",\r\n            note: <>\r\n                化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。\r\n                为此，需要您重新提供非虚拟的、可核查的信息。这些信息包括下面所有带有 <span className=\"text-danger\">*</span> 的信息。\r\n            </>,\r\n            actionButton: {\r\n                value: \"下一步\",\r\n                action: fn\r\n            }\r\n        });\r\n    }\r\n\r\n    openMeInfoFirstOrder = async (options?: any) => {\r\n        await this.openVPage(EditMeInfoFirstOrder, options);\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = this.newC(CAddress); // new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n\r\n    openPrivacy = () => {\r\n        // this.openVPage(Privacy);\r\n        nav.showPrivacyPage();\r\n    }\r\n\r\n    getCommonText = async (textId: number) => {\r\n        return await this.uqs.order.CommonText.load(textId);\r\n    }\r\n\r\n    renderLoginState() {\r\n        return this.renderView(VLoginState);\r\n    }\r\n\r\n    showLogin = (callback?: (user: User) => Promise<void>) => {\r\n        nav.showLogin(callback, true);\r\n    }\r\n\r\n    showLoginOut = (callback?: () => Promise<void>) => {\r\n        nav.showLogout(callback);\r\n    }\r\n\r\n    renderCarLabel = () => {\r\n        let { cCart } = this.cApp;\r\n        return cCart.renderCartLabel();\r\n    }\r\n\r\n    renderLoginState_Web() {\r\n        return this.renderView(VLoginState_Web);\r\n    }\r\n\r\n    renderCarLabel_Web() {\r\n        let { cCart } = this.cApp;\r\n        return cCart.renderCartLabel_Web();\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, TabCaptionComponent, Page, Tabs } from 'tonva';\r\nimport { CApp } from '../CApp';\r\n// import { Switch, Route } from 'react-router-dom';\r\nimport { CUqBase } from 'CBase';\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\n\r\nexport class VMain extends VPage<CApp> {\r\n    async open(param?: any) {\r\n        this.openPage(this.render);\r\n    }\r\n\r\n    render = (param?: any): JSX.Element => {\r\n        let { cHome, cCart, cMe, cart } = this.controller;\r\n        let faceTabs = [\r\n            { name: 'home', label: '首页', icon: 'home', page: cHome.tab, notify: undefined/*store.homeCount*/ },\r\n            // { name: 'member', label: '会员', icon: 'vcard', content: cMember.tab },\r\n            {\r\n                name: 'cart',\r\n                label: '购物车',\r\n                icon: 'shopping-cart',\r\n                //content: cCart.tab, \r\n                page: cCart.tabPage,\r\n                notify: cart.count\r\n            },\r\n            {\r\n                name: 'me',\r\n                label: '我的',\r\n                icon: 'user',\r\n                //content: cMe.tab \r\n                page: cMe.tabPage\r\n            }\r\n        ].map(v => {\r\n            let { name, label, icon, page, notify } = v;\r\n            return {\r\n                name: name,\r\n                caption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n                page: page,\r\n                notify: notify,\r\n            }\r\n        });\r\n\r\n        return <Page tabsProps={{ tabs: faceTabs }} />\r\n    }\r\n}\r\n\r\n/* export class Main extends VPage<CApp> {\r\n    async open(param?: any) {\r\n        this.openPage(this.render, { param });\r\n    }\r\n\r\n    render = (param?: any): JSX.Element => {\r\n        return <Switch>\r\n            <Route path='/search1/:key' render={() => {\r\n                return <div>cProduct1.start</div>\r\n            }} />\r\n            <Route path='/search/:key' render={() => {\r\n                // this.controller.cProduct.start(param.param);\r\n                this.controller.cProduct.searchByKey(param.param);\r\n                return this.controller.cProduct.renderProductList2(param.param);\r\n            }} />\r\n            <Route path='/' render={() => {\r\n                this.openVPage(VMain);\r\n                return <></>\r\n            }} />\r\n        </Switch>\r\n    }\r\n} */","import * as React from 'react';\r\nimport { CCoupon, COUPONBASE } from './CCoupon';\r\nimport { View, FA, EasyDate, LMR, tv } from 'tonva';\r\nimport { VIPCard, IsInActivePeriod, activityTime } from './Coupon';\r\nimport moment from 'moment';\r\n\r\nfunction getTips(result: number, types: string, code: string) {\r\n    let invalidTip = `${COUPONBASE[types]['name']}【${code}】无效，请与您的专属销售人员联系。`;\r\n    switch (result) {\r\n        case 0:\r\n            invalidTip = `${COUPONBASE[types]['name']}【${code}】不存在，请与您的专属销售人员联系。`;\r\n            break;\r\n        case 2:\r\n            invalidTip = `该${COUPONBASE[types]['name']}【${code}】已失效，请与您的专属销售人员联系。`;\r\n            break;\r\n        case 4:\r\n            invalidTip = `该${COUPONBASE[types]['name']}【${code}】已经使用过，不可重复领用。`;\r\n            break;\r\n        case 6:\r\n            invalidTip = `您不能领用自己发出的${COUPONBASE[types]['name']}【${code}】。`;\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    return invalidTip;\r\n}\r\n\r\nexport class VCoupon extends View<CCoupon> {\r\n\r\n    protected coupon: any;\r\n    protected renderRight = (): JSX.Element => {\r\n        return null;\r\n    }\r\n\r\n    private showDiscountSetting = (vipCardId: VIPCard, event: React.MouseEvent) => {\r\n        event.stopPropagation();\r\n        this.controller.showDiscountSetting(vipCardId);\r\n    }\r\n\r\n    protected renderCardDescription = (): JSX.Element => {\r\n        let { discount } = this.coupon;\r\n        let cardDescription: any;\r\n        if (typeof discount === 'number') {\r\n            if (discount !== 0) {\r\n                let discountShow: any;\r\n                discountShow = (1 - discount) * 10;\r\n                cardDescription = <div className=\"mr-3 font-weight-bold text-danger\"><big>{discountShow === 10 ? '无折扣' : <>{discountShow.toFixed(1)} 折</>}</big></div>\r\n            }\r\n        }\r\n        return cardDescription;\r\n    }\r\n\r\n    protected renderActivityDescription = (): JSX.Element => {\r\n        return null;\r\n    }\r\n\r\n    protected renderCardReveal = (param: any): JSX.Element => {\r\n        let { isOpenMyCouponManage } = this.controller;\r\n        let { result, types, code, validitydate, useddate, expireddate } = this.coupon;\r\n        let CardReveal: any;\r\n        if (!isOpenMyCouponManage) {\r\n            CardReveal = <div className=\"alert alert-primary my-1\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {getTips(result, types, code)}\r\n            </div>\r\n        } else {\r\n            let showDate = validitydate !== undefined ? validitydate : (useddate !== undefined ? useddate : expireddate);\r\n            let newDate = getEasyDate(showDate);\r\n            let content = <div className=\"float-right pr-2\">\r\n                <div className=\"pb-1\">\r\n                    <FA name='th-large' className='mr-1 text-secondary' />\r\n                    <small className=\"ml-3\">{useddate !== undefined ? '使用日期' : '有效期'}: {newDate}</small>\r\n                    {/* <small className=\"ml-3\">{useddate !== undefined ? '使用日期' : '有效期'}: <EasyDate date={showDate} /></small> */}\r\n                </div>\r\n            </div>;\r\n            let left = <div>\r\n                <span className=\"text-body\"><small>{COUPONBASE[types]['name']}</small></span>\r\n            </div>;\r\n            CardReveal = <div className=\"py-3 pl-3 pr-2 mb-1 alert\" style={{ backgroundColor: '#e8eaeb', color: \"text-secondary\" }}>\r\n                <LMR left={left}>\r\n                    {content}\r\n                </LMR>\r\n            </div>\r\n        }\r\n        return CardReveal;\r\n    }\r\n\r\n    protected getCodeShow = (code: number) => {\r\n        let codeShow = String(code);\r\n        let p1 = codeShow.substr(0, 4);\r\n        let p2 = codeShow.substr(4);\r\n        codeShow = p1 + ' ' + p2;\r\n        return codeShow;\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        this.coupon = param\r\n        let { result, code, discount, validitydate, isValid, types } = param;\r\n\r\n        let couponUi;\r\n        if (result !== 1 || !isValid) {\r\n            // this.controller.cApp.currentCouponCode = undefined;\r\n            // couponUi = <div className=\"alert alert-primary my-1\" role=\"alert\">\r\n            //     <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n            //     {getTips(result, types, code)}\r\n            // </div>\r\n            couponUi = this.renderCardReveal(param);\r\n        } else {\r\n            // this.controller.cApp.currentCouponCode = code;\r\n            /*\r\n            let bcenter: any;\r\n            if (preferential)\r\n                bcenter = <div className=\"text-muted\"><small>优惠：<span className=\"mx-3\">￥{preferential}</span></small></div>;\r\n            */\r\n            let tipUI = null;\r\n            if (types !== 'credits') {\r\n                if (discount)\r\n                    tipUI = <small className=\"text-success\">此{COUPONBASE[types]['name']}全场通用</small>\r\n                else\r\n                    tipUI = <small className=\"text-success\" onClick={(event) => this.showDiscountSetting(this.coupon, event)}>查看适用品牌及折扣</small>\r\n            }\r\n            let newDate = getEasyDate(validitydate);\r\n\r\n            let content = <div className=\"float-right pr-2\">\r\n                <div className=\"pb-1\">\r\n                    <FA name='th-large' className='mr-1 text-warning' />{this.getCodeShow(code)}\r\n                    <small className=\"ml-3\">有效期：{newDate}</small>\r\n                </div>\r\n                <div className=\"float-right\">\r\n                    {tipUI}\r\n                </div>\r\n            </div>;\r\n\r\n            let left = <div>\r\n                <span className=\"text-muted\"><small>{COUPONBASE[types]['name']}</small></span>\r\n                {this.renderCardDescription()}\r\n            </div>;\r\n\r\n            couponUi = <div className=\"bg-white py-3 px-2 mb-1\">\r\n                <LMR left={left} right={this.renderRight()}>\r\n                    {content}\r\n                </LMR>\r\n                {this.renderActivityDescription()}\r\n            </div>\r\n        }\r\n        return couponUi;\r\n    }\r\n}\r\n\r\nexport class VVIPCard extends VCoupon {\r\n\r\n    /*\r\n    private showDiscountSetting = (vipCardId: VIPCard, event: React.MouseEvent) => {\r\n        event.stopPropagation();\r\n        this.controller.showDiscountSetting(vipCardId);\r\n    }\r\n\r\n    protected renderRight = (): JSX.Element => {\r\n        return <span className=\"ml-3 my-3\" onClick={(event) => this.showDiscountSetting(this.coupon, event)}>\r\n            <FA name=\"chevron-right\" className=\"corsor-pointer\"></FA>\r\n        </span>;\r\n    }\r\n    */\r\n}\r\n\r\nexport class VCredits extends VCoupon {\r\n\r\n\r\n    protected renderCardDescription = (): JSX.Element => {\r\n        return <div className=\"font-weight-bold text-danger\">\r\n            <big>{\r\n                IsInActivePeriod() ? '限时四倍积分' : '双倍积分'\r\n            }</big>\r\n        </div>\r\n    }\r\n\r\n    protected renderActivityDescription = (): JSX.Element => {\r\n        let { startDate, endDate } = activityTime;\r\n        return IsInActivePeriod() ? <div className=\"text-danger mt-1\">\r\n            <small className=\"text-muted\">{startDate.replace(/\\-/g, '.')} 至 {endDate.replace(/\\-/g, '.')} 内下单可获四倍积分 </small>\r\n        </div> : null;\r\n    }\r\n\r\n    /*\r\n    render(param: any): JSX.Element {\r\n        let { coupon, onClick } = param;\r\n        this.coupon = coupon;\r\n        let { result, id, code, discount, preferential, validitydate, isValid, types } = param;\r\n\r\n        let couponUi;\r\n        if (result !== 1 || !isValid) {\r\n            // this.controller.cApp.currentCreditCode = undefined;\r\n            couponUi = <div className=\"alert alert-primary my-1\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {getTips(result, types, code)}\r\n            </div>\r\n        } else {\r\n            // this.controller.cApp.currentCreditCode = code;\r\n            let content = <div onClick={() => onClick(code)}>\r\n                <div className=\"pb-1\">\r\n                    <FA name='th-large' className='mr-1 text-warning' />{this.getCodeShow(code)}\r\n                    <small className=\"ml-3\">有效期：<EasyDate date={validitydate} /></small>\r\n                </div>\r\n                <div><small className=\"text-success\">此{cardTypeName[types]}全场通用</small></div>\r\n            </div>;\r\n\r\n            let left = <div onClick={() => onClick(code)}>\r\n                <span className=\"text-muted\"><small>{cardTypeName[types]}</small></span>\r\n                {this.renderCardDescription()}\r\n            </div>;\r\n\r\n            couponUi = <div className=\"bg-white p-3 mb-1\">\r\n                <LMR left={left}>\r\n                    {content}\r\n                </LMR>\r\n            </div>\r\n        }\r\n        return couponUi;\r\n    }\r\n    */\r\n}\r\n\r\nexport class VCouponUsed extends VCoupon {\r\n    protected renderCardReveal = (param: any): JSX.Element => {\r\n        let { validitydate, types, useddate, expireddate } = param;\r\n        let couponUi;\r\n        let showDate = validitydate !== undefined ? validitydate : (useddate !== undefined ? useddate : expireddate);\r\n        let newDate = getEasyDate(showDate);\r\n        let content = <div className=\"float-right pr-2\">\r\n            <div className=\"pb-1\">\r\n                <FA name='th-large' className='mr-1 text-secondary' />\r\n                <small className=\"ml-3\">{useddate !== undefined ? '使用日期' : '有效期'}: {newDate}</small>\r\n            </div>\r\n        </div>;\r\n        let left = <div>\r\n            <span className=\"text-body\"><small>{COUPONBASE[types]['name']}</small></span>\r\n        </div>;\r\n        couponUi = <div className=\"py-3 pl-3 pr-2 mb-1 alert\" style={{ backgroundColor: '#e8eaeb', color: \"text-secondary\" }}>\r\n            <LMR left={left}>\r\n                {content}\r\n            </LMR>\r\n        </div>\r\n        return couponUi;\r\n    }\r\n}\r\n\r\nexport function getEasyDate(validitydate: any) {\r\n    let date = moment(validitydate).format('YYYY-MM-DD').split('-');\r\n    // let date = new Date(validitydate).toLocaleDateString().split('/');\r\n    let year = new Date().getFullYear().toString();\r\n    return `${date[0] === year ? '' : (date[0] + '年')}${date[1]}月${date[2]}日`;\r\n}","import * as React from 'react';\r\nimport { CCoupon, COUPONBASE } from './CCoupon';\r\nimport { VPage, Page, List, FA } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\nimport { VCoupon, VCredits, VVIPCard } from './VVIPCard';\r\n\r\nexport class VSharedCoupon extends VPage<CCoupon> {\r\n\r\n    @observable tipsAfterDawed: string;\r\n    private products: any[] = [];\r\n    async open(param: any) {\r\n        this.products = param.products || [];\r\n        if (this.products.length === 0) {\r\n            this.tipsAfterDawed = `3秒后将跳到首页，开始您的购物之旅。`\r\n        } else {\r\n            this.tipsAfterDawed = \"您可以点击以下产品开始您的购物之旅。\"\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private drawCouponUI = observer(() => {\r\n        let { sharedCouponValidationResult } = this.controller;\r\n        if (sharedCouponValidationResult.result !== 1)\r\n            return null;\r\n        let { couponDrawed, loginWhenDrawCoupon } = this.controller;\r\n        if (couponDrawed) {\r\n            if (this.products.length === 0) {\r\n                this.countDown();\r\n            }\r\n            return React.createElement(this.showTips)\r\n        }\r\n        else {\r\n            return <button className=\"btn btn-primary w-100\"\r\n                onClick={() => loginWhenDrawCoupon(sharedCouponValidationResult)}>领取</button>\r\n        }\r\n    })\r\n\r\n    private countDown = () => {\r\n        let waitingSeconds = 3;\r\n        setInterval(() => {\r\n            this.tipsAfterDawed = `${waitingSeconds}秒后将跳到首页，开始您的购物之旅。`\r\n            if (waitingSeconds === 0) {\r\n                this.backPage();\r\n            }\r\n            waitingSeconds--;\r\n        }, 1000)\r\n    }\r\n\r\n    private showTips = observer(() => {\r\n        return <div className=\"alert alert-info w-100 text-center\">\r\n            <div className=\"pb-3\">\r\n                <span className=\"text-danger\" style={{ fontSize: \"1.4rem\" }}>领取成功</span><br />\r\n                <small className=\"text-muted\">领取的卡券可在&Prime;卡券管理&Prime;中查看</small>\r\n            </div>\r\n            <small>{this.tipsAfterDawed}</small>\r\n        </div>\r\n    })\r\n\r\n    private renderCouponBase = (sharedCouponValidationResult: any) => {\r\n        let { types, discount } = sharedCouponValidationResult;\r\n        // return <>{this.renderVm(COUPONBASE[types]['view'], sharedCouponValidationResult)}</>;\r\n        switch (types) {\r\n            case 'coupon':\r\n                if (discount)\r\n                    return <>{this.renderVm(VCoupon, sharedCouponValidationResult)}</>;\r\n                else\r\n                    return <>{this.renderVm(VVIPCard, sharedCouponValidationResult)}</>;\r\n                break;\r\n            case 'credits':\r\n                return <>{this.renderVm(VCredits, sharedCouponValidationResult)}</>;\r\n                break;\r\n            case 'vipcard':\r\n                return <>{this.renderVm(VVIPCard, sharedCouponValidationResult)}</>;\r\n                break\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private onProductClick = async (product: any) => {\r\n        await this.controller.showProductDetail(product.id);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { renderProduct, cApp, sharedCouponValidationResult } = this.controller;\r\n\r\n        let { cCart } = cApp;\r\n        let cart = cCart.renderCartLabel();\r\n        return <Page header=\"与您分享\" right={cart}>\r\n            {this.renderCouponBase(sharedCouponValidationResult)}\r\n            {React.createElement(this.drawCouponUI)}\r\n            <List items={this.products} item={{ render: renderProduct, onClick: this.onProductClick, className: \"mb-1\" }} none={null} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, List, FA, LMR } from 'tonva';\r\nimport { CCoupon, COUPONBASE } from './CCoupon';\r\nimport { observable } from 'mobx';\r\nimport { VVIPCard, VCoupon, VCredits } from './VVIPCard';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { observer } from 'mobx-react';\r\nimport { Credits } from './Coupon';\r\n\r\nexport class VCoupleAvailable extends VPage<CCoupon> {\r\n\r\n    private couponInput: HTMLInputElement;\r\n    private vipCardForWebUser: any;\r\n    private coupons: any[];\r\n\r\n    @observable tips: string;\r\n    async open(param: any) {\r\n        let { vipCardForWebUser, couponsForWebUser } = param;\r\n        this.vipCardForWebUser = vipCardForWebUser;\r\n        this.coupons = couponsForWebUser.map((v: any) => v.coupon).concat(param.creditsForWebUser.map((v: any) => v.coupon));\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private applyCoupon = async () => {\r\n        let coupon = this.couponInput.value;\r\n        await this.applySelectedCoupon(coupon);\r\n    }\r\n\r\n    /**\r\n     * 应用选择的vipcard等 \r\n     */\r\n    private applySelectedCoupon = async (coupon: string) => {\r\n        this.tips = await this.controller.applySelectedCoupon(coupon);\r\n        if (this.tips)\r\n            setTimeout(() => this.tips = undefined, GLOABLE.TIPDISPLAYTIME);\r\n    }\r\n\r\n    private renderCoupon = (coupon: any) => {\r\n        let { result, code, types, discount } = coupon;\r\n        if (result === 1) {\r\n            // let content = this.renderVm(COUPONBASE[types]['view'], coupon);\r\n            let content = null;\r\n            if (types === \"coupon\")\r\n                content = discount ? this.renderVm(VCoupon, coupon) : this.renderVm(VVIPCard, coupon);\r\n            else if (types === \"credits\")\r\n                content = this.renderVm(VCredits, coupon);\r\n            return <div className=\"d-block\">\r\n                <div className=\"px-2 bg-white\" onClick={() => this.applySelectedCoupon(code)}>\r\n                    {content}\r\n                </div>\r\n            </div>\r\n        } else\r\n            return null;\r\n    }\r\n\r\n    private tipsUI = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        return tipsUI;\r\n    })\r\n\r\n    private page = () => {\r\n\r\n        let vipCardUI;\r\n        if (this.vipCardForWebUser) {\r\n            let { coupon } = this.vipCardForWebUser;\r\n            vipCardUI = <div onClick={() => this.applySelectedCoupon(coupon.code)}>{this.renderVm(VVIPCard, coupon)}</div>\r\n        }\r\n\r\n        let left = <div className=\"d-flex align-items-center mr-3\"><div className=\"align-middle\">优惠卡/券:</div></div>\r\n        let right = <button className=\"btn btn-primary w-100\" onClick={this.applyCoupon}>使用</button>\r\n\r\n        return <Page header=\"可用优惠\">\r\n            <div className=\"px-2 py-3\">\r\n                <LMR left={left} right={right}>\r\n                    <input ref={v => this.couponInput = v} type=\"number\" className=\"form-control\"></input>\r\n                </LMR>\r\n                {React.createElement(this.tipsUI)}\r\n            </div >\r\n\r\n            <div className=\"px-2 bg-white\">\r\n                {vipCardUI}\r\n            </div>\r\n            <List items={this.coupons} item={{ render: this.renderCoupon }} none={null}></List>\r\n        </Page >\r\n    }\r\n}\r\n\r\n/*\r\n\r\n            <div className=\"px-2 py-3\">\r\n                <div className=\"row pr-3 my-1\">\r\n                    <div className=\"col-4 col-sm-2 d-flex align-items-center text-muted\"><span className=\"align-middle\">优惠卡券:</span></div>\r\n                    <div className=\"col-8 col-sm-10 d-flex\">\r\n                        <input ref={v => this.couponInput = v} type=\"number\" className=\"form-control\"></input>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row my-1\">\r\n                    <div className=\"col-12\">\r\n                        <button className=\"btn btn-primary w-100\" onClick={this.applyCoupon}>使用填写的卡券</button>\r\n                    </div>\r\n                </div>\r\n                {React.createElement(this.tipsUI)}\r\n            </div>\r\n*/","import * as React from 'react';\r\nimport { VPage, Page, List, tv } from 'tonva';\r\nimport { CCoupon } from './CCoupon';\r\n\r\nexport class VVIPCardDiscount extends VPage<CCoupon>{\r\n\r\n    private vipCard: any;\r\n    async open(vipCard: any) {\r\n        this.vipCard = vipCard;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderVIPCardDiscountSetting(item: any) {\r\n        let { brand, discount } = item;\r\n        return <div className=\"row\">\r\n            <div className=\"col-7\">\r\n                {tv(brand, v => v.name)}\r\n            </div>\r\n            <div className=\"col-5\">\r\n                {100 - discount * 100}%\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"折扣明细\">\r\n            <List items={this.vipCard.discountSetting} item={{ render: this.renderVIPCardDiscountSetting, className: \"px-3 py-2\" }}></List>\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, LMR, FA, List, TabProp, TabCaptionComponent, Tabs, Scroller, QueryPager } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { VCoupon, VCredits, VVIPCard, VCouponUsed } from './VVIPCard';\r\nimport { observable } from 'mobx';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { color } from 'order/VMyOrders';\r\nimport { CCoupon } from './CCoupon';\r\n\r\nexport class VCouponManage extends VPage<CCoupon> {\r\n\r\n    private couponInput: HTMLInputElement;\r\n    @observable private coupons: QueryPager<any>;\r\n    private currentStatus: string;\r\n    private tabs: TabProp[];\r\n    oss: any = [\r\n        { caption: '可使用', state: 'validCardForWebUser', icon: 'free-code-camp', toolTip: '亲，您现没有可用的优惠券呦！' },\r\n        { caption: '已使用', state: 'usageRecordForWebUser', icon: 'cc-amex', toolTip: '亲，您还未使用过任何优惠券,快去使用噢！' },\r\n        { caption: '已过期', state: 'expiredForWebUser', icon: 'ravelry', toolTip: '亲，您还没已过期的优惠券！' },\r\n    ];\r\n\r\n    @observable tips: string;\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private getTabs = async () => {\r\n        let { getCoupons } = this.controller;\r\n        this.tabs = this.oss.map((v: any) => {\r\n            let { caption, state, icon, toolTip } = v;\r\n            let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">{`『 ${toolTip} 』`}</div>\r\n            return {\r\n                name: caption,\r\n                caption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n                content: () => {\r\n                    return <List items={this.coupons} item={{ render: this.renderCoupon }} none={none} />\r\n                },\r\n                isSelected: this.currentStatus === state,\r\n                load: async () => {\r\n                    this.currentStatus = state;\r\n                    this.coupons = await getCoupons(this.currentStatus);\r\n                }\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 领取优惠卡\r\n     */\r\n    private receiveCoupon = async () => {\r\n        let { drawCoupon, getCouponValidationResult, applyTip } = this.controller;\r\n        let coupon = this.couponInput.value;\r\n        if (!coupon)\r\n            this.tips = \"请输入您的优惠卡/券号\";\r\n        else {\r\n            this.couponInput.value = '';\r\n\r\n            let validationResult = await getCouponValidationResult(coupon);\r\n            let { result } = validationResult;\r\n            if (result === 1) {\r\n                await drawCoupon(validationResult);\r\n                this.tips = '领取成功！';\r\n            } else {\r\n                this.tips = applyTip(result);\r\n            }\r\n        }\r\n        if (this.tips) {\r\n            setTimeout(() => this.tips = undefined, GLOABLE.TIPDISPLAYTIME);\r\n        }\r\n        // setTimeout(() => this.controller.closePage(), 500);\r\n        // this.currentStatus = this.oss[0].state;\r\n        // this.coupons = await getCoupons(this.currentStatus);\r\n    }\r\n\r\n    /**\r\n     * 优惠卡展示\r\n     */\r\n    private renderCoupon = (coupon: any) => {\r\n        let { types, discount, conductReveal } = coupon;\r\n        let content = null;\r\n        if (types === \"coupon\")\r\n            content = discount ? this.renderVm(VCoupon, coupon) : this.renderVm(VVIPCard, coupon);\r\n        else if (types === \"credits\")\r\n            content = this.renderVm(VCredits, coupon);\r\n        else if (types === 'vipcard') {\r\n            content = this.renderVm(VVIPCard, coupon);\r\n        }\r\n        if (conductReveal) {\r\n            content = this.renderVm(VCouponUsed, coupon);\r\n        }\r\n        return <div className=\"d-block\">\r\n            <div className=\"px-2 bg-white mt-1\" onClick={() => { this.CouponViewOrUse(coupon) }}>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    /**\r\n     * 折扣明细或使用记录\r\n     */\r\n    private CouponViewOrUse = (coupon: any) => {\r\n        let { showDiscountSetting } = this.controller;\r\n        let { result, types } = coupon;\r\n        if (result === 1 && types !== 'credits')\r\n            showDiscountSetting(coupon);\r\n    }\r\n\r\n    private tipsUI = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        return tipsUI;\r\n    })\r\n    private onScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        if (this.currentStatus !== \"validCardForWebUser\")\r\n            this.coupons.more();\r\n    }\r\n\r\n    private page = observer(() => {\r\n        this.getTabs();\r\n        let right = <button className=\"btn btn-primary w-100\" onClick={this.receiveCoupon}>领取</button>\r\n        return <Page header=\"卡券管理\">\r\n            <div className=\"px-2 py-3\">\r\n                <LMR right={right}>\r\n                    <input ref={v => this.couponInput = v} type=\"number\" placeholder=\"输入领取优惠卡券号码\" className=\"form-control\"></input>\r\n                </LMR>\r\n                {React.createElement(this.tipsUI)}\r\n                <div className=\"mt-2\">\r\n                    <Tabs tabs={this.tabs} tabPosition=\"top\" />\r\n                </div>\r\n            </div >\r\n        </Page>\r\n    })\r\n}","import { CUqBase } from '../CBase';\r\nimport { VSharedCoupon } from './VSharedCoupon';\r\nimport { BoxId, nav, User, QueryPager, Tuid } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { VCoupleAvailable } from './VCouponAvailable';\r\nimport { VVIPCardDiscount } from './VVIPCardDiscount';\r\nimport { VCoupon, VCredits, VVIPCard } from './VVIPCard';\r\nimport { VCouponManage } from './VCouponManage';\r\n\r\nexport const COUPONBASE: any = {\r\n    'coupon': { 'name': '优惠券', 'view': VCoupon },\r\n    'credits': { 'name': '积分券', 'view': VCredits },\r\n    'vipcard': { 'name': 'VIP卡', 'view': VVIPCard }\r\n}\r\n\r\nexport class CCoupon extends CUqBase {\r\n    isOpenMyCouponManage: boolean = false;\r\n    @observable couponDrawed: boolean;\r\n    @observable sharedCouponValidationResult: any;\r\n    couponPager: QueryPager<any>;\r\n\r\n    applyCoupon = async (coupon: string) => {\r\n        let validationResult = await this.getCouponValidationResult(coupon);\r\n        let { result: rtn, id, types } = validationResult;\r\n        if (rtn === 1) {\r\n            if (types === 'vipcard' || types === 'coupon') {\r\n                validationResult.discountSetting = await this.getCouponDiscountSetting(types, id);\r\n            }\r\n            this.returnCall(validationResult);\r\n            this.closePage();\r\n        }\r\n        return rtn;\r\n    }\r\n\r\n    getCouponValidationResult = async (coupon: string) => {\r\n        let { currentUser } = this.cApp;\r\n        return await this.uqs.salesTask.IsCanUseCoupon.submit({ code: coupon, webUser: currentUser && currentUser.id });\r\n    }\r\n\r\n    /**\r\n     * 优惠卡券管理界面\r\n     */\r\n    openMyCouponManage = async () => {\r\n        this.isOpenMyCouponManage = true;\r\n        this.openVPage(VCouponManage);\r\n    }\r\n\r\n    /**\r\n     * 获取不同状态下的优惠卡券\r\n     */\r\n    getCoupons = async (state: any) => {\r\n        let { webuser } = this.uqs;\r\n        let { currentUser } = this.cApp;\r\n        let result;\r\n        switch (state) {\r\n            case 'validCardForWebUser':\r\n                result = await this.getValidCardForWebUser();\r\n                return this.getValidMusterForWebUser(result);\r\n            case 'usageRecordForWebUser':\r\n                result = new QueryPager<any>(webuser.getMyUsedCoupon, 10, 10);\r\n                await result.first({ webUser: currentUser });\r\n                return result;\r\n            case 'expiredForWebUser':\r\n                result = new QueryPager<any>(webuser.getMyExpiredCoupon, 10, 10);\r\n                await result.first({ webUser: currentUser });\r\n                return result;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 可使用的优惠卡\r\n     */\r\n    getValidMusterForWebUser = (params: any) => {\r\n        let { vipCardForWebUser, couponsForWebUser, creditsForWebUser } = params;\r\n        let shift = couponsForWebUser.map((v: any) => v.coupon).concat(creditsForWebUser.map((v: any) => v.coupon));\r\n        let validMuster = vipCardForWebUser ? [vipCardForWebUser.coupon].concat(shift) : shift;\r\n        let finalValidMuster = validMuster.filter((v: any) => v.result === 1);\r\n        return finalValidMuster;\r\n    }\r\n\r\n    /**\r\n     * 获取已过期的优惠卡\r\n     */\r\n    /* getExpiredMusterForWebUser = async () => {\r\n        let { webuser, 积分商城 } = this.uqs;\r\n        let { currentUser } = this.cApp;\r\n        let expiredMusterForWebUser: any[] = [];\r\n        let couponsMusterForWebUser: any = await webuser.WebUserCoupon.table({ webUser: currentUser });\r\n        let creditsMusterForWebUser: any = await 积分商城.WebUserCredits.table({ webUser: currentUser });\r\n        let vipCardMusterForWebUser: any = await webuser.WebUserVIPCard.obj({ webUser: currentUser });\r\n        if (vipCardMusterForWebUser) {\r\n            let { expiredDate } = vipCardMusterForWebUser;\r\n            if (expiredDate.getTime() < Date.now()) {\r\n                vipCardMusterForWebUser.coupon = await this.getCouponValidationResult(vipCardMusterForWebUser.vipCardCode);\r\n                expiredMusterForWebUser.push(vipCardMusterForWebUser.coupon);\r\n            }\r\n        }\r\n\r\n        if (couponsMusterForWebUser) {\r\n            let result = couponsMusterForWebUser.filter((v: any) => v.expiredDate.getTime() < Date.now());\r\n            if (result.length > 0) {\r\n                for (let i = 0; i < result.length; i++) {\r\n                    let e = result[i];\r\n                    e.coupon = await this.getCouponValidationResult(e.couponCode);\r\n                }\r\n                expiredMusterForWebUser.push(...result.map((v: any) => v.coupon));\r\n            }\r\n        }\r\n\r\n        if (creditsMusterForWebUser) {\r\n            let result = creditsMusterForWebUser.filter((v: any) => v.expiredDate.getTime() < Date.now());\r\n\r\n\r\n            if (result.length > 0) {\r\n                for (let i = 0; i < result.length; i++) {\r\n                    let e = result[i];\r\n                    e.coupon = await this.getCouponValidationResult(e.creditsCode);\r\n                }\r\n                expiredMusterForWebUser.push(...result.map((v: any) => v.coupon));\r\n            }\r\n        }\r\n        // expiredMusterForWebUser.forEach((el: any) => el.conductReveal = true);\r\n        return expiredMusterForWebUser;\r\n    }\r\n */\r\n\r\n    /**\r\n     * 获取用户有效的优惠券/vip卡\r\n     */\r\n    getValidCardForWebUser = async () => {\r\n        let { currentUser } = this.cApp;\r\n        let { id: currentUserId } = currentUser;\r\n\r\n        let validVIPCardForWebUser = await this.getValidVipCardForWebUser(currentUserId);\r\n        if (validVIPCardForWebUser) {\r\n            validVIPCardForWebUser.coupon = await this.getCouponValidationResult(validVIPCardForWebUser.vipCardCode)\r\n        }\r\n\r\n        let validCouponsForWebUser = await this.getValidCouponsForWebUser(currentUserId);\r\n        if (validCouponsForWebUser.length > 0) {\r\n            for (let i = 0; i < validCouponsForWebUser.length; i++) {\r\n                let e = validCouponsForWebUser[i];\r\n                e.coupon = await this.getCouponValidationResult(e.couponCode);\r\n            }\r\n        }\r\n\r\n        let validCreditsForWebUser = await this.getValidCreditsForWebUser(currentUserId);\r\n        if (validCreditsForWebUser.length > 0) {\r\n            for (let i = 0; i < validCreditsForWebUser.length; i++) {\r\n                let e = validCreditsForWebUser[i];\r\n                e.coupon = await this.getCouponValidationResult(e.creditsCode);\r\n            }\r\n        }\r\n\r\n        return {\r\n            'vipCardForWebUser': validVIPCardForWebUser,\r\n            'couponsForWebUser': validCouponsForWebUser,\r\n            'creditsForWebUser': validCreditsForWebUser\r\n        }\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        let result = await this.getValidCardForWebUser();\r\n\r\n        this.openVPage(VCoupleAvailable, result);\r\n    }\r\n\r\n    /**\r\n     * （在订单上）应用coupon\r\n     * @param coupon \r\n     */\r\n    applySelectedCoupon = async (coupon: string) => {\r\n        if (!coupon)\r\n            return \"请输入您的优惠卡/券号\";\r\n        else {\r\n            let ret = await this.applyCoupon(coupon);\r\n            return this.applyTip(ret);\r\n        }\r\n    }\r\n\r\n    applyTip = (ret: any) => {\r\n        switch (ret) {\r\n            case -1:\r\n                return '对不起，当前服务器繁忙，请稍后再试。';\r\n            case 1:\r\n                return '有效';\r\n            case 0:\r\n                return \"无此优惠券，请重新输入或与您的专属销售人员联系确认优惠码是否正确。\";\r\n            case 2:\r\n                return '优惠券已过期或作废，请重新输入或与您的专属销售人员联系。';\r\n            case 3:\r\n            case 5:\r\n                return '优惠券无效，请重新输入或与您的专属销售人员联系。';\r\n            case 6:\r\n                return '不允许使用本人优惠券！';\r\n            case 4:\r\n                return '该优惠券已经被使用过了，不允许重复使用。';\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param currentUserId \r\n     */\r\n    getValidVipCardForWebUser = async (currentUserId: number): Promise<any> => {\r\n        let { uqs } = this.cApp;\r\n        let { webuser } = uqs;\r\n        let { WebUserVIPCard } = webuser;\r\n        let vipCardForWebUser: any = await WebUserVIPCard.obj({ webUser: currentUserId });\r\n        if (vipCardForWebUser) {\r\n            let { expiredDate } = vipCardForWebUser\r\n            if (expiredDate.getTime() > Date.now()) {\r\n                return vipCardForWebUser;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param currentUserId \r\n     */\r\n    getValidCouponsForWebUser = async (currentUserId: number): Promise<any[]> => {\r\n        let { uqs } = this.cApp;\r\n        let { webuser } = uqs;\r\n        let { WebUserCoupon } = webuser;\r\n        let couponsForWebUser: any[] = await WebUserCoupon.table({ webUser: currentUserId });\r\n        let validCouponsForWebUser: any[] = [];\r\n        if (couponsForWebUser) {\r\n            validCouponsForWebUser = couponsForWebUser.filter(v => v.expiredDate.getTime() > Date.now());\r\n        }\r\n        return validCouponsForWebUser;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param currentUserId \r\n     */\r\n    getValidCreditsForWebUser = async (currentUserId: number): Promise<any[]> => {\r\n        let { uqs } = this.cApp;\r\n        let { 积分商城 } = uqs;\r\n        let creditsForWebUser: any[] = await 积分商城.WebUserCredits.table({ webUser: currentUserId });\r\n        let validCreditsForWebUser: any[] = [];\r\n        if (creditsForWebUser) {\r\n            validCreditsForWebUser = creditsForWebUser.filter(v => v.expiredDate.getTime() > Date.now());\r\n        }\r\n        return validCreditsForWebUser;\r\n    }\r\n\r\n    /**\r\n     * 显示VIP卡的品牌折扣明细 \r\n     * @param coupon \r\n     */\r\n    showDiscountSetting = async (vipCard: any) => {\r\n        let { types, id } = vipCard;\r\n        vipCard.discountSetting = await this.getCouponDiscountSetting(types, id);\r\n        this.openVPage(VVIPCardDiscount, vipCard);\r\n    }\r\n    /**\r\n     * 获取卡券的有效折扣  \r\n     */\r\n    getValidDiscounts = async (types: string, id: number) => {\r\n        return await this.getCouponDiscountSetting(types, id);\r\n    }\r\n\r\n    private getCouponDiscountSetting = async (types: string, couponId: number) => {\r\n        if (types === 'vipcard' || types === 'coupon') {\r\n            return await this.uqs.salesTask.VIPCardDiscount.table({ coupon: couponId });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 领取VIP卡 \r\n     */\r\n    showSharedVIPCard = async (param: any) => {\r\n        let { vipcard: vipCardCode, productids } = param;\r\n        await this.autoDrawCouponBase(vipCardCode);\r\n        let products = this.getProducts(productids);\r\n        this.openVPage(VSharedCoupon, { products });\r\n    }\r\n\r\n    /**\r\n     * 领取优惠券 \r\n     */\r\n    showSharedCoupon = async (param: any) => {\r\n        let { coupon, productids } = param;\r\n        await this.autoDrawCouponBase(coupon);\r\n        let products = this.getProducts(productids);\r\n        this.openVPage(VSharedCoupon, { products });\r\n    }\r\n\r\n    /**\r\n     * 领取积分码 \r\n     */\r\n    showSharedCredits = async (param: any) => {\r\n        let { credits, productids } = param;\r\n        await this.autoDrawCouponBase(credits);\r\n        let products = this.getProducts(productids);\r\n        this.openVPage(VSharedCoupon, { products });\r\n    }\r\n\r\n    private autoDrawCouponBase = async (couponBaseCode: string) => {\r\n\r\n        this.couponDrawed = false;\r\n        this.sharedCouponValidationResult = await this.getCouponValidationResult(couponBaseCode);\r\n        let { result } = this.sharedCouponValidationResult;\r\n\r\n        // 自动领取积分券\r\n        let { currentUser } = this.cApp;\r\n        let { id: currentUserId, allowOrdering } = currentUser;\r\n        if (result === 1 && currentUserId && allowOrdering)\r\n            await this.drawCoupon(this.sharedCouponValidationResult);\r\n    }\r\n\r\n    private getProducts = (productids: string) => {\r\n        let products: any;\r\n        if (productids) {\r\n            let { ProductX } = this.uqs.product;\r\n            let productidArray = productids.split('-').filter((v: any) => /^\\d{1,10}$/.test(v));\r\n            products = productidArray.map((v: any) => ProductX.boxId(v));\r\n        }\r\n        return products;\r\n    }\r\n\r\n    loginWhenDrawCoupon = async (credits: any) => {\r\n        let { cApp } = this;\r\n        let { cMe, currentUser } = cApp;\r\n        let { code } = credits;\r\n        this.sharedCouponValidationResult = await this.getCouponValidationResult(code);\r\n        let { result } = this.sharedCouponValidationResult;\r\n        let allowCurrentUser = async () => {\r\n            if (result === 1) {\r\n                if (!currentUser.allowOrdering) {\r\n                    cMe.toPersonalAccountInfo(async () => await this.drawCoupon(this.sharedCouponValidationResult));\r\n                } else {\r\n                    await this.drawCoupon(this.sharedCouponValidationResult);\r\n                }\r\n            }\r\n        }\r\n\r\n        let loginCallback = async (user: User) => {\r\n            await cApp.currentUser.setUser(user);\r\n            await cApp.loginCallBack(user);\r\n            this.closePage(1);\r\n            await allowCurrentUser();\r\n        };\r\n        if (!this.isLogined)\r\n            nav.showLogin(loginCallback, true);\r\n        else {\r\n            await allowCurrentUser();\r\n        }\r\n    }\r\n\r\n    drawCoupon = async (credits: any) => {\r\n        let { uqs, cApp } = this;\r\n        let { currentUser } = cApp;\r\n        let { id: currentUserId } = currentUser;\r\n        let { 积分商城, webuser } = uqs;\r\n        let { result, id: creditsId, code, validitydate, types } = credits;\r\n        if (result !== 1)\r\n            return;\r\n        switch (types) {\r\n            case 'credits':\r\n                let drawedResult = await 积分商城.WebUserCredits.obj({ webUser: currentUserId, credits: creditsId });\r\n                if (!drawedResult) {\r\n                    let now = new Date();\r\n\r\n                    await 积分商城.WebUserCredits.add({\r\n                        webUser: currentUserId,\r\n                        arr1: [{\r\n                            credits: creditsId,\r\n                            creditsCode: code,\r\n                            createDate: `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`,\r\n                            expiredDate: validitydate\r\n                        }]\r\n                    })\r\n                }\r\n                break;\r\n            case 'coupon':\r\n                let drawedResult3 = await webuser.WebUserCoupon.obj({ webUser: currentUserId, coupon: creditsId });\r\n                if (!drawedResult3) {\r\n                    let now = new Date();\r\n                    await webuser.WebUserCoupon.add({\r\n                        webUser: currentUserId,\r\n                        coupon: creditsId,\r\n                        arr1: [{\r\n                            couponType: 1,\r\n                            couponCode: code,\r\n                            createDate: `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`,\r\n                            expiredDate: validitydate,\r\n                        }]\r\n                    })\r\n                }\r\n                break;\r\n            case 'vipcard':\r\n                let drawedResult2 = await webuser.WebUserVIPCard.obj({ webUser: currentUserId, vipCard: creditsId });\r\n                if (!drawedResult2) {\r\n                    let now = new Date();\r\n                    await this.uqs.webuser.WebUserVIPCard.add({\r\n                        webUser: currentUserId,\r\n                        vipCard: creditsId,\r\n                        arr1: [{\r\n                            vipCardType: 1,\r\n                            createDate: `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`,\r\n                            expiredDate: validitydate,\r\n                            vipCardCode: code\r\n                        }]\r\n                    })\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.couponDrawed = true;\r\n    }\r\n\r\n    async showProductDetail(product: number) {\r\n        let { cProduct } = this.cApp;\r\n        await cProduct.showProductDetail(product);\r\n    }\r\n\r\n    renderProduct = (product: any) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderProductWithPrice(product);\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, List, LMR, SearchBox, FA } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CYncProjects } from './CYncProjects';\r\n\r\nexport class VYncProjects extends VPage<CYncProjects> {\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { YncProjectsItems } = this.controller;\r\n\r\n        let header = <header>\r\n            <div>选择项目</div>\r\n        </header>;\r\n        return <Page header={header} headerClassName=\"py-1 bg-primary\" >\r\n            <List items={YncProjectsItems} item={{ render: this.renderItem, onClick: this.onClick }} />\r\n        </Page>;\r\n    });\r\n\r\n\r\n    private onClick = async (model: any) => {\r\n        await this.controller.returnYncProject(model);\r\n        this.closePage();\r\n    }\r\n\r\n    private renderItem = (item: any, index: number) => {\r\n        let { ProjectName } = item;\r\n        return <LMR className=\"py-2 border\">\r\n            <div><FA name=\"circle\" className=\"px-2 text-primary\"></FA>{ProjectName}</div>\r\n        </LMR >;\r\n    }\r\n\r\n}\r\n","import * as React from 'react';\r\nimport { CUqBase } from 'CBase';\r\nimport { VYncProjects } from './VYncProjects';\r\nimport { YncProjectsResponse, YncProjectsItem } from './YncProductItem';\r\n\r\nexport class CYncProjects extends CUqBase {\r\n\r\n    private OrganCode: string;\r\n    private UserId: number;\r\n    YncProjectsItems: YncProjectsItem[] = [];\r\n    private YncProjectsResponse: YncProjectsResponse;\r\n\r\n    async internalStart(OrganCode: string, UserId: number) {\r\n        this.OrganCode = OrganCode;\r\n        this.UserId = UserId;\r\n        await this.getYncProjects();\r\n        this.openVPage(VYncProjects);\r\n    }\r\n\r\n    getYncProjects = async () => {\r\n        let formData = new FormData();\r\n        formData.append(\"OrganCode\", this.OrganCode);\r\n        formData.append(\"UserId\", this.UserId.toString());\r\n\r\n        let res = await window.fetch('http://apitest.sinopec.ad/api/ynk/projects', {\r\n            method: 'post',\r\n            body: formData,\r\n            headers: {\r\n                'Accept': 'application/x-www-form-urlencoded',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        if (res.ok) {\r\n            let content = await res.json();\r\n            if (content.ok) {\r\n                this.YncProjectsResponse = JSON.parse(content);\r\n                if (this.YncProjectsResponse.code === 200) {\r\n                    this.YncProjectsItems = this.YncProjectsResponse.response;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    returnYncProject = (model: any) => {\r\n        this.returnCall(model);\r\n    }\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, FA } from 'tonva';\r\nimport { CLottery } from './CLottery';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { observable } from 'mobx';\r\nimport classNames from 'classnames';\r\n\r\n\r\nexport class VLottery extends VPage<CLottery> {\r\n    @observable currIndex: number;\r\n    @observable winning: any;   /* 中奖的商品 */\r\n    @observable isLottery: boolean = false;\r\n    @observable lotterySuccess: boolean = false;\r\n    @observable aDeg: any = 0;/* 轮盘转到度数 */\r\n    prize = [0, 1, 2, 5, 8, 7, 6, 3];//抽奖轮转顺序  九宫格\r\n    // prize = [0, 1, 2, 3, 4, 5, 6, 7];//抽奖轮转顺序     轮盘\r\n    async open(param?: any) {\r\n        // console.log(await this.controller.cApp.uqs.积分商城);\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private lottery = async () => {\r\n        let { lotteryProducts, productsLib, decreasingNumberOfDraws, winningProduct } = this.controller;\r\n        await decreasingNumberOfDraws();\r\n        let i = 0;//转到哪个位置\r\n        let count = 0;//转圈初始值\r\n        let totalCount = 9;//转动的总圈数\r\n        let speed = 500;//转圈速度，越大越慢\r\n        let timer: any;\r\n        /* ---------------- 轮盘转动 ---------------- */\r\n        // let aaaaa = Math.floor(Math.random() * (3600 - 1000) + 1000);\r\n        // let roll = () => {\r\n        //     this.aDeg += 10;\r\n        //     if (this.aDeg >= aaaaa) {\r\n        //         clearTimeout(timer);\r\n        //         this.isLottery = false; this.lotterySuccess = true;\r\n        //     } else\r\n        //         timer = setTimeout(roll, 50);\r\n        // }\r\n        // roll();\r\n        /* ---------------- 轮盘转动 ---------------- */\r\n        this.currIndex = undefined;\r\n        this.isLottery = true;\r\n        let indexMR = this.mR();//随机取值\r\n        let roll = async () => {\r\n            speed -= 50;//速度衰减\r\n            if (speed <= 10) speed = 10;\r\n            this.currIndex = this.prize[i];\r\n            i++;\r\n            if (i > this.prize.length - 1) {//计算转圈次数\r\n                i = 0; count++;\r\n            }\r\n            if (count >= totalCount && productsLib[indexMR].productId === lotteryProducts[this.currIndex].id) {//满足转圈数和指定位置就停止\r\n                clearTimeout(timer); speed = 500; this.isLottery = false; this.lotterySuccess = true; this.winning = lotteryProducts[this.currIndex];\r\n                await winningProduct(this.winning);\r\n            } else {\r\n                timer = setTimeout(roll, speed);//不满足条件时调用定时器\r\n                if (count >= totalCount - 1 || speed <= 50) speed += 100;//最后一圈减速\r\n            }\r\n        }\r\n        roll();\r\n    }\r\n\r\n    private mR = () => {\r\n        let { productsLib } = this.controller;\r\n        return Math.floor(Math.random() * (productsLib.length - 0) + 0);\r\n    }\r\n\r\n    private renderLotteryBtn = () => {\r\n        let { remainingNumOfDraws } = this.controller;\r\n        return <button className={classNames('btn btn-primary  align-self-center ', this.isLottery ? 'disabled pr-4' : '')} onClick={() => {\r\n            if (remainingNumOfDraws === 0) { this.lotterySuccess = true; return; }\r\n            if (!this.isLottery) { this.lottery() }\r\n        }}>{this.isLottery ? '抽奖中' : '开始抽奖'}\r\n            <span className=\" position-relative\" style={{ display: this.isLottery ? '' : 'none' }}>\r\n                <i className=\"fa-li fa fa-spinner fa-spin position-absolute\" style={{ left: -7 }}></i>\r\n            </span>\r\n        </button>\r\n    }\r\n\r\n    private renderPrizesBlock = (v: any, index: any) => {\r\n        let color = [0, 2, 4, 6].includes(index) ? '#A52A2A' : '#7EC0EE';\r\n        // Math.cos((45 / 2) * (Math.PI / 180)) * 160 / 2 可大约计算border的带宽,存在误差 (------思路错误，需修正)\r\n        // console.log(Math.sin((45) * (Math.PI / 180)) * 160 / 2);\r\n        return <div key={index}\r\n            style={{\r\n                transform: `rotate(${index * 45 - 90}deg) translateY(-50%)`, top: '50%', left: '50%', width: 0, height: 0, border: \"68px solid transparent\",\r\n                borderRight: `160px solid ${this.currIndex === index ? 'rgb(255,203,63)' : color}`, borderLeft: 0, transformOrigin: '0% 0%'\r\n            }}\r\n            className=\"position-absolute\">\r\n            <span className=\"position-absolute\" style={{ top: -10, left: 130, transform: 'rotate(90deg)' }}>{v.content}</span>\r\n        </div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { lotteryProducts, remainingNumOfDraws, openMyLotteryPrize } = this.controller;\r\n        let header = <div className=\"w-100 text-center\">幸运抽奖</div>;\r\n\r\n        return <Page header={header} right={<></>} className=\"w-100\">\r\n\r\n            <div className=\"position-relative\" style={{ background: `url(http://bpic.588ku.com/back_pic/04/70/62/26589975a47d9d0.jpg) no-repeat`, backgroundSize: 'cover', }}>\r\n                {/* <img style={{ visibility: 'hidden' }} width=\"100%\" src={timg1_test} alt=\"\" /> */}\r\n                <div className=\"w-100 pb-5\" >\r\n                    {/* 抽奖机会 */}\r\n                    <div className=\"d-flex justify-content-center text-light pt-5 mb-3\" >\r\n                        <span className=\"border border-light rounded px-2 bg-transparent\" style={{ padding: '2px 0' }}>\r\n                            剩余 <b className=\"bg-white p-1 text-danger\">{remainingNumOfDraws}</b> 次抽奖机会\r\n                        </span>\r\n                    </div>\r\n\r\n                    {/* 抽奖区域 */}\r\n                    <div className=\" pb-5 mx-2 rounded-lg w-auto\"\r\n                        style={{ background: \"url(https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1104137880,798719686&fm=26&gp=0.jpg) no-repeat\", backgroundSize: \"100% 100%\" }}>\r\n                        {/* 抽奖标题 */}\r\n                        <div className=\"d-flex justify-content-center p-2 pt-3 h3 text-center text-monospace font-weight-bolder\">\r\n                            <div className=\" position-relative\" style={{ color: \"#cc0000\" }}>\r\n                                <span style={{ top: 3, left: -30, transform: 'rotate(-12deg)' }} className=\"position-absolute\">福</span>\r\n                                利放\r\n                                <span style={{ top: 3, right: -30, transform: 'rotate(12deg)' }} className=\"position-absolute\">送</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 抽奖内容 */}\r\n                        {/* 轮盘--------------界面适配bug */} {/* overflow-hidden */}\r\n                        {/* <div className=\"border rounded-circle m-auto w-20c h-20c position-relative overflow-hidden\"\r\n                            style={{ transform: `rotate(${this.aDeg}deg)` }}>\r\n                            {lotteryProducts.map((v: any, index: number) => {\r\n                                return this.renderPrizesBlock(v, index);\r\n                            })}\r\n                            <div className=\"border rounded-circle position-absolute w-75 h-75 d-flex justify-content-center align-items-center\"\r\n                                style={{ top: '50%', left: '50%', transform: 'translate(-50%, -50%)', }}>\r\n                                {this.renderLotteryBtn()}\r\n                            </div>\r\n                        </div> */}\r\n                        {/* 九宫格 */}\r\n                        <div className='d-flex flex-wrap px-2 m-auto'>\r\n                            {lotteryProducts.map((v: any, index: number) => {\r\n                                if (index === 4) {\r\n                                    return <div className=\"d-flex justify-content-center\" key={index} style={{ width: '33.3%' }} >\r\n                                        {this.renderLotteryBtn()}\r\n                                    </div>\r\n                                }\r\n                                return <PointProductImage className={classNames('border', this.currIndex === index ? 'border-success' : '')} key={index} style={{ width: \"33.3%\" }} chemicalId={'1'} />\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                    {/* 我的奖品 */}\r\n                    <div className=\"mx-2 d-flex justify-content-center mt-2\" onClick={() => { if (!this.isLottery) openMyLotteryPrize() }}>\r\n                        <span style={{ borderRadius: \"22px\", color: '#F7C709' }} className=\"text-center py-1 px-3 bg-white\">\r\n                            <FA name='gift' /> <span style={{ color: 'rgb(152,42,7)' }} className=\"small\">我的奖品</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n\r\n            {/* 抽奖成功提示 */}\r\n            {\r\n                this.lotterySuccess ?\r\n                    <div className=\"position-fixed d-flex justify-content-center\"\r\n                        style={{ top: 0, left: 0, right: 0, bottom: 0, zIndex: 99999, backgroundColor: 'hsla(120,0%,50%,.7)' }}>\r\n                        <div className=\"align-self-center bg-white rounded-lg px-4 py-3 pb-4 text-center position-relative\">\r\n                            <div className=\"position-absolute\" style={{ top: 5, right: 10, }} onClick={() => { this.lotterySuccess = false; this.winning = undefined; }}><FA name=\"times-circle-o\" /></div>\r\n                            {\r\n                                remainingNumOfDraws === 0 && this.winning === undefined\r\n                                    ? <div className=\"pt-2\">\r\n                                        <div className=\"text-warning\"><FA name='frown-o' size='2x' /></div>\r\n                                        您的抽奖机会用完了！\r\n                                    </div>\r\n                                    : <div className=\"align-self-center bg-white rounded-lg  pt-3 text-center\">\r\n                                        <div>恭喜您</div>\r\n                                        <div>获得-----</div>\r\n                                        <div className=\"py-5\">展示</div>\r\n                                        <div className='small mt-2'>可以到我的奖品中去查看</div>\r\n                                    </div>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    : null\r\n            }\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, FA, List } from 'tonva';\r\nimport { CLottery } from './CLottery';\r\n\r\nexport class VMyLotteryPrize extends VPage<CLottery> {\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderMyPrize = (myPrize: any) => {\r\n        return <div>1111</div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { myPrizeLib, openMyPrizeOrder } = this.controller;\r\n        let footer = <div className=\"w-100 px-3 d-flex justify-content-end\">\r\n            <button type=\"button\" className=\"btn btn-danger m-1\" onClick={openMyPrizeOrder}>领取奖品</button>\r\n        </div>\r\n\r\n        return <Page header='我的奖品' footer={footer}>\r\n            <List items={myPrizeLib} item={{ render: this.renderMyPrize }} none='无' />\r\n        </Page >\r\n    })\r\n}","import { BoxId } from 'tonva';\r\nimport { observable, computed } from 'mobx';\r\n\r\nexport class prizeOrder {\r\n\r\n    webUser: any;   // OK\r\n    organization: BoxId;\r\n    customer: any;  //OK\r\n    salesRegion: BoxId;   // OK\r\n\r\n    @observable shippingContact: BoxId; //OK\r\n    @observable exchangeItems: prizeOrderItem[] = [];\r\n\r\n    @computed get amount() {\r\n        return this.exchangeItems.reduce((pv, cv) => (pv + cv.subAmount), 0);\r\n    };\r\n\r\n    getDataForSave() {\r\n        let exchangeItems: any[] = [];\r\n        this.exchangeItems.forEach(oi => {\r\n            exchangeItems.push({\r\n                product: oi.product, pack: oi.pack, point: oi.point, quantity: oi.quantity\r\n                , subAmount: oi.quantity * oi.point\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            amount: this.amount,\r\n            exchangeitems: exchangeItems, // 前面的必须是小写的\r\n            salesRegion: this.salesRegion\r\n        }\r\n    }\r\n}\r\n\r\nexport class prizeOrderItem {\r\n    product: BoxId;\r\n    @observable pack: BoxId;\r\n    @observable quantity: any;\r\n    @observable point: any;\r\n    @observable imageUrl: any;\r\n    @observable description: any;\r\n    @observable descriptionC: any;\r\n    @observable grade: any;\r\n    @computed get subAmount() {\r\n        return this.quantity * this.point;\r\n    }\r\n}","import { CUqBase } from 'CBase';\r\nimport { VLottery } from './VLottery';\r\nimport { observable } from 'mobx';\r\nimport { VMyLotteryPrize } from './VMyLotteryPrize';\r\nimport { VMyPrizeExchangeOrder } from './VExchangeOrder';\r\nimport { prizeOrder, prizeOrderItem } from './prizeOrder';\r\n\r\nexport class CLottery extends CUqBase {\r\n    @observable lotteryProducts: any[] = [];        /* 抽奖产品列表 */\r\n    @observable remainingNumOfDraws: number = 1;    /* 剩余抽奖次数 */\r\n    @observable productsLib: any[] = [];            /* 抽奖产品集合（加概率） */\r\n    @observable myPrizeLib: any[] = [];             /* 我的奖品 */\r\n    @observable totalNumPrizes: number = 10000;      /* 奖品总量 */\r\n    @observable prizeOrderData: prizeOrder = new prizeOrder();\r\n\r\n    async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 抽奖界面\r\n     */\r\n    openLotteryProduct = async () => {\r\n        await this.getLotteryProducts();\r\n        await this.getLotteryNumOfDraws();\r\n        this.basedChanceHandlePrizes();\r\n        this.openVPage(VLottery);\r\n    }\r\n\r\n    /**\r\n     * 我的奖品界面\r\n     */\r\n    openMyLotteryPrize = async () => {\r\n        await this.getMyPrizes();\r\n        this.openVPage(VMyLotteryPrize);\r\n    }\r\n\r\n    /**\r\n    * 奖品领取预览界面\r\n    */\r\n    openMyPrizeOrder = async () => {\r\n        let { cPointProduct } = this.cApp;\r\n        if (this.prizeOrderData.shippingContact === undefined) {\r\n            this.prizeOrderData.shippingContact = await cPointProduct.getDefaultShippingContact();\r\n        }\r\n        this.openVPage(VMyPrizeExchangeOrder);\r\n    }\r\n\r\n    /**\r\n     * 中奖获得的产品\r\n     */\r\n    winningProduct = async (winning: any) => {\r\n        console.log('winning', winning);\r\n        await this.addMyPrize(winning);\r\n    }\r\n\r\n    /**\r\n     * 抽奖次数递减\r\n     */\r\n    decreasingNumberOfDraws = async () => {\r\n        this.remainingNumOfDraws -= 1;\r\n        // await this.uqs.积分商城.\r\n    }\r\n\r\n    /**\r\n     * 获取可抽奖次数\r\n     */\r\n    getLotteryNumOfDraws = async () => {\r\n        // this.remainingNumOfDraws = await this.uqs.积分商城.\r\n    }\r\n\r\n    /**\r\n     * 获取抽奖产品列表\r\n     */\r\n    getLotteryProducts = async () => {//PR\r\n        // this.lotteryProducts = await this.uqs.积分商城.\r\n        this.lotteryProducts = [\r\n            { id: 1, content: '111', p: '1', PR: 15 },\r\n            { id: 2, content: '222', p: '4', PR: 20 },\r\n            { id: 3, content: '333', p: '5', PR: 5 },\r\n            { id: 4, content: '444', p: '1', PR: 10 },\r\n            { id: 5, content: '555', p: '1', PR: 10 },\r\n            { id: 6, content: '666', p: '8', PR: 20 },\r\n            { id: 7, content: '777', p: '2', PR: 5 },\r\n            { id: 8, content: '888', p: '7', PR: 15 },\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * 据概率处理抽奖商品\r\n     */\r\n    basedChanceHandlePrizes = () => {\r\n        let arr = [], minPrice = this.lotteryProducts[0];\r\n        for (let key of this.lotteryProducts) {\r\n            if (minPrice.p >= key.p && minPrice.PR > key.PR) minPrice = key;\r\n            let base = key.PR * this.totalNumPrizes / 100;\r\n            arr.push(Array.from(Array(base), (v, k) => { return { productId: key.id, content: key.content } }));\r\n        }\r\n        let shift = arr.flat();\r\n        this.productsLib = shift;\r\n        let total = this.productsLib.length;\r\n\r\n        if (total !== this.totalNumPrizes) {\r\n            for (let i = 0; i < (this.totalNumPrizes - total); i++)  //找8个商品中价值最小的\r\n                this.productsLib.push({ productId: minPrice.id, content: minPrice.content });//productId 暂未定\r\n        }\r\n\r\n        //乱序\r\n        let { length } = this.productsLib, i;\r\n        while (length) {\r\n            i = (Math.random() * length--) >>> 0;\r\n            [this.productsLib[length], this.productsLib[i]] = [this.productsLib[i], this.productsLib[length]]\r\n        }\r\n\r\n        this.lotteryProducts.splice(this.lotteryProducts.length / 2, 0, {}); // 九宫格 使用\r\n    }\r\n\r\n    /**\r\n     * 抽中的产品添加至我的奖品列表   ------------------ 需uq \r\n     */\r\n    addMyPrize = async (prize: any) => {\r\n        // await this.uqs.积分商城\r\n    }\r\n\r\n    /**\r\n     * 获取我的奖品\r\n     */\r\n    getMyPrizes = async () => {\r\n        this.myPrizeLib = [];\r\n        // await this.uqs.积分商城\r\n    }\r\n\r\n    private createOrderFromCart = async () => {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        this.prizeOrderData.webUser = currentUser.id;\r\n        this.prizeOrderData.salesRegion = currentSalesRegion.id;\r\n        if (currentUser.currentCustomer !== undefined) {\r\n            this.prizeOrderData.customer = currentUser.currentCustomer.id;\r\n        }\r\n\r\n        /* if (this.myPrizeLib !== undefined && this.myPrizeLib.length > 0) {\r\n            this.prizeOrderData.exchangeItems = this.myPrizeLib.map((e: any) => {\r\n                if (e.quantity > 0) {\r\n                    var item = new prizeOrderItem();\r\n                    item.product = e.id;\r\n                    item.pack = e.pack;\r\n                    item.quantity = e.quantity;\r\n                    item.point = e.point;\r\n                    return item;\r\n                }\r\n            });\r\n        } */\r\n    }\r\n\r\n    /**\r\n     * 确认领取(成功 VMyPrizeExchangeOrder 确认使用此函数)\r\n     */\r\n    submitOrder = async () => {\r\n        this.createOrderFromCart();\r\n        console.log(this.prizeOrderData);\r\n\r\n        // let PointExchangeSheet = this.uqs.积分商城.PointExchangeSheet;\r\n        // let getDataForSave = this.orderData.getDataForSave();\r\n        // let result: any = await PointExchangeSheet.save(\"PointExchangeSheet\", getDataForSave);\r\n        // let { id, flow, state } = result;\r\n        // await PointExchangeSheet.action(id, flow, state, \"submit\");\r\n\r\n\r\n        // 打开下单成功显示界面\r\n        // nav.popTo(this.cApp.topKey);\r\n        // this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        let { cPointProduct } = this.cApp;\r\n        this.prizeOrderData.shippingContact = await cPointProduct.selectContact()\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, DropdownAction, DropdownActions, FA, nav } from 'tonva';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { observable } from 'mobx';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { signViceMap, signTopicMap, Homemadelogo, logo } from 'tools/images';\r\nimport { CSignIn } from './CSignIn';\r\nimport { RevenueExpenditure } from './basicRefer';\r\nimport classNames from 'classnames';\r\nimport moment from 'moment';\r\nimport 积分图标P from 'images/积分图标P.png'\r\nimport 已签到 from 'images/已签到.png'\r\n\r\nexport const daysAndMultipleByWelfare = [\r\n    { id: 1, days: 7, multiple: 2 },\r\n    { id: 2, days: 15, multiple: 3 },\r\n    { id: 3, days: 30, multiple: 4 },\r\n    { id: 4, days: 180, multiple: 5 },\r\n    { id: 5, days: 365, multiple: 6 }\r\n];\r\n\r\nexport class VPointSign extends VPage<CSignIn> {\r\n    @observable showTips: any = \"none\";\r\n    rulesNum: number = 0;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderRule = (rulesNum: any, ruleContent: any) => {\r\n        return <div key={rulesNum} className=\" mb-3 d-flex\" style={{ boxShadow: \"0px 1px 3px #333333\", borderRadius: \"8px\" }}>\r\n            <span className=\"h4 m-0 p-2  align-self-center\" style={{ borderRight: '1px dashed #cccccc' }}>\r\n                {String(rulesNum).padStart(2, '0')}\r\n            </span>\r\n            <div className=\"initialism modal-title flex-fill p-2  align-self-center\">{ruleContent}</div>\r\n        </div>\r\n    }\r\n\r\n    private demandBlock = (name: string, icon: string, color: string, action: any) => {\r\n        return <div onClick={action} className=\"w-25 text-center p-2\" style={{ color }}>\r\n            <FA name={icon} size=\"2x\" />\r\n            <div className=\"small\">{name}</div>\r\n        </div>\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { IsSignin, signinval, signinConsecutiveDays, openRevenueExpenditure, cApp } = this.controller;\r\n        let { cLottery } = cApp;\r\n        let date = moment().format('YYYY-MM-DD').split('-');\r\n        let timer = `${date[0]} 年 ${date[1]} 月 ${date[2]} 日 `;\r\n\r\n        // if (IsSignin) this.handleChange();\r\n        let actions: DropdownAction[] = [\r\n            {\r\n                icon: 'get-pocket',\r\n                caption: RevenueExpenditure.SIGNINHISTORY,\r\n                action: () => openRevenueExpenditure(RevenueExpenditure.SIGNINHISTORY)\r\n            }\r\n        ];\r\n        let right = <DropdownActions className=\"align-self-center mr-1 bg-transparent border-0 text-light\" icon=\"navicon\" actions={actions} />;\r\n\r\n        return <Page header='签到' right={right}>\r\n            <div className=\"text-center text-light px-5 pt-5\"\r\n                style={{ background: `url(${signTopicMap}) no-repeat`, backgroundSize: \"100% 100%\" }}>\r\n                {/* <div className=\"rounded-circle mx-auto\"\r\n                    style={{ background: 'linear-gradient(#FCF4F3 15%, #EFDCD4, #CC9287, #C17162, #A93338, #A52230)', padding: '.8rem', width: '10rem', height: '10rem' }}>\r\n                    <div className=\"w-100 h-100 rounded-circle pt-3\" style={{ background: \"#A52230\" }}>\r\n                        <div className=\"small pt-2\">已连续签到</div>\r\n                        <div className=\"d-flex align-items-end justify-content-center\">\r\n                            <span className=\"font-weight-bolder display-4\">{signinConsecutiveDays} </span>\r\n                            <span className=\"mb-1 pb-2 ml-1\"> 天</span>\r\n                        </div>\r\n                    </div>\r\n                </div> */}\r\n                <div className=\"pb-5\">\r\n                    <div className=\"h4\">{timer}</div>\r\n                    {\r\n                        IsSignin ? <>\r\n                            <img src={积分图标P} alt=\"\" className=\"h-5c\" />\r\n                            <div className=\"pt-3\">\r\n                                <span className=\"bg-white px-3 py-1 font-weight-bolder\" style={{ borderRadius: \"25px\", color: 'rgb(165,34,48)' }}>本次签到获取{signinval}分</span>\r\n                            </div>\r\n                        </>\r\n                            : <>\r\n                                <img src={已签到} alt=\"\" className=\"h-4c mb-3 mt-2\" />\r\n                                <div className=\"mb-2 h5\">今日已签到</div> \r\n                            </>\r\n                    }\r\n                    {/* <div className=\"my-4 h5\">今日已签到</div> */}\r\n                </div>\r\n                {/* <div className=\"rounded-circle mx-auto w-12c h-12c\"\r\n                    style={{ background: 'linear-gradient(#FCF4F3 15%, #EFDCD4, #CC9287, #C17162, #A93338, #A52230)', padding: '.8rem' }}>\r\n                    <div className=\"w-100 h-100 rounded-circle pt-3\" style={{ background: \"#A52230\" }}>\r\n                        <div className=\"pt-4\">已连续签到</div>\r\n                        <div className=\"d-flex align-items-end justify-content-center\">\r\n                            <span className=\"font-weight-bolder display-4\">{signinConsecutiveDays} </span>\r\n                            <span className=\"mb-1 pb-2 ml-1\"> 天</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"small\" style={{ transform: 'translateY(-30px)' }}>\r\n                    <span className=\"bg-white px-3 py-1 font-weight-bolder\" style={{ borderRadius: \"25px\", color: 'rgb(165,34,48)' }}>本次签到获取{signinval}分</span>\r\n                    <div className=\"small mt-2\">连续签到30天，可获得1次抽奖机会</div>\r\n                </div> */}\r\n            </div>\r\n            <div className=\"w-100 p-5 mt-4 d-flex justify-content-center flex-column\" >\r\n                <img src={Homemadelogo} alt=\"\" className=\"w-100 mx-auto\" style={{ opacity: .1, transform: 'skew(-10deg, 0deg)' }} />\r\n            </div>\r\n\r\n            {/* 抽奖 */}\r\n            {/* <div style={{ background: `url(${signViceMap})`, backgroundSize: \"100%\" }} className=\"h-20c\">\r\n                <div className=\"mx-5 mt-2 py-1 d-flex justify-content-center flex-wrap\" style={{ boxShadow: \"0px 1px 3px #333333\", borderRadius: \"8px\" }}>\r\n                    {this.demandBlock('抽奖', 'life-ring', '#CD6600', cLottery.openLotteryProduct)}\r\n                </div>\r\n            </div> */}\r\n\r\n            {/* 签到规则 */}\r\n            {/* <div className=\"pt-4 px-4 mt-4\">\r\n                <p className=\"text-center mb-4\"><span style={{ borderRadius: \"22px\", background: \"#D56F2B\" }} className=\"text-center py-2 px-3 text-white\">签到规则</span></p>\r\n                {this.renderRule(1, '连续签到30天，可获得1次抽奖机会')}\r\n                {this.renderRule(2, '若累计签到中断,则重新计算签到天数。')}\r\n            </div> */}\r\n\r\n            {/* <small style={{ color: 'rgb(255,192,120)' }} >连续签到{welfare.days}天，可获得{welfare.multiple}倍的积分奖励</small> */}\r\n            {/* 签到获取提示 */}\r\n            {/* <div className=\"text-left small w-100 pt-1 pl-2 position-absolute text-body\"\r\n                style={{ top: 0, left: 0, display: this.showTips }}>本次签到获取{signinval}分</div> */}\r\n        </Page >;\r\n\r\n        /* return <Page header='签到领积分' right={right}>\r\n            <div className=\"text-center \" style={{ position: \"relative\", background: \"linear-gradient(rgb(253, 98, 52), rgb(250, 51, 82))\", padding: '3rem' }}>\r\n                <div className=\"d-flex justify-content-center\" style={{ flexDirection: 'column', margin: '0 4rem' }}>\r\n                    <h2 style={{ color: 'rgb(255,192,120)' }} className=\"mb-3\">\r\n                        <FA name='diamond' /> <span className=\"text-light\"><small>x</small> {this.signinval}</span>\r\n                    </h2>\r\n                    {getSignpoint}\r\n                </div>\r\n                <div className=\"text-center text-white small w-100 p-1 alert alert-warning text-muted\" style={{\r\n                    position: \"absolute\", top: 0, left: 0, display: this.showTips\r\n                }}>本次签到获取{this.signinval}分</div>\r\n            </div>\r\n            // <div className=\"text-center my-1 p-1  bg-white\" style={{ borderBottom: \".5px solid #ccc\" }}>签到积分详情</div>\r\n            // <List items={signinPageHistory} item={{ render: renderPointRecord }} none={none} />\r\n        </Page >; */\r\n    })\r\n\r\n\r\n    protected handleChange = async () => {\r\n        this.showTips = \"\";\r\n        if (!this.showTips)\r\n            setTimeout(() => { this.showTips = \"none\"; this.controller.IsSignin = false }, GLOABLE.TIPDISPLAYTIME);\r\n    }\r\n}\r\n","import { CUqBase } from 'CBase';\r\nimport { observable } from 'mobx';\r\nimport { QueryPager } from 'tonva';\r\nimport { VPointSign, daysAndMultipleByWelfare } from './VPointSign';\r\nimport { VRevenueExpenditure } from './VRevenueExpenditure';\r\n\r\nconst pointBase: number = 3; /* 积分基数 */\r\n\r\nexport class CSignIn extends CUqBase {\r\n    @observable signinval: number = pointBase;         /* 签到可领积分 */\r\n    @observable signinConsecutiveDays: number = 0;     /* 连续签到天数 */\r\n    @observable IsSignin: boolean = false;             /* 是否签到 */\r\n    @observable signinPageHistory: QueryPager<any>;    /* 签到记录 */\r\n\r\n    async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 签到   ------------------ 需调用连续签到天数 uq:this.getSigninConsecutiveDays --------------------\r\n     */\r\n    openPointSign = async () => {\r\n        await this.isSignined();\r\n        if (this.IsSignin)\r\n            await this.addSigninSheet(47, this.signinval);\r\n        await this.getSigninConsecutiveDays();\r\n        this.openVPage(VPointSign);\r\n    }\r\n\r\n    /**\r\n    * 签到明细页面\r\n    */\r\n    openRevenueExpenditure = async (topic?: any) => {\r\n        await this.getSigninHistory();\r\n        this.openVPage(VRevenueExpenditure, topic)\r\n    }\r\n\r\n    /**\r\n     * 是否签到\r\n     */\r\n    isSignined = async () => {\r\n        let { checkIsSignin } = this.uqs.积分商城;\r\n        let res = await checkIsSignin.obj({});\r\n        this.IsSignin = res.result === 0 ? true : false;\r\n    }\r\n\r\n    /**\r\n     * 签到添加积分到\r\n     */\r\n    addSigninSheet = async (customer: any, amount: any) => {\r\n        let { cPointProduct } = this.cApp;\r\n        let { Signin } = this.uqs.积分商城;\r\n        customer = this.cApp.currentUser.currentCustomer;\r\n        customer = customer ? customer : this.user.id;\r\n        await Signin.submit({ webuser: this.user.id, customer: customer, amount: amount });\r\n        await cPointProduct.refreshMypoint();\r\n        // await this.getSigninConsecutiveDays();\r\n        // await this.getSigninHistory();\r\n        // await this.getPointHistory();\r\n\r\n        /**\r\n        let result: any = await SigninSheet.save(\"SigninSheet\", { customer: customer, amount: amount });\r\n        console.log(this.cApp.currentUser);\r\n        let { id, flow, state } = result;\r\n        await SigninSheet.action(id, flow, state, \"submit\");\r\n        await Signin.submit({ webbuser: 47, customer: 47, amount: 3 });\r\n        **/\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取签到记录\r\n     */\r\n    getSigninHistory = async () => {\r\n        this.signinPageHistory = new QueryPager(this.uqs.积分商城.GetPointSigninHistory, 15, 30);\r\n        this.signinPageHistory.first({});\r\n    }\r\n\r\n    /**\r\n     * 连续签到天数  webUser  ----------------------------需uq --------------------------------\r\n     */\r\n    getSigninConsecutiveDays = async () => {\r\n        // this.signinConsecutiveDays \r\n        await this.getSigninHistory();\r\n\r\n    }\r\n\r\n    /**\r\n     * 福利：连续签到 数倍积分（弃用）\r\n     */\r\n    /* multiplePointsWelfare = () => {\r\n        let arr = daysAndMultipleByWelfare;\r\n        if (this.IsSignin) this.signinConsecutiveDays += 1;\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (this.signinConsecutiveDays < arr[i].days) {\r\n                if (i === 0) this.signinval = pointBase;\r\n                else this.signinval = pointBase * arr[i - 1].multiple;\r\n                return arr[i];\r\n            } else if (this.signinConsecutiveDays >= arr[i].days && i === (arr.length - 1)) {\r\n                this.signinval = pointBase * arr[i].multiple;\r\n                return arr[i];\r\n            }\r\n        }\r\n    } */\r\n\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, FA, List, tv } from 'tonva';\r\nimport { CPayment } from './CPayment';\r\nimport { observable } from 'mobx';\r\nimport classNames from 'classnames';\r\nimport { wxpaylogo, alipaylogo, wxpayproposed, alipayproposed, unionpaylogo } from 'tools/images';\r\nimport moment from 'moment';\r\n\r\nconst PayModes = [\r\n    { id:1, key:0, name:'微信支付', type:'wxpay', description:\"亿万用户的选择，更快更安全\", icon:wxpaylogo, \r\n        cornerMarker:wxpayproposed ,isPPSD:true, exponent:15 },\r\n    /* { id:2, key:1, name:'支付宝', type:'alipay', description:\"10亿用户都在用，真安全，更放心\", icon:alipaylogo, \r\n        cornerMarker: alipayproposed, isPPSD: true, exponent:20 }, */\r\n    /* { id:3, key:2, name:'云闪付', type:'alipay', description:\"\", icon:unionpaylogo, \r\n        cornerMarker:alipayproposed ,isPPSD:false, exponent:10 }, */\r\n];\r\n\r\ninterface OrderBrief{\r\n    orderNo: string,\r\n    amount: number,\r\n    currency: string | JSX.Element,\r\n}\r\n\r\nexport class VPayment extends VPage<CPayment> {\r\n    @observable selectPayMode: any;\r\n    @observable allPayMode: any[];\r\n    @observable orderBrief: OrderBrief = {\r\n        orderNo: moment().format('YY-MM-DD').replace(/\\-/g, '') + '000000',\r\n        amount: Number(moment().format('YYYY')),\r\n        currency:'RMB'\r\n    }\r\n\r\n    async open(param?: any) {        \r\n        this.resetPayModes();\r\n        this.chosenOrderBrief();\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    resetPayModes = () => {\r\n        PayModes.sort((a: any, b: any) => b.exponent - a.exponent);\r\n        let PPSD = PayModes.filter(v => v.isPPSD);\r\n        let OTHER = PayModes.filter(v => !v.isPPSD);\r\n        let allPayMode = [...PPSD, ...OTHER];\r\n        allPayMode.forEach((v: any, index: number) => v.key = index);\r\n        this.allPayMode = allPayMode;\r\n        this.selectPayMode = this.allPayMode[0];\r\n    }\r\n\r\n    chosenOrderBrief = () => {\r\n        let { payByOrder } = this.controller;\r\n        if (payByOrder) {\r\n            let { brief, data } = payByOrder;\r\n            this.orderBrief = {\r\n                orderNo:brief.on,\r\n                amount:data.amount,\r\n                currency:tv(data.currency)\r\n            }\r\n        }\r\n    }\r\n\r\n    payModeItem = (payMode: any,index:number) => {\r\n        let { name, description, icon, cornerMarker, isPPSD } = payMode;\r\n        let isCheck = this.selectPayMode.key === index;\r\n        return <div className=\"row mx-0 pl-1 py-3\">\r\n            <div className=\"col-2 pr-0 align-self-center\"><img src={icon} alt=\"\" className=\"w-75\" /></div>\r\n            <div className=\"col-8 pl-1 align-self-center reset-z-fontSize\">\r\n                <div>{name} <img src={isPPSD ? cornerMarker :undefined} alt=\"\" className=\"mb-1\" style={{height:'16px'}} /></div>\r\n                <small className=\"text-muted\">{description}</small>\r\n            </div>\r\n            <div className=\"col-2 text-center pr-0 align-self-center\">\r\n                <FA size=\"lg\" name={isCheck ?  'check-circle' : 'circle-thin'}\r\n                className={classNames(isCheck ? 'text-primary' : '')} />\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    choosePayMode = async (payMode: any) => {\r\n        this.selectPayMode = payMode;\r\n    }\r\n\r\n    toPay = async () => {\r\n        let { submitPayOrder } = this.controller;\r\n        await submitPayOrder(this.selectPayMode);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { orderNo, amount, currency }=this.orderBrief;\r\n        let header = <div className=\"w-100 text-center\">百灵威收银台</div>;\r\n        let footer = <button className=\"w-100 btn btn-primary\" onClick={this.toPay}>确认支付</button>;\r\n        return <Page header={header} right={<></>} footer={footer} className=\"w-100\">\r\n                <div className=\"bg-white text-center py-4\" >\r\n                实付金额<h4 className=\"mt-1\">{amount} {currency}</h4>\r\n                </div>\r\n                <div className=\"bg-white mt-2\">\r\n                    <div className=\"pl-2 py-1 text-muted\">选择支付方式</div>\r\n                    <List items={this.allPayMode} item={{ render: this.payModeItem,onClick:this.choosePayMode }} />\r\n                </div>\r\n        </Page >\r\n    })\r\n}","import { CUqBase } from 'CBase';\r\nimport { log } from 'console';\r\nimport { observable } from 'mobx';\r\nimport { browser } from 'tools/browser';\r\nimport { VPayment } from './VPayment';\r\nimport { GLOABLE } from \"cartenv\";\r\n\r\nlet pays:any = {};\r\n\r\nexport class CPayment extends CUqBase {\r\n    @observable payByOrder: any;\r\n    async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 支付界面\r\n     */\r\n    openPayment = async (order?: any) => {\r\n        this.payByOrder = order;\r\n        await this.getChannels();\r\n        this.openVPage(VPayment);\r\n    }\r\n\r\n    /** 获取支付通道 */\r\n    getChannels = async () => {\r\n        if (browser.versions.html5Plus) { \r\n            // @ts-ignore\r\n            await plus.payment.getChannels((channels: any) => {\r\n                console.log(JSON.stringify(channels));\r\n                for(let i in channels){\r\n                    let channel = channels[i];\r\n                    pays[channel.id] = channel;\r\n                }\r\n            }, (e: Error) => { console.log(e.message) });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 支付\r\n     */\r\n    submitPayOrder = async (payMode: any) => {\r\n        let { type } = payMode;\r\n        let { brief } = this.payByOrder;\r\n        if (browser.versions.html5Plus) {\r\n            // @ts-ignore http://211.5.9.39:6061\r\n            let url = `${GLOABLE.CONTENTSITE}/partial/orderPayment/${type}/JKChemical/201119000001`;\r\n            console.log(JSON.stringify(url));\r\n            let res = await window.fetch(url);\r\n            console.log(JSON.stringify(res));\r\n            if (res.ok) {\r\n                let A = await res.text();\r\n                await console.log(A);\r\n            }\r\n            // @ts-ignore\r\n            /* var xhr = new plus.net.XMLHttpRequest();\r\n            xhr.onreadystatechange=function(){\r\n                switch(xhr.readyState){\r\n                    case 4:\r\n                    if(xhr.status==200){\r\n                        console.log('----- 请求订单成功 -----');\r\n                        console.log(xhr.responseText);\r\n                        let order = xhr.responseText;\r\n                        // @ts-ignore\r\n                        plus.payment.request(pays[type],order,function(result:any){\r\n                            // console.log('----- 支付成功 -----',JSON.stringify(result));\r\n                        }, (e:any)=>{\r\n\t\t\t\t\t        console.log('----- 支付失败 -----');\r\n                            console.log('[' + e.code + ']：' + e.message);\r\n\t\t\t\t        });\r\n                    }else{\r\n                       console.log('----- 请求订单失败 -----');\r\n                       console.log( xhr.status );\r\n                    }\r\n                    break;\r\n                    default:\r\n                    break;\r\n                }\r\n            }\r\n            xhr.open('GET',url);\r\n            xhr.send(); */\r\n        };\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { CAppBase, IConstructor, User, nav, Elements, Query } from 'tonva';\r\n//import { UQs } from \"./uqs\";\r\nimport { Cart } from \"./cart/Cart\";\r\nimport { WebUser } from \"./CurrentUser\";\r\nimport { CHome } from \"./home\";\r\nimport { CCart } from \"./cart\";\r\nimport { CProduct } from \"./product\";\r\nimport { COrder } from \"./order/COrder\";\r\nimport { CProductCategory } from \"./productCategory/CProductCategory\";\r\nimport { CMember } from \"./member\";\r\nimport { CMe } from \"./me/CMe\";\r\nimport { CUqApp } from \"./CBase\";\r\nimport { VMain } from 'ui/main';\r\nimport * as qs from 'querystringify';\r\nimport { CCoupon } from \"coupon/CCoupon\";\r\nimport { CPointProduct } from \"pointMarket/CPointProduct\";\r\nimport { GLOABLE } from \"cartenv\";\r\nimport { CYncProjects } from \"ync/CYncProjects\";\r\nimport { CFavorites } from 'customer/CFavorites';\r\nimport { CLottery } from 'pointMarket/CLottery';\r\nimport { CSignIn } from 'pointMarket/CSignIn';\r\nimport { CPayment } from 'payment/CPayment';\r\n\r\nexport class CApp extends CUqApp {\r\n    //get uqs(): UQs { return this._uqs as UQs };\r\n\r\n    cart: Cart;\r\n    topKey: any;\r\n\r\n    currentSalesRegion: any;\r\n    currentLanguage: any;\r\n    currentUser: WebUser;\r\n    // currentCouponCode: string;\r\n    // currentCreditCode: string;\r\n\r\n    cHome: CHome;\r\n    cCart: CCart;\r\n    cProduct: CProduct;\r\n    cOrder: COrder;\r\n    cCoupon: CCoupon;\r\n    cProductCategory: CProductCategory;\r\n    cMember: CMember;\r\n    cMe: CMe;\r\n    cPointProduct: CPointProduct;\r\n    cFavorites: CFavorites;\r\n    cYncProjects: CYncProjects;\r\n    cLottery: CLottery;\r\n    cSignIn: CSignIn;\r\n    cPayment: CPayment;\r\n\r\n    /*\r\n    protected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n        return new type(this);\r\n    }\r\n    */\r\n\r\n    private setUser() {\r\n        this.currentUser = new WebUser(this.uqs); //this.cUqWebUser, this.cUqCustomer);\r\n        if (this.isLogined) {\r\n            this.currentUser.setUser(this.user);\r\n        }\r\n    }\r\n\r\n    protected async internalStart() {\r\n        let { uqs } = this;\r\n        let { common } = uqs;\r\n        let { SalesRegion, Language } = common;\r\n        let [currentSalesRegion, currentLanguage] = await Promise.all([\r\n            SalesRegion.load(GLOABLE.SALESREGION_CN),\r\n            Language.load(GLOABLE.CHINESE),\r\n        ]);\r\n        this.setUser();\r\n        //this.currentSalesRegion = await this.uqs.common.SalesRegion.load(GLOABLE.SALESREGION_CN);\r\n        //this.currentLanguage = await this.uqs.common.Language.load(GLOABLE.CHINESE);\r\n        this.currentSalesRegion = currentSalesRegion;\r\n        this.currentLanguage = currentLanguage;\r\n\r\n        this.cart = new Cart(this);\r\n        await this.cart.init();\r\n\r\n        this.cProductCategory = this.newC<CProductCategory>(CProductCategory);\r\n        this.cCart = this.newC(CCart);\r\n        this.cHome = this.newC(CHome);\r\n        this.cProduct = this.newC(CProduct);\r\n        this.cOrder = this.newC(COrder);\r\n        this.cCoupon = this.newC(CCoupon);\r\n        this.cMember = this.newC(CMember);\r\n        this.cMe = this.newC(CMe);\r\n        this.cPointProduct = this.newC(CPointProduct);\r\n        this.cFavorites = this.newC(CFavorites);\r\n        this.cYncProjects = this.newC(CYncProjects);\r\n        this.cLottery = this.newC(CLottery);\r\n        this.cSignIn = this.newC(CSignIn);\r\n        this.cPayment = this.newC(CPayment);\r\n\r\n        await this.cHome.getSlideShow();\r\n\r\n        let promises: PromiseLike<void>[] = [];\r\n        promises.push(this.cProductCategory.start());\r\n        await Promise.all(promises);\r\n        // this.cMe.openMyPoint();\r\n        // this.cLottery.openLotteryProduct();\r\n        // this.cSignIn.openPointSign();\r\n\r\n        let { location } = document;\r\n        let { search, pathname } = location;\r\n        if (search) {\r\n            let query: any = qs.parse(search.toLowerCase());\r\n            switch (query.type) {\r\n                case \"privacy\":\r\n                    this.showMain();\r\n                    this.cMe.openPrivacy();\r\n                    break;\r\n                case \"product\":\r\n                    this.showMain();\r\n                    let prouductBoxId = await this.uqs.product.ProductX.boxId(query.product).assure();\r\n                    await this.cProduct.showProductDetail(prouductBoxId);\r\n                    break;\r\n                case \"coupon\":\r\n                    this.showMain();\r\n                    if (query.coupon)\r\n                        await this.cCoupon.showSharedCoupon(query);\r\n                    break;\r\n                case \"credits\":\r\n                    this.showMain();\r\n                    if (query.credits) {\r\n                        await this.cCoupon.showSharedCredits(query);\r\n                        /*\r\n                        if (query.platform === \"1\")\r\n                            await this.cPointProduct.openPointDrawing(query.credits);\r\n                        else\r\n                            await this.cCoupon.showSharedCredits(query);\r\n                        */\r\n                    }\r\n                    break;\r\n                case \"vipcard\":\r\n                    this.showMain();\r\n                    if (query.vipcard)\r\n                        await this.cCoupon.showSharedVIPCard(query);\r\n                    break;\r\n                case \"login\":\r\n                    if (!this.isLogined)\r\n                        this.cMe.showLogin(async (user: User) => {\r\n                            window.location.href = window.location.origin;\r\n                        });\r\n                    break;\r\n                case \"loginout\":\r\n                    if (this.isLogined)\r\n                        this.cMe.showLoginOut(async () => {\r\n                            window.location.href = window.location.origin;\r\n                        });\r\n                    break;\r\n                case \"cart\":\r\n                    this.cCart.start();\r\n                    break;\r\n                case \"productlist\":\r\n                    this.cProduct.start(query.key);\r\n                    break;\r\n                case \"me\":\r\n                    this.cMe.openMyOrders('all');\r\n                    break;\r\n                default:\r\n                    this.showMain();\r\n                    break;\r\n            }\r\n        } else {\r\n            this.showMain();\r\n        }\r\n        this.topKey = nav.topKey();\r\n    }\r\n\r\n    showMain(initTabName?: string) {\r\n        this.openVPage(VMain, initTabName);\r\n        let divLogin = document.getElementById('login');\r\n        if (divLogin) {\r\n            // this.openPage(this.cCart.renderCartLabel());\r\n            this.openPage(this.cMe.renderLoginState());\r\n        }\r\n    }\r\n\r\n    protected afterStart = async () => {\r\n\r\n        // elements定义div元素id与一个函数的对应关系，定义之后，\r\n        // 当在页面上存在相应id的div元素时，则执行其对应的函数，并将函数执行的结果(UI)挂载在该div上 \r\n        let elements: Elements = {\r\n            login: this.showLogin,\r\n            productlist: this.productList,\r\n            productdetail: this.productDetail,\r\n            carts: this.carts,\r\n        }\r\n\r\n        this.hookElements(elements);\r\n\r\n        window.onfocus = () => {\r\n            this.hookElements(elements);\r\n        }\r\n        return;\r\n    }\r\n\r\n    private showLogin = (element: HTMLElement) => {\r\n        ReactDOM.render(this.cMe.renderLoginState_Web(), element);\r\n    }\r\n\r\n    private productList = (element: HTMLElement) => {\r\n        // console.log(\"productlist\");\r\n\r\n        let { location } = document;\r\n        let { search } = location;\r\n        if (search) {\r\n            let query: any = qs.parse(search.toLowerCase());\r\n            let { type, key } = query;\r\n            if (type === \"search\") {\r\n                ReactDOM.render(this.cProduct.renderProductList(key), element);\r\n            }\r\n        }\r\n    }\r\n\r\n    private productDetail = async (element: HTMLElement) => {\r\n        // console.log(\"productDetail\");\r\n\r\n        let { location } = document;\r\n        let { pathname } = location;\r\n        if (pathname) {\r\n            // console.log(pathname);\r\n            let productid = pathname.split('/')[2];\r\n            // console.log(productid);\r\n            if (productid) {\r\n                ReactDOM.render(await this.cProduct.renderProductWeb(productid), element);\r\n            }\r\n        }\r\n    }\r\n\r\n    private carts = (element: HTMLElement) => {\r\n        console.log(\"carts\");\r\n        //element.innerText = \"hello\";\r\n        let { location } = document;\r\n        let { pathname } = location;\r\n        if (pathname) {\r\n            console.log(pathname);\r\n            ReactDOM.render(this.cCart.tab(), element);\r\n        }\r\n    }\r\n\r\n\r\n    async loginCallBack(user: User) {\r\n        /*\r\n        if (this.cartService.isLocal) {\r\n            let cartLocal = { ...this.cartViewModel } as CartViewModel;\r\n            // this.cartService.clear(this.cartViewModel);\r\n            this.cartService = CartServiceFactory.getCartService(this);\r\n            this.cartViewModel = await this.cartService.load();\r\n            // this.cartViewModel = await this.cartService.merge(cartLocal);\r\n        }\r\n        */\r\n    }\r\n\r\n    protected onDispose() {\r\n        this.cart.dispose();\r\n    }\r\n}","import * as React from 'react';\r\nimport './App.css';\r\nimport { NavView, nav, start } from 'tonva';\r\nimport { CApp } from 'CApp';\r\nimport { appConfig } from 'configuration';\r\n\r\n//const tonvaApp = \"bruce/TestApp\";\r\nnav.setSettings(appConfig);\r\n\r\nclass App extends React.Component {\r\n\r\n  private onLogined = async () => {\r\n    await start(CApp, appConfig);\r\n  }\r\n  public render() {\r\n    return <NavView onLogined={this.onLogined} notLogined={this.onLogined} />\r\n  }\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport './index.css';\r\n\r\nlet elRoot = document.getElementById('root');\r\nif (!elRoot) {\r\n\telRoot = document.createElement('div');\r\n\telRoot.style.display = 'none';\r\n\tdocument.body.append(elRoot);\r\n}\r\nReactDOM.render(<App />, elRoot);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABGCAYAAACQRffVAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAF8mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDUtMjlUMTU6MDY6MzgtMDQ6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA1LTI5VDE3OjE4OjM2LTA0OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA1LTI5VDE3OjE4OjM2LTA0OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmE3ZjJlZGZmLTlkMzUtNDBiNy1hNmRhLTNlNDZjZWMwOWJiZiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3ZmY0N2IxZC1mZmYwLTQ3ZWMtYjVhNS1hZDZkOGNkY2Y2MzEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3ZmY0N2IxZC1mZmYwLTQ3ZWMtYjVhNS1hZDZkOGNkY2Y2MzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdmZjQ3YjFkLWZmZjAtNDdlYy1iNWE1LWFkNmQ4Y2RjZjYzMSIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0yOVQxNTowNjozOC0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmE3ZjJlZGZmLTlkMzUtNDBiNy1hNmRhLTNlNDZjZWMwOWJiZiIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0yOVQxNzoxODozNi0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BVuKlQAACWlJREFUeJzlm32QVlUdxz/Pw8MuLAgIsiAvusKAxC6p1JBoYhKCVtSgGGSWOaKCFjKppJjNOFraCxVaEwUiE5ZCmQahEVC8hLptqEWstpBAA4jBKiDs6i672x/fe3nuc577cu7zXJxl+MzsPPece86553vvefmd3zmbqq6o5OQiVWjGjwK3ZhKsyQdEGwWKXggMTydbmXbLIOA8YMmpIvi7zu8rp4LgjwCTnesXTwXBjzi/e4EtJ6ngNtuEVwAXOdcvAE0nqWBrFnuuVwHEmZY6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\"","export * from './mainSubs';\r\nexport * from './model';\r\nexport * from './render';\r\n","module.exports = __webpack_public_path__ + \"static/media/AnalyticalChemistry.f85ff3e0.png\";","module.exports = __webpack_public_path__ + \"static/media/LabSupplies.3f6ce00f.png\";","module.exports = __webpack_public_path__ + \"static/media/LifeScience.5c2e6ff5.png\";","module.exports = __webpack_public_path__ + \"static/media/MaterialScience.f2439aa0.png\";","module.exports = __webpack_public_path__ + \"static/media/OrganicChemistry.6d56971c.png\";"],"sourceRoot":""}