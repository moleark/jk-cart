{"version":3,"sources":["../node_modules/pdfh5/js sync","tools/groupByProduct.ts","cart/Cart.ts","CurrentUser.ts","CBase.ts","home/VSearchHeader.tsx","images/logo.png","home/VSiteHeader.tsx","home/VSlider.tsx","tools/browser.ts","images/AnalyticalChemistry.png","images/LabSupplies.png","images/LifeScience.png","images/MaterialScience.png","images/OrganicChemistry.png","cartenv.ts","home/VHome.tsx","tools/CustomHeaderTemplate.tsx","home/VScanCode.tsx","home/CHome.tsx","cart/VCartLabel.tsx","cart/VCartLabel_Web.tsx","tools/minusPlusWidget.tsx","cart/VCart.tsx","tools/elasticSearchPager.ts","cart/CCart.tsx","mainSubs/mainSubs.tsx","tools/productImage.tsx","product/VProductView.tsx","images/logo_pointShop.png","images/signInIcon.png","images/exChangeIcon.png","images/homeTopicMap.jpg","images/TriangleShadingO.png","images/TriangleShadingT.png","images/signTopicMap.png","images/Homemadelogo.png","images/signViceMap.png","images/point.png","images/pdf.png","product/VProduct.tsx","product/VProductList.tsx","mainSubs/loader.ts","tools/productChemical.ts","product/itemLoader.ts","product/VProductDelivery.tsx","product/VChemicalInfo.tsx","product/VProductList_Web.tsx","product/VProduct_Web.tsx","product/VPDFView.tsx","product/VVerifyCode.tsx","product/CProduct.tsx","order/VCreateOrder.tsx","order/Order.ts","order/OrderSuccess.tsx","customer/VContactList.tsx","tools/inputValidations.ts","customer/VContact.tsx","customer/VAddress.tsx","customer/CAddress.tsx","customer/CSelectContact.tsx","order/VMyOrders.tsx","order/VOrderDetail.tsx","customer/VInvoiceInfo.tsx","customer/CInvoiceInfo.tsx","coupon/Coupon.ts","order/COrder.tsx","productCategory/VRootCategory.tsx","productCategory/VCategory.tsx","productCategory/CProductCategory.tsx","images/pig.png","member/VMember.tsx","member/CMember.tsx","me/about.tsx","me/contactUs.tsx","tvs/common.tsx","tvs/product.tsx","tvs/customer.tsx","uq-app/appConfig.ts","tvs/index.tsx","tvs/warehouse.tsx","tvs/order.tsx","me/loginTop.tsx","me/aboutThisApp.tsx","me/VMe.tsx","me/EditMeInfo.tsx","me/EditMeInfoFirstOrder.tsx","customer/VFavorites.tsx","customer/VProductFavorateLabel.tsx","customer/CFavorites.tsx","me/VLoginState.tsx","me/VLoginState_Web.tsx","me/legal.tsx","me/CMe.tsx","ui/main.tsx","coupon/VVIPCard.tsx","coupon/VSharedCoupon.tsx","coupon/VCouponAvailable.tsx","coupon/VVIPCardDiscount.tsx","coupon/VCouponManage.tsx","coupon/CCoupon.tsx","tools/randomColor.ts","pointMarket/VPointProduct.tsx","pointMarket/VExchangeOrder.tsx","images/noStock.png","pointMarket/VPointRule.tsx","pointMarket/basicRefer.ts","pointMarket/VMyPoint.tsx","pointMarket/OrderSuccess.tsx","pointMarket/pointOrder.ts","pointMarket/VExchangeHistoryDetail.tsx","pointMarket/VExchangeHistory.tsx","pointMarket/VRevenueExpenditure.tsx","images/giftPlate.png","pointMarket/VPointProductDetail.tsx","images/已下架.png","pointMarket/VSelectedLable.tsx","images/infb.jpg","pointMarket/VDefaultPost.tsx","pointMarket/VPointDoubt.tsx","pointMarket/VExchangeOrderTrack.tsx","tools/wFeatch.ts","pointMarket/CPointProduct.tsx","ync/VYncProjects.tsx","ync/CYncProjects.tsx","pointMarket/VLottery.tsx","pointMarket/VMyLotteryPrize.tsx","pointMarket/prizeOrder.ts","pointMarket/CLottery.tsx","images/已签到.png","pointMarket/VPointSign.tsx","images/积分图标P.png","pointMarket/CSignIn.tsx","ordermakeruser/VOrderMaker.tsx","ordermakeruser/COrderMaker.tsx","orderdraft/VNotYOrder.tsx","orderdraft/COrderDraft.tsx","CApp.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","groupByProduct","packItems","result","sort","a","b","price","packItem","product","pack","quantity","retail","currency","packRow","cpi","find","undefined","packs","push","Cart","cApp","cartStore","disposer","newquantity","data","list","observable","cartItems","count","box","amount","editButton","calcSum","cp","$isSelected","$isDeleted","pi","Number","NaN","set","parseFloat","toFixed","add","cartItemExists","Tuid","equ","createdate","Date","now","splice","packExists","added","index","length","unshift","storeCart","addIncremental","incremental","removeStrike","console","log","makeObservable","this","autorun","isLogined","uqs","currentSalesRegion","CartRemote","CartLocal","load","cartData","PriceX","promises","forEach","obj","salesRegion","Promise","all","prices","priceMap","v","discountinued","expireDate","cartDataGrouped","i","productId","packId","cpp","findIndex","filter","rows","pe","cartItemIndex","cartItem","removeFromCart","CartStore","order","GetCart","page","ret","$page","SetCart","submit","param","map","RemoveFromCart","LOCALCARTNAME","productTuid","packTuid","ProductX","div","cartstring","localStorage","getItem","JSON","parse","cartDataBoxed","productbox","boxId","packbox","removeItem","TuidDiv","setItem","stringify","WebUser","name","nick","icon","guest","token","firstName","gender","salutation","organizationName","departmentName","telephone","mobile","email","fax","address","addressString","zipCode","VIPDiscount","webUserVIPCard","_user","webUserSettings","setUser","user","loadWebUser","currentCustomer","buyerAccount","allowOrdering","computed","invoiceInfo","shippingContact","invoiceContact","webUserTuid","webuser","salesTask","WebUserContact","WebUserSetting","WebUserCustomer","WebUserBuyerAccount","RecordLogin","webUser","WebUserVIPCard","VIPCardDiscount","query","coupon","vipCard","ip","app","contact","value","Customer","customer","init","accountValue","buyerAccounts","WebUserContacts","table","contactId","arr1","Contact","save","newContact","newContactId","addContact","newContactBox","setDefaultShippingContact","del","saveDefaultSettings","invoiceTypeId","invoiceInfoId","invoiceType","webUserContact","积分商城","getPoints","creditsForWebUser","hasCustomer","CustomerCredits","WebUserCredits","expiredDate","getTime","couponsForWebUser","CustomerCoupon","WebUserCoupon","QueryPager","getMyUsedCoupon","first","getMyExpiredCoupon","customerSettings","Contractor","CustomerContacts","CustomerSetting","customerContactorMap","contractor","setDefaultSettings","getWebUserByCustomer","setCustomerMainWebUser","CUqBase","CBase","CUqApp","CSub","type","c","CAppBase","VSearchHeader","onSearch","key","controller","cProduct","topKey","nav","popTo","start","size","className","placeholder","View","VSiteHeader","left","src","logo","alt","style","height","width","right","renderSearchHeader","VSlider","banners","random","Math","floor","path","browser","u","navigator","userAgent","appVersion","trident","indexOf","presto","webKit","gecko","match","ios","android","uc","iPhone","iPad","webApp","html5Plus","GLOABLE_PRODUCTION","CHINA","CHINESE","SALESREGION_CN","ROOTCATEGORY","OrganicChemistry","labelColor","AnalyticalChemistry","LifeScience","MaterialScience","LabSupplies","TIPDISPLAYTIME","ANDROIDAPPADDRESS","PIRVACYURL","CONTENTSITE","JD","GLOABLE_TEST","GLOABLE","env","testing","VHome","downloadApp","window","open","pageContent","renderCategoryRootList","siteHeader","renderVm","header","onClick","VPage","CustomHeaderTemplate","content","bg","textC","back","classNames","background","minHeight","cursor","color","minWidth","padding","ScanCodeTip","VScanCode","scan","media","plus","barcode","Barcode","onmarked","text","QR","EAN13","EAN8","reg","verArr","test","Ver","charAt","shiftArr","split","includes","scanCodetoProductDetail","scanClose","alert","close","closePage","observer","setTimeout","role","openPage","CHome","PageItems","homeSections","sectionTuid","openScanCode","openVPage","renderView","cProductCategory","renderRootList","getSlideShow","webBuilder","GetSlideShow","origin","GetProductByOrigin","productByOrigin","showProductDetail","tab","VCartLabel","showCart","cart","badge","pointer","get","VCartLabel_Web","document","location","href","MinusPlusWidget","minusClick","getValue","setValue","plusClick","ref","input","p","parentElement","tagName","disabled","renderContent","renderTemplet","cn","hasError","itemSchema","required","cursorPointer","minusColor","plusColor","hasFocus","hasAction","readOnly","hasValue","isNaN","minus","invisible","defaultValue","onChange","onKeyDown","onFocus","evt","onBlur","maxLength","renderErrors","UpdownWidget","cartSchema","arr","VCart","CheckOutButton","checkOut","strikeOut","check","renderCartItem","item","onProductClick","renderCartProduct","packsRow","tv","renderDeliveryTime","uiSchema","selectable","deletable","restorable","items","widget","Templet","ArrContainer","label","RowContainer","RowSeperator","WidgetClass","onChanged","onQuantityChanged","cartForm","schema","formData","whetherToEdit","params","footer","cancel","empty","React","CCart","selectedCartItems","context","prev","parentData","onRowStateChanged","selected","deleted","loginCallback","currentUser","loginCallBack","doFirstOrderChecking","isDeleted","getSelectedItems","showLogin","cMe","note","toPersonalAccountInfo","doCheckOut","cOrder","createOrderFromCart","tabPage","ViewBase","model","ViewMainSubs","main","sub","renderSubs","subsContainer","renderSubItems","subViews","subs","altimagePath","ProductImage","props","chemicalId","substr","altImage","PointProductImage","pointProductImagePath","VCartProuductView","brand","description","descriptionC","imageUrl","productPropItem","renderChemicalInfoInCart","renderBrand","VProductPrice","vipPrice","promotionPrice","minPrice","visible","initPrices","salesRegionId","discount","getProductPrice","priceUI","SalesRegionId","renderPrice","retailUI","min","Infinity","VProductWithPrice","renderProduct","productBox","getProudct","renderProductPrice","getProductAndDiscount","caption","captionClass","capClass","valClass","unsoldProductsUI","stopPropagation","VProuductView2","renderFavoritesLabel","CAS","purity","molecularFomula","molecularWeight","VProduct","arrTemplet","renderPack","dealWithPDF","fileName","replace","renderPDF","language","ToVerifyPdf","pdfIcon","renderListItemPDF","Material","render","renderProductMaterial","MaterialArr","productMSDSFiles","productSpecFiles","cHome","cartLabel","cCart","renderCartLabel","viewProduct","productData","getProductSpecFile","getProductMSDSFile","VProductList","searchKey","onScrollBottom","scroller","scrollToBottom","productsPager","more","none","before","Loader","entities","schemaLoaded","loadSchemas","initData","loadToData","LoaderProductChemical","ProductChemical","productChemical","chemical","LoaderBrand","brandId","Brand","LoaderProductWithChemical","productUq","_","merge","brandLoader","productChemicalLoader","packx","LoaderProductChemicalWithPrices","customerDiscount","promotion","productLoader","currentLanguage","GetDiscount","discountSetting","brandDiscounts","brandDiscount","currentSalesRegionId","element","round","getQuantity","GetPromotionPack","results","VProductDelivery","inventoryAllocation","futureDeliveryTimeDescription","initInventoryAllocation","getInventoryAllocation","initFutureDeliveryTimeDescription","getFutureDeliveryTimeDescription","warehouse","deliveryTimeDescription","values","packObj","owner","VChemicalInfoInCart","chemicalInfo","chemicalInfoContainer","getChemicalInfo","VProductList_Web","VProduct_Web","VPDFView","pdfh5","fileUrl","isFoundFile","ParsRenderPDF","status","Pdfh5","msg","currentFileName","VVerifyCode","verifyCodeInput","verifyInfo","onSubmit","verifyCode","openPDFView","getPDFFileUrl","getVerifyCode","preventDefault","maxWidth","CProduct","futureDeliveryTimeDescriptionContainer","currentProduct","JumpSource","loader","renderProductWithPrice","priceSet","GetInventoryAllocation","cacheId","GetFutureDeliveryTime","futureDeliveryTime","minValue","maxValue","unit","cFavorites","renderProductList","searchWebByKey","renderProductWeb","fileInfo","toLocaleUpperCase","openVerifyCode","captcha","lang","fetch","res","arrayBuffer","statusText","timer","ProductMSDSFile","ProductSpecFile","searchByKey","SearchProduct","keyWord","category","SearchProductByCategory","productCategoryId","productCategory","VCreateOrder","useShippingAddress","shippingAddressIsBlank","invoiceAddressIsBlank","invoiceIsBlank","shippingAddressTip","invoiceAddressTip","invoiceTip","comBininvoiceTip","fromOrderParam","orderDraftBrief","nullContact","priceInit","renderOrderItem","orderItem","renderOrderItemProduct","orderItemKey","renderCoupon","couponAppliedData","hasAnyCoupon","removeCoupon","tip","offsetUI","remittedUI","noOffsetUI","types","couponOffsetAmount","couponRemitted","point","cancelCouponUI","border","lineHeight","top","orderData","exOrderContacts","exOrderContact","combinTip","_shippingContact","_invoiceContact","exOrderContactTip","assure","invoiceInfoO","taxNo","bank","accountNo","submitOrder","renderTip","onSelectShippingContact","onSelectInvoiceContact","onInvoiceInfoEdit","onCouponEdit","addToCart","onCancel","backgroundColor","autoHideTips","fontSize","chevronRight","exOrderContactsUI","divInvoiceContact","invoiceExUI","invoiceContactUI","defaultChecked","currentTarget","checked","invoiceInfoUI","title","freightFeeUI","freightFeeRemittedUI","freightFee","freightFeeRemitted","couponUI","orderItems","productAmounts","cOrderMaker","renderOrderMaker","orderMaker","Order","organization","comments","productAmount","reduce","pv","cv","subAmount","subListAmount","oi","pk","orderitems","OrderItem","OrderSuccess","orderCreateResult","no","VContactList","onContactRender","onEditContact","onContactSelected","onNewContact","userContacts","contactList","telephoneValidation","mobileValidation","emailValidation","faxValidation","addressDetailValidation","zipCodeValidation","organizationNameValidation","nameValidation","VContact","userContactData","form","rules","pickId","pickAddress","addressValue","country","province","city","county","chineseName","isDefault","onSaveContact","buttonClick","onFormButtonClick","saveContact","onDelContact","vCall","VConfirmDeleteContact","delContact","buttonDel","contactData","clone","defaultOrganizationName","defaultName","defaultMobile","fromOrderCreation","onButtonClick","fieldLabelSize","onConfirm","returnCall","VAddress","provinceId","cityId","countyId","backLevel","provinces","renderPCC","onProvinceClick","pcc","marginRight","marginBottom","getProvinceCities","cities","len","onCityClick","openPageElement","saveAddress","getCityCounties","counties","onCountyClick","getCountryProvince","CAddress","countryId","common","GetCountryProvinces","GetProvinceCities","GetCityCounties","Address","newAddress","addressId","CSelectContact","userContact","userContactId","getSetting","userSetting","getIsDefault","setDefaultContact","contactTuid","contactBox","backPage","cAddress","newC","call","getContacts","userContactMaps","CSelectShippingContact","CSelectInvoiceContact","setDefaultInvoiceContact","VMyOrders","currentState","tabs","renderOrder","openOrderDetail","date","discription","flow","getMyOrders","state","TabCaptionComponent","isSelected","tabPosition","VOrderDetail","orderAgain","el","brief","invoiceTemplate","invoiceTypeUI","trim","regArr","j","commonRequired","valueAddedRequired","commonVisible","valueAddedVisible","VInvoiceInfo","showTip","saveTip","invoiceInfoData","invoice","saveInvoiceInfo","onSaveInvoice","onInvoiceTypeClick","event","parseInt","frm","buildForm","tipUI","htmlFor","origInvoice","requiredFields","visibleFields","CInvoiceInfo","InvoiceInfo","newInvoiceInfo","newInvoiceInfoId","invoiceBox","InvoiceType","setDefaultInvoice","activityTime","CouponBase","isValid","codeShow","String","createOrderPriceStrategy","couponData","preferential","validitydate","VIPCard","Coupon","CouponSale","Credits","isAvaliable","uqsProduct","BottomDiscount","brandDiscountMap","lastDiscount","discountPrice","thisDiscountSetting","max","multiple","IsInActivePeriod","startDate","endDate","newDate","moment","format","COrder","renderOrderDraft","cCoupon","sharedCouponValidationResult","getValidDiscounts","applyCoupon","hasCoupons","buyerAccountQResult","getDefaultShippingContact","getDefaultInvoiceContact","getDefaultInvoiceType","getDefaultInvoiceInfo","FREIGHTFEEFIXED","getCouponValidationResult","vipCardCode","toString","defaultSetting","contact0","orderDraftId","orderDraft","getDataForSave","orderId","action","couponId","nowDate","usedDate","getFullYear","getMonth","getDate","customerId","couponType","CustomerCouponUsed","WebUserCouponUsed","credits","CustomerCreditsUsed","saleOrderItem","WebUserCreditsUsed","saleOrder","OrderDraft","getSheet","orderDraftData","draftorderId","draftFlow","draftState","cSelect","shippingAssure","invoiceAssure","getValidCredits","getValidCoupons","validCoupons","validationResult","applyTo","openMyOrders","GetPendingPayment","mySheets","presult","concat","valueOf","cInvoiceInfo","newInvoice","orderItemsGrouped","currencyId","contactArr","getDefaultSetting","getContact","VRootCategory","categoryClick","categoryWapper","parent","openMainPage","renderRootCategory","children","productCategoryID","renderSubCategory","subsub","total","renderThirdCategory","rootCategories","root","VCategory","instruction","childWapper","instructionUi","instr","$","addClass","dangerouslySetInnerHTML","__html","innerHTML","CProductCategory","getCategoryInstruction","categoryId","ok","ProductCategory","stopCache","GetRootCategory","secend","third","buildCategories","parentCategoryId","GetChildrenCategory","firstCategory","secendCategory","catId","f","pcid","categoryWaper","getCategoryChildren","rootCategory","searchByCategory","stylePig","backgroundImage","pig","backgroundSize","opacity","position","VMember","recommendationCodeRef","member","recommendationCode","im","inviteCode","divPoints","pointThisWeek","pointAll","fansTitle","fansDetail","current","setReferrer","CMember","referrer","pop","internalStart","currentUserId","MemberAction","MemberRecommender","fans","About","marked","sections","post","phones","number","Row","ContactUs","phone","phoneIndex","eIndex","tvAddress","tvCountry","tvCurrency","tvProduct","tvContact","jk","alias","appConfig","version","dev","noUnit","tvs","productx","radiox","radioy","oem","loginTop","privacy","AboutThisApp","links","margin","resetAll","checkVersion","VMe","about","contactUs","openPrivacy","aboutThisApp","changePassword","openContactList","openInvoice","openMyPoint","openCouponManage","openFavorites","openEditMeInfo","userQuit","meInfo","userSpan","orderStates","os","aboutRows","component","iconClass","openLegal","logOutRows","bk","exit","aboutRows2","showLogout","EditMeInfo","webUserData","webUserContactData","onItemChanged","newValue","preValue","userApi","userSetProp","saveLocalUser","onWebUserChanged","changeWebUser","onWebUserContactChanged","changeWebUserContact","webUserSchema","webUserUiSchema","webUserContactSchema","webUserContactUiSchema","EditMeInfoFirstOrder","options","tips","webUserContacts","addContactFromAccount","actionButton","onCompleted","tipsUI","onlyRequired","schemaArr","VFavorites","productsFavorites","VProductFavorateLabel","isProductFarirates","favoriteOrCancel","delProductFavorites","addProductFavorites","isMyFarirates","getProductIsFavorites","zIndex","CFavorites","myFavorites","productid","searchByFavorites","getMyFavirates","createDate","VLoginState","renderCarLabel","VLoginState_Web","target","renderCarLabel_Web","VLegal","legal","CMe","pick","cPointProduct","openMyCouponManage","cMyFavorites","fn","openMeInfoFirstOrder","showPrivacyPage","getCommonText","textId","CommonText","callback","showLoginOut","renderCartLabel_Web","VMain","tabName","faceTabs","notify","tabsProps","getTips","invalidTip","COUPONBASE","VCoupon","renderRight","showDiscountSetting","vipCardId","renderCardDescription","cardDescription","discountShow","renderActivityDescription","renderCardReveal","CardReveal","isOpenMyCouponManage","useddate","expireddate","getEasyDate","getCodeShow","p1","p2","couponUi","VVIPCard","VCredits","VCouponUsed","year","VSharedCoupon","tipsAfterDawed","products","drawCouponUI","couponDrawed","loginWhenDrawCoupon","countDown","showTips","waitingSeconds","setInterval","renderCouponBase","VCoupleAvailable","couponInput","vipCardForWebUser","coupons","applySelectedCoupon","vipCardUI","VVIPCardDiscount","renderVIPCardDiscountSetting","VCouponManage","currentStatus","oss","toolTip","getTabs","getCoupons","receiveCoupon","drawCoupon","applyTip","conductReveal","CouponViewOrUse","CCoupon","couponPager","rtn","getCouponDiscountSetting","IsCanUseCoupon","getValidCardForWebUser","getValidMusterForWebUser","getUserdCoupon","getExpiredCoupon","shift","getValidVipCardForWebUser","validVIPCardForWebUser","validCouponsForWebUser","couponCode","validCreditsForWebUser","creditsCode","getValidCouponsForWebUser","getValidCreditsForWebUser","showSharedVIPCard","vipcard","productids","autoDrawCouponBase","getProducts","showSharedCoupon","showSharedCredits","couponBaseCode","allowCurrentUser","creditsId","drawedResult","pramArr","drawedResult3","vipCardType","randomColor","VPointProduct","isShowSelectForm","productIsNull","pointIsEnough","currentInterval","rankInterval","borderC","pointProducts","getPointsIntervalProducts","renderList","isToDetail","openPointProductDetail","triangleShadingO","renderPointProduct","PointProductDetailLevel","INDIRECT","newStockRes","pointProductSource","pointProduct","pointIcon","openExchangeOrder","pointToExchanging","myEffectivePoints","getRelatedUI","productIsNullTip","pointIsEnoughTip","renderSelectedLable","DIRECT","ThemeName","themeName","VSelectedPointProduct","pointProductsSelected","clearSelectedPointsProducts","VExchangeOrder","disBtn","pageDesc","OrderSource","EXCHANGEORDER","noStockTip","noStockUI","onSubmitOwn","createOrderStocks","cLottery","prizeOrderData","noJDStock","setNoStockTip","renderTipsUI","shippingAddressBlankTip","renderContact","pointsSum","VMyPrizeExchangeOrder","PRIZEORDER","myPrizeLib","VPointRule","RevenueExpenditure","VMyPoint","pointRules","pointblock","recommendOrHot","toWhere","theme","imgArr","slice","clm","UINoExchangeTip","pointShowUI","myPointTobeExpired","myTotalPoints","pointProductGenre","newPointProducts","hotPointProducts","openExchangeHistory","openRevenueExpenditure","openPointProduct","showPointDoubt","openPointSign","cSignIn","dateYear","nowPoint","nowPointTip","actions","homeTopicMap","logo_pointShop","flex","signInIcon","exChangeIcon","renderGenreItem","triangleShadingT","topicClump","newRecommend","hotProduct","renderPointRecord","source","pointType","desc","pointOrder","exchangeItems","exchangeitems","VExchangeHistoryDetail","renderexchangeItem","maxHeight","grade","OrderTrackBtn","outWardOrderByJD","openExchangeOrderTrack","orderState","VExchangeHistory","exchangeHistory","renderExchangeHistory","VRevenueExpenditure","showList","tipNone","matchData","pagePointHistory","signinPageHistory","VPointProductDetail","DetailSource","renderVDefaultPost","pointProductsDetail","OffShelf","OffShelfTip","availablePoints","pointsInsuffTip","giftPlate","VSelectedLable","openSelectedPointProduct","VDefaultPost","textIndent","infb","VPointDoubt","question","saveMainAccount","applyAuditUser","webUsers","createElement","lastName","VExchangeOrderTrack","orderTrack","renderOrderTrack","rwOrderTrackContent","msgTime","borderLeft","showCur","FetchPost","url","method","body","headers","productGenre","PointIntervals","startPoint","endPoint","CPointProduct","myPoints","navCloseByOrderSuccess","platformOrderId","platformOrder","pointInterval","refreshMypoint","effectiveLeftPoint","totalLeftPoint","pointYear","initPointProducts","loginMonitor","callBack","showMainPoint","initPointAllData","getPointProductGenre","getNewPointProducts","getHotPointProducts","showMain","getPointProductByDifferentPlot","DetailLevel","findP","subVar","getProductSources","fm","getPointProductLibLoad","findProduct","setPointProductVisits","getStockBySource","sourceType","getAddressById","area","mapData","sourceId","skuId","num","jdSkuNums","getPointProductStockByJD","skuNums","json","addressObj","myAddress","PointProductLib","getPointProductDetailFragment","topic","getPointHistory","PointExchangeSheet","getOutWardOrderByJD","platFormJoint","OutWardOrderMapping","platform","myOrderId","getOrderTrack","jdOrderId","orderTrackObj","OrderTrack","SetPointProductVisits","Genre","GetPointHistory","plot","some","filterByProductGenre","currentGenre","GetPointProductByGenre","genre","pointProductFromGenre","getProductsFromGenre","PointProductGenre","pointproduct","GetNewPointProducts","GetHotPointProducts","getPointsProducts","GetPointProduct","PointProductSource","findCurIndex","nowData","pointTotal","noSourceList","promises1","findCoincideById","o","jdProducts","noStockList","stockStateId","stockStateDesc","pSource","getLastPlatformOrder","GetLastPlatFormOrder","getPlatFormOrder","GetPlatFormOrder","IsCouponCanUse","receivePoint","AddPlatformOrderPoint","openMeInfoOptions","userInfoCompletedChecking","addUsedCoupon","selectContact","getRelatedWebUser","otherWebUsers","VYncProjects","YncProjectsItems","headerClassName","renderItem","returnYncProject","ProjectName","CYncProjects","OrganCode","UserId","YncProjectsResponse","getYncProjects","FormData","append","response","VLottery","currIndex","winning","isLottery","lotterySuccess","aDeg","prize","lottery","lotteryProducts","productsLib","decreasingNumberOfDraws","winningProduct","speed","indexMR","mR","roll","clearTimeout","totalCount","renderLotteryBtn","remainingNumOfDraws","display","renderPrizesBlock","transform","borderRight","transformOrigin","openMyLotteryPrize","borderRadius","bottom","VMyLotteryPrize","renderMyPrize","myPrize","openMyPrizeOrder","prizeOrder","CLottery","totalNumPrizes","openLotteryProduct","getLotteryProducts","getLotteryNumOfDraws","basedChanceHandlePrizes","getMyPrizes","addMyPrize","PR","base","Array","from","k","flat","VPointSign","rulesNum","renderRule","ruleContent","boxShadow","padStart","demandBlock","IsSignin","signinval","signinConsecutiveDays","signTopicMap","已签到","Homemadelogo","handleChange","CSignIn","isSignined","addSigninSheet","getSigninConsecutiveDays","getSigninHistory","checkIsSignin","Signin","GetPointSigninHistory","VOrderMaker","ordermaker","initPostCount","getOrderMakerName","COrderMaker","VNotYOrder","COrderDraft","showSharedOrder","orderdraftid","newProductData","val","newretail","CApp","cMember","cYncProjects","cOrderDraft","afterStart","login","productlist","productList","productdetail","productDetail","carts","ReactDOM","renderLoginState_Web","search","qs","toLowerCase","pathname","SalesRegion","Language","prouductBoxId","initTabName","getElementById","renderLoginState","dispose","setSettings","App","onLogined","notLogined","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","onUpdate","onSuccess","catch","error","elRoot","URL","process","addEventListener","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.9d6697fa.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 125;","import { CartPackRow } from \"cart/Cart\";\r\n\r\nexport function groupByProduct(packItems: any[]) {\r\n    let result: any[] = [];\r\n    for (let packItem of packItems.sort((a, b) => a.price - b.price)) {\r\n        let { product, pack, quantity, price, retail, currency } = packItem;\r\n        let packRow: CartPackRow = {\r\n            pack: pack,\r\n            price: price,\r\n            retail: retail,\r\n            quantity: quantity,\r\n            currency: currency && currency.id\r\n        }\r\n        let cpi = result.find(e => e.product.id === product.id);\r\n        if (cpi === undefined) {\r\n            cpi = { product: product, packs: [] };\r\n            result.push(cpi);\r\n        }\r\n        cpi.packs.push(packRow);\r\n    }\r\n    return result;\r\n}","import { observable, autorun, IReactionDisposer, makeObservable } from 'mobx';\r\nimport { Action, Query, TuidDiv, BoxId, Tuid } from \"tonva-react\";\r\n//import { CCartApp } from '../CCartApp';\r\nimport { PackRow } from 'product/Product';\r\nimport { groupByProduct } from 'tools/groupByProduct';\r\nimport { CApp } from '../CApp';\r\n\r\nexport interface CartItem2 {\r\n    product: BoxId;\r\n    packs: CartPackRow[];\r\n    $isSelected?: boolean;\r\n    $isDeleted?: boolean;\r\n    createdate: number;\r\n}\r\n\r\nexport interface CartPackRow extends PackRow {\r\n    /**\r\n     * 销售成交价（在购物车中是目录价或市场活动价或协议价的最小值），订单中还会经过券的计算\r\n     */\r\n    price: number;\r\n\r\n    /**\r\n     * 订单中的初始销售成交价（订单中应用折扣券之前的价格）\r\n     */\r\n    priceInit?: number;\r\n    /**\r\n     * 订单中目录价\r\n     */\r\n    retail: number;\r\n    currency: any;\r\n}\r\n\r\nexport class Cart {\r\n    cApp: CApp;\r\n\r\n    private cartStore: CartStore;\r\n    private disposer: IReactionDisposer;\r\n    private newquantity: number;\r\n\r\n    data: any = {\r\n        list: observable<CartItem2>([]),\r\n    };\r\n    cartItems: CartItem2[];\r\n    count = observable.box<number>(0);\r\n    amount = observable.box<number>(0);\r\n    editButton = observable.box<boolean>(false);\r\n    constructor(cApp: CApp) {\r\n        makeObservable(this, {\r\n            data: observable,\r\n            count: observable,\r\n            amount: observable\r\n        });\r\n\r\n        this.cApp = cApp;\r\n        this.cartItems = this.data.list;\r\n        this.disposer = autorun(this.calcSum);\r\n    }\r\n\r\n    dispose() {\r\n        this.disposer();\r\n    }\r\n\r\n    protected calcSum = () => {\r\n        let count = 0, amount = 0;\r\n        for (let cp of this.cartItems) {\r\n            let { $isSelected, $isDeleted, packs } = cp;\r\n            if ($isDeleted === true || !($isSelected === true)) continue;\r\n            for (let pi of packs) {\r\n                let { price, quantity } = pi;\r\n                count += quantity;\r\n                if (price === Number.NaN || quantity === Number.NaN) continue;\r\n                amount += quantity * price;\r\n            }\r\n        }\r\n        this.count.set(count);\r\n        this.amount.set(parseFloat(amount.toFixed(2)));\r\n    }\r\n\r\n    async init(): Promise<void> {\r\n        let { isLogined, uqs, currentSalesRegion } = this.cApp;\r\n        if (isLogined)\r\n            this.cartStore = new CartRemote(this.cApp);\r\n        else\r\n            this.cartStore = new CartLocal(this.cApp);\r\n        let cartData = await this.cartStore.load();\r\n\r\n        // 初始化购物车中产品的目录价\r\n        let { product } = uqs;\r\n        let { PriceX } = product;\r\n        let promises: PromiseLike<void>[] = [];\r\n        cartData.forEach((e: any) => promises.push(PriceX.obj({ product: e.product, pack: e.pack, salesRegion: currentSalesRegion })));\r\n        let prices = await Promise.all(promises);\r\n        for (let index = cartData.length - 1; index >= 0; index--) {\r\n            let e: any = cartData[index];\r\n            let priceMap: any = prices.find((v: any) => Tuid.equ(v.product, e.product)\r\n                && Tuid.equ(v.pack, e.pack) && v.discountinued === 0 && v.expireDate > Date.now());\r\n            if (priceMap && priceMap.retail) {\r\n                e.retail = priceMap.retail;\r\n            } else {\r\n                cartData.splice(index, 1);\r\n            }\r\n        }\r\n\r\n        let cartDataGrouped = groupByProduct(cartData);\r\n        if (cartDataGrouped && cartDataGrouped.length > 0) {\r\n            for (let i = 0; i < cartDataGrouped.length; i++) {\r\n                let { product, packs, createdate } = cartDataGrouped[i];\r\n                this.cartItems.push({\r\n                    product: product,\r\n                    packs: packs,\r\n                    $isSelected: true,\r\n                    $isDeleted: false,\r\n                    createdate: createdate,\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    /*\r\n    private mergeToRemote(localItems: any[]) {\r\n        let originLength = localItems.length;\r\n        let nowLength = this.items.length;\r\n        if (originLength > 0) {\r\n            if (nowLength > 0) {\r\n                // 合并，谁覆盖谁？\r\n                for (let i = 0; i < originLength; i++) {\r\n                    let { product: tempProduct, pack: tempPack } = localItems[i];\r\n                    let cartItemExits = this.items.find(v => v.product === tempProduct && v.pack === tempPack);\r\n                    if (cartItemExits) {\r\n                        // 如果本地购物车中的产品已经过期，则要删除\r\n                    } else {\r\n                        this.items.push(localItems[i]);\r\n                    }\r\n                }\r\n            } else {\r\n                this.items.push(...localItems);\r\n            }\r\n            // 保存到远程\r\n        }\r\n    }\r\n    */\r\n\r\n    getQuantity(productId: number, packId: number): number {\r\n        let cp = this.cartItems.find(v => v.$isDeleted !== true && Tuid.equ(v.product, productId));\r\n        if (!cp) return 0;\r\n        let cpp = cp.packs.find(v => v.pack.id === packId);\r\n        return cpp === undefined ? 0 : cpp.quantity;\r\n    }\r\n\r\n    isDeleted(productId: number): boolean {\r\n        let i = this.cartItems.findIndex(v => v.$isDeleted === true && Tuid.equ(v.product, productId));\r\n        return i !== -1;\r\n    }\r\n\r\n    getSelectedItems(): CartItem2[] {\r\n        return this.cartItems.filter(v => {\r\n            let { $isSelected, $isDeleted } = v;\r\n            return $isSelected === true && $isDeleted !== true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 向购物车中添加产品 \r\n     * @param product 要添加的产品\r\n     * @param pack 要添加的包装\r\n     * @param quantity 加入到购物车中产品的最终数量\r\n     * @param price 添加时的产品优惠价 \r\n     * @param retail 添加时的产品目录价 \r\n     * @param currency 价格币种 \r\n     */\r\n    add = async (product: BoxId, pack: BoxId, quantity: number, price: number, retail: number, currency: any) => {\r\n        let cartItemExists = this.cartItems.find((e) => Tuid.equ(e.product, product));\r\n        if (!cartItemExists) {\r\n            cartItemExists = {\r\n                product: product,\r\n                packs: [{ pack: pack, quantity: quantity, price: price, retail: retail, currency: currency }],\r\n                $isSelected: true,\r\n                $isDeleted: false,\r\n                createdate: Date.now()\r\n            };\r\n            this.cartItems.push(cartItemExists);\r\n        }\r\n        else {\r\n            let { $isDeleted, packs } = cartItemExists;\r\n            if ($isDeleted === true)\r\n                packs.splice(0);\r\n\r\n            let packExists: CartPackRow = packs.find(e => Tuid.equ(e.pack, pack));\r\n            if (packExists === undefined) {\r\n                let added = false;\r\n                for (let index = packs.length - 1; index >= 0; index--) {\r\n                    if (packs[index].price < price) {\r\n                        packs.splice(index + 1, 0, { pack: pack, quantity: quantity, price: price, retail: retail, currency: currency });\r\n                        added = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!added)\r\n                    packs.unshift({ pack: pack, quantity: quantity, price: price, retail: retail, currency: currency })\r\n            }\r\n            else {\r\n                packExists.quantity = quantity\r\n                packExists.price = price;\r\n                packExists.currency = currency;\r\n            }\r\n            cartItemExists.$isSelected = true;\r\n            cartItemExists.$isDeleted = false;\r\n            cartItemExists.createdate = Date.now();\r\n        }\r\n        await this.cartStore.storeCart(product, pack, quantity, price, currency);\r\n    }\r\n\r\n    /**\r\n     * 向购物车中添加产品 \r\n     * @param product 要添加的产品\r\n     * @param pack 要添加的包装\r\n     * @param incremental 加入到购物车中产品的增量\r\n     * @param price 添加时的产品优惠价 \r\n     * @param retail 添加时的产品目录价 \r\n     * @param currency 价格币种 \r\n     */\r\n    addIncremental = async (product: BoxId, pack: BoxId, incremental: number, price: number, retail: number, currency: any) => {\r\n        let quantity = incremental;\r\n        let cartItemExists = this.cartItems.find((e) => Tuid.equ(e.product, product));\r\n        if (cartItemExists) {\r\n            let { packs } = cartItemExists;\r\n            let packExists: CartPackRow = packs.find(e => Tuid.equ(e.pack, pack));\r\n            if (packExists) {\r\n                quantity += packExists.quantity;\r\n            }\r\n        }\r\n        await this.add(product, pack, quantity, price, retail, currency);\r\n    }\r\n\r\n    removeStrike = async (data: any) => {\r\n        console.log(data);\r\n        // data.forEach((el: CartItem2) => {\r\n        //     el.packs.forEach(async (v: any) => {\r\n        //         await this.cartStore.storeCart(el.product, v.pack, v.quantity, v.price, v.currency);\r\n        //     })\r\n        // });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param rows\r\n     */\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        if (rows && rows.length > 0) {\r\n            rows.forEach(pe => {\r\n                let cartItemIndex = this.cartItems.findIndex(e => e.product.id === pe.productId);\r\n                if (cartItemIndex >= 0) {\r\n                    let cartItem = this.cartItems[cartItemIndex];\r\n                    let i = cartItem.packs.findIndex(e => e.pack.id === pe.packId)\r\n                    if (i >= 0) {\r\n                        cartItem.packs.splice(i, 1);\r\n                        if (cartItem.packs.length === 0) {\r\n                            this.cartItems.splice(cartItemIndex, 1);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            this.cartStore.removeFromCart(rows);\r\n        }\r\n    }\r\n\r\n    /*\r\n    setDeletedMark(productId: number, packId: number) {\r\n        let cp = this.items.find(v => v.$isDeleted !== true && v.product === productId && v.pack === packId);\r\n        if (cp !== undefined)\r\n            cp.$isDeleted = true;\r\n    }\r\n \r\n    async removeDeletedItem() {\r\n        let rows: { product: number, packItem: CartPackRow }[] = [];\r\n        for (let cp of this.items) {\r\n            let { quantity, $isDeleted } = cp;\r\n            if ($isDeleted === true || quantity === 0) {\r\n                // TODO:\r\n            }\r\n        }\r\n        if (rows.length === 0) return;\r\n        await this.cartStore.removeFromCart(rows);\r\n \r\n        // 下面是从本地数据结构中删除\r\n        for (let cp of this.items) {\r\n            let { packs } = cp;\r\n            let packIndexes: number[] = [];\r\n            let len = packs.length;\r\n            for (let i = 0; i < len; i++) {\r\n                if (packs[i].quantity === 0) packIndexes.push(i);\r\n            }\r\n            for (let i = packIndexes.length - 1; i >= 0; i--) packs.splice(packIndexes[i], 1);\r\n        }\r\n \r\n        let itemIndexes: number[] = [];\r\n        let len = this.items.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let { $isDeleted, packs } = this.items[i];\r\n            if ($isDeleted === true || packs.length === 0) itemIndexes.push(i);\r\n        }\r\n        for (let i = itemIndexes.length - 1; i >= 0; i--) this.items.splice(itemIndexes[i], 1);\r\n    }\r\n \r\n    async clear() {\r\n        this.items.forEach(v => v.$isDeleted = true);\r\n        await this.removeDeletedItem();\r\n    }\r\n    */\r\n\r\n}\r\n\r\nabstract class CartStore {\r\n\r\n    protected cApp: CApp;\r\n    constructor(cApp: CApp) {\r\n        this.cApp = cApp;\r\n    }\r\n    abstract get isLocal(): boolean;\r\n    abstract load(): Promise<CartItem2[]>;\r\n    abstract storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any): Promise<void>;\r\n    abstract removeFromCart(rows: [{ productId: number, packId: number }]): Promise<void>;\r\n}\r\n\r\nclass CartRemote extends CartStore {\r\n    //private getCartQuery: Query;\r\n    //private setCartAction: Action;\r\n    //private removeFromCartAction: Action;\r\n\r\n    get isLocal(): boolean { return false }\r\n\r\n    /*\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        let { cUqOrder } = this.cApp;\r\n        this.getCartQuery = cUqOrder.query('getcart')\r\n        this.setCartAction = cUqOrder.action('setcart');\r\n        this.removeFromCartAction = cUqOrder.action('removefromcart');\r\n    }\r\n    */\r\n\r\n    async load(): Promise<CartItem2[]> {\r\n        let ret = await this.cApp.uqs.order.GetCart.page(undefined, 0, 100);\r\n        return ret && ret.$page && ret.$page.filter((v: any) => v.product && v.pack) as any;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param product\r\n     * @param pack\r\n     * @param quantity\r\n     * @param price\r\n     * @param currency\r\n     */\r\n    async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any) {\r\n        await this.cApp.uqs.order.SetCart.submit({\r\n            product: product.id,\r\n            pack: pack.id,\r\n            price: price,\r\n            currency: currency,\r\n            quantity: quantity\r\n        });\r\n    }\r\n\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n        let param = rows.map(e => { return { product: e.productId, pack: e.packId } });\r\n        await this.cApp.uqs.order.RemoveFromCart.submit({ rows: param });\r\n    }\r\n}\r\n\r\nconst LOCALCARTNAME: string = \"cart\";\r\nclass CartLocal extends CartStore {\r\n\r\n    private cartData: any[] = [];\r\n    private productTuid: Tuid;\r\n    private packTuid: TuidDiv;\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        this.productTuid = this.cApp.uqs.product.ProductX;\r\n        this.packTuid = this.productTuid.div('packx');\r\n    }\r\n\r\n    get isLocal(): boolean { return true }\r\n\r\n    async load(): Promise<CartItem2[]> {\r\n        try {\r\n            let cartstring = localStorage.getItem(LOCALCARTNAME);\r\n            if (cartstring === null) return [];\r\n            this.cartData = JSON.parse(cartstring);\r\n            let cartDataBoxed = [];\r\n            for (let i = 0; i < this.cartData.length; i++) {\r\n                let { product, pack, quantity, price, currency } = this.cartData[i];\r\n                if (product && pack) {\r\n                    let productbox = this.productTuid.boxId(product);\r\n                    let packbox = this.packTuid.boxId(pack);\r\n                    cartDataBoxed.push({\r\n                        product: productbox,\r\n                        pack: packbox,\r\n                        quantity: quantity,\r\n                        price: price,\r\n                        currency: currency\r\n                    } as any)\r\n                }\r\n            }\r\n            return cartDataBoxed;\r\n        }\r\n        catch (e) {\r\n            localStorage.removeItem(LOCALCARTNAME);\r\n            this.cartData = [];\r\n            return this.cartData;\r\n        }\r\n    }\r\n\r\n    async storeCart(product: BoxId, pack: BoxId, quantity: number, price: number, currency: any) {\r\n        let cartItemExists = this.cartData.find(e => Tuid.equ(e.product, product) && TuidDiv.equ(e.pack, pack));\r\n        if (cartItemExists !== undefined) {\r\n            cartItemExists.quantity = quantity;\r\n            cartItemExists.price = price;\r\n            cartItemExists.currency = currency && currency.id;\r\n        } else\r\n            this.cartData.push({ product: product.id, pack: pack.id, quantity: quantity, price: price, currency: currency && currency.id });\r\n        localStorage.setItem(LOCALCARTNAME, JSON.stringify(this.cartData));\r\n    }\r\n\r\n    async removeFromCart(rows: [{ productId: number, packId: number }]) {\r\n\r\n        rows.forEach(e => {\r\n            let i = this.cartData.findIndex(v => v.product = e.productId && v.pack === e.packId);\r\n            if (i >= 0)\r\n                this.cartData.splice(i, 1);\r\n        })\r\n        localStorage.setItem(LOCALCARTNAME, JSON.stringify(this.cartData));\r\n    }\r\n}","import { QueryPager, User } from \"tonva-react\";\r\nimport { BoxId } from \"tonva-react\";\r\nimport { observable, computed, makeObservable } from 'mobx';\r\nimport { UQs } from './uqs';\r\n\r\nexport class WebUser {\r\n\r\n    id: number;\r\n    name: string;\r\n    nick?: string;\r\n    icon?: string;\r\n    guest: number;\r\n    token: string;\r\n\r\n    firstName: string;\r\n    gender: string;\r\n    salutation: string;\r\n    organizationName: string;\r\n    departmentName: string;\r\n\r\n    get defaultOrganizationName(): string {\r\n        return this.organizationName ||\r\n            (this.webUserSettings &&\r\n                (\r\n                    (this.webUserSettings.invoiceInfo && this.webUserSettings.invoiceInfo.obj['title'])\r\n                    || (this.webUserSettings.shippingContact && this.webUserSettings.shippingContact.obj['organizationName'])\r\n                    || (this.webUserSettings.invoiceContact && this.webUserSettings.invoiceContact.obj['organizationName'])\r\n                )\r\n            );\r\n    }\r\n\r\n    get defaultName(): string {\r\n        return this.firstName ||\r\n            (this.webUserSettings &&\r\n                ((\r\n                    this.webUserSettings.shippingContact && this.webUserSettings.shippingContact.obj['name'])\r\n                    || (this.webUserSettings.invoiceContact && this.webUserSettings.invoiceContact.obj['name'])\r\n                )\r\n            );\r\n    }\r\n\r\n    get defaultMobile(): string {\r\n        return this.mobile ||\r\n            (this.webUserSettings &&\r\n                ((\r\n                    this.webUserSettings.shippingContact && this.webUserSettings.shippingContact.obj['mobile'])\r\n                    || (this.webUserSettings.invoiceContact && this.webUserSettings.invoiceContact.obj['mobile'])\r\n                )\r\n            );\r\n    }\r\n\r\n    telephone: string;\r\n    mobile: string;\r\n    email: string;\r\n    fax: string;\r\n    address: BoxId;\r\n    addressString: string;\r\n    zipCode: string;\r\n    VIPDiscount: any;\r\n    webUserVIPCard: any;\r\n    get allowOrdering() {\r\n        // 这个地方要改成相关账号吧？\r\n        return this.currentCustomer !== undefined ||\r\n            (this.mobile && this.firstName && this.organizationName);\r\n    }\r\n\r\n    private _user: User;\r\n\r\n    private webUserSettings: any;\r\n\r\n    private uqs: UQs;\r\n\r\n\r\n    constructor(uqs: UQs) {// cUsqWebUser: CUq, cUsqCustomer: CUq) {\r\n        makeObservable(this, {\r\n            firstName: observable,\r\n            organizationName: observable,\r\n            mobile: observable,\r\n            allowOrdering: computed,\r\n        });\r\n\r\n        this.uqs = uqs;\r\n    }\r\n\r\n    setUser = async (user: User) => {\r\n        if (user !== undefined) {\r\n            this._user = user;\r\n            this.id = user.id;\r\n            this.name = user.name;\r\n            this.nick = user.nick;\r\n            this.icon = user.icon;\r\n            this.guest = user.guest;\r\n            this.token = user.token;\r\n\r\n            await this.loadWebUser();\r\n        }\r\n    }\r\n\r\n    private async loadWebUser() {\r\n        let { id, _user } = this;\r\n        if (this._user !== undefined) {\r\n            let { webuser: webUserTuid, salesTask } = this.uqs;\r\n            let { WebUser, WebUserContact, WebUserSetting, WebUserCustomer, WebUserBuyerAccount, RecordLogin } = webUserTuid;\r\n            let webUser = await WebUser.load(this.id);\r\n            if (webUser) {\r\n                let { firstName, gender, salutation, organizationName, departmentName } = webUser;\r\n                this.firstName = firstName;\r\n                this.gender = gender;\r\n                this.salutation = salutation;\r\n                this.organizationName = organizationName;\r\n                this.departmentName = departmentName;\r\n                this.webUserVIPCard = await webUserTuid.WebUserVIPCard.obj({ webUser: this });\r\n                if (this.webUserVIPCard !== undefined) {\r\n                    // this.VIPDiscount = await vipCardType.VIPCardTypeDiscount.query({ vipCard: this.webUserVIPCard.vipCardType })\r\n                    this.VIPDiscount = await salesTask.VIPCardDiscount.query({ coupon: this.webUserVIPCard.vipCard });\r\n                }\r\n\r\n                await RecordLogin.submit({ webUser: webUser, ip: \"\", app: \"shop\" });\r\n            }\r\n\r\n\r\n            let contact = await WebUserContact.obj({ \"webUser\": id });\r\n            if (contact) {\r\n                let { telephone, mobile, email, fax, address, addressString, zipCode } = contact;\r\n                this.telephone = telephone;\r\n                this.mobile = mobile;\r\n                this.email = email;\r\n                this.fax = fax;\r\n                this.address = address;\r\n                this.addressString = addressString;\r\n                this.zipCode = zipCode;\r\n            }\r\n\r\n            this.webUserSettings = await WebUserSetting.obj({ webUser: id }) || { webUser: id };\r\n\r\n            let value = await WebUserCustomer.obj({ webUser: id });\r\n            if (value !== undefined) {\r\n                this.currentCustomer = new Customer(value.customer, this.uqs);\r\n                await this.currentCustomer.init();\r\n            }\r\n            let accountValue = await WebUserBuyerAccount.query({ webUser: id });\r\n            let { ret: buyerAccounts } = accountValue;\r\n            if (buyerAccounts && buyerAccounts.length > 0) {\r\n                // TODO: 暂时不考虑有多个相关账号的情况\r\n                this.buyerAccount = buyerAccounts[0].buyerAccount;\r\n            }\r\n        }\r\n    }\r\n\r\n    get isLogined(): boolean {\r\n        return this._user !== undefined;\r\n    }\r\n    get hasCustomer(): boolean {\r\n        return this.currentCustomer !== undefined;\r\n    }\r\n    currentCustomer: Customer;\r\n    buyerAccount: any;\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            return await this.currentCustomer.getContacts()\r\n        }\r\n        */\r\n        return await this.uqs.webuser.WebUserContacts.table({ webUser: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.addContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        await this.uqs.webuser.WebUserContacts.add({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async addContactFromAccount() {\r\n        let { firstName, organizationName, mobile, telephone, email, address, addressString } = this;\r\n        if (firstName && organizationName && mobile && address && addressString) {\r\n            let newContact = await this.uqs.customer.Contact.save(undefined, {\r\n                name: firstName,\r\n                organizationName: organizationName,\r\n                mobile: mobile,\r\n                telephone: telephone,\r\n                email: email,\r\n                address: address,\r\n                addressString: addressString\r\n            })\r\n            if (newContact) {\r\n                let { id: newContactId } = newContact;\r\n                await this.addContact(newContactId);\r\n                let newContactBox = this.uqs.customer.Contact.boxId(newContactId);\r\n                this.setDefaultShippingContact(newContactBox);\r\n            }\r\n        }\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.delContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        await this.uqs.webuser.WebUserContacts.del({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async getSetting() {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            return this.currentCustomer.getSetting();\r\n        }\r\n        */\r\n        return this.webUserSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultShippingContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        this.webUserSettings.shippingContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoiceContact(contactId);\r\n            return;\r\n        }\r\n        */\r\n        this.webUserSettings.invoiceContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        /*\r\n        if (this.currentCustomer !== undefined) {\r\n            await this.currentCustomer.setDefaultInvoice(invoiceTypeId, invoiceInfoId);\r\n            return;\r\n        }\r\n        */\r\n        // await this.webUserSettingMap.add({ webUser: this.id, arr1: [{ invoiceType: invoiceTypeId, invoiceInfo: invoiceInfoId }] });\r\n        this.webUserSettings.invoiceType = invoiceTypeId;\r\n        this.webUserSettings.invoiceInfo = invoiceInfoId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async saveDefaultSettings() {\r\n        await this.uqs.webuser.WebUserSetting.add(this.webUserSettings);\r\n    }\r\n\r\n\r\n    async changeWebUser(webUser: any) {\r\n        await this.uqs.webuser.WebUser.save(this.id, webUser);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        webUserContact.webUser = this.id;\r\n        await this.uqs.webuser.WebUserContact.add(webUserContact);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async getPoints() {\r\n        return await this.uqs.积分商城.getPoints.table({ customer: this.currentCustomer });\r\n    }\r\n\r\n    async getValidCredits() {\r\n        let { customer, webuser } = this.uqs;\r\n        let creditsForWebUser: any[] = [];\r\n        if (this.hasCustomer) {\r\n            creditsForWebUser = await customer.CustomerCredits.table({ customer: this.currentCustomer });\r\n        } else {\r\n            creditsForWebUser = await webuser.WebUserCredits.table({ webUser: this.id });\r\n        };\r\n        return creditsForWebUser.filter(v => v.expiredDate.getTime() > Date.now());\r\n    }\r\n\r\n    async getValidCoupons() {\r\n        let { customer, webuser } = this.uqs;\r\n        let couponsForWebUser: any[] = [];\r\n        if (this.hasCustomer) {\r\n            couponsForWebUser = await customer.CustomerCoupon.table({ customer: this.currentCustomer });\r\n        } else {\r\n            couponsForWebUser = await webuser.WebUserCoupon.table({ webUser: this.id });\r\n        };\r\n        return couponsForWebUser.filter(v => v.expiredDate.getTime() > Date.now());\r\n    }\r\n\r\n    async getUserdCoupon() {\r\n        let { webuser, customer } = this.uqs;\r\n        let result: any;\r\n        if (this.hasCustomer) {\r\n            result = new QueryPager<any>(customer.getMyUsedCoupon, 10, 10);\r\n            await result.first({ customer: this.currentCustomer });\r\n        } else {\r\n            result = new QueryPager<any>(webuser.getMyUsedCoupon, 10, 10);\r\n            await result.first({ webUser: this.id });\r\n        };\r\n        return result;\r\n    }\r\n\r\n    async getExpiredCoupon() {\r\n        let { webuser, customer } = this.uqs;\r\n        let result: any;\r\n        if (this.hasCustomer) {\r\n            result = new QueryPager<any>(customer.getMyExpiredCoupon, 10, 10);\r\n            await result.first({ customer: this.currentCustomer });\r\n        } else {\r\n            result = new QueryPager<any>(webuser.getMyExpiredCoupon, 10, 10);\r\n            await result.first({ webUser: this.id });\r\n        };\r\n        return result;\r\n    }\r\n\r\n};\r\n\r\nexport class Customer {\r\n    private readonly uqs: UQs;\r\n    id: number;\r\n\r\n    private customerSettings: any;\r\n    Contractor: any;\r\n\r\n    constructor(customer: BoxId, uqs: UQs) {\r\n        this.id = customer.id;\r\n        this.uqs = uqs;\r\n    };\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        return await this.uqs.customer.CustomerContacts.table({ customer: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        await this.uqs.customer.CustomerContacts.add({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        await this.uqs.customer.CustomerContacts.del({ customer: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async init() {\r\n        this.customerSettings = await this.uqs.customer.CustomerSetting.obj({ customer: this.id }) || { customer: this.id };\r\n        let customerContactorMap: any = await this.uqs.customer.CustomerContacts.obj({ customer: this.id });\r\n        if (customerContactorMap)\r\n            this.Contractor = customerContactorMap.contractor;\r\n    }\r\n\r\n    getSetting() {\r\n        return this.customerSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        this.customerSettings.shippingContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        this.customerSettings.invoiceContact = contactId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        this.customerSettings.invoiceType = invoiceTypeId;\r\n        this.customerSettings.invoiceInfo = invoiceInfoId;\r\n        await this.setDefaultSettings();\r\n    }\r\n\r\n    async setDefaultSettings() {\r\n        await this.uqs.customer.CustomerSetting.add(this.customerSettings);\r\n    }\r\n\r\n    /**\r\n     * 获取Customer关联的web User，一个Customer可能会关联多个web User \r\n     */\r\n    async getRelatedWebUser() {\r\n        let result = await this.uqs.webuser.getWebUserByCustomer.table({ customer: this.id });\r\n        return result;\r\n    }\r\n\r\n    async setMainWebUser(webUser: number) {\r\n        await this.uqs.webuser.setCustomerMainWebUser.submit({ customer: this.id, webUser: webUser })\r\n    }\r\n}","//=== UqApp builder created on Mon Sep 27 2021 10:48:05 GMT+0800 (中国标准时间) ===//\r\nimport { CSub, CBase, CAppBase, IConstructor } from 'tonva-react';\r\nimport { UQs } from './uqs';\r\nimport { CApp } from './CApp';\r\n\r\nexport abstract class CUqBase extends CBase<CApp, UQs> {\r\n}\r\n\r\nexport abstract class CUqSub<A extends CAppBase<U>, U, T extends CBase<A, U>> extends CSub<A, U, T> {\r\n}\r\n\r\nexport abstract class CUqApp extends CAppBase<UQs> {\r\n    protected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n        let c = new type(this);\r\n        c.init();\r\n        return c;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav } from \"tonva-react\";\r\nimport { CHome } from './CHome';\r\nimport { SearchBox } from \"tonva-react\";\r\n\r\nexport class VSearchHeader extends View<CHome> {\r\n\r\n    private onSearch = async (key: string, param: 'home' | 'insearch' | 'productdetail') => {\r\n        let { cProduct, topKey } = this.controller.cApp;\r\n        if (param !== 'home') {\r\n            nav.popTo(topKey);\r\n        }\r\n\r\n        cProduct.start(key);\r\n    }\r\n\r\n    render(param: 'home' | 'insearch' | 'productdetail') {\r\n        let size: any = param === 'home' ? \"md\" : 'sm';\r\n        return <SearchBox className=\"w-100\"\r\n            size={size}\r\n            onSearch={(key: string) => this.onSearch(key, param)}\r\n            placeholder=\"搜索品名、编号、CAS、MDL等\" />\r\n    }\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABGCAYAAACQRffVAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAF8mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDUtMjlUMTU6MDY6MzgtMDQ6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA1LTI5VDE3OjE4OjM2LTA0OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA1LTI5VDE3OjE4OjM2LTA0OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmE3ZjJlZGZmLTlkMzUtNDBiNy1hNmRhLTNlNDZjZWMwOWJiZiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3ZmY0N2IxZC1mZmYwLTQ3ZWMtYjVhNS1hZDZkOGNkY2Y2MzEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3ZmY0N2IxZC1mZmYwLTQ3ZWMtYjVhNS1hZDZkOGNkY2Y2MzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdmZjQ3YjFkLWZmZjAtNDdlYy1iNWE1LWFkNmQ4Y2RjZjYzMSIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0yOVQxNTowNjozOC0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmE3ZjJlZGZmLTlkMzUtNDBiNy1hNmRhLTNlNDZjZWMwOWJiZiIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0yOVQxNzoxODozNi0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BVuKlQAACWlJREFUeJzlm32QVlUdxz/Pw8MuLAgIsiAvusKAxC6p1JBoYhKCVtSgGGSWOaKCFjKppJjNOFraCxVaEwUiE5ZCmQahEVC8hLptqEWstpBAA4jBKiDs6i672x/fe3nuc577cu7zXJxl+MzsPPece86553vvefmd3zmbqq6o5OQiVWjGjwK3ZhKsyQdEGwWKXggMTydbmXbLIOA8YMmpIvi7zu8rp4LgjwCTnesXTwXBjzi/e4EtJ6ngNtuEVwAXOdcvAE0nqWBrFnuuVwHEmZY6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\"","import * as React from 'react';\r\nimport { LMR, FA, View } from \"tonva-react\";\r\nimport logo from '../images/logo.png';\r\nimport { CHome } from './CHome';\r\nimport 扫一扫 from 'images/扫一扫.png';\r\nexport class VSiteHeader extends View<CHome> {\r\n    render() {\r\n        let currentSalesRegion = <FA name=\"globe\" />\r\n        let left = <img className=\"m-1 ml-2\" src={logo} alt=\"logo\" style={{ height: \"3rem\", width: \"2.5rem\" }} />;\r\n        //let cart = this.controller.cApp.cCart.renderCartLabel();\r\n        // let right = undefined; // \r\n        let right = undefined;\r\n        /* if (navigator.userAgent.indexOf(\"Html5Plus\") > -1) {\r\n            right = <img src={扫一扫} alt=\"\" className=\"mr-2\" style={{ width: 24 }} onClick={this.controller.openScanCode} />;\r\n        } */\r\n        /*\r\n        <div className=\"d-flex flex-row mr-1 align-items-center\">\r\n            {currentSalesRegion} &nbsp;\r\n            <button onClick={()=>nav.start()}>Try</button>\r\n        </div>;*/\r\n        return <LMR\r\n            className=\"mb-1 align-items-center bg-white\"\r\n            left={left} right={right}>\r\n            <div className=\"px-3 py-4\">\r\n                {this.controller.renderSearchHeader('md')}\r\n            </div>\r\n        </LMR>\r\n        //<div className=\"h4 px-3 mb-0\">百灵威科技</div>\r\n    }\r\n}","import React from 'react';\r\nimport { View } from \"tonva-react\";\r\nimport { CHome } from './CHome';\r\nimport Slider from \"react-slick\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nconst sliderSetting = {\r\n    dots: false,\r\n    infinite: true,\r\n    speed: 500,\r\n    autoplay: true,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n    arrows: false,\r\n    isArrows: true,\r\n    isDots: true\r\n};\r\n\r\nexport class VSlider extends View<CHome> {\r\n\r\n    public render(param: any) {\r\n\r\n        let { banners } = this.controller;\r\n        if (banners.length > 0) {\r\n            let random = Math.floor(Math.random() * 10 % banners.length);\r\n            return <img src={banners[random].path} className=\"d-block w-100\" alt=\"...\"></img>\r\n        }\r\n\r\n        /**\r\n        return <Slider {...sliderSetting} className=\"bg-white\" >\r\n            {this.controller.banners.map((banner, index) => <div key={index} >\r\n                <img src={banner.path} className=\"d-block w-100\" alt=\"...\"></img>\r\n            </div>)}\r\n        </Slider>\r\n        **/\r\n    }\r\n}\r\n","export let browser = {\r\n    versions: function () {\r\n        var u = navigator.userAgent, app = navigator.appVersion;\r\n        return {\r\n            trident: u.indexOf('Trident') > -1,                            //IE内核\r\n            presto: u.indexOf('Presto') > -1,                              //opera内核\r\n            webKit: u.indexOf('AppleWebKit') > -1,                         //苹果、谷歌内核\r\n            gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') === -1,    //火狐内核\r\n            mobile: !!u.match(/AppleWebKit.*Mobile.*/),                    //是否为移动终端\r\n            ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),               //ios终端\r\n            android: u.indexOf('Android') > -1, //android终端或者uc浏览器\r\n            uc: u.indexOf('Linux') > -1, //android终端或者uc浏览器\r\n            iPhone: u.indexOf('iPhone') > -1,                              //是否为iPhone或者QQHD浏览器\r\n            iPad: u.indexOf('iPad') > -1,                                  //是否iPad\r\n            webApp: u.indexOf('Safari') === -1,                             //是否web应该程序，没有头部与底部\r\n            html5Plus: u.indexOf('Html5Plus') > -1                      //是否微信 （2015-01-22新增）\r\n        };\r\n    }()\r\n};\r\n","export default __webpack_public_path__ + \"static/media/AnalyticalChemistry.91620b99.png\";","export default __webpack_public_path__ + \"static/media/LabSupplies.7d2d3bf7.png\";","export default __webpack_public_path__ + \"static/media/LifeScience.c1c493a6.png\";","export default __webpack_public_path__ + \"static/media/MaterialScience.2c3ee8eb.png\";","export default __webpack_public_path__ + \"static/media/OrganicChemistry.5d7b018f.png\";","import AnalyticalChemistry from './images/AnalyticalChemistry.png';\r\nimport LabSupplies from './images/LabSupplies.png';\r\nimport LifeScience from './images/LifeScience.png';\r\nimport MaterialScience from './images/MaterialScience.png';\r\nimport OrganicChemistry from './images/OrganicChemistry.png';\r\nimport { env } from \"tonva-react\";\r\n\r\n\r\n// 生产配置\r\nconst GLOABLE_PRODUCTION = {\r\n    CHINA: 44,\r\n    CHINESE: 196,\r\n    SALESREGION_CN: 1,\r\n    ROOTCATEGORY: {\r\n        47: {\r\n            src: OrganicChemistry,\r\n            labelColor: 'text-info',\r\n        },\r\n        470: {\r\n            src: AnalyticalChemistry,\r\n            labelColor: 'text-success',\r\n        },\r\n        1013: {\r\n            src: LifeScience,\r\n            labelColor: 'text-danger',\r\n        },\r\n        1219: {\r\n            src: MaterialScience,\r\n            labelColor: 'text-warning',\r\n        },\r\n        1545: {\r\n            src: LabSupplies,\r\n            labelColor: 'text-primary',\r\n        },\r\n    } as any,\r\n    TIPDISPLAYTIME: 3000,\r\n    ANDROIDAPPADDRESS: \"https://shop.jkchemical.com/download/jk-shop.apk\",\r\n    PIRVACYURL: \"https://web.jkchemical.com/privacy-shop\",\r\n    CONTENTSITE: \"https://web.jkchemical.com\",\r\n    // CONTENTSITE: \"http://localhost:6061\",\r\n    // JD: 'http://localhost:3016/jd',\r\n    JD: 'https://joint.jkchemical.com/jd',\r\n\r\n}\r\n\r\n// 测试环境配置\r\nconst GLOABLE_TEST = {\r\n    CHINA: 43,\r\n    CHINESE: 197,\r\n    SALESREGION_CN: 4,\r\n    ROOTCATEGORY: {\r\n        7: {\r\n            src: OrganicChemistry,\r\n            labelColor: 'text-info',\r\n        },\r\n        430: {\r\n            src: AnalyticalChemistry,\r\n            labelColor: 'text-success',\r\n        },\r\n        986: {\r\n            src: LifeScience,\r\n            labelColor: 'text-danger',\r\n        },\r\n        1214: {\r\n            src: MaterialScience,\r\n            labelColor: 'text-warning',\r\n        },\r\n        1545: {\r\n            src: LabSupplies,\r\n            labelColor: 'text-primary',\r\n        },\r\n    } as any,\r\n    TIPDISPLAYTIME: 3000,\r\n    ANDROIDAPPADDRESS: \"https://shop.jkchemical.com/download/jk-shop.apk\",\r\n    PIRVACYURL: \"https://web.jkchemical.com/privacy-shop\",\r\n    CONTENTSITE: \"https://c.jkchemical.com/jk-web\",\r\n    // CONTENTSITE: \"http://localhost:6061\",\r\n    // JD: 'http://localhost:3016/jd',\r\n    JD: 'https://c.jkchemical.com/joint/jd',\r\n}\r\n\r\nexport const GLOABLE = env.testing === true ? GLOABLE_TEST : GLOABLE_PRODUCTION;\r\n//export { GLOABLE_PRODUCTION as GLOABLE };\r\n//export { GLOABLE_TEST as GLOABLE };","import * as React from 'react';\r\nimport { Page, View, VPage } from \"tonva-react\";\r\nimport { CHome } from './CHome';\r\nimport { VSiteHeader } from './VSiteHeader';\r\nimport { VSlider } from './VSlider';\r\nimport { browser } from 'tools/browser';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\nexport class VHome extends VPage<CHome> {\r\n\r\n    async open(param?: any) {\r\n        // this.openPage(this.page);\r\n    }\r\n\r\n    /*\r\n    render(param: any): JSX.Element {\r\n        return <this.pageContent />\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header={false}>\r\n            <this.pageContent />\r\n        </Page>;\r\n    };\r\n    */\r\n\r\n    downloadApp = () => {\r\n        if (browser.versions.android)\r\n            window.open(GLOABLE.ANDROIDAPPADDRESS);\r\n    }\r\n\r\n    header() {\r\n        let header = <></>;\r\n        if (!browser.versions.html5Plus && browser.versions.android) {\r\n            header = <div className=\"bg-warning w-100 px-1 d-flex justify-content-between\" onClick={this.downloadApp}>\r\n                <span className=\"pt-2 small text-danger\">\r\n                    APP购物更方便\r\n                </span>\r\n                <button type=\"button\" className=\"btn btn-primary btn-sm\">立即安装</button>\r\n            </div>\r\n        }\r\n        return header;\r\n    }\r\n\r\n    content() {\r\n        return <this.pageContent />\r\n    }\r\n\r\n    private pageContent = () => {\r\n        let { controller } = this;\r\n        let { renderCategoryRootList } = controller;\r\n        let siteHeader = this.renderVm(VSiteHeader);\r\n        return <>\r\n            {siteHeader}\r\n            <div className=\"mb-3\">\r\n                {this.renderVm(VSlider)}\r\n            </div>\r\n            {renderCategoryRootList()}\r\n        </>\r\n    };\r\n}","import * as React from 'react';\r\nimport { FA, nav } from \"tonva-react\";\r\nimport classNames from 'classnames';\r\n\r\nexport const CustomHeaderTemplate = (content?: any, right?: any, bg?: any, textC?: any, back?: any) => {\r\n    return <header className={classNames('d-flex align-items-center p-0 justify-content-between', bg ? bg : 'bg-white')} style={{ background: bg, minHeight: '3rem' }}>\r\n        <nav className={`d-flex align-items-center justify-content-center ${textC ? textC : 'text-white'}`}\r\n            style={{ cursor: 'pointer', width: \"2.5rem\", height: \"2.3rem\", color: textC, }}\r\n            onClick={() => { nav.back(); if (back) back() }}>\r\n            <FA name=\"angle-left\" />\r\n        </nav>\r\n        <div className=\"flex-fill\">{content}</div>\r\n        <aside className=\"d-flex justify-content-end align-items-stretch\" style={{ minWidth: '2.3rem', padding: 2 }}>{right}</aside>\r\n    </header>\r\n}","import { observer } from 'mobx-react';\r\nimport * as React from 'react';\r\nimport { VPage } from \"tonva-react\";\r\nimport { CustomHeaderTemplate } from 'tools/CustomHeaderTemplate';\r\nimport { CHome } from './CHome';\r\n\r\nconst ScanCodeTip: string = '只可扫本司产品二维码';\r\n\r\nexport class VScanCode extends VPage<CHome> {\r\n\r\n    scan: any;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    media = () => {\r\n        if (navigator.userAgent.indexOf(\"Html5Plus\") > -1) {\r\n            // @ts-ignore \r\n            this.scan = new plus.barcode.Barcode('bcid');\r\n            this.scan.onmarked = this.onmarked;\r\n            this.scan.start();\r\n        }\r\n    }\r\n\r\n    onmarked = async (type: any, result: any) => {\r\n        var text = '未知: ';\r\n        switch (type) {\r\n            // @ts-ignore \r\n            case plus.barcode.QR:\r\n                text = 'QR';\r\n                break;\r\n            // @ts-ignore \r\n            case plus.barcode.EAN13:\r\n                text = 'EAN13';\r\n                break;\r\n            // @ts-ignore \r\n            case plus.barcode.EAN8:\r\n                text = 'EAN8';\r\n                break;\r\n        }\r\n        console.log('result==>', result);// '912152 LT40U57 Jkchemical 1'   \r\n        let reg = /(Jkchemical)/, verArr = [1];\r\n        if (text === 'QR' && reg.test(result)) {\r\n            let Ver = result.charAt(result.length - 1);\r\n            let shiftArr = result.split(' ');\r\n            if (verArr.includes(Number(Ver))) {\r\n                let { scanCodetoProductDetail } = this.controller;\r\n                this.scanClose();\r\n                await scanCodetoProductDetail(shiftArr[0]);\r\n            }\r\n        } else {\r\n            alert('此码无法解析额');\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    scanClose = () => {\r\n        if (navigator.userAgent.indexOf(\"Html5Plus\") > -1) {\r\n            // @ts-ignore \r\n            this.scan.close();\r\n        }\r\n    }\r\n\r\n    close = () => {\r\n        this.scanClose();\r\n        this.closePage();\r\n    }\r\n\r\n    private page = observer(() => {\r\n        this.media();\r\n        setTimeout(() => {\r\n            this.media();\r\n        }, 5);\r\n        let header = <div className='w-100 text-center text-light'>扫一扫</div>;\r\n        return <div className=\"w-100 h-100 d-flex flex-column\">\r\n            <div className=\"w-100\">\r\n                {CustomHeaderTemplate(header, '', '#555555', '', this.close)}\r\n            </div>\r\n            <div className=\"alert alert-warning py-0 w-100 rounded-0 m-0 text-center\" role=\"alert\">{ScanCodeTip}</div>\r\n            <main className=\"flex-fill\">\r\n                <div id='bcid' className=\"w-100 h-100\" style={{ background: '#F5F5F5' }}></div>\r\n            </main>\r\n        </div>;\r\n    });\r\n}","import { QueryPager, Tuid } from \"tonva-react\";\r\nimport { PageItems } from \"tonva-react\";\r\nimport { CUqBase } from '../CBase';\r\nimport { VSearchHeader } from './VSearchHeader';\r\nimport { VHome } from './VHome';\r\nimport { VScanCode } from './VScanCode';\r\n\r\nclass HomeSections extends PageItems<any> {\r\n\r\n    private sectionTuid: Tuid;\r\n\r\n    constructor(sectionTuid: Tuid) {\r\n        super();\r\n        this.firstSize = this.pageSize = 13;\r\n        this.sectionTuid = sectionTuid;\r\n    }\r\n\r\n    protected async loadResults(param: any, pageStart: any, pageSize: number): Promise<{ [name: string]: any[] }> {\r\n        let ret = await this.sectionTuid.search(\"\", pageStart, pageSize);\r\n        return { $page: ret };\r\n    }\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.sectionTuid.search(\"\", pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        if (item === undefined) return 0;\r\n        return item.id;\r\n    }\r\n}\r\n\r\nexport class CHome extends CUqBase {\r\n\r\n    homeSections: HomeSections;\r\n    sectionTuid: Tuid;\r\n\r\n    banners: any[] = [];\r\n    async internalStart(param: any) {\r\n\r\n        /*\r\n        let { cProductCategory } = this.cApp;\r\n        await cProductCategory.start();\r\n        this.openVPage(VHome);\r\n        */\r\n    }\r\n\r\n    openScanCode = () => {\r\n        this.openVPage(VScanCode)\r\n    }\r\n\r\n    renderSearchHeader = (size?: string) => {\r\n        return this.renderView(VSearchHeader, size);\r\n    }\r\n\r\n    renderCategoryRootList = () => {\r\n        let { cProductCategory } = this.cApp;\r\n        return cProductCategory.renderRootList();\r\n    }\r\n\r\n    getSlideShow = async () => {\r\n        let list = await this.uqs.webBuilder.GetSlideShow.table({});\r\n        list.forEach(v => {\r\n            this.banners.push({ path: v.path, src: v.src });\r\n        })\r\n    }\r\n\r\n    scanCodetoProductDetail = async (origin: any) => {\r\n        let { cProduct, currentSalesRegion } = this.cApp;\r\n        let productByOrigin = await this.uqs.product.GetProductByOrigin.obj({ origin, salesRegion: currentSalesRegion.id });\r\n        await cProduct.showProductDetail(productByOrigin.id, 'ScanCode');\r\n    }\r\n\r\n    // tab = () => this.renderView(VHome);\r\n    tab: VHome = new VHome(this);\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from \"tonva-react\";\r\nimport { CCart } from './CCart';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VCartLabel extends View<CCart> {\r\n\r\n    private showCart = async () => {\r\n        let { cart } = this.controller.cApp;\r\n        cart.editButton.set(false);\r\n        this.controller.start();\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    };\r\n\r\n    private content = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let count: any = cart.count.get();\r\n        let badge, onClick, pointer;\r\n        if (count > 0) {\r\n            onClick = this.showCart;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={onClick}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from \"tonva-react\";\r\nimport { CCart } from './CCart';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VCartLabel_Web extends View<CCart> {\r\n\r\n    private showCart = async () => {\r\n        document.location.href = '../shop/?type=cart';\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    };\r\n\r\n    private content = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let count: any = cart.count.get();\r\n        let badge, onClick, pointer;\r\n        if (count > 0) {\r\n            onClick = this.showCart;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={onClick}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { UpdownWidget } from \"tonva-react\";\r\n\r\nconst keys = [107, 109, 110, 187, 189];\r\n\r\nexport class MinusPlusWidget extends UpdownWidget {\r\n    // @observable protected value: any;\r\n    // @observable protected disabled: boolean;\r\n    // @observable protected hasFocus: boolean;\r\n\r\n    protected isValidKey(key: number): boolean {\r\n        if (keys.find(v => v === key) !== undefined) return false;\r\n        return super.isValidKey(key);\r\n    }\r\n\r\n\t/*\r\n    protected onBlur = (evt: React.FocusEvent<any>) => {\r\n        super.onBlur(evt);\r\n        this.hasFocus = false;\r\n    }\r\n\r\n    protected onFocus(evt: React.FocusEvent<any>) {\r\n        super.onFocus(evt);\r\n        this.hasFocus = true;\r\n\t}\r\n\t*/\r\n\r\n    protected onChange(evt: React.ChangeEvent<any>) {\r\n    }\r\n\r\n    private minusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v - 1);\r\n    }\r\n    private plusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v + 1);\r\n    }\r\n\r\n    private ref = (input: HTMLInputElement) => {\r\n        this.input = input;\r\n        if (this.input === null) return;\r\n        let p: HTMLElement;\r\n        for (p = this.input; ; p = p.parentElement) {\r\n            if (!p) break;\r\n            if (p.tagName !== 'FIELDSET') continue;\r\n            if ((p as any)['disabled'] === true) {\r\n                this.disabled = true;\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    private renderContent = observer((): JSX.Element => {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn: any = {\r\n            //'form-control': true,\r\n        };\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        let hasFocus = this.hasFocus; // document.hasFocus() && document.activeElement === this.input;\r\n        let hasAction = this.readOnly !== true && this.disabled !== true;\r\n        let hasValue = isNaN(this.value) === false && this.value !== undefined && this.value > 0;\r\n        let cursorPointer: string,\r\n            minusColor: string, minusClick: any,\r\n            plusColor: string, plusClick: any;\r\n        if (this.disabled === true) {\r\n            cursorPointer = 'cursor-pointer';\r\n            minusColor = plusColor = 'text-light';\r\n        }\r\n        else {\r\n            minusClick = this.minusClick;\r\n            plusClick = this.plusClick;\r\n            minusColor = 'text-danger-2'; //'text-black-50';\r\n            plusColor = 'text-danger';\r\n        }\r\n        let minus = <i className={classNames('fa',\r\n            'fa-minus-circle', 'fa-lg', minusColor, cursorPointer,\r\n            { invisible: !(hasFocus === true || (hasAction === true && hasValue === true)) })}\r\n            onClick={minusClick} />;\r\n        let input = <input ref={this.ref}\r\n            className={classNames(this.className, cn, 'mx-1 w-4c form-control',\r\n                { invisible: !(hasFocus === true || hasValue === true) })}\r\n            type=\"text\"\r\n            defaultValue={this.value}\r\n            onChange={this.onChange}\r\n            // placeholder={this.placeholder}\r\n            readOnly={this.readOnly}\r\n            disabled={this.disabled}\r\n            onKeyDown={this.onKeyDown}\r\n            onFocus={(evt: any) => this.onFocus(evt)}\r\n            onBlur={(evt: any) => this.onBlur(evt)}\r\n            maxLength={10} />;\r\n\r\n        let plus = <i className={classNames('fa fa-plus-circle fa-lg',\r\n            plusColor, cursorPointer,\r\n            { invisible: !(hasAction === true) })}\r\n            onClick={plusClick} />;\r\n        return <div className=\"d-flex align-items-center\">{minus}{input}{plus}\r\n            {this.renderErrors()}\r\n        </div>;\r\n    });\r\n\r\n    render() {\r\n        return <this.renderContent />;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, Form, ObjectSchema, NumSchema, ArrSchema, UiSchema, UiArr, FormField, UiCustom } from \"tonva-react\";\r\nimport { FA } from \"tonva-react\";\r\nimport { tv } from \"tonva-react\";\r\nimport { MinusPlusWidget } from '../tools';\r\nimport { CCart } from './CCart';\r\nimport { CartPackRow, CartItem2 } from './Cart';\r\n\r\nconst cartSchema = [\r\n    {\r\n        name: 'list',\r\n        type: 'arr',\r\n        arr: [\r\n            { name: 'checked', type: 'boolean' },\r\n            { name: 'product', type: 'object' } as ObjectSchema,\r\n            {\r\n                name: 'packs', type: 'arr', arr: [\r\n                    { name: 'pack', type: 'object' } as ObjectSchema,\r\n                    { name: 'price', type: 'number' } as NumSchema,\r\n                    { name: 'retail', type: 'number' } as NumSchema,\r\n                    { name: 'quantity', type: 'number' } as NumSchema,\r\n                    { name: 'currency', type: 'object' } as ObjectSchema\r\n                ]\r\n            }\r\n        ],\r\n    } as ArrSchema\r\n];\r\n\r\nexport class VCart extends VPage<CCart> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    protected CheckOutButton = observer(() => {\r\n        let { checkOut, strikeOut, cApp } = this.controller;\r\n        let { cart } = cApp;\r\n        let amount = cart.amount.get();\r\n        let check = cart.editButton.get() ? '删除' : \"去结算\";\r\n        let content = cart.editButton.get() ? <>{check}</> : amount > 0 ?\r\n            <>{check} (¥{amount})</> :\r\n            <>{check}</>;\r\n        if (cart.editButton.get()) {\r\n            return <div className=\"d-flex justify-content-end\">\r\n                <button className=\"btn btn-success w-25 mx-5\"\r\n                    type=\"button\"\r\n                    onClick={strikeOut}>\r\n                    {content}\r\n                </button>\r\n            </div>;\r\n        } else {\r\n            return <div className=\"d-flex justify-content-center\">\r\n                <button className=\"btn btn-success w-75 mx-5\"\r\n                    type=\"button\"\r\n                    onClick={checkOut} disabled={amount <= 0}>\r\n                    {content}\r\n                </button>\r\n            </div>;\r\n        }\r\n    });\r\n\r\n    render(params: any): JSX.Element {\r\n        return <this.tab />;\r\n    }\r\n\r\n    private renderCartItem = (item: CartItem2) => {\r\n        let { product } = item;\r\n        let { controller } = this;\r\n        let { onProductClick, renderCartProduct } = controller;\r\n        return <div className=\"pr-1\">\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\" onClick={() => onProductClick(product)}>\r\n                    {renderCartProduct(product)}\r\n                </div>\r\n                <div className=\"col-lg-6\"><FormField name=\"packs\" /></div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow) => {\r\n        let { pack, price, currency } = item;\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-6c mr-4 text-right\"><span className=\"text-danger h5\">¥{price}</span></div>\r\n                <FormField name=\"quantity\" />\r\n            </div>\r\n            <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        selectable: true,\r\n        deletable: true,\r\n        restorable: true,\r\n        items: {\r\n            list: {\r\n                widget: 'arr',\r\n                Templet: this.renderCartItem,\r\n                ArrContainer: (label: any, content: JSX.Element) => content,\r\n                RowContainer: (content: JSX.Element) => <div className=\"py-3\">{content}</div>,\r\n                items: {\r\n                    packs: {\r\n                        widget: 'arr',\r\n                        Templet: this.packsRow,\r\n                        selectable: false,\r\n                        deletable: false,\r\n                        ArrContainer: (label: any, content: JSX.Element) => content,\r\n                        RowContainer: (content: JSX.Element) => content,\r\n                        RowSeperator: <div className=\"border border-gray border-top my-3\" />,\r\n                        items: {\r\n                            quantity: {\r\n                                widget: 'custom',\r\n                                className: 'text-center',\r\n                                WidgetClass: MinusPlusWidget as any,\r\n                                onChanged: this.controller.onQuantityChanged\r\n                            } as UiCustom\r\n                        },\r\n                    } as UiArr\r\n                }\r\n            } as UiArr\r\n        }\r\n    }\r\n\r\n    protected cartForm = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let { data: cartData } = cart;\r\n        return <Form className=\"bg-white flex-fill overflow-auto\" schema={cartSchema} uiSchema={this.uiSchema} formData={cartData} />\r\n    });\r\n\r\n    private empty() {\r\n        return <div className=\"py-5 text-center bg-white\">你的购物车空空如也</div>\r\n    }\r\n    /**\r\n     * 是否编辑\r\n     */\r\n    private whetherToEdit = () => {\r\n        // let { cart } = this.controller.cApp;\r\n        // cart.editButton.set(!cart.editButton.get());\r\n    }\r\n    private page = observer((params: any): JSX.Element => {\r\n        let { cart } = this.controller.cApp;\r\n        let footer: any, content: any;\r\n        let cancel = cart.editButton.get() ? '取消' : '编辑';\r\n        let right = <small className=\"mr-3\" onClick={this.whetherToEdit}>{cancel}</small>\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            content = this.empty();\r\n            footer = undefined;\r\n        }\r\n        else {\r\n            content = React.createElement(this.cartForm);\r\n            footer = React.createElement(this.CheckOutButton);\r\n        }\r\n        // return <Page header=\"购物车\" right={right} footer={footer}>\r\n        //     {content}\r\n        // </Page>;\r\n        return <Page header=\"购物车\" footer={footer}>\r\n            {content}\r\n        </Page>;\r\n    })\r\n\r\n    private tab = observer(() => {\r\n        let { cart } = this.controller.cApp;\r\n        let header = <header className=\"py-2 text-center bg-info text-white\">\r\n            <FA className=\"align-middle\" name=\"shopping-cart\" size=\"2x\" /> &nbsp; <span className=\"h5 align-middle\">购物车</span>\r\n        </header>;\r\n        if (cart.count.get() === 0 && cart.cartItems.length === 0) {\r\n            return <>\r\n                {header}\r\n                {this.empty()}\r\n            </>;\r\n        }\r\n\r\n        let content = React.createElement(this.cartForm);\r\n        let footer = React.createElement(this.CheckOutButton);\r\n        return <>\r\n            {content}\r\n            {footer}\r\n        </>;\r\n    });\r\n\r\n    header() {\r\n        let { cart } = this.controller.cApp;\r\n        let cancel = cart.editButton.get() ? '取消' : '编辑';\r\n        let header = <header className=\"py-2 text-center bg-info text-white position-relative\">\r\n            <FA className=\"mr-3\" name=\"shopping-cart\" size=\"lg\" />\r\n            <span>购物车</span>\r\n            {/* <small className=\"position-absolute\" onClick={this.whetherToEdit} style={{ right: 20 }} >{cancel}</small> */}\r\n        </header>;\r\n        return header;\r\n    }\r\n\t/*\r\n\tfooter() {\r\n\t\treturn <div className=\"p-3 d-flex justify-content-center\"><this.CheckOutButton /></div>;\r\n\t}\r\n\t*/\r\n\r\n    content() {\r\n        return <this.tab />\r\n    }\r\n}","import { PageItems } from \"tonva-react\";\r\nimport * as _ from 'lodash';\r\nimport { result } from 'lodash';\r\n\r\nexport class ElasticSearchPager<T extends any> extends PageItems<T>{\r\n\r\n    private searchUrl: string;\r\n    protected idFieldName: any;\r\n    private pageNumber: number;\r\n    constructor(searchUrl: string, pageSize?: number, firstSize?: number, itemObservable?: boolean) {\r\n        super(itemObservable);\r\n        this.searchUrl = searchUrl;\r\n        if (pageSize !== undefined) this.pageSize = pageSize;\r\n        if (firstSize !== undefined) this.firstSize = firstSize;\r\n        this.pageNumber = 1;\r\n    }\r\n\r\n    setReverse() {\r\n        this.appendPosition = 'head';\r\n    }\r\n\r\n    protected async onLoad() {\r\n        if (this.idFieldName) return;\r\n        this.sortOrder = 'asc';\r\n    }\r\n\r\n    protected async loadResults(param: any, pageStart: number, pageSize: number): Promise<{ [name: string]: any[] }> {\r\n        let { keyWord, salesregion } = param;\r\n        let url = this.searchUrl + '/key=' + keyWord;\r\n        if (this.pageNumber > 1) {\r\n            url += \"/\" + this.pageNumber;\r\n        }\r\n        try {\r\n            let resp = await fetch(url, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n            });\r\n            let ret = await resp.json();\r\n            let items = ret.hits;\r\n            // 做数据变换，返回items\r\n            return { $page: items };\r\n        } catch (error) {\r\n            return { $page: [] };\r\n        }\r\n    }\r\n\r\n    /*\r\n    async refreshItems(item: T) {\r\n        let index = this._items.indexOf(item);\r\n        if (index < 0) return;\r\n        let startIndex: number;\r\n        if (this.appendPosition === 'tail') {\r\n            startIndex = index - 1;\r\n        }\r\n        else {\r\n            startIndex = index + 1;\r\n        }\r\n        let pageStart = this.getPageId(this._items[startIndex]);\r\n        let pageSize = 1;\r\n        let ret = await this.load(\r\n            this.param,\r\n            pageStart,\r\n            pageSize);\r\n        let len = ret.length;\r\n        if (len === 0) {\r\n            this._items.splice(index, 1);\r\n            return;\r\n        }\r\n        for (let i = 0; i < len; i++) {\r\n            let newItem = ret[i];\r\n            if (!newItem) continue;\r\n            let newId = newItem[this.idFieldName];\r\n            if (newId === undefined || newId === null) continue;\r\n            if (typeof newId === 'object') newId = newId.id;\r\n            let oldItem = this._items.find(v => {\r\n                let oldId = (v as any)[this.idFieldName];\r\n                if (oldId === undefined || oldId === null) return false;\r\n                if (typeof oldId === 'object') oldId = oldId.id;\r\n                return oldId = newId;\r\n            });\r\n            if (oldItem) {\r\n                _.merge(oldItem, newItem);\r\n            }\r\n        }\r\n    }\r\n    */\r\n\r\n    protected async onLoaded(): Promise<void> {\r\n\r\n        this.pageNumber += 1;\r\n    }\r\n}","import * as React from 'react';\r\nimport { RowContext, nav, User, BoxId } from \"tonva-react\";\r\nimport { CUqBase } from '../CBase';\r\nimport { VCartLabel } from './VCartLabel';\r\nimport { VCartLabel_Web } from './VCartLabel_Web';\r\nimport { VCart } from './VCart';\r\nimport { CartPackRow, CartItem2 } from './Cart';\r\n\r\nexport class CCart extends CUqBase {\r\n\r\n    private selectedCartItems: CartItem2[];\r\n\r\n    protected async internalStart(param: any) {\r\n        this.openVPage(VCart);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * 显示购物车图标\r\n     */\r\n    renderCartLabel() {\r\n        return this.renderView(VCartLabel);\r\n    }\r\n\r\n    renderCartLabel_Web() {\r\n        return this.renderView(VCartLabel_Web);\r\n    }\r\n\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data, parentData } = context;\r\n        let { product } = parentData;\r\n        let { pack, price, retail, currency } = data as CartPackRow;\r\n        let { cart } = this.cApp;\r\n        if (value > 0)\r\n            await cart.add(product, pack, value, price, retail, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: product.id, packId: pack.id }]);\r\n    }\r\n\r\n    onRowStateChanged = async (context: RowContext, selected: boolean, deleted: boolean) => {\r\n        alert('onRowStateChanged')\r\n    }\r\n\r\n    private loginCallback = async (user: User): Promise<void> => {\r\n        let { cApp } = this;\r\n        await cApp.currentUser.setUser(user);\r\n        await cApp.loginCallBack(user);\r\n        this.closePage(1);\r\n        await this.doFirstOrderChecking();\r\n    };\r\n\r\n    onProductClick = (product: BoxId) => {\r\n        let { cart, cProduct } = this.cApp;\r\n        if (!cart.isDeleted(product.id)) {\r\n            cProduct.showProductDetail(product);\r\n        }\r\n    }\r\n    /**\r\n     * 商品从购物车永久性删除\r\n     */\r\n    strikeOut = async () => {\r\n        let { cart } = this.cApp;\r\n        this.selectedCartItems = cart.getSelectedItems();\r\n        await cart.removeStrike(this.selectedCartItems)\r\n\r\n\r\n        // let combinedData = this.selectedCartItems.map((el: CartItem2) => {\r\n        //     return el.packs.map((v: any) => {\r\n        //         return {\r\n        //             productId: el.product, packId: v.pack\r\n        //         }\r\n        //     })\r\n        // }).flat();\r\n        // combinedData.forEach(async (el: any) => {\r\n        //     await cart.removeFromCart(el);\r\n        // })\r\n    }\r\n\r\n    checkOut = async () => {\r\n        let { cart } = this.cApp;\r\n        this.selectedCartItems = cart.getSelectedItems();\r\n        if (this.selectedCartItems === undefined) return;\r\n        if (!this.isLogined) {\r\n            nav.showLogin(this.loginCallback, true);\r\n        } else {\r\n            await this.doFirstOrderChecking();\r\n        }\r\n    }\r\n\r\n    private doFirstOrderChecking = async () => {\r\n        let { cMe, currentUser } = this.cApp;\r\n        if (!currentUser.allowOrdering) {\r\n            let note = <>\r\n                化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。\r\n                为此，需要您重新提供非虚拟的、可核查的信息。这些信息包括下面所有带有 <span className=\"text-danger\">*</span> 的信息。\r\n            </>;\r\n            cMe.toPersonalAccountInfo(this.doCheckOut, note);\r\n        } else {\r\n            await this.doCheckOut();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 导航到CheckOut界面\r\n     */\r\n    doCheckOut = async () => {\r\n\r\n        let { cOrder } = this.cApp;\r\n        let { selectedCartItems } = this;\r\n        if (selectedCartItems === undefined) return;\r\n        await cOrder.createOrderFromCart(selectedCartItems);\r\n        // await cOrder.start(this.selectedCartItems);\r\n    }\r\n\r\n    tab = () => this.renderView(VCart);\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    renderCartProduct = (product: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderCartProduct(product);\r\n    }\r\n\r\n    tabPage: VCart = new VCart(this);\r\n}\r\n","import * as React from 'react';\r\nimport { Render } from './render';\r\n\r\nexport interface MainSubs<M, S> {\r\n    main: M;\r\n    subs: S[];\r\n}\r\n\r\nexport abstract class ViewBase<T> {\r\n    model: T;\r\n    abstract render(): JSX.Element;\r\n}\r\n\r\nexport class ViewMainSubs<M, S> extends ViewBase<MainSubs<M, S>> {\r\n    protected main: Render<M>;\r\n    protected sub: Render<S>;\r\n    constructor(main: Render<M>, sub: Render<S>) {\r\n        super();\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    protected subsContainer(subViews: JSX.Element[]): JSX.Element {\r\n        return <div>{subViews}</div>\r\n    }\r\n\r\n    protected renderSubItems(): JSX.Element[] {\r\n        let { subs } = this.model;\r\n        if (!subs) return null;\r\n        let subViews: JSX.Element[] = subs.map((v, index) => {\r\n            return <this.sub key={index} {...v} />;\r\n        });\r\n        return subViews;\r\n    }\r\n\r\n    protected renderSubs = (): JSX.Element => {\r\n        return this.subsContainer(this.renderSubItems());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        let { main } = this.model;\r\n        return <>\r\n            <this.main {...main} />\r\n            <this.renderSubs />\r\n        </>;\r\n    }\r\n}\r\n\r\nexport class ViewListMainSubs<M, S> extends ViewBase<MainSubs<M, S>[]> {\r\n    private row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>;\r\n    private main: Render<M>;\r\n    private sub: Render<S>;\r\n    constructor(\r\n        row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>,\r\n        main: Render<M>,\r\n        sub: Render<S>) {\r\n        super();\r\n        this.row = row;\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    render(): JSX.Element {\r\n        return <>\r\n            {this.model.map((v, index) => {\r\n                let view = new this.row(this.main, this.sub);\r\n                view.model = v;\r\n                return <React.Fragment key={index}>{view.render()}</React.Fragment>;\r\n            })}\r\n        </>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Image } from \"tonva-react\";\r\n\r\nconst imagePath = \"https://static.jkchemical.com/Structure/\";\r\nconst pointProductImagePath = \"https://static.jkchemical.com/images/pointshop\";\r\nconst altimagePath = \"https://static.jkchemical.com/Structure/999.png\";\r\n\r\ninterface ProductImageProps {\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    chemicalId: string;\r\n}\r\n\r\nexport function ProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    return <Image src={chemicalId && (imagePath + chemicalId.substr(0, 3) + '/' + chemicalId + '.png')}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}\r\n\r\n// export function PointProductImage(props: ProductImageProps) {\r\n\r\n//     let { style, className, chemicalId } = props;\r\n//     return <Image src={chemicalId && (pointProductImagePath + '/' + chemicalId + '.png')}\r\n//         style={style} className={className} altImage={altimagePath} />;\r\n// }\r\n\r\nexport function PointProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    if (chemicalId && /[0-9]$/.test(chemicalId))\r\n        chemicalId = pointProductImagePath + '/' + chemicalId + '.png';\r\n\r\n    return <Image src={chemicalId && chemicalId}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}","import * as React from 'react';\r\nimport { View, tv, FormField, ObjectSchema, NumSchema, UiSchema, UiCustom, RowContext, BoxId, Form, ItemSchema, ArrSchema, UiArr } from \"tonva-react\";\r\nimport { CProduct } from './CProduct';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { observer } from 'mobx-react';\r\nimport { MinusPlusWidget } from 'tools';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport classNames from 'classnames';\r\nimport { VProductFavorateLabel } from 'customer/VProductFavorateLabel';\r\n\r\nexport class VCartProuductView extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        return <>{tv(param, this.renderCartProduct)}</>;\r\n    }\r\n\r\n\r\n    private renderCartProduct = (product: any) => {\r\n        let { id, brand, description, descriptionC, origin, imageUrl } = product;\r\n\r\n        return <div className=\"row d-flex mb-3 px-2\">\r\n            <div className=\"col-12\">\r\n                <div className=\"py-2\">\r\n                    <strong>{description}</strong>\r\n                </div>\r\n                <div className=\"pb-2\">\r\n                    <strong>{descriptionC}</strong>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-4c h-4c\" />\r\n                    </div>\r\n                    <div className=\"col-9\">\r\n                        <div className=\"row\">\r\n                            {productPropItem('编号', origin)}\r\n                            {this.controller.renderChemicalInfoInCart(product)}\r\n                            {tv(brand, renderBrand)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    };\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport class VProuductView extends View<CProduct> {\r\n\r\n    product: any;\r\n    discount: number;\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            product: observable,\r\n            discount: observable,\r\n        });\r\n    }\r\n\r\n    render(product: BoxId): JSX.Element {\r\n        return <this.renderProduct productBox={product} />;\r\n    }\r\n\r\n    private async getProudct(product: BoxId) {\r\n        if (this.product === undefined) {\r\n            let ret = await this.controller.getProductAndDiscount(product);\r\n            this.product = ret.product;\r\n            this.discount = ret.discount;\r\n        }\r\n    }\r\n\r\n    private renderProduct = observer((param: any) => {\r\n        let { productBox } = param;\r\n        this.getProudct(productBox);\r\n        if (!this.product)\r\n            return null;\r\n        let { renderChemicalInfoInCart, renderFavoritesLabel } = this.controller;\r\n        let { id, brand, description, descriptionC, origin, imageUrl, isValid } = this.product;\r\n        return <div className=\"d-block mb-4 px-3\">\r\n            <div className=\"d-flex py-2\">\r\n                <div>\r\n                    <div><strong>{description}</strong></div>\r\n                    <div>{descriptionC}</div>\r\n                </div>\r\n                <div>\r\n                    {renderFavoritesLabel(id)}\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {productPropItem('产品编号', origin)}\r\n                        {renderChemicalInfoInCart(productBox)}\r\n                        {tv(brand, renderBrand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    })\r\n}\r\n\r\n/**\r\n * 显示产品包装价格，配合CProduct.renderProductPrice使用\r\n * 需要的参数product必须是BoxId(或者object?)\r\n */\r\nexport class VProductPrice extends View<CProduct> {\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            prices: observable,\r\n        });\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'pack', type: 'object' } as ObjectSchema,\r\n        { name: 'quantity', type: 'number' } as NumSchema,\r\n        { name: 'retail', type: 'number' } as NumSchema,\r\n        { name: 'vipPrice', type: 'number' } as NumSchema,\r\n        { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n        { name: 'currency', type: 'string' },\r\n    ];\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp } = this.controller;\r\n        let { cart } = cApp;\r\n        if (value > 0)\r\n            await cart.add(this.product, pack, value, price, retail, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: this.product.id, packId: pack.id }]);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            pack: { visible: false },\r\n            retail: { visible: false },\r\n            vipPrice: { visible: false },\r\n            promotionPrice: { visible: false },\r\n            currency: { visible: false },\r\n            quantity: {\r\n                widget: 'custom',\r\n                label: null,\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget,\r\n                onChanged: this.onQuantityChanged as any\r\n            } as UiCustom\r\n        }\r\n    }\r\n\r\n    prices: any;\r\n    private initPrices = async (product: BoxId, salesRegionId: number, discount: number) => {\r\n        if (this.prices === undefined)\r\n            this.prices = await this.controller.getProductPrice(product, salesRegionId, discount);\r\n    }\r\n\r\n    private renderPrice(item: any) {\r\n        let { pack, retail, vipPrice, promotionPrice } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <Form schema={this.schema} uiSchema={this.uiSchema} formData={item} />\r\n                </div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n        return right;\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private product: BoxId;\r\n    render(param: any): JSX.Element {\r\n        let { product, discount } = param;\r\n        this.product = product;\r\n        let { currentSalesRegion } = this.controller.cApp;\r\n        return <this.content product={product} SalesRegionId={currentSalesRegion} discount={discount} />;\r\n    }\r\n\r\n    private content = observer((param?: any) => {\r\n        let priceUI;\r\n        let { product, SalesRegionId, discount } = param;\r\n\r\n        let { renderDeliveryTime } = this.controller;\r\n        this.initPrices(product, SalesRegionId, discount);\r\n        if (this.prices && this.prices.length > 0) {\r\n            priceUI = this.prices.map((v: any, index: number) => {\r\n                let { pack, retail } = v;\r\n                if (retail) {\r\n                    return <div className=\"px-2\" key={pack.id}>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <div><b>{tv(pack)}</b></div>\r\n                                <div>{renderDeliveryTime(pack)}</div>\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                {this.renderPrice(v)}\r\n                            </div>\r\n                        </div>\r\n                    </div>;\r\n                } else {\r\n                    return <small>请询价</small>\r\n                }\r\n            });\r\n        }\r\n        return <>\r\n            {priceUI}\r\n        </>;\r\n    })\r\n}\r\n\r\nexport class VProductWithPrice extends View<CProduct> {\r\n    product: any;\r\n    discount: number;\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            product: observable,\r\n            discount: observable,\r\n        });\r\n    }\r\n\r\n    render(product: BoxId): JSX.Element {\r\n        return <this.renderProduct productBox={product} />;\r\n    }\r\n\r\n    private async getProudct(product: BoxId) {\r\n        if (this.product === undefined) {\r\n            let ret = await this.controller.getProductAndDiscount(product);\r\n            this.product = ret.product;\r\n            this.discount = ret.discount;\r\n        }\r\n    }\r\n\r\n    private renderProduct = observer((param: any) => {\r\n        let { productBox } = param;\r\n        this.getProudct(productBox);\r\n        if (!this.product)\r\n            return null;\r\n        let { renderChemicalInfoInCart, renderProductPrice } = this.controller;\r\n        let { id, brand, description, descriptionC, origin, imageUrl } = this.product;\r\n        return <div className=\"d-block mb-2 px-3\">\r\n            <div className=\"py-2\">\r\n                <div><strong>{description}</strong></div>\r\n                <div>{descriptionC}</div>\r\n            </div>\r\n            <div className=\"row py-2\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {productPropItem('产品编号', origin)}\r\n                        {renderChemicalInfoInCart(productBox)}\r\n                        {tv(brand, renderBrand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"border-top pt-2\">\r\n                {renderProductPrice(productBox, this.discount)}\r\n            </div>\r\n        </div>\r\n    })\r\n    /*\r\n    render(product: BoxId): JSX.Element {\r\n        let { renderProduct, renderProductPrice } = this.controller;\r\n        return <div className=\"d-flex flex-column\">\r\n            <div>{renderProduct(product)}</div>\r\n            <div className=\"p-2 border-top\">{renderProductPrice(product, 1)}</div>\r\n        </div>\r\n    }\r\n    */\r\n}\r\n\r\nexport function renderBrand(brand: any) {\r\n    return productPropItem('品牌', brand.name);\r\n}\r\n\r\nexport function productPropItem(caption: string, value: any, captionClass?: string) {\r\n    if (value === null || value === undefined || value === '0') return null;\r\n    let capClass = captionClass ? classNames(captionClass) : classNames(\"text-muted\");\r\n    let valClass = captionClass ? classNames(captionClass) : \"\";\r\n    return <>\r\n        <div className={classNames(\"col-6 col-sm-2 pr-0 small\", capClass)}> {caption}</div>\r\n        <div className={classNames(\"col-6 col-sm-4\", valClass)}>{value}</div>\r\n    </>;\r\n}\r\n/**\r\n * 产品未售提示UI\r\n */\r\nexport function unsoldProductsUI(discountinued: number) {\r\n    if (discountinued && discountinued === 1)\r\n        return <div onClick={(e: any) => e.stopPropagation()} className='w-100 carousel-control-prev'><b className=\"alert-primary alert\">该产品已下架！</b></div>\r\n    else\r\n        return <></>\r\n}\r\n/**\r\n * 显示产品信息（不包含包装价格），特定于参数包含相关的CAS/Purity等信息），现应用于产品列表\r\n * @param product\r\n */\r\n/* export function renderProduct(product: any) {\r\n    let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl, discountinued } = product;\r\n    return <div className=\"d-block mb-4 px-3 bg-white\">\r\n        <div className=\"py-2\">\r\n            <div className=\"mr-3\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n        </div>\r\n        <div className=\"row\">\r\n            <div className=\"col-3\">\r\n                <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n            </div>\r\n            <div className=\"col-9\">\r\n                <div className=\"row\">\r\n                    {productPropItem('产品编号', origin)}\r\n                    {productPropItem('CAS', CAS)}\r\n                    {productPropItem('纯度', purity)}\r\n                    {productPropItem('分子式', molecularFomula)}\r\n                    {productPropItem('分子量', molecularWeight)}\r\n                    {tv(brand, renderBrand)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        {unsoldProductsUI(discountinued)}\r\n    </div>\r\n} */\r\n\r\nexport class VProuductView2 extends View<CProduct> {\r\n\r\n    product: any;\r\n    discount: number;\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            product: observable,\r\n            discount: observable,\r\n        });\r\n    }\r\n\r\n    render(product: any): JSX.Element {\r\n        return <this.renderProduct product={product} />;\r\n    }\r\n\r\n    private renderProduct = observer((param: any) => {\r\n        let { product } = param;\r\n        let { renderFavoritesLabel } = this.controller;\r\n        let { id, brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl, discountinued } = product;\r\n        return <div className=\"d-block mb-4 px-3 bg-white\">\r\n            <div className=\"py-2\">\r\n                <div className=\"mr-3\"><strong>{description}</strong></div>\r\n                <div>{descriptionC}</div>\r\n                <div>\r\n                    {renderFavoritesLabel(id)}\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {productPropItem('产品编号', origin)}\r\n                        {productPropItem('CAS', CAS)}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('分子式', molecularFomula)}\r\n                        {productPropItem('分子量', molecularWeight)}\r\n                        {tv(brand, renderBrand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {unsoldProductsUI(discountinued)}\r\n        </div>\r\n    })\r\n}\r\n\r\n/**\r\n * 收藏列表（有收藏与取消功能）\r\n */\r\n/* export class VProductCarryFavorites extends View<CProduct>{\r\n    render(param: any): JSX.Element {\r\n        let { product } = param;\r\n        return <div className='position-relative'>\r\n            {renderProduct(product)}\r\n            <div className='position-absolute' style={{ top: 20, right: -10 }}>\r\n                {this.renderVm(VProductFavorateLabel, product.id)}\r\n            </div>\r\n        </div>\r\n    }\r\n} */","export default __webpack_public_path__ + \"static/media/logo_pointShop.14c48c64.png\";","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/homeTopicMap.2d38ac6a.jpg\";","export default __webpack_public_path__ + \"static/media/TriangleShadingO.4d691031.png\";","export default __webpack_public_path__ + \"static/media/TriangleShadingT.be0b38d7.png\";","export default __webpack_public_path__ + \"static/media/signTopicMap.7b9d1979.png\";","export default __webpack_public_path__ + \"static/media/Homemadelogo.72aca280.png\";","export default __webpack_public_path__ + \"static/media/signViceMap.4c375827.png\";","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import * as React from 'react';\r\nimport { CProduct } from './CProduct';\r\nimport {\r\n    VPage, Page, Form, ItemSchema, NumSchema, UiSchema, Field,\r\n    ObjectSchema, RowContext, UiCustom, FormField, BoxId, FA, List\r\n} from \"tonva-react\";\r\nimport { tv } from \"tonva-react\";\r\nimport { MinusPlusWidget } from '../tools/minusPlusWidget';\r\nimport { ProductPackRow } from './Product';\r\nimport { ViewMainSubs, MainProductChemical } from 'mainSubs';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { productPropItem, renderBrand } from './VProductView';\r\nimport { VProductFavorateLabel } from 'customer/VProductFavorateLabel';\r\nimport { pdfIcon } from 'tools/images';\r\nimport { TopicDivision } from 'pointMarket/VPointProduct';\r\nimport { browser } from 'tools/browser';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n];\r\n\r\nexport class VProduct extends VPage<CProduct> {\r\n    private productBox: BoxId;\r\n    private discount: number;\r\n\r\n    async open(param: any) {\r\n        let { productData, product, discount } = param;\r\n        let { getProductSpecFile, getProductMSDSFile } = this.controller;\r\n        this.productBox = product;\r\n        this.discount = discount;\r\n        // await getProductMSDSFile(product);\r\n        // await getProductSpecFile(product);\r\n        this.openPage(this.page, productData);\r\n    }\r\n\r\n    private renderProduct = (product: MainProductChemical) => {\r\n\r\n        let { id, brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"mb-3 px-2\">\r\n            <div className=\"py-2\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n            <div className=\"row mt-3\">\r\n                <div className=\"col-12 col-sm-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-12 col-sm-9\">\r\n                    <div className=\"row mx-3\">\r\n                        {productPropItem('产品编号', origin, \"font-weight-bold\")}\r\n                        {productPropItem('CAS', CAS, \"font-weight-bold\")}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('分子式', molecularFomula)}\r\n                        {productPropItem('分子量', molecularWeight)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {this.controller.renderFavoritesLabel(id)}\r\n        </div>\r\n        // { this.renderVm(VProductFavirateLabel, this.productBox) }\r\n    }\r\n\r\n    private arrTemplet = (item: ProductPackRow) => {\r\n        let { pack, retail, vipPrice, promotionPrice } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\"><FormField name=\"quantity\" /></div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div><b>{tv(pack)}</b></div>\r\n                    <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp } = this.controller;\r\n        let { cart } = cApp;\r\n        if (value > 0)\r\n            await cart.add(this.productBox, pack, value, price, retail, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: this.productBox.id, packId: pack.id }]);\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n        items: {\r\n            quantity: {\r\n                widget: 'custom',\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget as any,\r\n                onChanged: this.onQuantityChanged\r\n            } as UiCustom\r\n        },\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"mx-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n    private dealWithPDF = (fileName: string) => {\r\n        let shiftArr = fileName ? fileName.replace(/\\.pdf/ig, '').split('_') : [];\r\n        switch (shiftArr[1]) {\r\n            case 'DE':\r\n                return '德文';\r\n            case 'EN':\r\n                return '英文';\r\n            case 'EN-US':\r\n                return '英美';\r\n            case 'CN':\r\n                return '中文';\r\n            default:\r\n                return '中文';\r\n        }\r\n    }\r\n\r\n    private renderPDF = (content: any) => {\r\n        let { fileName } = content;\r\n        let language = this.dealWithPDF(fileName);\r\n        let { ToVerifyPdf } = this.controller;\r\n        return <div className=\"mx-2 d-flex flex-column text-center\" onClick={() => { ToVerifyPdf({ content, product: this.productBox }) }}>\r\n            <img src={pdfIcon} alt=\"\" style={{ width: 24 }} />\r\n            <div className=\"small\">{language}</div>\r\n        </div>\r\n    }\r\n\r\n    renderListItemPDF = (Material: any) => {\r\n        let { type, content } = Material;\r\n        if (content.length) {\r\n            return <div className=\"d-flex pt-2 border-bottom\">\r\n                <div className=\"w-3c align-self-center mr-2 mb-2\" >{type}</div>\r\n                <List items={content} item={{ render: this.renderPDF, className: 'px-2 border-left' }} className=\"d-flex bg-light mb-1\" />\r\n            </div>\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderProductMaterial = () => {\r\n        let { productMSDSFiles, productSpecFiles } = this.controller;\r\n        let MaterialArr = [{ type: 'MSDS', content: productMSDSFiles }, { type: 'SPEC', content: productSpecFiles }];//COA EUM\r\n        return <>\r\n            <List items={MaterialArr} item={{ render: this.renderListItemPDF }} />\r\n        </>\r\n    }\r\n\r\n    private page = (product: any) => {\r\n\r\n        let { cApp, productMSDSFiles, productSpecFiles } = this.controller;\r\n        /* let CurrentUA = browser.versions.mobile;\r\n        let productPdfM = CurrentUA && (productMSDSFiles.length || productSpecFiles.length) ? true : false; */\r\n\r\n        let header = cApp.cHome.renderSearchHeader();\r\n        let cartLabel = cApp.cCart.renderCartLabel();\r\n        if (true) {\r\n            let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n            viewProduct.model = product;\r\n\r\n            return <Page header={header} right={cartLabel}>\r\n                <div className=\"px-2 py-2 bg-white mb-3\">{viewProduct.render()}</div>\r\n                {/* {\r\n                    productPdfM\r\n                        ? <div className=\"py-2 px-3 bg-light\">\r\n                            {TopicDivision('产品资料')}\r\n                            <div>{this.renderProductMaterial()}</div>\r\n                        </div>\r\n                        : null\r\n                } */}\r\n            </Page>\r\n        } else {\r\n            /*\r\n            下面的做法大概不行，因为嵌套的层次较深，且都是observer的，上层observable的变化会嵌套执行下层的代码，而下层代码的render\r\n            会操作数据库，得不偿失（和React的可能还不一样，React只会更新必要的html，不会再执行查询DB的操作）\r\n            */\r\n            let { controller, productBox } = this;\r\n            let { renderProductWithPrice } = controller;\r\n            return <Page header={header} right={cartLabel}>\r\n                <div className=\"px-2 py-2 bg-white mb-3\">\r\n                    {renderProductWithPrice(productBox)}\r\n                </div>\r\n            </Page>\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Scroller } from \"tonva-react\";\r\nimport { CProduct } from './CProduct';\r\nimport { List } from \"tonva-react\";\r\nimport logo from '../images/logo.png';\r\nimport magnifier from '../images/magnifier.svg'\r\nimport { BrowserRouter as Router, Route, Link, Switch } from 'react-router-dom';\r\n// import { renderProduct } from './VProductView';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nexport class VProductList extends VPage<CProduct> {\r\n    private searchKey: string;\r\n    async open(key: string) {\r\n        this.searchKey = key;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onProductClick = async (product: any) => {\r\n        await this.controller.showProductDetail(product.id);\r\n    }\r\n\r\n    private onScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        let { productsPager } = this.controller;\r\n        //await this.controller.pageProducts.more();\r\n        productsPager.more();\r\n    }\r\n\r\n    private renderProduct = (p: any) => {\r\n        // console.log(p);\r\n        return this.controller.cApp.cProduct.renderProduct(p);\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { productsPager, cApp } = this.controller;\r\n        let { cHome, cCart } = cApp;\r\n        let header = cHome.renderSearchHeader();\r\n        let cart = cCart.renderCartLabel();\r\n        let none = <div className=\"p-3 text-warning\">[无]</div>\r\n\r\n        return <Page header={header} right={cart} onScrollBottom={this.onScrollBottom}>\r\n            <div className=\"bg-white py-2 px-3 mb-1\"><small className=\" small text-muted\">搜索: </small>{this.searchKey}</div>\r\n            <List before={''} none={none} items={productsPager} item={{ render: this.renderProduct, onClick: this.onProductClick }} />\r\n        </Page>\r\n\r\n        /*\r\n        return <div className=\"bg-light tv-page\" onScroll={(e: any) => this.onScrollBottom(e)}>\r\n            <header className=\"d-flex align-items-center p-1\">\r\n                <nav className=\"navbar navbar-expand-md\">\r\n                    <Link to=\"/\" className=\"navbar-brand mr-1\">\r\n                        {<img className=\"m-1 ml-2\" src={logo} alt=\"logo\" style={{ height: \"3rem\", width: \"2.5rem\" }} />}\r\n                    </Link>\r\n                    <form className=\"custom-search-input\">\r\n                        <div className=\"input-group\">\r\n                            <input name=\"keyInput\" type=\"text\" className=\"form-control\" style={{ borderRadius: 30 }} placeholder=\"Search\" />\r\n                            <div className=\"input-group-append\">\r\n                                <button className=\"btn\" type=\"submit\">\r\n                                    <img src={magnifier} alt=\"magnifier\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                    <button className=\"narbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navBarResponsive\"\r\n                        aria-controls=\"navBarResponsive\" aria-expanded=\"false\">\r\n                        <span className=\"narbar-toggler-icon\">nav</span>\r\n                    </button>\r\n\r\n                    <div className=\"collapse navbar-collapse\" id=\"navBarResponsive\">\r\n                        <ul className=\"navbar-nav mr-auto\">\r\n                            <li className=\"nav-item dropdown\">\r\n                                <a className=\"nav-link dropdown-toggle\" href=\"#\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                                    aria-expanded=\"false\">\r\n                                    产品<b className=\"caret\"></b>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdownPortfolio\">\r\n                                </div>\r\n                            </li>\r\n                            <li className=\"nav-item dropdown\">\r\n                                <a className=\"nav-link dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                                    aria-expanded=\"false\">\r\n                                    服务<b className=\"caret\"></b>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdownBlog\">\r\n                                    <a className=\"dropdown-item\"\r\n                                        href=\"http://www.jkchemical.com/Member/Center/SaleOrderList.aspx?language=ch\">订单查询\r\n                                </a>\r\n                                    <a className=\"dropdown-item\"\r\n                                        href=\"https://www.jkchemical.com/PointsSearch.aspx?language=ch\">积分查询</a>\r\n\r\n                                </div>\r\n                            </li>\r\n                            <li className=\"nav-item dropdown\">\r\n                                <a className=\"nav-link dropdown-toggle\" id=\"navbarDropdownBlog\" data-toggle=\"dropdown\"\r\n                                    aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                    会员<b className=\"caret\"></b>\r\n                                </a>\r\n                                <div className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdownBlog\">\r\n                                    <a className=\"dropdown-item\"\r\n                                        href=\"https://www.jkchemical.com/ChangePassword.aspx?language=ch\">修改密码</a>\r\n                                </div>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <div id=\"login\">\r\n                                </div>\r\n                            </li>\r\n                            <li className=\"nav-item display-none\">\r\n                                <a className=\"nav-link shopping-cart\"\r\n                                    href=\"https://www.jkchemical.com/Member/Share/Shopping.aspx?language=ch\">\r\n                                    <img src=\"<%=$root%>img/commerce-and-shopping.svg\" width=\"40px\" />\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </nav>\r\n            </header>\r\n            <main>\r\n                <div className=\"bg-white py-2 px-3 mb-1\"><small className=\" small text-muted\">搜索: </small>{this.searchKey}</div>\r\n                <List before={''} none={none} items={productsPager} item={{ render: this.renderProduct }} />\r\n            </main>\r\n           <Route path=\"/search/:key\" render={(props: any) => {\r\n                let { match, location, history } = props;\r\n                let { params } = match;\r\n                this.controller.searchByKey(params.key);\r\n                return <main>\r\n                    <div className=\"bg-white py-2 px-3 mb-1\"><small className=\" small text-muted\">搜索: </small>{this.searchKey}</div>\r\n                    <List before={''} none={none} items={productsPager} item={{ render: this.renderProduct }} />\r\n                </main>\r\n            }} /> \r\n\r\n        </div>\r\n        */\r\n    });\r\n\r\n    render = (key: any) => {\r\n        this.searchKey = key;\r\n        return <this.page />\r\n    }\r\n}","import { Entity } from \"tonva-react\";\r\nimport { CApp } from '../CApp';\r\n//import { CCartApp } from 'CCartApp';\r\n\r\nexport abstract class Loader<T> {\r\n    protected cApp: CApp;\r\n    private entities: Entity[] = [];\r\n    private schemaLoaded: boolean = false;\r\n    constructor(cApp: CApp) {\r\n        this.cApp = cApp;\r\n        //this.initEntities();\r\n    }\r\n\r\n    //protected abstract initEntities(): void;\r\n\r\n    protected async loadSchemas() {\r\n        if (this.schemaLoaded === true) return;\r\n        await Promise.all(this.entities);\r\n        this.schemaLoaded = true;\r\n    }\r\n\r\n    async load(param: any): Promise<T> {\r\n        await this.loadSchemas();\r\n        let data = this.initData();\r\n        await this.loadToData(param, data);\r\n        return data;\r\n    }\r\n    protected abstract loadToData(param: any, data: T): Promise<void>;\r\n    protected abstract initData(): T;\r\n}\r\n","import { Loader } from '../mainSubs/loader';\r\n\r\nexport class LoaderProductChemical extends Loader<any> {\r\n    protected async loadToData(productId: number, data: any): Promise<void> {\r\n\r\n        let productChemical = await this.cApp.uqs.product.ProductChemical.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n    }\r\n\r\n    protected initData(): any {\r\n        return {};\r\n    }\r\n}","import _ from 'lodash';\r\nimport { ProductPackRow } from './Product';\r\nimport { Loader } from '../mainSubs/loader';\r\nimport { MainSubs, MainProductChemical, MainBrand } from '../mainSubs';\r\nimport { LoaderProductChemical } from '../tools/productChemical';\r\n\r\nexport class LoaderBrand extends Loader<MainBrand> {\r\n    protected async loadToData(brandId: number, data: MainBrand): Promise<void> {\r\n        let brand = await this.cApp.uqs.product.Brand.load(brandId);\r\n        data.id = brand.id;\r\n        data.name = brand.name;\r\n    }\r\n\r\n    protected initData(): MainBrand {\r\n        return {} as MainBrand;\r\n    }\r\n}\r\n\r\nexport class LoaderProductWithChemical extends Loader<MainProductChemical> {\r\n\r\n    protected async loadToData(productId: number, data: MainProductChemical): Promise<void> {\r\n\r\n        let { cApp } = this;\r\n        let { currentUser, uqs } = cApp;\r\n        let { product: productUq, webuser } = uqs;\r\n        let product = await productUq.ProductX.load(productId);\r\n        if (product === undefined)\r\n            return;\r\n        _.merge(data, product);\r\n\r\n        let brandLoader = new LoaderBrand(this.cApp);\r\n        data.brand = await brandLoader.load(data.brand.id);\r\n\r\n        let productChemicalLoader = new LoaderProductChemical(this.cApp);\r\n        let productChemical: any = await productChemicalLoader.load(productId);\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n\r\n        data.packs = [];\r\n        product.packx.forEach((e: any) => {\r\n            data.packs.push(e);\r\n        });\r\n    }\r\n\r\n    protected initData(): MainProductChemical {\r\n        return {} as MainProductChemical;\r\n    }\r\n}\r\n\r\nexport class LoaderProductChemicalWithPrices extends Loader<MainSubs<MainProductChemical, ProductPackRow>> {\r\n\r\n    protected initData(): MainSubs<MainProductChemical, ProductPackRow> {\r\n        return { main: {} as MainProductChemical, subs: [] as ProductPackRow[] };\r\n    }\r\n\r\n    protected async loadToData(productId: any, data: MainSubs<MainProductChemical, ProductPackRow>): Promise<void> {\r\n        let { customerDiscount, product, promotion } = this.cApp.uqs;\r\n        let productLoader = new LoaderProductWithChemical(this.cApp);\r\n        data.main = await productLoader.load(productId);\r\n\r\n        let discount = 0;\r\n        let { currentUser, currentSalesRegion, cart, currentLanguage } = this.cApp;\r\n        //线上客户是否是线下客户 协议折扣  discount\r\n        if (currentUser.hasCustomer) {\r\n            let discountSetting = await customerDiscount.GetDiscount.obj({ brand: data.main.brand.id, customer: currentUser.currentCustomer });\r\n            if (discountSetting && discountSetting.discount)\r\n                discount = discountSetting.discount;\r\n        }\r\n\r\n        // 协议客户与vip客户不同存\r\n        if (currentUser.webUserVIPCard !== undefined) {\r\n            let brandDiscounts = currentUser.VIPDiscount;\r\n            let brandDiscount = brandDiscounts.ret.find((e: any) => e.brand.id === data.main.brand.id);\r\n            // 协议与vip折扣比较 取其大值  (两者不可同存)\r\n            if (brandDiscount && brandDiscount.discount > discount)\r\n                discount = brandDiscount && brandDiscount.discount;\r\n        }\r\n\r\n        let { id: currentSalesRegionId } = currentSalesRegion;\r\n        let prices = await product.PriceX.table({ product: productId, salesRegion: currentSalesRegionId });\r\n        data.subs = prices.filter(e => e.discountinued === 0 && e.expireDate > Date.now()).sort((a, b) => a.retail - b.retail).map(element => {\r\n            let ret: any = {};\r\n            ret.pack = element.pack;\r\n            ret.retail = element.retail;\r\n            if (discount !== 0)\r\n                ret.vipPrice = Math.round(element.retail * (1 - discount));\r\n            ret.currency = currentSalesRegion.currency;\r\n            ret.quantity = cart.getQuantity(productId, element.pack.id)\r\n            return ret;\r\n        });\r\n\r\n        let promises: PromiseLike<any>[] = [];\r\n        data.subs.forEach(v => {\r\n            promises.push(promotion.GetPromotionPack.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n\r\n        for (let i = 0; i < data.subs.length; i++) {\r\n            let promotion = results[i];\r\n            let discount = promotion && promotion.discount;\r\n            if (discount)\r\n                data.subs[i].promotionPrice = Math.round((1 - discount) * data.subs[i].retail);\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { tv, View } from \"tonva-react\";\r\nimport { CProduct } from './CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { makeObservable, observable } from 'mobx';\r\n\r\nexport class VProductDelivery extends View<CProduct> {\r\n\r\n    inventoryAllocation: any[];\r\n    futureDeliveryTimeDescription: string;\r\n\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            inventoryAllocation: observable,\r\n            futureDeliveryTimeDescription: observable,\r\n        });\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        let { obj: packObj, id: packId } = param;\r\n        let { owner: productId } = packObj;\r\n        let { controller } = this;\r\n        let { currentSalesRegion } = controller.cApp;\r\n        return <this.content packId={packId} productId={productId} currentSalesRegion={currentSalesRegion} />;\r\n    }\r\n\r\n    private initInventoryAllocation = async (productId: number, packId: number, salesRegionId: number) => {\r\n        if (this.inventoryAllocation === undefined)\r\n            this.inventoryAllocation = await this.controller.getInventoryAllocation(productId, packId, salesRegionId);\r\n    }\r\n\r\n    private initFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n        if (this.futureDeliveryTimeDescription === undefined)\r\n            this.futureDeliveryTimeDescription = await this.controller.getFutureDeliveryTimeDescription(productId, salesRegionId);\r\n    }\r\n\r\n    private content = observer((param: any): any => {\r\n\r\n        let deliveryTimeUI;\r\n        let { packId, productId, currentSalesRegion } = param;\r\n        if (productId) {\r\n            this.initInventoryAllocation(productId, packId, currentSalesRegion);\r\n            this.initFutureDeliveryTimeDescription(productId, currentSalesRegion);\r\n        }\r\n        if (this.inventoryAllocation === undefined || this.futureDeliveryTimeDescription === undefined)\r\n            return null;\r\n        if (this.inventoryAllocation && this.inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = this.inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                if (quantity > 0) {\r\n                    return <div key={index} className=\"text-success\">\r\n                        {tv(warehouse, (values: any) => <span className=\"small\">{values.name}</span>)}: {(quantity > 10 ? '>10' : quantity)}\r\n                        {deliveryTimeDescription}\r\n                    </div>\r\n                } else {\r\n                    return undefined;\r\n                }\r\n            });\r\n        } else {\r\n            deliveryTimeUI = <div>{this.futureDeliveryTimeDescription && '期货: ' + this.futureDeliveryTimeDescription}</div>;\r\n        }\r\n        return deliveryTimeUI;\r\n    })\r\n}","import * as React from 'react';\r\nimport { tv, View } from \"tonva-react\";\r\nimport { CProduct } from './CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { productPropItem } from './VProductView';\r\n\r\nexport class VChemicalInfoInCart extends View<CProduct> {\r\n\r\n    render(param: any): JSX.Element {\r\n        let { id: productId } = param;\r\n        if (typeof productId === 'object')\r\n            productId = productId.id;\r\n        let { controller } = this;\r\n        controller.getChemicalInfo(productId);\r\n        return <this.content productId={productId} />;\r\n    }\r\n\r\n    private content = observer((param: any) => {\r\n\r\n        let { productId } = param;\r\n        let { chemicalInfoContainer } = this.controller;\r\n        let chemicalInfo = chemicalInfoContainer[productId];\r\n        if (chemicalInfo !== undefined) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = chemicalInfo;\r\n            return <>\r\n                {productPropItem('CAS', CAS)}\r\n                {productPropItem('纯度', purity)}\r\n                {productPropItem('分子式', molecularFomula)}\r\n                {productPropItem('分子量', molecularWeight)}\r\n            </>\r\n        }\r\n        return <></>;\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport { CProduct } from './CProduct';\r\nimport { List, View, Page, Scroller } from \"tonva-react\";\r\n// import { renderProduct } from './VProductView';\r\n\r\nexport class VProductList_Web extends View<CProduct> {\r\n\r\n    private onProductClick = async (product: any) => {\r\n        // await this.controller.showProductDetail(product.id);\r\n        let id = product.id;\r\n        document.location.href = '../product/' + + id.obj.id;\r\n    }\r\n\r\n    private renderProduct = (p: any) => {\r\n        // console.log(p);\r\n        return this.controller.cApp.cProduct.renderProduct(p);\r\n    }\r\n\r\n    render(key: string) {\r\n        let { productsPager, cApp } = this.controller;\r\n        let none = <div className=\"p-3 text-warning\">[无]</div>\r\n        return <div>\r\n            <div className=\"bg-white py-2 px-3 mb-1\"><small className=\" small text-muted\">搜索: </small>{key}</div>\r\n            <List before={''} none={none} items={productsPager} item={{ render: this.renderProduct, onClick: this.onProductClick }} />\r\n        </div>\r\n\r\n    }\r\n}","import * as React from 'react';\r\nimport { CProduct } from './CProduct';\r\nimport {\r\n    VPage, Page, Form, ItemSchema, NumSchema, UiSchema, Field,\r\n    ObjectSchema, RowContext, UiCustom, FormField, BoxId, View\r\n} from \"tonva-react\";\r\nimport { tv } from \"tonva-react\";\r\nimport { MinusPlusWidget } from '../tools/minusPlusWidget';\r\nimport { ProductPackRow } from './Product';\r\nimport { ViewMainSubs, MainProductChemical } from 'mainSubs';\r\nimport { ProductImage } from 'tools/productImage';\r\nimport { productPropItem, renderBrand } from './VProductView';\r\nimport { ProductItem } from '../tools/ProductItem';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    { name: 'inventoryAllocation', type: 'object' } as ObjectSchema,\r\n    { name: 'futureDeliveryTimeDescription', type: 'string' }\r\n];\r\n\r\nexport class VProduct_Web extends View<CProduct> {\r\n\r\n    private productBox: BoxId;\r\n    private discount: number;\r\n    private product: any;\r\n\r\n    private renderProduct = (product: MainProductChemical) => {\r\n        // console.log(this.product);\r\n        // console.log(product);\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"mb-3 px-2\">\r\n            <div className=\"py-2\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n            <div className=\"row mt-3\">\r\n                <div className=\"col-12 col-sm-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-12 col-sm-9\">\r\n                    <div className=\"row mx-3\">\r\n                        {productPropItem('产品编号', origin, \"font-weight-bold\")}\r\n                        {productPropItem('CAS', CAS, \"font-weight-bold\")}\r\n                        {productPropItem('纯度', purity)}\r\n                        {productPropItem('分子式', molecularFomula)}\r\n                        {productPropItem('分子量', molecularWeight)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private arrTemplet = (item: ProductPackRow) => {\r\n        let { pack, retail, vipPrice, promotionPrice } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = this.minPrice(vipPrice, promotionPrice);\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>¥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">¥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\"><FormField name=\"quantity\" /></div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div><b>{tv(pack)}</b></div>\r\n                    <div>{this.controller.renderDeliveryTime(pack)}</div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { pack, retail, vipPrice, promotionPrice, currency } = data;\r\n        let price = this.minPrice(vipPrice, promotionPrice) || retail;\r\n        let { cApp } = this.controller;\r\n        let { cart } = cApp;\r\n        if (value > 0)\r\n            await cart.add(this.productBox, pack, value, price, retail, currency);\r\n        else\r\n            await cart.removeFromCart([{ productId: this.productBox.id, packId: pack.id }]);\r\n    }\r\n\r\n    private minPrice(vipPrice: any, promotionPrice: any) {\r\n        if (vipPrice || promotionPrice)\r\n            return Math.min(typeof (vipPrice) === 'number' ? vipPrice : Infinity, typeof (promotionPrice) === 'number' ? promotionPrice : Infinity);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n        items: {\r\n            quantity: {\r\n                widget: 'custom',\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget as any,\r\n                onChanged: this.onQuantityChanged\r\n            } as UiCustom\r\n        },\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"mx-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n\r\n    render(param: any): JSX.Element {\r\n\r\n        let { productData, product, discount } = param;\r\n        this.productBox = product;\r\n        this.discount = discount;\r\n        this.product = productData;\r\n        let { cApp } = this.controller;\r\n        let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n        viewProduct.model = this.product;\r\n\r\n        return <div className=\"px-2 py-2 bg-white mb-3\">{viewProduct.render()}</div>\r\n    }\r\n}","import * as React from 'react';\r\nimport { CProduct } from './CProduct';\r\nimport { VPage, Page } from \"tonva-react\";\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { observer } from 'mobx-react-lite';\r\nimport Pdfh5 from 'pdfh5'\r\nimport \"pdfh5/css/pdfh5.css\";\r\n\r\nexport class VPDFView extends VPage<CProduct> {\r\n    pdfh5: any;\r\n    fileName: string = '';      /* 文件名称 */\r\n    fileUrl: any;               /* 文件路径 */\r\n    isFoundFile: boolean = true;/* 文件是否存在 */\r\n\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            pdfh5: observable,\r\n            fileName: observable,\r\n            fileUrl: observable,\r\n            isFoundFile: observable,\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        this.fileName = this.controller.currentFileName;\r\n        this.fileUrl = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    ParsRenderPDF = () => {\r\n        if (this.fileUrl.status) {\r\n            this.isFoundFile = false;\r\n        } else {\r\n            this.isFoundFile = true;\r\n            this.pdfh5 = new Pdfh5(\"#PDFVIEW\", {\r\n                // pdfurl: this.fileUrl\r\n                data: this.fileUrl\r\n            });\r\n        }\r\n    }\r\n\r\n    // showAci\r\n\r\n\r\n    private page = observer(() => {\r\n        let header = <div className=\"w-100 text-center\">{this.fileName}</div>;\r\n        let right = <></>;// <div className=\"mr-2\" onClick={() => this.isShowActionSheet = true}><FA name='ellipsis-h' /></div>;\r\n        setTimeout(() => {this.ParsRenderPDF()}, 50);\r\n        \r\n        return <Page header={header} right={right} >\r\n            {/* <div className=\"position-fixed d-flex flex-column justify-content-end\" style={{ top: 0, left: 0, bottom: 0, right: 0, background: 'rgba(0, 0, 0, .3)' }}>\r\n                <div className=\"\">\r\n                    <div>\r\n                        <button className=\"btn btn-light w-100\">下载</button>\r\n                    </div>\r\n                    <footer className=\"mt-2\">\r\n                        <button className=\"btn btn-light w-100\" onClick={() => this.isShowActionSheet = false}>取消</button>\r\n                    </footer>\r\n                </div>\r\n            </div> */}\r\n            {\r\n                this.isFoundFile \r\n                    ? <div id=\"PDFVIEW\" className=\"w-100\" style={{ height: '91vh' }}></div>\r\n                    : <div className=\"text-center py-5\">{this.fileUrl.msg}</div>\r\n            }\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { CProduct } from './CProduct';\r\nimport { VPage, Page } from \"tonva-react\";\r\nimport { makeObservable, observable } from 'mobx';\r\n\r\nimport { observer } from 'mobx-react-lite';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\nexport class VVerifyCode extends VPage<CProduct> {\r\n    verifyCodeInput: HTMLInputElement;\r\n    verifyInfo: string;\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            verifyCodeInput: observable,\r\n            verifyInfo: observable,\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    onSubmit = async () => {\r\n        let verifyCode = this.verifyCodeInput.value;\r\n        let {openPDFView, getPDFFileUrl } = this.controller;\r\n        if (!verifyCode) {\r\n            this.verifyInfo = '验证码不可为空';\r\n            setTimeout(() => this.verifyInfo = undefined, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n        this.verifyCodeInput.value = '';      \r\n        let content:any = await getPDFFileUrl(verifyCode);        \r\n        if (content.status && content.status === 412) {\r\n            this.verifyInfo = content.msg;\r\n            setTimeout(() => this.verifyInfo = undefined, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        } else {\r\n            this.closePage(); \r\n            await openPDFView(content);\r\n        }\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { verifyCode, getVerifyCode } = this.controller;\r\n        let header = <div className=\"w-100 text-center\">验证码</div>;\r\n        return <Page header={header} right={<></>} >\r\n            <div className=\"d-flex flex-column px-5 pt-3\">\r\n                <div className='d-flex '>\r\n                    <img src={verifyCode} alt=\"\" className=\"border p-1 rounded-lg\" />\r\n                    <button className=\"btn btn-link btn-block w-6c align-self-end py-0\" onClick={() => getVerifyCode()}>换一张</button>\r\n                </div>\r\n                <form onSubmit={(e) => { e.preventDefault(); this.onSubmit() }} >\r\n                    <input ref={v => this.verifyCodeInput = v} type=\"text\" className='form-control border-primary mt-2' placeholder='输入验证码' style={{ maxWidth: '20rem' }} />\r\n                </form>\r\n                \r\n                {this.verifyInfo && <div className='small text-danger'>* {this.verifyInfo}</div>}\r\n                <button className=\"btn btn-sm btn-outline-primary mt-2\" type=\"button\" onClick={this.onSubmit} style={{ maxWidth: '20rem' }}>确 认</button>\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import { observable, makeObservable } from 'mobx';\r\nimport { BoxId, nav, QueryPager, User } from \"tonva-react\";\r\nimport { CUqBase } from '../CBase';\r\nimport { VProduct } from './VProduct';\r\nimport { VProductList } from './VProductList';\r\nimport { LoaderProductChemicalWithPrices } from './itemLoader';\r\nimport { VProductDelivery } from './VProductDelivery';\r\nimport { VCartProuductView, VProductWithPrice, VProductPrice, VProuductView2 } from './VProductView';\r\nimport { VChemicalInfoInCart } from './VChemicalInfo';\r\nimport { VProductList_Web } from './VProductList_Web';\r\nimport { VProduct_Web } from './VProduct_Web';\r\nimport { ProductItem } from '../tools/ProductItem';\r\nimport { CFavorites } from '../customer/CFavorites';\r\nimport { VPDFView } from './VPDFView';\r\nimport { VVerifyCode } from './VVerifyCode';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { CApp } from 'CApp';\r\n\r\n/*\r\nclass PageProducts extends PageItems<any> {\r\n\r\n    private searchProductQuery: Query;\r\n\r\n    constructor(searchProductQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchProductQuery = searchProductQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchProductQuery.page(param, pageStart, pageSize, false);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.seq;\r\n    }\r\n}\r\n*/\r\n/**\r\n *\r\n */\r\nexport class CProduct extends CUqBase {\r\n    //pageProducts: PageProducts;\r\n    productsPager: QueryPager<any>;\r\n    productSpecFiles: any[] = [];\r\n    productMSDSFiles: any[] = [];\r\n    futureDeliveryTimeDescriptionContainer: { [cacheId: string]: string } = {};\r\n    chemicalInfoContainer: { [productId: number]: any } = {};\r\n    verifyCode: any;\r\n    currentFileName: any;\r\n    currentLanguage: any;\r\n    currentProduct: any;\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            productSpecFiles: observable,\r\n            productMSDSFiles: observable,\r\n            futureDeliveryTimeDescriptionContainer: observable,\r\n            chemicalInfoContainer: observable,\r\n            verifyCode: observable,\r\n            currentFileName: observable,\r\n            currentLanguage: observable,\r\n            currentProduct: observable,\r\n        });\r\n    }\r\n\r\n    protected async internalStart(param?: any) {\r\n        this.searchByKey(param);\r\n        this.openVPage(VProductList, param);\r\n    }\r\n\r\n    renderProductList2(key: any) {\r\n        return this.renderView(VProductList, key);\r\n    }\r\n\r\n    searchByKey(key: string) {\r\n        let { currentSalesRegion } = this.cApp;\r\n        //this.pageProducts = new PageProducts(this.uqs.product.SearchProduct);\r\n        this.productsPager = new QueryPager<any>(this.uqs.product.SearchProduct, 10, 10);\r\n        //this.pageProducts.first({ keyWord: key, salesRegion: currentSalesRegion.id });\r\n        this.productsPager.first({ keyWord: key, salesRegion: currentSalesRegion.id })\r\n        console.log(this.productsPager);\r\n    }\r\n\r\n    searchWebByKey(key: string) {\r\n        let { currentSalesRegion } = this.cApp;\r\n        //this.pageProducts = new PageProducts(this.uqs.product.SearchProduct);\r\n        this.productsPager = new QueryPager<any>(this.uqs.product.SearchProduct, 3, 3);\r\n        //this.pageProducts.first({ keyWord: key, salesRegion: currentSalesRegion.id });\r\n        this.productsPager.first({ keyWord: key, salesRegion: currentSalesRegion.id })\r\n    }\r\n\r\n    async searchByCategory(category: any) {\r\n        let { currentSalesRegion } = this.cApp;\r\n        //this.pageProducts = new PageProducts(this.uqs.product.SearchProductByCategory);\r\n        this.productsPager = new QueryPager<any>(this.uqs.product.SearchProductByCategory, 10, 10);\r\n        let { productCategoryId, name } = category;\r\n        //this.pageProducts.first({ productCategory: productCategoryId, salesRegion: currentSalesRegion.id });\r\n        await this.productsPager.first({ productCategory: productCategoryId, salesRegion: currentSalesRegion.id })\r\n        this.openVPage(VProductList, name);\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    showProductDetail = async (productId: BoxId | any, JumpSource?: any) => {\r\n\r\n        if (productId) {\r\n            let discount = 0, product = productId;\r\n            /*\r\n            product = await this.uqs.product.ProductX.load(productId);\r\n            let { currentUser } = this.cApp;\r\n            if (currentUser.hasCustomer) {\r\n                let discountSetting = await this.uqs.customerDiscount.GetDiscount.obj({ brand: product.brand.id, customer: currentUser.currentCustomer });\r\n                discount = discountSetting && discountSetting.discount;\r\n            }\r\n            */\r\n            let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n            let productData = await loader.load(productId);\r\n            if (JumpSource) this.closePage();\r\n            this.openVPage(VProduct, { productData, product, discount });\r\n        }\r\n    }\r\n\r\n    /*   renderProductCarryFavorites = (product: any) => {\r\n          return this.renderView(VProductCarryFavorites, { product: product });\r\n      } */\r\n\r\n    renderProductPrice = (product: BoxId, discount: number) => {\r\n        return this.renderView(VProductPrice, { product: product, discount: discount });\r\n    }\r\n\r\n    renderProductWithPrice = (product: BoxId) => {\r\n        return this.renderView(VProductWithPrice, product);\r\n    }\r\n\r\n    getProductPrice = async (product: BoxId, salesRegionId: number, discount: number) => {\r\n        let { id: productId } = product;\r\n        let { currentSalesRegion, cart, currentLanguage, uqs } = this.cApp;\r\n\r\n        let prices = await uqs.product.PriceX.table({ product: product, salesRegion: salesRegionId });\r\n        let priceSet = prices.filter(e => e.discountinued === 0 && e.expireDate > Date.now()).sort((a, b) => a.retail - b.retail).map(element => {\r\n            let ret: any = {};\r\n            ret.pack = element.pack;\r\n            ret.retail = element.retail;\r\n            if (discount !== 0)\r\n                ret.vipPrice = Math.round(element.retail * (1 - discount));\r\n            ret.currency = currentSalesRegion.currency;\r\n            ret.quantity = cart.getQuantity(productId, element.pack.id)\r\n            return ret;\r\n        });\r\n        let promises: PromiseLike<any>[] = [];\r\n        priceSet.forEach(v => {\r\n            promises.push(uqs.promotion.GetPromotionPack.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n\r\n        for (let i = 0; i < priceSet.length; i++) {\r\n            let promotion = results[i];\r\n            let discount = promotion && promotion.discount;\r\n            if (discount)\r\n                priceSet[i].promotionPrice = Math.round((1 - discount) * priceSet[i].retail);\r\n        }\r\n        return priceSet;\r\n    }\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        return this.renderView(VProductDelivery, pack);\r\n    }\r\n\r\n    getInventoryAllocation = async (productId: number, packId: number, salesRegionId: number) => {\r\n        return await this.uqs.warehouse.GetInventoryAllocation.table({ product: productId, pack: packId, salesRegion: this.cApp.currentSalesRegion });\r\n    }\r\n\r\n    getFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n        let cacheId = productId + '_' + salesRegionId;\r\n        if (this.futureDeliveryTimeDescriptionContainer[cacheId] === undefined) {\r\n            let futureDeliveryTime = await this.uqs.product.GetFutureDeliveryTime.table({ product: productId, salesRegion: salesRegionId });\r\n            if (futureDeliveryTime.length > 0) {\r\n                let { minValue, maxValue, unit, deliveryTimeDescription } = futureDeliveryTime[0];\r\n                this.futureDeliveryTimeDescriptionContainer[cacheId] = minValue + (maxValue > minValue ? '~' + maxValue : '') + ' ' + unit;\r\n            } else {\r\n                this.futureDeliveryTimeDescriptionContainer[cacheId] = null;\r\n            }\r\n        }\r\n        return this.futureDeliveryTimeDescriptionContainer[cacheId];\r\n    }\r\n\r\n    renderChemicalInfoInCart = (product: BoxId) => {\r\n        return this.renderView(VChemicalInfoInCart, product);\r\n    }\r\n\r\n    getChemicalInfo = async (productId: number) => {\r\n        if (this.chemicalInfoContainer[productId] === undefined) {\r\n            this.chemicalInfoContainer[productId] = await this.uqs.product.ProductChemical.obj({ product: productId });\r\n        }\r\n    }\r\n\r\n    renderFavoritesLabel = (product: number) => {\r\n        let { cApp } = this;\r\n        let { cFavorites } = cApp;\r\n        return cFavorites.renderFavoritesLabel(product);\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    renderProduct = (product: any) => {\r\n        return this.renderView(VProuductView2, product);\r\n    }\r\n\r\n    getProductAndDiscount = async (productId: BoxId) => {\r\n        let product = await this.uqs.product.ProductX.load(productId);\r\n        let discount = 0;\r\n        let { currentUser } = this.cApp;\r\n        if (currentUser.hasCustomer) {\r\n            let discountSetting = await this.uqs.customerDiscount.GetDiscount.obj({ brand: product.brand.id, customer: currentUser.currentCustomer });\r\n            discount = discountSetting && discountSetting.discount;\r\n        }\r\n        return { product: product, discount: discount };\r\n    }\r\n\r\n    renderCartProduct = (product: BoxId) => {\r\n        return this.renderView(VCartProuductView, product);\r\n    }\r\n\r\n\r\n    renderProductList = (key: string) => {\r\n        this.searchWebByKey(key);\r\n        return this.renderView(VProductList_Web, key)\r\n    }\r\n\r\n    renderProductWeb = async (key: any) => {\r\n        if (key) {\r\n            let discount = 0;\r\n            let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n            let productData = await loader.load(key);\r\n            let param: ProductItem = {\r\n                product: this.cApp.uqs.product.ProductX.boxId(key),\r\n                productData: productData,\r\n                discount: discount,\r\n            }\r\n            return this.renderView(VProduct_Web, param);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 在线预览PDF,开启验证\r\n     */\r\n    ToVerifyPdf = async (fileInfo: any) => {\r\n        let { currentUser } = this.cApp;\r\n        let { content, product } = fileInfo;\r\n        let reg = /\\w*\\//ig\r\n        this.currentFileName = content.fileName ? content.fileName.replace(reg, '').toLocaleUpperCase() : undefined;\r\n        this.currentLanguage = content.language;\r\n        this.currentProduct = product;\r\n        let loginCallback = async (user: User) => {\r\n            await currentUser.setUser(user);\r\n            this.closePage(1);\r\n            await this.openVerifyCode();\r\n        };\r\n        if (!this.isLogined)\r\n            nav.showLogin(loginCallback, true);\r\n        else\r\n            await this.openVerifyCode();\r\n    }\r\n\r\n    /**\r\n     * 验证码页面\r\n     */\r\n    openVerifyCode = async () => {\r\n        this.getVerifyCode();\r\n        this.openVPage(VVerifyCode);\r\n    }\r\n\r\n    /**\r\n     * PDF文件预览页面\r\n     */\r\n    openPDFView = async (fileUrl: any) => {\r\n        this.openVPage(VPDFView, fileUrl);\r\n    }\r\n\r\n    /**\r\n     * 获取PDF文件流\r\n     */\r\n    getPDFFileUrl = async (captcha: string) => {\r\n        let lang = this.currentLanguage ? this.currentLanguage.id : undefined;\r\n        let productId = this.currentProduct ? this.currentProduct.id : undefined;        \r\n        // let res = await window.fetch(GLOABLE.CONTENTSITE + `/partial/productpdffile/${captcha}/${32}/${7084}`);\r\n        let res = await window.fetch(GLOABLE.CONTENTSITE + `/partial/productpdffile/${captcha}/${lang}/${productId}`);\r\n        if (res.status === 200) {\r\n            let content = await res.arrayBuffer();\r\n            return content;\r\n        } else {\r\n            return {\r\n                status:res.status,\r\n                msg: res.status !== 412 ? res.statusText : '验证码错误!'\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取验证码\r\n     */\r\n    getVerifyCode = async () => {\r\n        let timer = (new Date()).getTime()\r\n        this.verifyCode = GLOABLE.CONTENTSITE + `/partial/captcha/?timer=${timer}`;//'http://dummyimage.com/200x100';\r\n    }\r\n\r\n    /**\r\n     * 获取产品MSDS文件\r\n     */\r\n    getProductMSDSFile = async (product: any) => {\r\n        this.productMSDSFiles = await this.uqs.product.ProductMSDSFile.table({ product });\r\n        this.productMSDSFiles = this.productMSDSFiles.sort((a: any, b: any) => b.language.id - a.language.id);\r\n    }\r\n\r\n    /**\r\n     * 获取产品Spec文件\r\n     */\r\n    getProductSpecFile = async (product: any) => {\r\n        this.productSpecFiles = await this.uqs.product.ProductSpecFile.table({ product });\r\n    }\r\n}","import * as React from 'react';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, tv, List, LMR, FA, autoHideTips } from \"tonva-react\";\r\nimport { COrder } from './COrder';\r\nimport { OrderItem } from './Order';\r\nimport { CartPackRow } from '../cart/Cart';\r\nimport classNames from 'classnames';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\nexport class VCreateOrder extends VPage<COrder> {\r\n\r\n    private useShippingAddress: boolean = true;\r\n    private shippingAddressIsBlank: boolean = false;\r\n    private invoiceAddressIsBlank: boolean = false;\r\n    private invoiceIsBlank: boolean = false;\r\n   \r\n    shippingAddressTip = observable.box();\r\n\tinvoiceAddressTip = observable.box();\r\n\tinvoiceTip = observable.box();\r\n    comBininvoiceTip = observable.box();\r\n\r\n    fromOrderParam: string;\r\n    orderDraftBrief: any;\r\n\r\n    constructor(c: COrder) {\r\n        super(c);\r\n\r\n        makeObservable<VCreateOrder, \"useShippingAddress\" | \"shippingAddressIsBlank\" | \"invoiceAddressIsBlank\" | \"invoiceIsBlank\">(this, {\r\n            useShippingAddress: observable,\r\n            shippingAddressIsBlank: observable,\r\n            invoiceAddressIsBlank: observable,\r\n            invoiceIsBlank: observable,\r\n            fromOrderParam: observable,\r\n            orderDraftBrief: observable\r\n        });\r\n    }\r\n\r\n    async open(param: any) {\r\n        let { exOrderContact } = this.controller;\r\n        this.fromOrderParam = param.fromOrderParam;\r\n        this.orderDraftBrief = param.orderDraftBrief;\r\n        await exOrderContact();\r\n        this.openPage(this.page, param);\r\n    }\r\n\r\n    private nullContact = () => {\r\n        return <span className=\"text-primary\">选择收货地址</span>;\r\n    }\r\n\r\n    private packsRow = (item: CartPackRow, index: number) => {\r\n        let { pack, quantity, retail, price, priceInit } = item;\r\n\r\n        let retailUI: any;\r\n        if (price !== retail) {\r\n            retailUI = <del>¥{retail * quantity}</del>;\r\n        }\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger h5\"><small>¥</small>{parseFloat((price * quantity).toFixed(2))}</span>\r\n                    <small className=\"text-muted\">(¥{parseFloat(price.toFixed(2))} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n            <div>{this.controller.cApp.cProduct.renderDeliveryTime(pack)}</div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: OrderItem) => {\r\n        let { product, packs } = orderItem;\r\n        let { controller, packsRow } = this;\r\n        return <div>\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-6 pb-3\">{controller.renderOrderItemProduct(product)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private orderItemKey = (orderItem: OrderItem) => {\r\n        return orderItem.product.id;\r\n    }\r\n\r\n    private renderCoupon = observer((param: any) => {\r\n        let { couponAppliedData, hasAnyCoupon, removeCoupon } = this.controller;\r\n        if (couponAppliedData['id'] === undefined) {\r\n            let tip = hasAnyCoupon ? \"有可用优惠卡/券，点击使用\" : \"输入优惠券/积分码\";\r\n            return <span className=\"text-primary\">{tip}</span>;\r\n        } else {\r\n            let { code, types } = couponAppliedData;\r\n            let { couponOffsetAmount, couponRemitted, point } = param;\r\n            let offsetUI, remittedUI, noOffsetUI;\r\n            let cancelCouponUI = <div\r\n                className=\"position-absolute text-primary border text-center border-primary dropdown-menu-right rounded-circle\"\r\n                style={{ border: 1, cursor: 'pointer', width: 19, height: 19, lineHeight: 1, top: 5, right: 5 }}\r\n                onClick={(e) => { e.stopPropagation(); removeCoupon(); }}\r\n            >&times;</div>\r\n            if (types === \"credits\") {\r\n                offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">积分:</div>\r\n                    <div className=\"text-right text-danger\">{point}<small>分</small></div>\r\n                </div>\r\n            }\r\n            else if (couponOffsetAmount || couponRemitted) {\r\n                if (couponOffsetAmount) {\r\n                    offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                        <div className=\"text-muted\">折扣:</div>\r\n                        <div className=\"text-right text-danger\"><small>¥</small>{couponOffsetAmount.toFixed(2)}</div>\r\n                    </div>\r\n                }\r\n                if (couponRemitted) {\r\n                    remittedUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                        <div className=\"text-muted\">抵扣:</div>\r\n                        <div className=\"text-right text-danger\"><small>¥</small>{couponRemitted.toFixed(2)}</div>\r\n                    </div>\r\n                }\r\n            } else {\r\n                noOffsetUI = <div>谢谢惠顾</div>;\r\n            }\r\n            return <div className=\"mr-2 position-relative border-primary border px-3 py-1 rounded\">\r\n                <div className=\"text-success\">{code.substr(0, 4)} {code.substr(4)}</div>\r\n                {offsetUI}\r\n                {remittedUI}\r\n                {noOffsetUI}\r\n                {cancelCouponUI}\r\n            </div>\r\n        }\r\n    });\r\n\r\n    private onSubmit = async () => {\r\n        let { orderData, exOrderContacts, exOrderContact } = this.controller;\r\n        // 必填项验证\r\n        let { shippingContact, invoiceContact, invoiceType, invoiceInfo } = orderData;\r\n        let combinTip: string = \"\";\r\n        if (!shippingContact) {\r\n            this.shippingAddressTip.set('必须填写收货地址');\r\n            combinTip = \"必须填写收货地址;\";\r\n            /* this.shippingAddressIsBlank = true;\r\n            setTimeout(() => this.shippingAddressIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            return; */\r\n        }\r\n        /* if (!invoiceContact) {\r\n            if (this.useShippingAddress) {\r\n                orderData.invoiceContact = shippingContact;\r\n                this.invoiceAddressIsBlank = false;\r\n            } else {\r\n                this.invoiceAddressIsBlank = true;\r\n                setTimeout(() => this.invoiceAddressIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n                return;\r\n            }\r\n        } */\r\n        if (!invoiceContact && !this.useShippingAddress) {\r\n            this.invoiceAddressTip.set('必须填写发票地址');\r\n            combinTip += \"必须填写发票地址;\";\r\n        };\r\n        console.log('this.useShippingAddress ',this.useShippingAddress );\r\n        \r\n        if (this.useShippingAddress) {\r\n            this.controller.orderData.invoiceContact = shippingContact; this.invoiceAddressTip.set(null);\r\n        };\r\n\r\n        if (!exOrderContacts) await exOrderContact();\r\n        let { _shippingContact, _invoiceContact } = this.controller.exOrderContacts;\r\n        let exOrderContactTip: string = \"地址缺少手机号或Email,请补全\";\r\n        if (!_shippingContact) {\r\n            this.shippingAddressTip.set(\"收货\" + exOrderContactTip);\r\n            combinTip += `收货${exOrderContactTip};`;\r\n        };\r\n        if (!_invoiceContact && !this.useShippingAddress) {\r\n            this.invoiceAddressTip.set(\"发票\" + exOrderContactTip);\r\n            combinTip += `发票${exOrderContactTip};`;\r\n        };\r\n        if (!invoiceType || !invoiceInfo) {\r\n            this.invoiceTip.set('必须填写发票信息');\r\n            combinTip += \"必须填写发票信息;\";\r\n            /* this.invoiceIsBlank = true;\r\n            setTimeout(() => this.invoiceIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            return; */\r\n        };\r\n        if (invoiceType && invoiceInfo) {\r\n            let invoiceInfoO: any = await invoiceInfo.assure();\r\n            let { taxNo, address, telephone, bank, accountNo } = invoiceInfoO.obj;\r\n            let validInvoice = invoiceType.id === 1 ? !taxNo : (!taxNo || !address || !telephone || !bank || !accountNo);\r\n            if (validInvoice) {\r\n                this.invoiceTip.set('您的发票信息不全,请补全发票信息;');\r\n                combinTip += \"您的发票信息不全,请补全发票信息;\";\r\n            };\r\n        };\r\n        if (combinTip !== \"\") {\r\n            this.comBininvoiceTip.set(combinTip);\r\n            return;\r\n        };\r\n        await this.controller.submitOrder(this.orderDraftBrief);\r\n    }\r\n\r\n    renderTip = (tip:string) => <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> {tip}</div>;\r\n\r\n    private page = observer((param: any) => {\r\n        let { cApp, orderData, exOrderContacts, onSelectShippingContact, onSelectInvoiceContact,\r\n            onInvoiceInfoEdit, onCouponEdit, addToCart, onCancel } = this.controller;\r\n        let { currentUser } = cApp;\r\n\r\n        let footer: any;\r\n        if (this.fromOrderParam === \"fromOrderDraft\") {\r\n            footer = <div className=\"w-100 d-flex justify-content-center py-2\" >\r\n                <button type=\"button\" className=\"btn btn-primary mx-1 my-1 px-3\"\r\n                    onClick={this.onSubmit} >确认</button>\r\n                <button type=\"button\" className=\"btn btn-primary mx-1 my-1 px-3\"\r\n                    onClick={addToCart}>添加到购物车</button>\r\n                <button type=\"button\" className=\"btn btn-primary mx-1 my-1 px-3\"\r\n                    onClick={() => onCancel(this.orderDraftBrief)}>取消</button>\r\n            </div>\r\n        } else\r\n            footer = <div className=\"w-100 px-3 py-1\" style={{ backgroundColor: \"#f8f8f8\" }}>\r\n                {autoHideTips(this.comBininvoiceTip, <div className=\"alert alert-danger\">{this.comBininvoiceTip.get()}</div>,5000)}\r\n                <div className=\"d-flex justify-content-left\">\r\n                    <div className=\"text-danger flex-grow-1\" style={{ fontSize: '1.8rem' }}><small>¥</small>{orderData.amount}</div>\r\n                    <button type=\"button\"\r\n                        className={classNames('btn', 'w-30', { 'btn-danger': currentUser.allowOrdering, 'btn-secondary': !currentUser.allowOrdering })}\r\n                        onClick={this.onSubmit} disabled={!currentUser.allowOrdering}>提交订单\r\n                </button>\r\n                </div>\r\n            </div>;\r\n\r\n        let chevronRight = <FA name=\"chevron-right\" className=\"cursor-pointer\" />;\r\n        let exOrderContactsUI: JSX.Element = <div className=\"text-danger font-weight-bold small\">地址缺少手机号或Email,请补全</div>;\r\n        /* let shippingAddressBlankTip = this.shippingAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>\r\n            : null;\r\n        let invoiceAddressBlankTip = this.invoiceAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票地址</div> : null; */\r\n\r\n        let divInvoiceContact: any = null, invoiceExUI: JSX.Element = null;\r\n        if (this.useShippingAddress === false) {\r\n            if (orderData.invoiceContact !== undefined) {\r\n                divInvoiceContact = <div className=\"col-8 col-sm-10 offset-4 offset-sm-2 d-flex\">\r\n                    {tv(orderData.invoiceContact, undefined, undefined, this.nullContact)}\r\n                    <div onClick={onSelectInvoiceContact}>{chevronRight}</div>\r\n                </div>;\r\n                if (!exOrderContacts[\"_invoiceContact\"]) {\r\n                    invoiceExUI = <div className=\"col-8 col-sm-10 offset-4 offset-sm-2\">{exOrderContactsUI}</div>\r\n                }\r\n            } else {\r\n                divInvoiceContact = <div className=\"col-8 offset-4 offset-sm-2\">\r\n                    <button className=\"btn btn-outline-primary\"\r\n                        onClick={onSelectInvoiceContact}>选择发票地址</button>\r\n                    {/* {invoiceAddressBlankTip} */}\r\n                    {autoHideTips(this.invoiceAddressTip, this.renderTip(this.invoiceAddressTip.get()))}\r\n                </div>\r\n            }\r\n        }\r\n\r\n        let invoiceContactUI = <div className=\"row py页-3 bg-white mb-1\">\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票地址:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <div>\r\n                    <label className=\"cursor-pointer\">\r\n                        <input type=\"checkbox\"\r\n                            defaultChecked={this.useShippingAddress}\r\n                            onChange={e => {\r\n                                this.useShippingAddress = e.currentTarget.checked;\r\n                                orderData.invoiceContact = undefined;\r\n                                // this.invoiceAddressIsBlank = false;\r\n                                this.shippingAddressTip.set(null);\r\n                            }} /> 同收货地址\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            {divInvoiceContact}\r\n            {invoiceExUI}\r\n        </div>\r\n\r\n        // let invoiceBlankTip = this.invoiceIsBlank ? <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写发票信息</div> : null;\r\n        let invoiceInfoUI = <div className=\"row py-3 bg-white mb-1\" onClick={onInvoiceInfoEdit}>\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">发票信息:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                    {tv(orderData.invoiceType, (v) => <>{v.description}</>, undefined, () => <span className=\"text-primary\">填写发票信息</span>)}\r\n                    {tv(orderData.invoiceInfo, (v) => <> -- {v.title}</>, undefined, () => <></>)}\r\n                    {/* {invoiceBlankTip} */}\r\n                    {autoHideTips(this.invoiceTip, this.renderTip(this.invoiceTip.get()))}\r\n                </LMR>\r\n            </div>\r\n        </div>\r\n\r\n        let freightFeeUI = <></>;\r\n        let freightFeeRemittedUI = <></>;\r\n        if (orderData.freightFee) {\r\n            freightFeeUI = <>\r\n                <div className=\"col-4 col-sm-2 pb-2 text-muted\">运费:</div>\r\n                <div className=\"col-8 col-sm-10 text-right text-danger\"><small>¥</small>{orderData.freightFee}</div>\r\n            </>\r\n            if (orderData.freightFeeRemitted) {\r\n                freightFeeRemittedUI = <>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">运费减免:</div>\r\n                    <div className=\"col-8 col-sm-10 text-right text-danger\"><small>¥</small>{orderData.freightFeeRemitted}</div>\r\n                </>\r\n            }\r\n        }\r\n\r\n        let couponUI = <div className=\"row py-3 bg-white mb-1\" onClick={onCouponEdit}>\r\n            <div className=\"col-4 col-sm-2 pb-2 text-muted\">优惠卡券:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                    {React.createElement(this.renderCoupon,\r\n                        {\r\n                            couponOffsetAmount: orderData.couponOffsetAmount,\r\n                            couponRemitted: orderData.couponRemitted,\r\n                            point: orderData.point\r\n                        })}\r\n                </LMR>\r\n            </div>\r\n        </div>\r\n\r\n        return <Page header=\"订单预览\" footer={footer}>\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 bg-white mb-1\" onClick={onSelectShippingContact}>\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">收货地址:</div>\r\n                    <div className=\"col-8 col-sm-10\">\r\n                        <LMR className=\"w-100 align-items-center\" right={chevronRight}>\r\n                            {tv(orderData.shippingContact, undefined, undefined, this.nullContact)}\r\n                            {orderData.shippingContact && !exOrderContacts[\"_shippingContact\"] && exOrderContactsUI}\r\n                        </LMR>\r\n                        {/* {shippingAddressBlankTip} */}\r\n                        {autoHideTips(this.shippingAddressTip,this.renderTip(this.shippingAddressTip.get()))}\r\n                    </div>\r\n                </div>\r\n                {invoiceContactUI}\r\n                {invoiceInfoUI}\r\n            </div>\r\n            <List items={orderData.orderItems} item={{ render: this.renderOrderItem, key: this.orderItemKey as any }} />\r\n            <div className=\"px-2\">\r\n                <div className=\"row py-3 pr-3 bg-white my-1\">\r\n                    <div className=\"col-4 col-sm-2 pb-2 text-muted\">商品总额:</div>\r\n                    <div className=\"col-8 col-sm-10 text-right\"><small>¥</small>{orderData.productAmounts}</div>\r\n                    {freightFeeUI}\r\n                    {freightFeeRemittedUI}\r\n                </div >\r\n                {couponUI}\r\n            </div>\r\n            {this.fromOrderParam === 'fromOrderDraft' ? <div className=\"bg-white p-3 my-1 d-flex justify-content-between\">\r\n                <div className=\"pb-2 text-success\">制单人:{cApp.cOrderMaker.renderOrderMaker(orderData.orderMaker.id)}</div>\r\n                <div className=\"text-danger\">总金额:<small className=\"px-1\">¥</small>{orderData.amount}</div>\r\n            </div> : null}\r\n        </Page>\r\n    })\r\n}","import { BoxId } from \"tonva-react\";\r\nimport { observable, computed, makeObservable } from 'mobx';\r\nimport { CartPackRow } from 'cart/Cart';\r\n\r\nexport class Order {\r\n\r\n    webUser: any;\r\n    organization: BoxId;\r\n    customer: any;\r\n    orderMaker: any;\r\n\r\n    shippingContact: BoxId;\r\n    invoiceContact: BoxId;\r\n    invoiceType: BoxId;\r\n    invoiceInfo: BoxId;\r\n    orderItems: OrderItem[] = [];\r\n\r\n    freightFee: number;\r\n    freightFeeRemitted: number;\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            shippingContact: observable,\r\n            invoiceContact: observable,\r\n            invoiceType: observable,\r\n            invoiceInfo: observable,\r\n            orderItems: observable,\r\n            freightFee: observable,\r\n            freightFeeRemitted: observable,\r\n            amount: computed,\r\n            productAmount: computed,\r\n            productAmounts: computed,\r\n            currency: observable,\r\n            coupon: observable,\r\n            couponOffsetAmount: observable,\r\n            couponRemitted: observable,\r\n            point: observable\r\n        });\r\n    }\r\n\r\n    /*\r\n    @computed get amount() {\r\n        return parseFloat((this.orderItems.reduce((pv, cv) => (pv + cv.subAmount), 0) +\r\n            (this.freightFee ? this.freightFee : 0) +\r\n            (this.freightFeeRemitted ? this.freightFeeRemitted : 0) +\r\n            (this.couponOffsetAmount ? this.couponOffsetAmount : 0) +\r\n            (this.couponRemitted ? this.couponRemitted : 0)).toFixed(2));\r\n    };\r\n    */\r\n    /**\r\n     * 总金额\r\n     */\r\n    get amount() {\r\n        return parseFloat((this.orderItems.reduce((pv, cv) => (pv + cv.subAmount), 0) +\r\n            (this.freightFee ? this.freightFee : 0) +\r\n            (this.freightFeeRemitted ? this.freightFeeRemitted : 0)).toFixed(2));\r\n    };\r\n    // @computed get productAmount() {\r\n    //     return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subAmount, 0).toFixed(2));\r\n    // };\r\n    /**\r\n     * 商品总额 -----> 已修 应用现价计算（参与运费减免计算）\r\n     */\r\n    get productAmount() {\r\n        return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subAmount, 0).toFixed(2));\r\n    };\r\n\r\n    /**\r\n     * 商品总额(未应用券的价格) -----> 已修 应用目录价计算(总额恒定) 预览页展示所需\r\n     */\r\n    get productAmounts() {\r\n        return parseFloat(this.orderItems.reduce((pv, cv) => pv + cv.subListAmount, 0).toFixed(2));\r\n    };\r\n    currency: BoxId;\r\n    coupon: BoxId;\r\n    couponOffsetAmount: number;\r\n    couponRemitted: number;\r\n    point: number;\r\n    comments: string;\r\n    salesRegion: BoxId;\r\n\r\n    getDataForSave() {\r\n        let orderItems: any[] = [];\r\n        this.orderItems.forEach(oi => {\r\n            oi.packs.forEach(pk => {\r\n                this.currency = pk.currency;\r\n                orderItems.push({\r\n                    product: oi.product, pack: pk.pack, price: pk.price, quantity: pk.quantity\r\n                    , subAmount: pk.quantity * pk.price, retail: pk.retail\r\n                })\r\n            })\r\n        });\r\n        return {\r\n            orderMaker: this.orderMaker,\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            invoiceContact: this.invoiceContact,\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: this.invoiceInfo,\r\n            amount: this.amount,\r\n            currency: this.currency,\r\n            freightFee: this.freightFee,\r\n            freightFeeRemitted: this.freightFeeRemitted,\r\n            coupon: this.coupon,\r\n            couponOffsetAmount: this.couponOffsetAmount,\r\n            couponRemitted: this.couponRemitted,\r\n            point: this.point,\r\n            comments: this.comments,\r\n            orderitems: orderItems, // 前面的必须是小写的orderitems\r\n            salesRegion: this.salesRegion,\r\n        }\r\n    }\r\n}\r\n\r\nexport class OrderItem {\r\n\r\n    product: BoxId;\r\n    packs: CartPackRow[];\r\n    get subAmount() {\r\n        return this.packs.reduce((p, c) => {\r\n            return p + c.price * c.quantity\r\n        }, 0);\r\n    }\r\n    get subListAmount() {\r\n        return this.packs.reduce((p, c) => {\r\n            return p + c.retail * c.quantity\r\n        }, 0);\r\n    }\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            packs: observable,\r\n            subAmount: computed,\r\n            subListAmount: computed\r\n        });\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, FA } from \"tonva-react\";\r\nimport { COrder } from './COrder';\r\n\r\nexport class OrderSuccess extends VPage<COrder> {\r\n\r\n    async open(orderCreateResult: any) {\r\n\r\n        this.openPage(this.page, orderCreateResult);\r\n    }\r\n\r\n    private page = (orderCreateResult: any) => {\r\n        return <Page header=\"下单成功\" back=\"close\">\r\n            <div className=\"py-4 px-3 bg-white mb-3 d-flex\">\r\n                <FA name=\"list-alt\" className=\"text-success mr-3\" size=\"4x\" />\r\n                <div>\r\n                    <p className=\"text-primary\"><span className=\"h4\">下单成功！</span></p>\r\n                    <p className=\"\">\r\n                        订单: <span className=\"h5 text-info\">{orderCreateResult.no}</span><br /><br />\r\n                        <span className=\"text-muted\">我们会加紧处理，请注意查收短信。</span>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from \"tonva-react\";\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { List, LMR, FA } from \"tonva-react\";\r\nimport { tv } from \"tonva-react\";\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VContactList extends VPage<CSelectContact> {\r\n\r\n    async open() {\r\n\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onContactRender = (contact: any) => {\r\n        let { onEditContact, onContactSelected } = this.controller;\r\n        let right = <div className=\"p-2 cursor-pointer text-info\" onClick={() => onEditContact(contact)}>\r\n            <FA name=\"edit\" />\r\n        </div>\r\n        return <LMR right={right} className=\"px-3 py-2\">\r\n            <div onClick={() => onContactSelected(contact)}>\r\n                {tv(contact)}\r\n            </div>\r\n        </LMR>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { onNewContact, userContacts } = this.controller;\r\n        let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={() => onNewContact()} >添加新地址</button>;\r\n        let contactList = <List items={userContacts} item={{ render: this.onContactRender }} none=\"无地址\" />;\r\n        return <Page footer={footer} header=\"管理地址\">\r\n            {contactList}\r\n        </Page>\r\n    })\r\n}","\r\nexport function telephoneValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"固定电话格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function mobileValidation(value: string) {\r\n    if (value && !/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(value))\r\n        return \"手机号格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function emailValidation(value: string) {\r\n    if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n        return \"Email格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function faxValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"传真号码格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function addressDetailValidation(value: string) {\r\n    return (value && value.length > 200) ? \"详细地址最多200个字！\" : undefined;\r\n}\r\n\r\nexport function zipCodeValidation(value: string) {\r\n    return (value && value.length > 15) ? \"邮编过长，请修改后录入！\" : undefined;\r\n}\r\n\r\n\r\nexport function organizationNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function departmentNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"部门名称名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function salutationValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function nameValidation(value: string) {\r\n    return (value && value.length > 50) ? \"姓名最多50个字！\" : undefined;\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { VPage, Page, Form, Schema, UiSchema, Context, UiInputItem, UiIdItem, BoxId } from \"tonva-react\";\r\nimport { tv } from \"tonva-react\";\r\nimport { CSelectContact } from './CSelectContact';\r\nimport { addressDetailValidation, emailValidation, telephoneValidation, mobileValidation, organizationNameValidation, nameValidation } from 'tools/inputValidations';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'name', type: 'string', required: true },\r\n    { name: 'organizationName', type: 'string', required: true },\r\n    { name: 'mobile', type: 'string', required: true },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'email', type: 'string', required: true },\r\n    { name: 'address', type: 'id', required: true },\r\n    { name: 'addressString', type: 'string', required: true },\r\n    { name: 'isDefault', type: 'boolean', required: false },\r\n];\r\n\r\nexport class VContact extends VPage<CSelectContact> {\r\n\r\n    private userContactData: any;\r\n    private form: Form;\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            name: { widget: 'text', label: '姓名', placeholder: '姓名', rules: nameValidation } as UiInputItem,\r\n            organizationName: { widget: 'text', label: '单位名称', placeholder: '单位名称', rules: organizationNameValidation } as UiInputItem,\r\n            mobile: { widget: 'text', label: '手机号', placeholder: '手机号', rules: mobileValidation } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '电话', rules: telephoneValidation } as UiInputItem,\r\n            email: { widget: 'email', label: 'Email', placeholder: 'Email', rules: emailValidation } as UiInputItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区', placeholder: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await this.controller.pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <div className=\"text-truncate\">\r\n                            {country && country.id && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province && province.id && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city && city.id && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county && county.id && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </div>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', placeholder: '详细地址', className: \"text-truncate\", rules: addressDetailValidation } as UiInputItem,\r\n            isDefault: { widget: 'checkbox', label: '作为默认地址' },\r\n            submit: { widget: 'button', label: '提交' },\r\n        }\r\n    }\r\n\r\n    async open(userContactData: any) {\r\n        this.userContactData = userContactData;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onSaveContact = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.saveContact(context.form.data);\r\n    }\r\n\r\n    private onDelContact = async () => {\r\n        let { contact } = this.userContactData;\r\n        if (await this.vCall(VConfirmDeleteContact, contact) === true) {\r\n            await this.controller.delContact(contact);\r\n            this.closePage();\r\n        };\r\n    }\r\n\r\n    private page = () => {\r\n        let contactData = _.clone(this.userContactData.contact);\r\n\r\n        let buttonDel: any;\r\n        if (contactData !== undefined) {\r\n            buttonDel = <button className=\"btn btn-sm btn-info\" onClick={this.onDelContact}>删除</button>;\r\n        } else {\r\n            let { defaultOrganizationName, defaultName, defaultMobile, address, addressString } = this.controller.cApp.currentUser;\r\n            contactData = {\r\n                'organizationName': defaultOrganizationName,\r\n                'name': defaultName,\r\n                'mobile': defaultMobile,\r\n                'address': address,\r\n                'addressString': addressString\r\n            };\r\n        }\r\n        let { fromOrderCreation } = this.controller;\r\n        let footer = <button type=\"button\"\r\n            className=\"btn btn-primary w-100\"\r\n            onClick={this.onSaveContact}>{fromOrderCreation ? '保存并使用' : '保存'}</button>;\r\n        return <Page header=\"地址信息\" footer={footer} right={buttonDel}>\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    formData={contactData}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nclass VConfirmDeleteContact extends VPage<CSelectContact> {\r\n    async open(contact: any) {\r\n        this.openPage(this.page, contact);\r\n    }\r\n\r\n    private onConfirm = async () => {\r\n        await this.returnCall(true);\r\n        this.closePage();\r\n    }\r\n\r\n    private onCancel = async () => {\r\n        await this.returnCall(false);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = (contact: any) => {\r\n        return <Page header=\"删除地址\" back=\"close\">\r\n            <div className=\"w-75 mx-auto border border-primary rounded my-3 p-3 bg-white\">\r\n                <div className=\"p-4 position-relative\">\r\n                    <i className=\"fa fa-question-circle position-absolute fa-2x text-warning\" style={{ left: 0, top: 0 }} />\r\n                    <b className=\"\">是否删除该地址？</b>\r\n                </div>\r\n                <div className=\"d-flex mt-3 justify-content-end\">\r\n                    <button className=\"btn btn-danger mr-3\" onClick={this.onConfirm}>删除地址</button>\r\n                    <button className=\"btn btn-outline-info mr-3\" onClick={this.onCancel}>取消</button>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, BoxId } from \"tonva-react\";\r\nimport { tv } from \"tonva-react\";\r\nimport { FA } from \"tonva-react\";\r\nimport { CAddress } from './CAddress';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\nexport class VAddress extends VPage<CAddress> {\r\n    private provinceId: number;\r\n    private cityId: number;\r\n    private countyId: number;\r\n    private backLevel = 0;\r\n\r\n    async open(param: any) {\r\n        let provinces = await this.controller.getCountryProvince(GLOABLE.CHINA);\r\n        this.openPage(this.page, { provinces: provinces });\r\n    }\r\n\r\n    private page = (param: any) => {\r\n        this.backLevel++;\r\n        return <Page header=\"选择所在省市\">\r\n            <div className=\"row no-gutters\">\r\n                {param.provinces.map((v: any) => this.renderPCC(v.province, this.onProvinceClick))}\r\n            </div>\r\n        </Page>\r\n    }\r\n\r\n    private renderPCC = (pcc: BoxId, onClick: any) => {\r\n        return <div key={pcc.id} className=\"col-6 col-md-4 col-lg-3 cursor-pointer\">\r\n            {tv(pcc, (value) => {\r\n                let { id, chineseName } = value;\r\n                return <>\r\n                    <div className=\"pt-1 pb-1 px-2\" onClick={() => onClick(id)}\r\n                        style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n                    >\r\n                        <span className=\"ml-1 align-middle\">\r\n                            <FA name=\"chevron-right\" className=\"text-info small\" />\r\n                            &nbsp; {chineseName}\r\n                        </span>\r\n                    </div>\r\n                </>;\r\n            })}\r\n        </div>\r\n    }\r\n\r\n    private onProvinceClick = async (provinceId: any) => {\r\n        this.provinceId = provinceId;\r\n        let cities = await this.controller.getProvinceCities(provinceId);\r\n        if (cities) {\r\n            let len = cities.length;\r\n            if (len === 1) {\r\n                await this.onCityClick(cities[0].city.id);\r\n                return;\r\n            }\r\n            if (len > 1) {\r\n                this.backLevel++;\r\n                this.openPageElement(<Page header=\"选择所在城市\">\r\n                    <div className=\"row no-gutters\">\r\n                        {cities.map(v => this.renderPCC(v.city, this.onCityClick))}\r\n                    </div>\r\n                </Page>);\r\n                return;\r\n            }\r\n        } else {\r\n            this.closePage(this.backLevel);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCityClick = async (cityId: any) => {\r\n        this.cityId = cityId;\r\n        let counties = await this.controller.getCityCounties(cityId);\r\n        if (counties && counties.length > 0) {\r\n            this.backLevel++;\r\n            this.openPageElement(<Page header=\"选择所在区县\">\r\n                <div className=\"row no-gutters\">\r\n                    {counties.map(v => this.renderPCC(v.county, this.onCountyClick))}\r\n                </div>\r\n            </Page>);\r\n        } else {\r\n            this.closePage(this.backLevel);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCountyClick = async (countyId: any) => {\r\n        this.countyId = countyId;\r\n        this.closePage(this.backLevel);\r\n        this.saveAddress();\r\n    }\r\n\r\n    private saveAddress = async () => {\r\n        await this.controller.saveAddress(GLOABLE.CHINA, this.provinceId, this.cityId, this.countyId);\r\n    }\r\n}\r\n","import { VAddress } from './VAddress';\r\nimport { CUqBase } from '../CBase';\r\n\r\nexport class CAddress extends CUqBase {\r\n    protected async internalStart() {\r\n        this.openVPage(VAddress);\r\n    }\r\n\r\n    getCountryProvince = async (countryId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetCountryProvinces.table({ country: countryId });\r\n    }\r\n\r\n    getProvinceCities = async (provinceId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetProvinceCities.table({ province: provinceId });\r\n    }\r\n\r\n    getCityCounties = async (cityId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetCityCounties.table({ city: cityId });\r\n    }\r\n\r\n    saveAddress = async (countryId: number, provinceId: number, cityId?: number, countyId?: number): Promise<any> => {\r\n        let { Address } = this.uqs.common;\r\n        let newAddress = await Address.save(undefined, { country: countryId, province: provinceId, city: cityId, county: countyId });\r\n        let addressId = newAddress && Address.boxId(newAddress.id);\r\n        this.returnCall(addressId);\r\n    }\r\n}\r\n","import { makeObservable, observable } from 'mobx';\r\nimport { Context, BoxId } from \"tonva-react\";\r\nimport { CUqBase } from '../CBase';\r\nimport { VContactList } from './VContactList';\r\nimport { VContact } from './VContact';\r\nimport { CAddress } from './CAddress';\r\nimport { CApp } from 'CApp';\r\n\r\nexport abstract class CSelectContact extends CUqBase {\r\n    fromOrderCreation: boolean;\r\n    userContacts: BoxId[] = [];\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n        makeObservable(this, {\r\n            userContacts: observable\r\n        });\r\n    }\r\n\r\n    async internalStart(fromOrderCreation: boolean/*contactType: ContactType*/) {\r\n        this.fromOrderCreation = fromOrderCreation;\r\n        let userContactMaps = await this.cApp.currentUser.getContacts();\r\n        this.userContacts = userContactMaps.map((v: any) => v.contact);\r\n        this.openVPage(VContactList);\r\n        if (this.fromOrderCreation && (!this.userContacts || this.userContacts.length === 0)) {\r\n            this.onNewContact();\r\n        }\r\n    }\r\n\r\n    protected abstract getIsDefault(userSetting: any, userContactId: number): Promise<boolean>;\r\n\r\n    /**\r\n     * 打开地址新建界面\r\n     */\r\n    onNewContact = async () => {\r\n        this.openVPage(VContact, { contact: undefined });\r\n    }\r\n\r\n    /**\r\n     * 打开地址编辑界面\r\n     */\r\n    onEditContact = async (userContact: BoxId) => {\r\n        let userContactId = userContact.id;\r\n        let contact = await this.uqs.customer.Contact.load(userContactId);\r\n        let userSetting = await this.cApp.currentUser.getSetting();\r\n        contact.isDefault = await this.getIsDefault(userSetting, userContactId);\r\n        let userContactData: any = { contact: contact };\r\n        this.openVPage(VContact, userContactData);\r\n    }\r\n\r\n    delContact = async (contact: any) => {\r\n        let { id } = contact;\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.delContact(id);\r\n        if (contact.isDefault) {\r\n            this.setDefaultContact(undefined);\r\n        }\r\n        let index = this.userContacts.findIndex(v => v.id === id);\r\n        if (index > -1)\r\n            this.userContacts.splice(index, 1);\r\n    }\r\n\r\n    saveContact = async (contact: any) => {\r\n        let { Contact: contactTuid } = this.uqs.customer;\r\n        let newContact = await contactTuid.save(undefined, contact);\r\n        let { id: newContactId } = newContact;\r\n        let contactBox = contactTuid.boxId(newContactId);\r\n\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.addContact(newContactId);\r\n        this.userContacts.push(contactBox);\r\n        let { id, isDefault } = contact;\r\n        if (isDefault === true || this.userContacts.length === 1) {\r\n            await this.setDefaultContact(contactBox);\r\n        }\r\n        // contact.id !== undefined表示是修改了已有的contact(我们只能用“替换”表示“修改”，所以此时需要删除原contact)\r\n        if (id !== undefined) {\r\n            await currentUser.delContact(id);\r\n            let index = this.userContacts.findIndex(v => v.id === id);\r\n            if (index > -1)\r\n                this.userContacts.splice(index, 1);\r\n        }\r\n        this.backPage();\r\n        if (this.fromOrderCreation) {\r\n            this.onContactSelected(contactBox);\r\n        }\r\n    }\r\n\r\n    protected abstract setDefaultContact(contactId: BoxId): Promise<any>;\r\n\r\n    onContactSelected = (contact: BoxId) => {\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(contact);\r\n        }\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = this.newC(CAddress); // new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n}\r\n\r\nexport class CSelectShippingContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        if (userSetting !== undefined) {\r\n            let { shippingContact } = userSetting;\r\n            return shippingContact && shippingContact.id === userContactId;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultShippingContact(contactId);\r\n    }\r\n}\r\n\r\nexport class CSelectInvoiceContact extends CSelectContact {\r\n    protected async getIsDefault(userSetting: any, userContactId: number): Promise<boolean> {\r\n        if (userSetting !== undefined) {\r\n            let { invoiceContact } = userSetting;\r\n            return invoiceContact && invoiceContact.id === userContactId;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    protected async setDefaultContact(contactId: BoxId) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoiceContact(contactId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, Tabs, TabCaptionComponent, TabsProps, TabProp } from \"tonva-react\";\r\nimport { COrder } from './COrder';\r\nimport { List, EasyDate } from \"tonva-react\";\r\nimport { makeObservable, observable } from 'mobx';\r\n\r\nexport const color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\n\r\nexport class VMyOrders extends VPage<COrder> {\r\n\r\n\t/*\r\n    @observable private pendingOrders: any[];\r\n    @observable private processingOrders: any[];\r\n    @observable private completedOrders: any[];\r\n\t@observable private allOrders: any[];\r\n\t*/\r\n\tprivate list: any[];\r\n\tprivate currentState: string;\r\n\tprivate tabs: TabProp[];\r\n\tconstructor(c: COrder) {\r\n        super(c);\r\n\r\n        makeObservable<VMyOrders, \"list\">(this, {\r\n            list: observable,\r\n        });\r\n\t}\r\n\t/*\r\n    async open(param: any) {\r\n        this.currentState = param;\r\n        this.openPage(this.page);\r\n\t}\r\n\t*/\r\n\r\n\tinit(param: any) {\r\n\t\tthis.currentState = param;\r\n\t\tlet { getMyOrders } = this.controller;\r\n\t\tlet oss = [\r\n\t\t\t{ caption: '待审核', state: 'processing', icon: 'desktop' },\r\n\t\t\t{ caption: '待发货', state: 'completed', icon: 'truck' },\r\n\t\t\t{ caption: '所有订单', state: 'all', icon: 'file-text-o' },\r\n\t\t];\r\n\t\tthis.tabs = oss.map(v => {\r\n\t\t\tlet { caption, state, icon } = v;\r\n\t\t\treturn {\r\n\t\t\t\tname: caption,\r\n\t\t\t\tcaption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n\t\t\t\tcontent: () => {\r\n\t\t\t\t\treturn <List items={this.list} item={{ render: this.renderOrder }} none=\"[无]\" />\r\n\t\t\t\t},\r\n\t\t\t\tisSelected: this.currentState === state,\r\n\t\t\t\tload: async () => {\r\n\t\t\t\t\tthis.currentState = state;\r\n\t\t\t\t\tthis.list = await getMyOrders(this.currentState);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tprivate renderOrder = (order: any, index: number) => {\r\n\t\tlet { openOrderDetail } = this.controller;\r\n\t\tlet { id, no, date, discription, flow } = order;\r\n\t\treturn <div className=\"m-3 justify-content-between cursor-pointer\" onClick={() => openOrderDetail(id)}>\r\n\t\t\t<div><span className=\"small text-muted\">订单: </span><strong>{no}</strong></div>\r\n\t\t\t<div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n\t\t</div>;\r\n\t}\r\n\r\n\theader() {\r\n\t\treturn '我的订单';\r\n\t}\r\n\r\n\tcontent(): JSX.Element {\r\n\t\treturn <Tabs tabs={this.tabs} tabPosition=\"top\" />;\r\n\t}\r\n\r\n\tprivate page = () => {\r\n\r\n\t\tlet { getMyOrders } = this.controller;\r\n\t\tlet oss = [\r\n\t\t\t{ caption: '待审核', state: 'processing', icon: 'desktop' },\r\n\t\t\t{ caption: '待发货', state: 'completed', icon: 'truck' },\r\n\t\t\t{ caption: '所有订单', state: 'all', icon: 'file-text-o' },\r\n\t\t];\r\n\t\tlet tabs = oss.map(v => {\r\n\t\t\tlet { caption, state, icon } = v;\r\n\t\t\treturn {\r\n\t\t\t\tname: caption,\r\n\t\t\t\tcaption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n\t\t\t\tcontent: () => {\r\n\t\t\t\t\treturn <List items={this.list} item={{ render: this.renderOrder }} none=\"[无]\" />\r\n\t\t\t\t},\r\n\t\t\t\tisSelected: this.currentState === state,\r\n\t\t\t\tload: async () => {\r\n\t\t\t\t\tthis.currentState = state;\r\n\t\t\t\t\tthis.list = await getMyOrders(this.currentState);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t\t/*\r\n        let tabs = [{\r\n            name: '待审核',\r\n            caption: (selected: boolean) => TabCaptionComponent(\"待审核\", \"desktop\", color(selected)),\r\n            content: () => {\r\n                return <List items={this.processingOrders} item={{ render: this.renderOrder }} none=\"无待审核订单\" />\r\n            },\r\n            isSelected: this.currentState === 'processing',\r\n            load: async () => {\r\n                this.currentState = 'processing';\r\n                this.processingOrders = await getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            name: '待发货',\r\n            caption: (selected: boolean) => TabCaptionComponent(\"待发货\", \"truck\", color(selected)),\r\n            content: () => {\r\n                return <List items={this.completedOrders} item={{ render: this.renderOrder }} none=\"还没有已完成的订单\" />\r\n            },\r\n            isSelected: this.currentState === 'completed',\r\n            load: async () => {\r\n                this.currentState = 'completed';\r\n                this.completedOrders = await getMyOrders(this.currentState);\r\n            }\r\n        }, {\r\n            name: '所有订单',\r\n            caption: (selected: boolean) => TabCaptionComponent(\"所有订单\", \"file-text-o\", color(selected)),\r\n            content: () => {\r\n                return <List items={this.allOrders} item={{ render: this.renderOrder }} none=\"还没有订单\" />\r\n            },\r\n            isSelected: this.currentState === 'all',\r\n            load: async () => {\r\n                this.currentState = 'all';\r\n                this.allOrders = await getMyOrders(this.currentState);\r\n            }\r\n\t\t}];\r\n\t\t*/\r\n\t\t// return <Page header=\"我的订单\" tabs={tabs} tabPosition=\"top\" />\r\n\t\t//return <Tabs tabs={tabs} tabPosition='top' />\r\n\t\treturn <Page header=\"我的订单\">\r\n\t\t\t<Tabs tabs={tabs} tabPosition=\"top\" />\r\n\t\t</Page>\r\n\t}\r\n}","import * as React from 'react';\r\nimport { VPage, Page, BoxId, EasyDate } from \"tonva-react\";\r\nimport { COrder } from './COrder';\r\nimport { tv } from \"tonva-react\";\r\nimport { List } from \"tonva-react\";\r\nimport { OrderItem } from './Order';\r\nimport { CartItem2 } from 'cart/Cart';\r\n\r\nexport class VOrderDetail extends VPage<COrder> {\r\n\r\n    async open(order: any) {\r\n\r\n        this.openPage(this.page, order);\r\n    }\r\n\r\n\r\n    private packsRow = (item: any, index: number) => {\r\n        let { pack, quantity, price, currency } = item;\r\n\r\n        return <div key={index} className=\"px-2 py-2 border-top\">\r\n            <div className=\"d-flex align-items-center\">\r\n                <div className=\"flex-grow-1\"><b>{tv(pack)}</b></div>\r\n                <div className=\"w-12c mr-4 text-right\">\r\n                    <span className=\"text-danger h5\"><small>¥</small>{parseFloat((price * quantity).toFixed(2))}</span>\r\n                    <small className=\"text-muted\">(¥{parseFloat(price.toFixed(2))} × {quantity})</small>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private renderOrderItem = (orderItem: OrderItem) => {\r\n        let { product, packs } = orderItem;\r\n        let { controller, packsRow } = this;\r\n        return <div>\r\n            <div className=\"row p-1 my-1\">\r\n                <div className=\"col-lg-6 pb-3\">{controller.renderOrderItemProduct(product)}</div>\r\n                <div className=\"col-lg-6\">{\r\n                    packs.map((p, index) => {\r\n                        return packsRow(p, index);\r\n                    })\r\n                }</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    orderAgain = async (data: any) => {\r\n        let { cOrder } = this.controller.cApp;\r\n        let { orderItems } = data;\r\n\r\n        orderItems = orderItems.map((el: CartItem2) => {\r\n            return {\r\n                product: el.product,\r\n                packs: el.packs,\r\n                $isDeleted: false,\r\n                $isSelected: true,\r\n                createdate: 'undefined'\r\n            }\r\n        })\r\n        // console.log('orderItems', orderItems);\r\n        await cOrder.createOrderFromCart(orderItems)\r\n    }\r\n    private page = (order: any) => {\r\n\r\n        let { brief, data } = order;\r\n        let { id, no, state, description, date } = brief;\r\n        let { orderItems, currency, shippingContact, invoiceContact, invoiceType, invoiceInfo, amount, couponOffsetAmount, couponRemitted\r\n            , freightFee, freightFeeRemitted } = data;\r\n        let couponUI;\r\n        if (couponOffsetAmount || couponRemitted) {\r\n            let offsetUI, remittedUI;\r\n            if (couponOffsetAmount) {\r\n                offsetUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">折扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponOffsetAmount}</div>\r\n                </div>\r\n            }\r\n            if (couponRemitted) {\r\n                remittedUI = <div className=\"d-flex flex-row justify-content-between\">\r\n                    <div className=\"text-muted\">抵扣:</div>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{couponRemitted}</div>\r\n                </div>\r\n            }\r\n            couponUI = <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">优惠券:</div>\r\n                <div className=\"col-9\">\r\n                    {offsetUI}\r\n                    {remittedUI}\r\n                </div>\r\n            </div>\r\n        }\r\n\r\n        let freightFeeUI, freightFeeRemittedUI;\r\n        if (freightFee) {\r\n            freightFeeUI = <>\r\n                <div className=\"text-right text-danger\"><small>¥</small>{freightFee}</div>\r\n            </>\r\n            if (freightFeeRemitted) {\r\n                freightFeeRemittedUI = <>\r\n                    <div className=\"text-right text-danger\"><small>¥</small>{freightFeeRemitted}(减免)</div>\r\n                </>\r\n            }\r\n        }\r\n        let orderAgainUI = <div className=\"d-flex justify-content-center\">\r\n            <button className=\"btn btn-primary w-50\" onClick={async () => { this.orderAgain(order.data) }}>再次下单</button>\r\n        </div>\r\n\r\n        let header = <>订单详情: {no}</>            //orderAgainUI\r\n        return <Page header={header} footer={<></>}>\r\n            <List items={orderItems} item={{ render: this.renderOrderItem }} />\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">收货地址:</div>\r\n                <div className=\"col-9\">{tv(shippingContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票地址:</div>\r\n                <div className=\"col-9\">{tv(invoiceContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">发票信息:</div>\r\n                <div className=\"col-9\">{invoiceTemplate(invoiceType, invoiceInfo)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">运费:</div>\r\n                <div className=\"col-9\">{freightFeeUI}{freightFeeRemittedUI}</div>\r\n            </div>\r\n            {couponUI}\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">下单时间:</div>\r\n                <div className=\"col-9 text-right\"><EasyDate date={date} /></div>\r\n            </div>\r\n            <div className=\"bg-white p-3 my-1 text-right\">\r\n                <span className=\"text-danger font-weight-bold\">总金额: {amount}{tv(currency)}</span>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n\r\nfunction invoiceTemplate(invoiceType: BoxId, invoiceInfo: BoxId): JSX.Element {\r\n    return <>\r\n        {tv(invoiceType, invoiceTypeUI, undefined, () => <></>)}<br />\r\n        {tv(invoiceInfo, invoiceInfoUI, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nfunction invoiceTypeUI(values: any) {\r\n    let { id, description } = values;\r\n    return <>{description}</>;\r\n}\r\n\r\nfunction invoiceInfoUI(values: any) {\r\n    let { id, title, taxNo, address, telephone, bank, accountNo } = values;\r\n    return <>{title}</>;\r\n}","import * as React from 'react';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, UiSchema, UiInputItem, Form, Context, tv, BoxId, FA } from \"tonva-react\";\r\nimport { Schema } from \"tonva-react\";\r\nimport { CInvoiceInfo } from './CInvoiceInfo';\r\n\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'title', type: 'string', required: false },\r\n    { name: 'taxNo', type: 'string', required: false },\r\n    { name: 'address', type: 'id', required: false },\r\n    { name: 'telephone', type: 'string', required: false },\r\n    { name: 'bank', type: 'string', required: false },\r\n    { name: 'accountNo', type: 'string', required: false },\r\n];\r\n\r\nconst uiSchema: UiSchema = {\r\n    items: {\r\n        id: { visible: false },\r\n        title: {\r\n            widget: 'text', label: '单位全称', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 200) ? '单位全称最多200个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        taxNo: {\r\n            widget: 'text', label: '纳税人识别码', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if (value) {\r\n                    value = value.trim();\r\n                    var regArr = [/^[\\da-z]{10,15}$/i, /^\\d{6}[\\da-z]{10,12}$/i, /^[a-z]\\d{6}[\\da-z]{9,11}$/i, /^[a-z]{2}\\d{6}[\\da-z]{8,10}$/i, /^\\d{14}[\\dx][\\da-z]{4,5}$/i, /^\\d{17}[\\dx][\\da-z]{1,2}$/i, /^[a-z]\\d{14}[\\dx][\\da-z]{3,4}$/i, /^[a-z]\\d{17}[\\dx][\\da-z]{0,1}$/i, /^[\\d]{6}[\\da-z]{13,14}$/i],\r\n                        j = regArr.length;\r\n                    for (var i = 0; i < j; i++) {\r\n                        if (regArr[i].test(value)) {\r\n                            return undefined;\r\n                        }\r\n                    }\r\n                    return '纳税人识别码格式不正确，请重新输入！';\r\n                }\r\n            }\r\n        } as UiInputItem,\r\n        address: {\r\n            widget: 'text', label: '注册地址', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 200) ? '注册地址最多200个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        telephone: {\r\n            widget: 'text', label: '注册电话', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if(value) value = value.trim();\r\n                if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n                    return \"注册电话格式不正确，请重新输入！\";\r\n                else\r\n                    return undefined;\r\n            }\r\n        } as UiInputItem,\r\n        bank: {\r\n            widget: 'text', label: '开户银行', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                return (value && value.length > 100) ? '开户银行名称最多100个字！' : undefined;\r\n            }\r\n        } as UiInputItem,\r\n        accountNo: {\r\n            widget: 'text', label: '银行账号', placeholder: '必填',\r\n            rules: (value: string) => {\r\n                if(value) value = value.trim();\r\n                if (value && !/^\\d{8,30}$/.test(value.replace(/\\s*/g, \"\")))\r\n                    // if (value && !/^([1-9]{1})(\\d{10,29})$/.test(value.replace(/\\s*/g, \"\")))\r\n                    return \"银行账号格式不正确，请重新输入！\";\r\n                else\r\n                    return undefined;\r\n            }\r\n        } as UiInputItem,\r\n        submit: { widget: 'button', label: '提交' },\r\n    }\r\n}\r\n\r\nconst commonRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: false,\r\n};\r\n\r\nconst valueAddedRequired = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: false,\r\n}\r\n\r\nconst commonVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: false,\r\n    telephone: false,\r\n    bank: false,\r\n    accountNo: false,\r\n    isDefault: true,\r\n};\r\n\r\nconst valueAddedVisible = {\r\n    id: false,\r\n    title: true,\r\n    taxNo: true,\r\n    address: true,\r\n    telephone: true,\r\n    bank: true,\r\n    accountNo: true,\r\n    isDefault: true,\r\n}\r\n\r\nexport class VInvoiceInfo extends VPage<CInvoiceInfo> {\r\n    private form: Form;\r\n    showTip: boolean = false;\r\n    saveTip: string = \"\";\r\n    private invoiceInfoData: any;\r\n\r\n    constructor(c: CInvoiceInfo) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            showTip: observable,\r\n            invoiceType: observable\r\n        });\r\n    }\r\n\r\n    async open(origInvoice?: any) {\r\n        let { invoiceType, invoiceInfo } = origInvoice;\r\n        this.invoiceType = (invoiceType && invoiceType.id) || 1;\r\n        if (invoiceInfo) {\r\n            invoiceInfo.assure();\r\n            this.invoiceInfoData = { ...invoiceInfo.obj };\r\n        } else {\r\n            this.invoiceInfoData = { 'title': this.controller.cApp.currentUser.defaultOrganizationName };\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { form } = context;\r\n        let { data } = form;\r\n        let invoice = {\r\n            invoiceType: this.invoiceType,\r\n            invoiceInfo: data,\r\n        };\r\n        this.invoiceInfoData = data;\r\n\r\n        try {\r\n            await this.controller.saveInvoiceInfo(invoice);\r\n            this.saveTip = \"发票信息已经保存\";\r\n        } catch (error) {\r\n            this.saveTip = \"发票信息保存失败，请稍后再试\";\r\n        }\r\n        this.showTip = true;\r\n        setTimeout(() => { this.showTip = false; }, 2000);\r\n    }\r\n\r\n    private onSaveInvoice = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    invoiceType: number;\r\n\r\n    private buildForm(): JSX.Element {\r\n        let requiredFields: any = this.invoiceType === 1 ? commonRequired : valueAddedRequired;\r\n        let visibleFields: any = this.invoiceType === 1 ? commonVisible : valueAddedVisible;\r\n        schema.forEach(e => {\r\n            let { items } = uiSchema;\r\n            e.required = requiredFields[e.name];\r\n            items[e.name].visible = visibleFields[e.name];\r\n        });\r\n        /* return <Form ref={v => this.form = v} className=\"my-3\"\r\n            schema={schema}\r\n            uiSchema={uiSchema}\r\n            formData={this.invoiceInfoData}\r\n            onButtonClick={this.onFormButtonClick}\r\n            fieldLabelSize={3} /> */\r\n        return React.createElement(observer(() => {\r\n            return <Form ref={v => this.form = v} className=\"my-3\"\r\n                schema={schema}\r\n                uiSchema={uiSchema}\r\n                formData={this.invoiceInfoData}\r\n                onButtonClick={this.onFormButtonClick}\r\n                fieldLabelSize={3} />\r\n        }))\r\n    }\r\n\r\n    private onInvoiceTypeClick = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.invoiceType = parseInt(event.currentTarget.value);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let frm = this.buildForm();\r\n\r\n        let tipUI = this.showTip ? (<div className=\"alert alert-primary\" role=\"alert\">\r\n            <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n            {this.saveTip}\r\n        </div>) : null;\r\n        return <Page header=\"发票\">\r\n            <div className=\"px-3\">\r\n                <div className=\"form-group row py-3 mb-1 bg-white\">\r\n                    <div className=\"col-12 col-sm-3 pb-2 text-muted\">发票类型:</div>\r\n                    <div className=\"col-12 col-sm-9\">\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"common\" value=\"1\"\r\n                                onChange={(event) => this.onInvoiceTypeClick(event)} checked={this.invoiceType === 1}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"common\">增值税普通发票</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\" type=\"radio\" name=\"invoiceType\" id=\"valueAdded\" value=\"2\"\r\n                                onChange={(event) => this.onInvoiceTypeClick(event)} checked={this.invoiceType === 2}></input>\r\n                            <label className=\"form-check-label\" htmlFor=\"valueAdded\">增值税专用发票</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"p-3 bg-white\">\r\n                {frm}\r\n                <button type=\"button\"\r\n                    className=\"btn btn-primary w-100\"\r\n                    onClick={this.onSaveInvoice}>确定</button>\r\n                {tipUI}\r\n            </div>\r\n        </Page>\r\n    });\r\n}\r\n","//import { Controller } from \"tonva-react\";\r\nimport { CUqBase } from '../CBase';\r\nimport { VInvoiceInfo } from './VInvoiceInfo';\r\n//import { CCartApp } from 'CCartApp';\r\n//import { Tuid } from \"tonva-react\";\r\n\r\nexport class CInvoiceInfo extends CUqBase {\r\n    fromOrderCreation: boolean;\r\n\r\n    async internalStart(origInvoice: any, fromOrderCreation: boolean) {\r\n        this.fromOrderCreation = fromOrderCreation;\r\n        this.openVPage(VInvoiceInfo, origInvoice);\r\n    }\r\n\r\n    async saveInvoiceInfo(invoice: any) {\r\n        let { invoiceType, invoiceInfo, isDefault } = invoice;\r\n        let newInvoiceInfo = await this.uqs.customer.InvoiceInfo.save(undefined, invoiceInfo);\r\n\r\n        let { id: newInvoiceInfoId } = newInvoiceInfo;\r\n        let invoiceBox = {\r\n            invoiceType: this.uqs.common.InvoiceType.boxId(invoiceType),\r\n            invoiceInfo: this.uqs.customer.InvoiceInfo.boxId(newInvoiceInfoId),\r\n        }\r\n        // if (isDefault === true || !this.fromOrderCreation) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.setDefaultInvoice(invoiceBox.invoiceType, invoiceBox.invoiceInfo);\r\n        // }\r\n        if (this.fromOrderCreation) {\r\n            this.backPage();\r\n            this.returnCall(invoiceBox);\r\n        }\r\n    }\r\n}","import { UQs } from '../uqs';\r\nimport { Tuid, BoxId } from \"tonva-react\";\r\nimport { Order } from 'order/Order';\r\nimport moment from 'moment';\r\n\r\nexport const activityTime = {\r\n    startDate: '2020-09-01',\r\n    endDate: '2020-09-30'\r\n}\r\n\r\nexport class CouponBase {\r\n\r\n    constructor(protected id: BoxId, private code: number, expiredDate: Date, private isValid: boolean) {\r\n        this.expiredDate = new Date(expiredDate);\r\n    }\r\n\r\n    protected expiredDate: Date;\r\n\r\n    getCodeShow() {\r\n        let codeShow = String(this.code);\r\n        let p1 = codeShow.substr(0, 4);\r\n        let p2 = codeShow.substr(4);\r\n        return p1 + ' ' + p2;\r\n    }\r\n\r\n    isAvaliable() {\r\n        return this.isValid && this.expiredDate.getTime() > Date.now()\r\n    }\r\n}\r\n\r\nexport interface OrderPriceStrategy {\r\n\r\n    applyTo(order: Order, uqs: UQs): Promise<void>;\r\n}\r\n\r\nexport function createOrderPriceStrategy(couponData: any): OrderPriceStrategy {\r\n    let { id, code, discount, preferential, validitydate, isValid, types, discountSetting } = couponData;\r\n    switch (types) {\r\n        case \"coupon\":\r\n            if (discountSetting && discountSetting.length > 0)\r\n                return new VIPCard(id, code, validitydate, isValid, discountSetting);\r\n            else\r\n                return new Coupon(id, code, validitydate, isValid, discount, preferential);\r\n            break;\r\n        case \"coupon_sale\":\r\n            return new CouponSale(id, code, validitydate, isValid, discount, preferential);\r\n            break;\r\n        case \"vipcard\":\r\n            return new VIPCard(id, code, validitydate, isValid, discountSetting);\r\n            break;\r\n        case \"credits\":\r\n            return new Credits(id, code, validitydate, isValid);\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\n/**\r\n * 优惠券的价格验证策略：成交价格取优惠券折扣价与所购产品品牌折扣价中较高者\r\n */\r\nexport class Coupon extends CouponBase implements OrderPriceStrategy {\r\n\r\n    constructor(protected id: BoxId, code: number, expiredDate: Date, isValid: boolean, protected discount: number, protected preferential: number) {\r\n        super(id, code, expiredDate, isValid);\r\n    }\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id\r\n        if (this.isAvaliable()) {\r\n            if (this.discount) {\r\n                let { orderItems, salesRegion } = orderData;\r\n                if (orderItems !== undefined && orderItems.length > 0) {\r\n                    let { salesTask, product: uqsProduct } = uqs;\r\n                    let couponOffsetAmount = 0;\r\n                    for (let i = 0; i < orderItems.length; i++) {\r\n                        let oi = orderItems[i];\r\n                        let { product, packs } = oi;\r\n                        let { ProductX } = uqsProduct;\r\n                        let productTuid: any = await ProductX.load(product)\r\n                        // 获取品牌的折扣\r\n                        let { BottomDiscount } = salesTask;\r\n                        let brandDiscountMap: any = await BottomDiscount.obj({ brand: productTuid.brand, salesRegion: salesRegion.id });\r\n\r\n                        for (let j = 0; j < packs.length; j++) {\r\n                            let pk = packs[j];\r\n                            // 折扣价格取底线折扣价和折扣价格中较高者\r\n                            let lastDiscount = Math.min((brandDiscountMap ? brandDiscountMap.discount : 0), this.discount);\r\n                            let discountPrice = Math.round(pk.retail * (1 - lastDiscount));\r\n                            // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                            pk.price = Math.round(Math.min(pk.price, discountPrice));\r\n                            couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                        };\r\n                    };\r\n                    orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n\r\n                    /*\r\n                    if (agentPrices && agentPrices.length > 0) {\r\n                        let couponOffsetAmount = 0;\r\n                        for (let i = 0; i < orderItems.length; i++) {\r\n                            let oi = orderItems[i];\r\n                            let { product, packs } = oi;\r\n\r\n                            let eachProductAgentPrice = agentPrices[i];\r\n                            for (let j = 0; j < packs.length; j++) {\r\n                                let pk = packs[j];\r\n                                let agentPrice: any = eachProductAgentPrice.find(\r\n                                    (p: any) => p.product.id === product.id &&\r\n                                        p.pack.id === pk.pack.id &&\r\n                                        p.discountinued === 0 &&\r\n                                        p.expireDate > Date.now());\r\n                                if (!agentPrice) break;\r\n\r\n                                // 折扣价格取agentPrice和折扣价格中较高者\r\n                                let discountPrice = Math.round(Math.max(agentPrice.agentPrice, pk.retail * (1 - this.discount)));\r\n                                // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                                pk.price = Math.round(Math.min(pk.price, discountPrice));\r\n                                couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                            };\r\n                        };\r\n                        orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n                    };\r\n                    */\r\n                }\r\n            }\r\n\r\n            if (this.preferential) {\r\n                orderData.couponRemitted = this.preferential * -1;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 销售发放的优惠券的价格验证策略（未使用） \r\n */\r\nexport class CouponSale extends Coupon implements OrderPriceStrategy {\r\n\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id\r\n        if (this.isAvaliable()) {\r\n            if (this.discount) {\r\n                let { orderItems } = orderData;\r\n                if (orderItems !== undefined && orderItems.length > 0) {\r\n                    let couponOffsetAmount = 0;\r\n                    for (let i = 0; i < orderItems.length; i++) {\r\n                        let oi = orderItems[i];\r\n                        let { packs } = oi;\r\n\r\n                        for (let j = 0; j < packs.length; j++) {\r\n                            let pk = packs[j];\r\n                            // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                            pk.price = Math.round(Math.min(pk.price, pk.retail * (1 - this.discount)));\r\n                            couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                        };\r\n                    };\r\n                    orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n                }\r\n            }\r\n\r\n            if (this.preferential) {\r\n                orderData.couponRemitted = this.preferential * -1;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * VIP卡的价格策略:品牌包含在VIP卡折扣表中的，价格为目录价 * 对应的(1-discount)，否则为目录价\r\n */\r\nexport class VIPCard extends CouponBase implements OrderPriceStrategy {\r\n\r\n    constructor(protected id: BoxId, code: number, expiredDate: Date, isValid: boolean, private discountSetting: any[]) {\r\n        super(id, code, expiredDate, isValid);\r\n    }\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id\r\n        if (this.isAvaliable() && this.discountSetting && this.discountSetting.length > 0) {\r\n            let { orderItems } = orderData;\r\n            if (orderItems !== undefined && orderItems.length > 0) {\r\n                let couponOffsetAmount = 0;\r\n                for (let i = 0; i < orderItems.length; i++) {\r\n                    let oi = orderItems[i];\r\n                    let { product, packs } = oi;\r\n                    // 获取明细中产品的VIP卡折扣\r\n                    let thisDiscountSetting = this.discountSetting.find((e: any) => Tuid.equ(e.brand, product.obj.brand));\r\n                    let discount = (thisDiscountSetting && thisDiscountSetting.discount) || 0;\r\n\r\n                    for (let j = 0; j < packs.length; j++) {\r\n                        let pk = packs[j];\r\n                        pk.priceInit = pk.price === Math.round(pk.retail * (1 - discount)) ? pk.retail : pk.price;\r\n                        // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                        pk.price = Math.round(Math.min(pk.price, pk.retail * (1 - discount)));\r\n                        couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                    };\r\n                };\r\n                orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class Credits extends CouponBase implements OrderPriceStrategy {\r\n    async applyTo(orderData: Order, uqs: UQs) {\r\n        orderData.coupon = this.id;\r\n        if (this.isAvaliable()) {\r\n            let { orderItems } = orderData;\r\n            if (orderItems !== undefined && orderItems.length > 0) {\r\n                let couponOffsetAmount = 0;\r\n                for (let i = 0; i < orderItems.length; i++) {\r\n                    let oi = orderItems[i];\r\n                    let { packs } = oi;\r\n                    for (let j = 0; j < packs.length; j++) {\r\n                        let pk = packs[j];\r\n                        pk.priceInit = pk.price;\r\n                        //双倍积分 无折扣 取最大的价格 \r\n                        pk.price = Math.round(Math.max(pk.price, pk.retail));\r\n                        couponOffsetAmount = 0;\r\n                    };\r\n                };\r\n                orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n            }\r\n        }\r\n        let multiple = 2;\r\n        if (IsInActivePeriod()) multiple = 4;\r\n        orderData.point = Math.round(orderData.productAmount * multiple);\r\n    }\r\n}\r\n\r\n/**\r\n * 是否在活动期\r\n */\r\nexport function IsInActivePeriod() {\r\n    let { startDate, endDate } = activityTime;\r\n    let newDate = moment().format('YYYY-MM-DD');\r\n    return newDate >= startDate && newDate <= endDate;\r\n}","import { observable, makeObservable } from 'mobx';\r\nimport { BoxId, Tuid } from \"tonva-react\";\r\nimport { nav } from \"tonva-react\";\r\nimport { CUqBase } from '../CBase';\r\nimport { VCreateOrder } from './VCreateOrder';\r\nimport { Order, OrderItem } from './Order';\r\nimport { OrderSuccess } from './OrderSuccess';\r\nimport { CSelectShippingContact, CSelectInvoiceContact } from '../customer/CSelectContact';\r\nimport { VMyOrders } from './VMyOrders';\r\nimport { VOrderDetail } from './VOrderDetail';\r\nimport { CInvoiceInfo } from '../customer/CInvoiceInfo';\r\nimport { groupByProduct } from '../tools/groupByProduct';\r\nimport { CartItem2, CartPackRow } from '../cart/Cart';\r\nimport { createOrderPriceStrategy, OrderPriceStrategy } from 'coupon/Coupon';\r\nimport { CApp } from 'CApp';\r\n\r\nconst FREIGHTFEEFIXED = 12;\r\nconst FREIGHTFEEREMITTEDSTARTPOINT = 100;\r\n\r\nexport class COrder extends CUqBase {\r\n    orderData: Order = new Order();\r\n    /**\r\n     * 存储已经被应用的卡券，以便在使用后（下单后）将其删除\r\n     */\r\n    couponAppliedData: any = {};\r\n    hasAnyCoupon: boolean;\r\n    /**\r\n     * 当前webuser对应的buyeraccount，用来设置订单中的buyeraccount\r\n     */\r\n    buyerAccounts: any[] = [];\r\n    exOrderContacts: any;\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            orderData: observable,\r\n            couponAppliedData: observable,\r\n            buyerAccounts: observable,\r\n            exOrderContacts: observable\r\n        });\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n    }\r\n\r\n    renderOrderDraft = async (param: any) => {\r\n        let { orderData, orderDraftBrief } = param\r\n        let { cCoupon } = this.cApp;\r\n        this.orderData = orderData;\r\n        let { sharedCouponValidationResult } = cCoupon;\r\n        if (sharedCouponValidationResult) {\r\n            let { result, types, id } = sharedCouponValidationResult;\r\n            if (result === 1) {\r\n                if (types === \"vipcard\" || types === \"coupon\") {\r\n                    sharedCouponValidationResult.discountSetting = await cCoupon.getValidDiscounts(types, id);\r\n                }\r\n                this.applyCoupon(sharedCouponValidationResult);\r\n            }\r\n        }\r\n        this.openVPage(VCreateOrder, { fromOrderParam: \"fromOrderDraft\", orderDraftBrief });\r\n    }\r\n\r\n    createOrderFromCart = async (cartItems: CartItem2[]) => {\r\n        let { cApp, uqs } = this;\r\n        let { currentUser, currentSalesRegion, cCoupon } = cApp;\r\n        this.orderData.webUser = currentUser.id;\r\n        this.orderData.salesRegion = currentSalesRegion.id;\r\n        this.removeCoupon();\r\n        this.hasAnyCoupon = await this.hasCoupons();\r\n\r\n        let buyerAccountQResult = await uqs.webuser.WebUserBuyerAccount.query({ webUser: currentUser.id })\r\n        if (buyerAccountQResult) {\r\n            this.buyerAccounts = buyerAccountQResult.ret;\r\n            if (this.buyerAccounts && this.buyerAccounts.length === 1) {\r\n                this.orderData.customer = this.buyerAccounts[0].buyerAccount;\r\n            }\r\n        }\r\n\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceContact === undefined) {\r\n            this.orderData.invoiceContact = await this.getDefaultInvoiceContact();\r\n        }\r\n\r\n        if (this.orderData.invoiceType === undefined) {\r\n            this.orderData.invoiceType = await this.getDefaultInvoiceType();\r\n        }\r\n\r\n        if (this.orderData.invoiceInfo === undefined) {\r\n            this.orderData.invoiceInfo = await this.getDefaultInvoiceInfo();\r\n        }\r\n\r\n        if (cartItems !== undefined && cartItems.length > 0) {\r\n            this.orderData.currency = cartItems[0].packs[0].currency;\r\n            this.orderData.orderItems = cartItems.map((e: any) => {\r\n                var item = new OrderItem();\r\n                item.product = e.product;\r\n                item.packs = e.packs.map((v: any) => { return { ...v } }).filter((v: any) => v.quantity > 0 && v.price);\r\n                item.packs.forEach((pk) => {\r\n                    pk.priceInit = pk.price;\r\n                })\r\n                return item;\r\n            });\r\n\r\n            // 运费和运费减免\r\n            this.orderData.freightFee = FREIGHTFEEFIXED;\r\n            if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n            else\r\n                this.orderData.freightFeeRemitted = 0;\r\n        }\r\n\r\n        /*\r\n        let currentCode = currentCouponCode || currentCreditCode;\r\n        if (currentCode) {\r\n            let coupon = await cCoupon.getCouponValidationResult(currentCode);\r\n            if (coupon.result === 1)\r\n                this.applyCoupon(coupon);\r\n            else {\r\n                this.cApp.currentCouponCode = undefined;\r\n                this.cApp.currentCreditCode = undefined;\r\n            }\r\n        }\r\n        */\r\n        // 如果当前webuser有VIP卡，默认下单时使用其VIP卡\r\n        let { webUserVIPCard } = currentUser;\r\n        if (webUserVIPCard !== undefined) {\r\n            let coupon = await cCoupon.getCouponValidationResult(\r\n                webUserVIPCard.vipCardCode.toString()\r\n            );\r\n            let { result, types, id } = coupon;\r\n            if (result === 1) {\r\n                if (types === \"vipcard\" || types === \"coupon\") {\r\n                    coupon.discountSetting = await cCoupon.getValidDiscounts(types, id);\r\n                }\r\n                this.applyCoupon(coupon);\r\n            }\r\n        }\r\n        this.openVPage(VCreateOrder, { fromOrderParam: \"fromCart\" });\r\n    }\r\n\r\n    private defaultSetting: any;\r\n    private async getDefaultSetting() {\r\n        if (this.defaultSetting) return this.defaultSetting;\r\n        let { currentUser } = this.cApp;\r\n        return this.defaultSetting = await currentUser.getSetting() || {};\r\n    }\r\n\r\n    private contact0: BoxId;\r\n    private async getContact(): Promise<BoxId> {\r\n        if (this.contact0 === null) return;\r\n        if (this.contact0 !== undefined) return this.contact0;\r\n        let { currentUser } = this.cApp;\r\n        let contactArr = await currentUser.getContacts();\r\n        if (contactArr === undefined || contactArr.length === 0) {\r\n            this.contact0 = null;\r\n            return;\r\n        }\r\n        return this.contact0 = contactArr[0].contact;\r\n    }\r\n\r\n    private async getDefaultShippingContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.shippingContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceContact || await this.getContact();\r\n    }\r\n\r\n    private async getDefaultInvoiceType() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceType;\r\n    }\r\n\r\n    private async getDefaultInvoiceInfo() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.invoiceInfo;\r\n    }\r\n\r\n    /**\r\n     * 提交订单\r\n     */\r\n    submitOrder = async (orderDraftId: any) => {\r\n        let { uqs, cart, currentUser } = this.cApp;\r\n        let { order, webuser, customer, orderDraft } = uqs;\r\n        let { orderItems } = this.orderData;\r\n\r\n        let result: any = await order.Order.save(\"order\", this.orderData.getDataForSave());\r\n        let { id: orderId, flow, state, no } = result;\r\n        await order.Order.action(orderId, flow, state, \"submit\");\r\n\r\n        // 如果使用了coupon/credits，需要将其标记为已使用\r\n        let { id: couponId, code, types } = this.couponAppliedData;\r\n        if (couponId) {\r\n            let nowDate = new Date();\r\n            let usedDate = `${nowDate.getFullYear()}-${nowDate.getMonth() + 1}-${nowDate.getDate()}`;\r\n            switch (types) {\r\n                case 'coupon':\r\n                    if (currentUser.hasCustomer) {\r\n                        let customerId = currentUser.currentCustomer.id;\r\n                        customer.CustomerCoupon.del({ customer: customerId, coupon: couponId, arr1: [{ couponType: 1 }] });\r\n                        customer.CustomerCouponUsed.add({ customer: customerId, arr1: [{ coupon: couponId, usedDate: usedDate }] });\r\n                    } else {\r\n                        webuser.WebUserCoupon.del({ webUser: currentUser.id, coupon: couponId, arr1: [{ couponType: 1 }] });\r\n                        webuser.WebUserCouponUsed.add({ webUser: currentUser.id, arr1: [{ coupon: couponId, usedDate: usedDate }] });\r\n                    };\r\n                    break;\r\n                case 'credits':\r\n                    if (currentUser.hasCustomer) {\r\n                        let customerId = currentUser.currentCustomer.id;\r\n                        customer.CustomerCredits.del({ customer: customerId, arr1: [{ credits: couponId }] });\r\n                        customer.CustomerCreditsUsed.add({ customer: customerId, credits: couponId, arr1: [{ saleOrderItem: no, usedDate: usedDate }] });\r\n                    } else {\r\n                        webuser.WebUserCredits.del({ webUser: currentUser.id, arr1: [{ credits: couponId }] });\r\n                        webuser.WebUserCreditsUsed.add({ webUser: currentUser.id, credits: couponId, arr1: [{ saleOrder: no, usedDate: usedDate }] });\r\n                    };\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        // 保存订单确认状态\r\n        if (orderDraftId) {\r\n            let { id } = orderDraftId;\r\n            let orderDraftData = await uqs.orderDraft.OrderDraft.getSheet(id);\r\n            let { id: draftorderId, flow: draftFlow, state: draftState } = orderDraftData.brief;\r\n            await orderDraft.OrderDraft.action(draftorderId, draftFlow, draftState, \"Pass\");\r\n            this.closePage();\r\n        } else {\r\n            let param: [{ productId: number, packId: number }] = [] as any;\r\n            orderItems.forEach(e => {\r\n                e.packs.forEach(v => {\r\n                    param.push({ productId: e.product.id, packId: v.pack.id })\r\n                })\r\n            });\r\n            cart.removeFromCart(param);\r\n        }\r\n        // 打开下单成功显示界面\r\n        nav.popTo(this.cApp.topKey);\r\n        this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        let cSelect = this.newC(CSelectShippingContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        this.orderData.shippingContact = contactBox;\r\n        await this.exOrderContact();\r\n    }\r\n\r\n    onSelectInvoiceContact = async () => {\r\n        let cSelect = this.newC(CSelectInvoiceContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        this.orderData.invoiceContact = contactBox;\r\n        await this.exOrderContact();\r\n    }\r\n\r\n    exOrderContact = async () => {\r\n        let shippingAssure: any = await this.orderData.shippingContact?.assure();\r\n        let invoiceAssure:any = await this.orderData.invoiceContact?.assure();\r\n        this.exOrderContacts = {\r\n            \"_shippingContact\": (shippingAssure && shippingAssure?.obj?.mobile && shippingAssure?.obj?.email) ? true : false,\r\n            \"_invoiceContact\": (invoiceAssure && invoiceAssure?.obj?.mobile && invoiceAssure?.obj?.email) ? true : false,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 打开输入或选择使用卡券界面\r\n     */\r\n    onCouponEdit = async () => {\r\n        let { cCoupon } = this.cApp;\r\n        let coupon = await cCoupon.call<any>(this.orderData.coupon);\r\n        if (coupon) {\r\n            await this.applyCoupon(coupon);\r\n        }\r\n    }\r\n\r\n    private hasCoupons = async (): Promise<boolean> => {\r\n         let { /* cCoupon, */ currentUser } = this.cApp;\r\n        // let { id: currentUserId } = currentUser;\r\n        let getValidCredits = await currentUser.getValidCredits();\r\n        if (getValidCredits && getValidCredits.length > 0)\r\n            return true;\r\n        let validCoupons = await currentUser.getValidCoupons();\r\n        // let validCoupons = await cCoupon.getValidCouponsForWebUser(currentUserId);\r\n        if (validCoupons && validCoupons.length > 0)\r\n            return true;\r\n        /* let validCredits = await cCoupon.getValidCreditsForWebUser(currentUserId);\r\n        if (validCredits && validCoupons.length > 0)\r\n            return true; */\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 使用优惠券后计算折扣金额和抵扣额\r\n     */\r\n    applyCoupon = async (coupon: any) => {\r\n\r\n        this.removeCoupon();\r\n        let { result: validationResult, validitydate, isValid } = coupon;\r\n        if (validationResult === 1 && isValid === 1 && new Date(validitydate).getTime() > Date.now()) {\r\n            this.couponAppliedData = coupon;\r\n            let orderPriceStrategy: OrderPriceStrategy = createOrderPriceStrategy(coupon);\r\n            orderPriceStrategy.applyTo(this.orderData, this.uqs);\r\n            /*\r\n            this.orderData.coupon = id;\r\n            if (types === \"coupon\" || types === \"vipcard\") {\r\n                // if (discount) {\r\n                // 仍兼容原来统一折扣的模式\r\n                if ((discountSetting && discountSetting.length > 0) || discount) {\r\n                    let { orderData, uqs, cApp } = this;\r\n                    let { orderItems } = orderData;\r\n                    let { AgentPrice } = uqs.product;\r\n                    if (orderItems !== undefined && orderItems.length > 0) {\r\n                        // 获取每个明细中产品的agentprice;\r\n                        let promises: PromiseLike<any>[] = [];\r\n                        orderItems.forEach(e => {\r\n                            promises.push(AgentPrice.table({ product: e.product.id, salesRegion: cApp.currentSalesRegion.id }));\r\n                        });\r\n                        let agentPrices = await Promise.all(promises);\r\n\r\n                        if (agentPrices && agentPrices.length > 0) {\r\n                            let couponOffsetAmount = 0;\r\n                            for (let i = 0; i < orderItems.length; i++) {\r\n                                let oi = orderItems[i];\r\n                                let { product, packs } = oi;\r\n                                // 获取明细中产品的优惠券/VIP卡折扣\r\n                                if (discountSetting) {\r\n                                    let thisDiscountSetting = discountSetting.find((e: any) => Tuid.equ(e.brand, product.obj.brand));\r\n                                    discount = (thisDiscountSetting && thisDiscountSetting.discount) || discount || 0;\r\n                                }\r\n\r\n                                let eachProductAgentPrice = agentPrices[i];\r\n                                for (let j = 0; j < packs.length; j++) {\r\n                                    let pk = packs[j];\r\n                                    let agentPrice: any = eachProductAgentPrice.find(\r\n                                        (p: any) => p.product.id === product.id &&\r\n                                            p.pack.id === pk.pack.id &&\r\n                                            p.discountinued === 0 &&\r\n                                            p.expireDate > Date.now());\r\n                                    if (!agentPrice) break;\r\n\r\n                                    // 折扣价格取agentPrice和折扣价格中较高者\r\n                                    let discountPrice = Math.round(Math.max(agentPrice.agentPrice, pk.retail * (1 - discount)));\r\n                                    // pk.price = Math.round(Math.max(agentPrice.agentPrice, pk.retail * (1 - discount)));\r\n                                    // 最终价格取折扣价格和显示的价格（可能会有市场活动价)中较低者\r\n                                    pk.price = Math.round(Math.min(pk.price, discountPrice));\r\n                                    couponOffsetAmount += Math.round(pk.quantity * (pk.retail - pk.price) * -1);\r\n                                };\r\n                            };\r\n                            this.orderData.couponOffsetAmount = Math.round(couponOffsetAmount);\r\n                        };\r\n                    }\r\n                }\r\n                if (preferential) {\r\n                    this.orderData.couponRemitted = preferential * -1;\r\n                }\r\n                // 运费和运费减免\r\n                this.orderData.freightFee = FREIGHTFEEFIXED;\r\n                if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                    this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n            }\r\n\r\n            if (types === \"credits\") {\r\n                this.orderData.point = Math.round(this.orderData.productAmount * 2);\r\n            }\r\n            */\r\n            // 运费和运费减免\r\n            this.orderData.freightFee = FREIGHTFEEFIXED;\r\n            if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n            else\r\n                this.orderData.freightFeeRemitted = 0;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 删除优惠券\r\n     */\r\n    removeCoupon = () => {\r\n        this.orderData.coupon = undefined;\r\n        this.couponAppliedData = {};\r\n        this.orderData.couponOffsetAmount = 0;\r\n        this.orderData.couponRemitted = 0;\r\n        this.orderData.point = 0;\r\n        this.orderData.orderItems.forEach((e: OrderItem) => e.packs.forEach((v: CartPackRow) => v.price = v.priceInit));\r\n    }\r\n\r\n    /*\r\n    * 打开我的订单列表（在“我的”界面使用）\r\n    */\r\n    openMyOrders = async (state: string) => {\r\n\r\n        this.openVPage(VMyOrders, state);\r\n    }\r\n\r\n    /**\r\n     * 根据状态读取我的订单\r\n     */\r\n    getMyOrders = async (state: string) => {\r\n        let { order } = this.uqs;\r\n        switch (state) {\r\n            case 'pendingpayment':\r\n                return await order.GetPendingPayment.table(undefined);\r\n            case 'processing':\r\n                return await order.Order.mySheets(undefined, 1, -20);\r\n            case 'completed':\r\n                return await order.Order.mySheets(\"#\", 1, -20)\r\n            case 'all':\r\n                let promises: PromiseLike<any>[] = [];\r\n                promises.push(order.Order.mySheets(undefined, 1, -20));\r\n                promises.push(order.Order.mySheets(\"#\", 1, -20));\r\n                let presult = await Promise.all(promises);\r\n                return presult[0].concat(presult[1]).sort((a: any, b: any) => new Date(b.date).valueOf() - new Date(a.date).valueOf());\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 打开发票信息编辑界面\r\n     */\r\n    onInvoiceInfoEdit = async () => {\r\n        let cInvoiceInfo = this.newC(CInvoiceInfo); // new CInvoiceInfo(this.cApp, undefined, true);\r\n        let { invoiceType, invoiceInfo } = this.orderData;\r\n        let origInvoice = {\r\n            invoiceType: invoiceType,\r\n            invoiceInfo: invoiceInfo,\r\n        }\r\n        let newInvoice = await cInvoiceInfo.call<any>(origInvoice, true);\r\n        this.orderData.invoiceType = newInvoice.invoiceType;\r\n        this.orderData.invoiceInfo = newInvoice.invoiceInfo;\r\n    }\r\n\r\n    openOrderDetail = async (orderId: number) => {\r\n\r\n        let order = await this.uqs.order.Order.getSheet(orderId);\r\n        let { data } = order;\r\n        let { orderItems } = data;\r\n        let orderItemsGrouped = groupByProduct(orderItems);\r\n        data.orderItems = orderItemsGrouped;\r\n        this.openVPage(VOrderDetail, order);\r\n    }\r\n\r\n    renderDeliveryTime = (pack: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderDeliveryTime(pack);\r\n    }\r\n\r\n    renderOrderItemProduct = (product: BoxId) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderCartProduct(product);\r\n    }\r\n\r\n    /**\r\n     * 取消订单草案\r\n     * @param orderDraftId \r\n     */\r\n    onCancel = async (orderDraftId: any) => {\r\n        let { uqs } = this.cApp;\r\n        let { orderDraft } = uqs;\r\n        // 保存订单状态\r\n        let { id } = orderDraftId;\r\n        let orderDraftData = await uqs.orderDraft.OrderDraft.getSheet(id);\r\n        let { id: orderId, flow, state } = orderDraftData.brief;\r\n        await orderDraft.OrderDraft.action(orderId, flow, state, \"Cancel\");\r\n        this.closePage()\r\n    }\r\n\r\n    /**\r\n     * 添加到购物车，修改产品信息\r\n     */\r\n    addToCart = async () => {\r\n        let { cApp, orderData, removeCoupon } = this;\r\n        let { cart } = cApp;\r\n        removeCoupon();\r\n        orderData.orderItems.forEach(async (v) => {\r\n            v.packs.map(async (e) => {\r\n                let { quantity, retail, price, pack, currency } = e;\r\n                let { id: currencyId } = currency;\r\n                await cart.addIncremental(v.product, pack, quantity, price, retail, currencyId);\r\n            })\r\n        })\r\n        this.closePage()\r\n        this.cApp.cCart.start();\r\n    }\r\n}","import * as React from 'react';\r\nimport { View } from \"tonva-react\";\r\nimport { CProductCategory } from './CProductCategory';\r\nimport { FA } from \"tonva-react\";\r\nimport { GLOABLE } from 'cartenv';\r\n//import { observer } from 'mobx-react';\r\n\r\n/*\r\nconst imgStyle: React.CSSProperties = {\r\n    height: '1.5rem', width: '1.5rem',\r\n    marginLeft: '0.1rem',\r\n    marginRight: '0.3rem'\r\n}\r\n\r\nexport const titleTitle: React.CSSProperties = {\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n\r\nexport const subStyle: React.CSSProperties = {\r\n    fontSize: '0.75rem',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n}\r\n*/\r\n\r\nexport class VRootCategory extends View<CProductCategory> {\r\n\r\n    private categoryClick = async (categoryWapper: any, parent: any, labelColor: string) => {\r\n        await this.controller.openMainPage(categoryWapper, parent, labelColor);\r\n    }\r\n\r\n    private renderRootCategory = (item: any, parent: any) => {\r\n        let { name, children, productCategory } = item;\r\n        let { id: productCategoryID } = productCategory;\r\n        let { src, labelColor } = GLOABLE.ROOTCATEGORY[productCategoryID];\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, undefined, labelColor)}>\r\n                <img className=\"mr-4 cat-root-img\" src={src} alt={name} />\r\n                <b>{name}</b>\r\n            </div>\r\n            <div className=\"cat-root-sub\">\r\n                <div className=\"row no-gutters\">\r\n                    {children.map((v: any) => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { name, subsub, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n            <div className=\"py-2 px-2 cat-sub\">\r\n                <div className=\"text-truncate\">\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={labelColor} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(subsub, total)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content />\r\n    }\r\n\r\n    private content = () => {\r\n        let { rootCategories } = this.controller;\r\n        return <>{rootCategories.map((v: any) => this.renderRootCategory(v, undefined))}</>;\r\n        // return <>{categories2.map(v => <div key={v.productCategory.id}>{tv(v, e => this.renderRoot(e))}</div>)}</>;\r\n    };\r\n\r\n    private renderRoot(root: any) {\r\n        let { productCategory } = root;\r\n        let { id } = productCategory;\r\n        console.log(id);\r\n        return <div key={id}>{id}</div>\r\n    }\r\n}\r\n\r\n\r\nexport function renderThirdCategory(subsub: string, total: number) {\r\n    /*\r\n    return <div className=\"py-1 px-1 text-muted small cat-sub-style\">\r\n        {items.length === 0 ? <>产品数量: {total > 1000 ? '>1000' : total}</> : items.map((v: any) => v.name).join(' / ')}\r\n    </div>\r\n    */\r\n    return <div className=\"py-1 px-1 text-muted small text-truncate\">\r\n        {\r\n            subsub === undefined ?\r\n                <>{total > 1000 ? '>1000' : total} 个产品</>\r\n                :\r\n                subsub\r\n        }\r\n    </div>\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, FA } from \"tonva-react\";\r\nimport { CProductCategory } from './CProductCategory';\r\nimport marked from 'marked';\r\n//import { tv } from \"tonva-react\";\r\nimport { renderThirdCategory } from './VRootCategory';\r\nimport { observer } from 'mobx-react';\r\nimport $ from 'jquery';\r\n\r\nexport class VCategory extends VPage<CProductCategory> {\r\n\r\n    instruction: string;\r\n    async open(categoryWapper: any) {\r\n\r\n        this.instruction = categoryWapper.instruction;\r\n        this.openPage(this.page, categoryWapper);\r\n        // let { getCategoryInstruction } = this.controller;\r\n        // this.instruction = await getCategoryInstruction(0);\r\n    }\r\n\r\n    /*\r\n    private renderChild = (childWapper: any) => {\r\n        return <div className=\"py-2\"><FA name=\"hand-o-right mr-2\"></FA>{childWapper.name}</div>\r\n    }*/\r\n\r\n    private categoryClick = async (childWapper: any, parent: any, labelColor: string) => {\r\n        await this.controller.openMainPage(childWapper, parent, labelColor);\r\n    }\r\n\r\n    /*\r\n    private breadCrumb = (item: any, parent: any) => {\r\n        return <nav arial-babel=\"breadcrumb\">\r\n            <ol className=\"breadcrumb\">\r\n                {tv(item, this.breadCrumbItem)}\r\n            </ol>\r\n        </nav>\r\n\r\n    }*/\r\n\r\n    /*\r\n    private breadCrumbItem = (values: any, parent: any) => {\r\n        if (values === undefined || values.productCategory === undefined)\r\n            return <></>;\r\n        return <>\r\n            {tv(values.productCategory.parent, this.breadCrumbItem)}\r\n            <li className=\"breadcrumb-item\" onClick={() => this.categoryClick(values, undefined, \"\")}>{values.name}</li>\r\n        </>\r\n    }*/\r\n\r\n    private renderRootCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { productCategory, name, children } = item;\r\n        let instructionUi;\r\n        if (this.instruction) {\r\n            let instr: JQuery<Element> = $(this.instruction);\r\n            $(\"a[href*='jkchemical.com']\", instr).addClass('d-none');\r\n            instructionUi = <div className=\"overflow-auto my-3 bg-light\" style={{ height: 320 }} dangerouslySetInnerHTML={{ __html: (instr[0].innerHTML || \"\") }} />;\r\n        }\r\n        return <div className=\"bg-white mb-3\" key={name}>\r\n            <div className=\"py-2 px-3 cursor-pointer\" onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n                <b>{name}</b>\r\n                {instructionUi}\r\n            </div>\r\n            <div className=\"cat-root-sub\">\r\n                <div className=\"row no-gutters\">\r\n                    {children.map((v: any) => this.renderSubCategory(v, item, labelColor))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderSubCategory = (item: any, parent: any, labelColor: string) => {\r\n        let { name, subsub, total } = item;\r\n        return <div key={name}\r\n            className=\"col-6 col-md-4 col-lg-3 cursor-pointer\"\r\n            onClick={() => this.categoryClick(item, parent, labelColor)}>\r\n            <div className=\"py-2 px-2 cat-sub\">\r\n                <div className=\"cat-title-title\">\r\n                    <span className=\"ml-1 align-middle\">\r\n                        <FA name=\"chevron-circle-right\" className={labelColor} />\r\n                        &nbsp; {name}\r\n                    </span>\r\n                </div>\r\n                {renderThirdCategory(subsub, total)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private page = observer((categoryWapper: any) => {\r\n        let { cHome } = this.controller.cApp;\r\n        let header = cHome.renderSearchHeader();\r\n        let cartLabel = this.controller.cApp.cCart.renderCartLabel();\r\n\r\n        let { categoryWapper: item, parent, labelColor } = categoryWapper;\r\n        return <Page header={header} right={cartLabel}>\r\n            {this.renderRootCategory(item, parent, labelColor)}\r\n        </Page>\r\n    })\r\n}","//import { observable } from 'mobx';\r\nimport _ from 'lodash';\r\nimport { CUqBase } from '../CBase';\r\nimport { VRootCategory } from './VRootCategory';\r\nimport { VCategory } from './VCategory';\r\nimport { GLOABLE } from \"cartenv\";\r\nimport './cat.css';\r\n\r\nexport class CProductCategory extends CUqBase {\r\n    rootCategories: any[] = [];\r\n    //@observable categories2: any[] = [];\r\n\r\n    async internalStart(param: any) {\r\n        this.uqs.product.ProductCategory.stopCache();\r\n\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        let results = await this.uqs.product.GetRootCategory.query({\r\n            salesRegion: currentSalesRegion.id,\r\n            language: currentLanguage.id\r\n        });\r\n        let { first, secend, third } = results;\r\n        /*\r\n        (first as any[]).forEach(element => {\r\n            this.buildCategories(element, secend, third);\r\n        });\r\n        */\r\n        this.rootCategories = (first as any[]).map(v => {\r\n            return this.buildCategories(v, secend, third);\r\n        });\r\n        /*\r\n        let result2 = await this.getRootCategoriesQuery.query({ salesRegion: currentSalesRegion.id, language: currentLanguage.id });\r\n        if (result2)\r\n            this.categories2 = result2.ret;\r\n        */\r\n    }\r\n\r\n    renderRootList = () => {\r\n        return this.renderView(VRootCategory);\r\n    };\r\n\r\n    getCategoryInstruction = async (categoryId: number) => {\r\n        let res = await window.fetch(GLOABLE.CONTENTSITE + \"/partial/categoryinstruction/\" + categoryId);\r\n        if (res.ok) {\r\n            let content = await res.text();\r\n            return content;\r\n        }\r\n    };\r\n\r\n    private async getCategoryChildren(parentCategoryId: number) {\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        return await this.uqs.product.GetChildrenCategory.query({\r\n            parent: parentCategoryId,\r\n            salesRegion: currentSalesRegion.id,\r\n            language: currentLanguage.id\r\n        });\r\n    }\r\n\r\n    private buildCategories(categoryWapper: any, firstCategory: any[], secendCategory: any[]): any {\r\n        let { productCategory } = categoryWapper;\r\n        let catId: number = productCategory.id, children: any[] = [];\r\n        for (let f of firstCategory) {\r\n            if (f.parent !== catId) continue;\r\n            let pcid = f.productCategory.id;\r\n            let len = secendCategory.length;\r\n            let subsub = '';\r\n            for (let j = 0; j < len; j++) {\r\n                //element.children = secendCategory.filter((v: any) => v.parent === pcid);\r\n                let { name, parent } = secendCategory[j];\r\n                if (parent !== pcid) continue;\r\n                if (subsub.length > 0) subsub += ' / ';\r\n                subsub += name;\r\n                let sLen = subsub.length;\r\n                if (sLen > 40) break;\r\n            }\r\n            if (subsub.length > 0) f.subsub = subsub;\r\n            children.push(f);\r\n        }\r\n        //categoryWapper.children = firstCategory.filter((v: any) => v.parent === pcid);\r\n        let ret = _.clone(categoryWapper);\r\n        ret.children = children; // firstCategory.filter((v: any) => v.parent === pcid);\r\n        return ret;\r\n    }\r\n\r\n    async openMainPage(categoryWaper: any, parent: any, labelColor: string) {\r\n\r\n        let { productCategory, name } = categoryWaper;\r\n        let { id: productCategoryId } = productCategory;\r\n        let results = await this.getCategoryChildren(productCategoryId);\r\n        if (results.first.length !== 0) {\r\n            let rootCategory = this.buildCategories(categoryWaper, results.first, results.secend);\r\n            let instruction = await this.getCategoryInstruction(productCategoryId);\r\n            this.openVPage(VCategory, { categoryWapper: rootCategory, parent, labelColor, instruction });\r\n        } else {\r\n            let { cProduct } = this.cApp;\r\n            await cProduct.searchByCategory({ productCategoryId, name });\r\n        }\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/pig.7f1e923b.png\";","import * as React from 'react';\r\nimport { VPage, Image } from \"tonva-react\";\r\nimport { CMember } from './CMember';\r\nimport { LMR, Muted, FA, Media } from \"tonva-react\";\r\nimport pig from '../images/pig.png';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst stylePig: React.CSSProperties = {\r\n    width: '100%',\r\n    height: '20rem',\r\n    backgroundImage: `url(${pig})`,\r\n    backgroundSize: 'contain',\r\n    backgroundColor: 'rgba(255,255,255,0.1)',\r\n    opacity: 0.09,\r\n    position: 'absolute',\r\n}\r\n\r\nexport class VMember extends VPage<CMember> {\r\n    private recommendationCodeRef = React.createRef<HTMLInputElement>();\r\n\r\n    async open(param: any) {\r\n\r\n    }\r\n\r\n    render(member: any): JSX.Element {\r\n\r\n        return <this.page />;\r\n    }\r\n\r\n    private submitRecommendationCode() {\r\n        let code = this.recommendationCodeRef.current.value;\r\n        if (code) {\r\n            let { setReferrer: submit } = this.controller;\r\n            submit(code);\r\n        }\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { cApp, member } = this.controller;\r\n        if (member === undefined)\r\n            return <></>;\r\n        let { currentUser } = cApp;\r\n        let { recommendationCode, point } = member;\r\n        if (!point) point = 0;\r\n\r\n        let im = <Image className=\"mr-3 w-3c h-3c\" src={currentUser.icon} />;\r\n        let inviteCode = <div className=\"small\">邀请码: {recommendationCode}</div>;\r\n\r\n        let divPoints = <div className=\"my-3 text-center bg-white h-25\" style={{ position: 'relative' }}>\r\n            <div className=\"w-100 bg-white h-20c\" style={{ position: 'absolute' }} />\r\n            <div className=\"d-flex align-items-center justify-content-center\" style={stylePig} />\r\n            <div className=\"w-100 d-flex align-items-center justify-content-center h-20c\" style={{ position: 'absolute' }}>\r\n                <div className=\"muted mr-3 small\">积分: </div>\r\n                <div className=\"text-danger\" style={{ fontSize: '2rem' }}>{point}</div>\r\n            </div>\r\n        </div>\r\n\r\n        let pointTitle = <p className=\"h4\">我的积分</p>\r\n        let pointDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>\r\n        let pointThisWeek = <><p className=\"h5 mb-0\">0</p><Muted>本周</Muted></>\r\n        let pointAll = <><p className=\"h5 mb-0\">{point}</p><Muted>累计</Muted></>\r\n\r\n        let fansTitle = <p>我的粉丝</p>\r\n        let fansDetail = <p className=\"small align-self-end\">查看详情 <FA name=\"angle-right\"></FA></p>;\r\n        let detail = <div className=\"shadow bg-white rounded p-3 mb-1\">\r\n            <LMR left={fansTitle} right={fansDetail}></LMR>\r\n            <LMR className=\"pb-2\">\r\n                <p className=\"h4 mb-0\">0</p>\r\n                <Muted>今日</Muted>\r\n            </LMR>\r\n            <LMR left={pointThisWeek} right={pointAll} />\r\n            <LMR>\r\n                <input type=\"text\" className=\"form-control\" ref={this.recommendationCodeRef} />\r\n                <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.submitRecommendationCode()}>输入邀请码</button>\r\n            </LMR>\r\n        </div>;\r\n\r\n        return <div>\r\n            <LMR className=\"bg-white p-3 mb-1 align-items-center\"\r\n                left={im} right={inviteCode}>\r\n                <b>{currentUser.name}</b>\r\n            </LMR>\r\n            {divPoints}\r\n            {/*detail*/}\r\n        </div>\r\n    })\r\n}\r\n/*\r\n<div className=\"shadow bg-white rounded p-3 mb-1\">\r\n<LMR left={pointTitle} right={pointDetail}></LMR>\r\n<LMR className=\"pb-2\">\r\n    <p className=\"h4 mb-0\">0</p>\r\n    <Muted>今日</Muted>\r\n</LMR>\r\n<LMR left={pointThisWeek} right={pointAll} />\r\n</div>\r\n*/","import * as React from 'react';\r\n//import Loadable from 'react-loadable';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { FA } from \"tonva-react\";\r\nimport { Controller, Loading, nav } from \"tonva-react\";\r\nimport { Action, Map, BoxId } from \"tonva-react\";\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { VMember } from './VMember';\r\n//import { CCartApp } from 'CCartApp';\r\n//import { jnkTop } from 'me/loginTop';\r\n\r\nexport class CMember extends CUqBase {\r\n\r\n    //cApp: CCartApp;\r\n    //    cApp: CApp;\r\n    member: any;\r\n    private referrer: BoxId;\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            member: observable\r\n        });\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n\r\n        if (this.isLogined) {\r\n            let { member } = this.uqs;\r\n            let { id: currentUserId } = this.user;\r\n            let promises: PromiseLike<any>[] = [];\r\n            promises.push(member.MemberAction.submit({}));\r\n            promises.push(member.MemberRecommender.table({ referrer: currentUserId }));\r\n            promises.push(member.MemberRecommender.table({ member: currentUserId }));\r\n            let result = await Promise.all(promises);\r\n            let { code, point } = result[0];\r\n            this.referrer = result[2];\r\n            this.member = { recommendationCode: code, point: point, fans: result[1], referrer: result[2] };\r\n        }\r\n    }\r\n\r\n    private loginCallback = async () => {\r\n        nav.pop();\r\n        await this.internalStart(undefined);\r\n    }\r\n\r\n    render = observer(() => {\r\n        if (this.isLogined) {\r\n            return this.member === undefined ? <Loading /> : this.renderView(VMember);\r\n        } else {\r\n            return <div\r\n                className=\"d-flex h-100 flex-column align-items-center justify-content-center\">\r\n                <div className=\"flex-fill\" />\r\n                <button className=\"btn btn-success w-20c\"\r\n                    onClick={() => nav.showLogin(this.loginCallback, true)}>\r\n                    <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                </button>\r\n                <div className=\"flex-fill\" />\r\n                <div className=\"flex-fill\" />\r\n            </div>;\r\n        }\r\n    })\r\n\r\n    tab = () => {\r\n        this.start();\r\n        return <this.render />;\r\n    }\r\n\r\n    setReferrer(code: string) {\r\n        if (code) {\r\n            // 写入map，方法是add，用这个方法可能会写入多次，多以在写入之前要检查有没有，有的话，就不能再调用这个方法了\r\n            // 这个逻辑我认为应该是在服务端，写入的时候要给双方积分，给多少积分的逻辑，也应该在后端，从邀请码到拥有此邀请码\r\n            // 的会员id之间的转换，逻辑也应该在后台，这个后端的逻辑写在ACTION中？\r\n            if (!this.referrer) {\r\n                let { id: currentUserId } = this.user;\r\n            }\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport { Page } from \"tonva-react\";\r\nimport marked from 'marked';\r\nimport logo from '../images/logo.png';\r\n\r\nconst content = `<p>　　百灵威科技有限公司是一家致力于研发和生产化学及相关产品，集敏捷制造、全球营销和现代物流为一体的高科技企业。\r\n百灵威在中国内地、香港，欧洲及北美等多个国家和地区设有物流中心，实行专业化、个性化的一站式服务，\r\n为全球超过200,000 名科技和工业领域的客户提供产品资源及配套技术服务。</p>\r\n<image src=\"images/aboutus/HebBirdsEye.jpg\" alt=\"BirdsEye\" class=\"pb-3\" style=\"width:100%; height:auto\">\r\n<p>　　百灵威现代化的研发制造基地拥有一支富有创造天赋的专业团队，新技术、新产品层出不穷，J&K®、Amethyst®、J&K Scientific® 产品\r\n已多达30,000 种以上，并呈几何级数增长。作为国际化的资源平台公司，百灵威致力于促进全球产业链的合作，不断推进集约式发展，\r\n集成资源600,000 余种，包括高纯有机试剂、无机试剂、生化试剂、分析试剂、标准品、金属有机催化剂、医药中间体、超精细材料、\r\n以及实验室仪器、耗材等众多产品。百灵威的柔性生产线能够快速提供小批量、多品种的原料，满足实验、中试以至规模化生产的需要。\r\n</p>\r\n<image src=\"images/aboutus/aboutUs1.jpg\" alt=\"aboutus1\" class=\"pb-3\" style=\"width:100%; height:auto\">\r\n<p>　　百灵威秉承“诚实守信、开拓创新、合作共赢、实现卓越”的价值观，致力于与化学、生物医药、精细化工、食品工业、现代农业、电子、日化、\r\n石化、纺织、生命科学、环境保护、疾病控制、新能源、新材料、航空航天等领域的客户建立互信、长久的合作关系，\r\n为实现“促进科技与工业发展，造福人类”的使命而不懈努力！\r\n</p>\r\n`\r\n\r\nexport class About extends React.Component {\r\n    render() {\r\n        let right = null;\r\n        return <Page header=\"关于百灵威\" right={right}>\r\n            <div className='bg-white p-3'>\r\n                <img className=\"h-3c position-absolute\" src={logo} alt=\"百灵威\" />\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <span className=\"text-primary mr-3\">百灵威集团</span>\r\n                </div>\r\n                <div className=\"mt-5\" dangerouslySetInnerHTML={{ __html: marked(content) }} />\r\n            </div>\r\n        </Page>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { Page } from \"tonva-react\";\r\n\r\ninterface Phone {\r\n\tnumber: string;\r\n\tcaption: string;\r\n}\r\n\r\ninterface Section {\r\n\tcaption: string;\r\n\taddress: string;\r\n\tpost?: string;\r\n\tphones: Phone[];\r\n\tfax?: string;\r\n\temail: string[];\r\n}\r\n\r\nconst sections: Section[] = [\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd.',\r\n\t\taddress: '北京市朝阳区北辰西路69号峻峰华亭A座5层',\r\n\t\tpost: '100029',\r\n\t\tphones: [\r\n\t\t\t{ number: '4006667788', caption: '400-666-7788' },\r\n\t\t\t{ number: '+861082848833', caption: '+86 10 8284 8833' },\r\n\t\t],\r\n\t\tfax: '+86 10 8284 9933',\r\n\t\temail: ['jkinfo@jkchemical.com', 'jkinfo@jk-sci.com'],\r\n\t},\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (上海)',\r\n\t\taddress: '上海市浦东区世纪大道1777号东方希望大厦10楼H座',\r\n\t\tpost: '200122',\r\n\t\tphones: [{ number: '+862161638833', caption: '+86 21 6163 8833' }],\r\n\t\tfax: '+86 21 6163 8800',\r\n\t\temail: ['jksh@jkchemical.com', 'jksh@jk-sci.com']\r\n\t},\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (广东)',\r\n\t\taddress: '广东省广州市天河区珠江新城华夏路28号富力盈信大厦3108室',\r\n\t\tpost: '510623',\r\n\t\tphones: [{ number: '+862038889733', caption: '+86 20 3888 9733' }],\r\n\t\tfax: '+86 20 3888 8285',\r\n\t\temail: ['jkgz@jkchemical.com', 'jkgz@jk-sci.com'],\r\n\t}/* ,\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (成都)',\r\n\t\taddress: '四川省成都市高新区科园南路1号1栋8楼803号',\r\n\t\tpost: '610041',\r\n\t\tphones: [{ number: '+8602883231067', caption: '+86 028 83231067' }],\r\n\t\temail: ['jkinfo@jkchemical.com'],\r\n\t} */,\r\n\t{\r\n\t\tcaption: 'J&K Scientific Ltd. (香港)',\r\n\t\taddress: 'FLAT/RM 1901, 19/F, Lee Garden One,33 Hysan Avenue, Causeway Bay, Hong Kong',\r\n\t\tphones: [{ number: '+85228105022', caption: '+852 2810 5022' }],\r\n\t\tfax: '+852 2810 5033',\r\n\t\temail: ['jkhk@jkchemical.com'],\r\n\t}\r\n];\r\n\r\nconst Row: React.FunctionComponent<any> = ({ label, content }) => {\r\n\tif (!content) return null;\r\n\treturn <div className=\"my-1\">\r\n\t\t<span className=\"small text-muted\">{label}</span>：{content}\r\n\t</div>;\r\n}\r\n\r\nexport class ContactUs extends React.Component {\r\n\trender() {\r\n\t\tlet right = null;\r\n\t\treturn <Page header=\"联系信息\" right={right}>\r\n\t\t\t<div className='bg-white pb-5'>\r\n\t\t\t\t<div className=\"h4 pb-3 border-bottom border-muted text-center p-3 mb-3\">\r\n\t\t\t\t\t<span className=\"text-primary mr-\">联系我们</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"px-3 my-3\">\r\n\t\t\t\t\t<small className=\"text-muted\">全国客服热线：</small><a href=\"tel:4006667788\">400-666-7788</a>\r\n\t\t\t\t\t<span className=\"ml-4\"><small className=\"text-muted\">QQ：</small>4006667788</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t{sections.map((v, index) => {\r\n\t\t\t\t\tlet { caption, address, post, phones, fax, email } = v;\r\n\t\t\t\t\treturn <div key={index} className=\"my-4\">\r\n\t\t\t\t\t\t<div className=\"h5 text-info border-bottom p-3\">{caption}</div>\r\n\t\t\t\t\t\t<div className=\"px-3\">\r\n\t\t\t\t\t\t\t<Row label=\"地址\" content={address} />\r\n\t\t\t\t\t\t\t<Row label=\"邮编\" content={post} />\r\n\t\t\t\t\t\t\t<Row label=\"电话\" content={\r\n\t\t\t\t\t\t\t\tphones && phones.map((phone, phoneIndex) => {\r\n\t\t\t\t\t\t\t\t\tlet { number, caption } = phone;\r\n\t\t\t\t\t\t\t\t\treturn <a key={phoneIndex} className=\"mr-5\" href={'tel:' + number}>{caption}</a>\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Row label=\"传真\" content={fax} />\r\n\t\t\t\t\t\t\t<Row label=\"电子邮件\" content={\r\n\t\t\t\t\t\t\t\temail && email.map((e, eIndex) => {\r\n\t\t\t\t\t\t\t\t\treturn <a key={eIndex} className=\"mr-5\" href={'mailto:' + e}>{e}</a>\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</Page >;\r\n\t}\r\n}\r\n/*\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.</p>\r\n<div className=\"small\">\r\n\t<p>地址：北京市朝阳区北辰西路69号峻峰华亭A座5层</p>\r\n\t<p>邮编：100029</p>\r\n\t<p>电话：<a href=\"tel:4006667788\">400-666-7788</a> / <a href=\"tel:861082848833\">+86 10 8284 8833</a></p>\r\n\t<p>传真：+86 10 8284 9933</p>\r\n\t<p>电子邮件：<a href=\"mailto:jkinfo@jkchemical.com\">jkinfo@jkchemical.com</a><a className=\"ml-3\" href=\"mailto:jkinfo@jk-sci.com\">jkinfo@jk-sci.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(上海)</p>\r\n<div className=\"small\">\r\n\t<p>地址：上海市浦东区世纪大道1777号东方希望大厦10楼H座</p>\r\n\t<p>邮编：200122</p>\r\n\t<p>电话：<a href=\"tel:+862161638833\">+86 21 6163 8833</a></p>\r\n\t<p>传真：+86 21 6163 8800</p>\r\n\t<p>电子邮件：<a href=\"mailto:jksh@jkchemical.com\">jksh@jkchemical.com</a><a className=\"ml-3\" href=\"mailto:jksh@jk-sci.com\">jksh@jk-sci.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(广东)</p>\r\n<div className=\"small\">\r\n\t<p>地址：广东省广州市天河区珠江新城华夏路28号富力盈信大厦3108室</p>\r\n\t<p>邮编：510623</p>\r\n\t<p>电话：<a href=\"tel:+862038889733\">+86 20 3888 9733</a></p>\r\n\t<p>传真：+86 20 3888 8285</p>\r\n\t<p>电子邮件：<a href=\"mailto:jkgz@jkchemical.com\">jkgz@jkchemical.com</a><a className=\"ml-3\" href=\"mailto:jkgz@jk-sci.com\">jkgz@jk-sci.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(成都)</p>\r\n<div className=\"small\">\r\n\t<p>地址：四川省成都市高新区科园南路1号1栋8楼803号</p>\r\n\t<p>邮编：610041</p>\r\n\t<p>电话：<a href=\"tel:+8602883231067\">+86 028 83231067</a></p>\r\n\t<p>电子邮件：<a href=\"mailto:jkinfo@jkchemical.com\">jkinfo@jkchemical.com</a></p>\r\n</div>\r\n</div>\r\n<div className=\"my-5\">\r\n<p className=\"h4 text-info\">J&amp;K Scientific Ltd.(香港)</p>\r\n<div className=\"small\">\r\n\t<p>地址：FLAT/RM 1901, 19/F, Lee Garden One,33 Hysan Avenue, Causeway Bay, Hong Kong</p>\r\n\t<p>电话：<a href=\"tel:+85228105022\">+852 2810 5022</a></p>\r\n\t<p>传真：+852 2810 5033</p>\r\n\t<p>电子邮件：<a href=\"mailto:jkhk@jkchemical.com\">jkhk@jkchemical.com</a></p>\r\n</div>\r\n</div>\r\n*/","import * as React from 'react';\r\nimport { tv } from \"tonva-react\";\r\n\r\nexport const tvAddress = (values: any) => {\r\n    let { country, province, city, county } = values;\r\n    return <>\r\n        {tv(country)}{tv(province, undefined, undefined, () => <></>)}{tv(city, undefined, undefined, () => <></>)}{tv(county, undefined, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nexport const tvCountry = (values: any) => {\r\n    return <> {values.chineseName} </>;\r\n}\r\n\r\nexport const tvCurrency = (values: any) => {\r\n    return <> {values.name} </>;\r\n}\r\n\r\nexport const common = {\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    currency: tvCurrency,\r\n};\r\n","import * as React from 'react';\r\nimport { tv } from \"tonva-react\";\r\nimport { ProductImage } from 'tools/productImage';\r\n\r\nexport const tvProduct = (values: any) => {\r\n    let product = values;\r\n    let { brand, description, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"row d-flex\">\r\n        <div className=\"col-12\">\r\n            <div className=\"row py-2\">\r\n                <div className=\"col-12\"><strong>{description}</strong></div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {item('CAS', CAS)}\r\n                        {item('纯度', purity)}\r\n                        {item('分子式', molecularFomula)}\r\n                        {item('分子量', molecularWeight)}\r\n                        {item('产品编号', origin)}\r\n                        {tv(brand, (values: any) => <>{item(\"品牌\", values.name)}</>)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst tvPackx = (values: any) => {\r\n    let { radiox, radioy, unit } = values;\r\n    if (radiox !== 1) return <>{radiox} * {radioy}{unit}</>;\r\n    return <>{radioy}{unit}</>;\r\n}\r\n\r\nfunction item(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 text-muted pr-0\">{caption}:</div>\r\n        <div className=\"col-8\">{value}</div>\r\n    </>;\r\n}\r\n\r\nconst tvProductCategory = (values: any) => {\r\n    let { children } = values;\r\n    return <>\r\n        aaa\r\n    </>\r\n};\r\n\r\nexport const product = {\r\n    productx: tvProduct,\r\n    packx: tvPackx,\r\n    productCategory: tvProductCategory,\r\n}\r\n","import * as React from 'react';\r\nimport { tv } from \"tonva-react\";\r\nimport { tvAddress, tvCountry } from './common';\r\n\r\nexport const tvContact = (values: any) => {\r\n    let { name, mobile, organizationName, address, addressString } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        <b>\r\n            {name}\r\n        </b>\r\n        &nbsp; {mobile} &nbsp; {organizationName}<br />\r\n        <small>{tv(address)} {addressString}</small>\r\n    </div>\r\n}\r\n\r\nexport const tvInvoiceType = (values: any) => {\r\n    let { id, description } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        {description}\r\n    </div>\r\n}\r\n\r\nexport const tvInvoiceInfo = (values: any) => {\r\n    let { title, taxNo } = values;\r\n    return <div className=\"flex-grow-1\">\r\n        <b>\r\n            {title}\r\n        </b>\r\n        &nbsp; {taxNo}\r\n    </div>\r\n}\r\n\r\nexport const customer = {\r\n    contact: tvContact,\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    invoiceInfo: tvInvoiceInfo,\r\n    invoiceType: tvInvoiceType\r\n}\r\n","//=== UqApp builder created on Tue Jan 12 2021 23:14:51 GMT-0500 (GMT-05:00) ===//\r\nimport { GLOABLE } from \"cartenv\";\r\nimport { jnkTop } from \"me/loginTop\";\r\nimport { AppConfig, DevConfig } from \"tonva-react\";\r\nimport { tvs } from \"tvs\";\r\n\r\nconst bz: DevConfig = {\r\n\tname: 'bizdev',\r\n\talias: 'bz',\r\n}\r\n\r\nconst jk: DevConfig = {\r\n\tname: '百灵威系统工程部',\r\n\talias: 'jk',\r\n}\r\n\r\nexport const appConfig: AppConfig = {\r\n\tversion: '1.1.148',\r\n\tapp: {\r\n\t\tdev: jk,\r\n\t\tname: 'cart',\r\n\t},\r\n\tuqs: [\r\n\t\t/*\r\n\t\t{\r\n\t\t\tdev: bz,\r\n\t\t\tname: 'hello-tonva',\r\n\t\t\talias: 'HelloTonva',\r\n\t\t\tversion: '0.1.0',\r\n\t\t},\r\n\t\t*/\r\n\r\n\t\t{\r\n\t\t\tdev: jk,\r\n\t\t\tname: 'order',\r\n\t\t\tversion: '0.1.1',\r\n\t\t},\r\n\t\t{\r\n\t\t\tdev: jk,\r\n\t\t\tname: 'product',\r\n\t\t\tversion: '0.1.1',\r\n\t\t},\r\n\t\t{\r\n\t\t\tdev: jk,\r\n\t\t\tname: 'customer',\r\n\t\t\tversion: '0.1.1',\r\n\t\t},\r\n\t],\r\n\tnoUnit: true,\r\n\ttvs,\r\n\toem: undefined,\r\n\tloginTop: jnkTop,\r\n\tprivacy: GLOABLE.PIRVACYURL\r\n};\r\n","import { TVs } from \"tonva-react\";\r\nimport { common } from \"./common\";\r\nimport { warehouse } from \"./warehouse\";\r\nimport { product } from \"./product\";\r\nimport { order } from \"./order\";\r\nimport { customer } from './customer';\r\n\r\nexport const tvs:TVs = {\r\n    common: common,\r\n    warehouse: warehouse,\r\n    product: product,\r\n    order: order,\r\n    customer: customer,\r\n}","import * as React from 'react';\r\n\r\nconst tvWarehouse = (values: any) => {\r\n    let { name } = values;\r\n    return <div>\r\n        {name}\r\n    </div>\r\n}\r\n\r\nexport const warehouse = {\r\n    warehouse: tvWarehouse,\r\n}\r\n","import { tvProduct } from \"./product\";\r\nimport { tvAddress, tvCountry, tvCurrency } from \"./common\";\r\nimport { tvContact } from \"./customer\";\r\n\r\nexport const order = {\r\n    productx: tvProduct,\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    contact: tvContact,\r\n    currency: tvCurrency,\r\n}\r\n","import * as React from 'react';\r\nimport logo from '../images/logo.png';\r\n\r\nexport const jnkTop = <div className=\"d-flex align-items-center position-relative\">\r\n    <img className=\"h-3c position-absolute\" src={logo} alt=\"百灵威\" />\r\n    <div className=\"h3 flex-fill text-center\">\r\n        <span className=\"text-primary mr-3\">百灵威</span>\r\n    </div>\r\n</div>;\r\n","import * as React from 'react';\r\nimport { Page, VPage, nav } from \"tonva-react\";\r\nimport logo from '../images/logo.png';\r\nimport { appConfig } from 'uq-app/appConfig';\r\nimport { CMe } from './CMe';\r\n\r\nexport class AboutThisApp extends VPage<CMe>{\r\n\r\n    private version: any;\r\n    async open() {\r\n        this.version = await nav.checkVersion();\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = () => {\r\n        let right = null;\r\n        let links: any = <div className=\"sep-product-select\" style={{ width: \"80%\", margin: \" 0 auto 0 auto\" }} />\r\n        return <Page header=\"关于百灵威购物APP\" right={right}>\r\n            <div className='bg-white p-3'>\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <img src={logo} />\r\n                </div>\r\n                <div className=\"h3 flex-fill text-center\">\r\n                    <span className=\"text-primary mr-3\">百灵威购物APP</span>\r\n                </div>\r\n                <div className=\"h3 flex-fill text-center small\">\r\n                    <span className=\"text-muted mr-3\">V{appConfig.version}</span>\r\n                </div>\r\n\r\n                {\r\n                    (this.version && this.version !== appConfig.version) && <>\r\n                        {links}\r\n                        < div className=\"d-flex my-3 cursor-pointer\" style={{ width: \"70%\", margin: \" 0 auto 0 auto\" }} onClick={() => nav.resetAll()} >\r\n                            <div className=\"text-danger\">发现新版本 V{this.version}，升级APP</div>\r\n                        </div>\r\n                        {links}\r\n                    </>\r\n                }\r\n            </div>\r\n        </Page>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { nav, User, Page, Image, VPage } from \"tonva-react\";\r\nimport { Prop, Media, IconText, FA, PropGrid, LMR } from \"tonva-react\";\r\nimport { About } from './about';\r\nimport { ContactUs } from './contactUs';\r\nimport { observer } from 'mobx-react';\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\nimport { AboutThisApp } from './aboutThisApp';\r\nimport { appConfig } from 'uq-app/appConfig';\r\n\r\nexport class VMe extends VPage<CMe> {\r\n\r\n    async open(param?: any) {\r\n\r\n    }\r\n\r\n    private exit() {\r\n        nav.showLogout();\r\n    }\r\n\r\n    private about = () => nav.push(<About />);\r\n    private contactUs = () => nav.push(<ContactUs />);\r\n    private privacy = () => {\r\n        this.controller.openPrivacy();\r\n    }\r\n    private aboutThisApp = () => {\r\n        // nav.push(<AboutThisApp />);\r\n        this.openVPage(AboutThisApp)\r\n    }\r\n\r\n    private changePassword = async () => {\r\n        await nav.changePassword();\r\n    }\r\n\r\n    private openContactList = async () => {\r\n        this.controller.openContactList();\r\n    }\r\n\r\n    private openInvoice = async () => {\r\n        this.controller.openInvoice();\r\n    }\r\n\r\n    private openMyPoint = async () => {\r\n        this.controller.openMyPoint();\r\n    }\r\n\r\n    private openCouponManage = async () => {\r\n        this.controller.openCouponManage();\r\n    }\r\n\r\n    private openFavorites = async () => {\r\n        this.controller.openFavorites();\r\n    }\r\n\r\n    private openEditMeInfo = async () => {\r\n        this.controller.openEditMeInfo();\r\n    }\r\n\r\n    private userQuit = async () => {\r\n        await nav.userQuit();\r\n    }\r\n\r\n    private meInfo = observer(() => {\r\n        let { user } = nav;\r\n        if (user === undefined || user === null) return null;\r\n        let { id, name, nick, icon } = user;\r\n        return <LMR className=\"px-3 py-2 cursor-pointer w-100 bg-primary text-white\"\r\n            left={<Image className=\"w-3c h-3c mr-3\" src={icon} />}\r\n            right={<FA className=\"align-self-end\" name=\"angle-right\" />}\r\n            onClick={() => {\r\n                this.openEditMeInfo()\r\n            }}>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-light\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </LMR>;\r\n    });\r\n\r\n    private orderStates = () => {\r\n        let { openMyOrders } = this.controller;\r\n        let oss = [\r\n            { caption: '待审核', state: 'processing', icon: 'desktop' },\r\n            { caption: '待发货', state: 'completed', icon: 'truck' },\r\n            { caption: '所有订单', state: 'all', icon: 'file-text-o' },\r\n        ];\r\n\r\n        return <div className=\"d-flex justify-content-around w-100 my-3\">\r\n            {\r\n                oss.map(((os, index) => {\r\n                    let { caption, state, icon } = os;\r\n                    return <div key={index} className=\"flex-fill d-flex flex-column align-items-center cursor-pointer\"\r\n                        onClick={() => openMyOrders(state)}>\r\n                        <FA name={icon} className=\"text-info fa-2x\" />\r\n                        <small>{caption}</small>\r\n                    </div>;\r\n                }))\r\n            }\r\n        </div>\r\n    };\r\n\r\n    render() {\r\n        return <this.page />;\r\n    }\r\n    content() {\r\n        return <this.page />;\r\n    }\r\n    header() {\r\n        return <this.meInfo />;\r\n    }\r\n\r\n    private page = observer(() => {\r\n        const { user } = nav;\r\n        let aboutRows: Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"phone\" text=\"联系我们\" />,\r\n                onClick: this.contactUs\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于百灵威\" />,\r\n                onClick: this.about\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"用户协议\" />,\r\n                onClick: this.controller.openLegal\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"隐私政策\" />,\r\n                onClick: this.privacy\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <div className=\"w-100 d-flex justify-content-between\" onClick={this.aboutThisApp}>\r\n                    <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于本APP\" />\r\n                    <div className=\"py-2 small\">V{appConfig.version}</div>\r\n                </div>,\r\n            },\r\n            ''\r\n        ];\r\n\r\n        let rows: Prop[];\r\n        if (user === undefined || user === null) {\r\n            let { showLogin } = this.controller;\r\n            rows = aboutRows;\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    component: <button className=\"btn btn-success w-100 my-2\" onClick={() => showLogin()}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 登录/注册\r\n                    </button>\r\n                },\r\n            );\r\n        }\r\n        else {\r\n            let logOutRows: Prop[] = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    bk: '',\r\n                    component: <div className=\"text-center flex-fill\"><button className=\"btn btn-danger w-75\" onClick={this.exit}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 退出登录\r\n\t\t\t\t\t\t</button>\r\n                    </div>\r\n                },\r\n            ];\r\n\r\n            rows = [\r\n                /*\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.meInfo />\r\n                },\r\n                */\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <>{this.orderStates()}</>,\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"地址管理\" />,\r\n                    onClick: this.openContactList\r\n                },\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"发票管理\" />,\r\n                    onClick: this.openInvoice\r\n                },\r\n                /* {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"address-book-o\" text=\"积分商城\" />,\r\n                    onClick: this.openMyPoint\r\n                }, */\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"connectdevelop\" text=\"卡券管理\" />,\r\n                    onClick: this.openCouponManage\r\n                },\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"heart\" text=\"商品收藏\" />,\r\n                    onClick: this.openFavorites\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text=\"修改密码\" />,\r\n                    onClick: this.changePassword\r\n                },\r\n            ];\r\n            let aboutRows2: Prop[] = [\r\n                '',\r\n                {\r\n                    type: \"component\",\r\n                    component: <IconText iconClass=\"text-danger me-2\" icon=\"ban\" text=\"注销账户\" />,\r\n                    onClick:this.userQuit\r\n                },\r\n            ];\r\n            rows.push(...aboutRows,...aboutRows2, ...logOutRows);\r\n        }\r\n        return <PropGrid rows={rows} values={{}} />;\r\n    })\r\n}\r\n\r\nexport function userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import * as React from 'react';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport {\r\n    userApi, ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page,\r\n    Edit, UiSchema,\r\n    VPage, UiRadio, IdSchema, UiIdItem, Context, BoxId, tv\r\n} from \"tonva-react\";\r\nimport { CMe } from './CMe';\r\nimport {\r\n    faxValidation, emailValidation, mobileValidation, telephoneValidation,\r\n    addressDetailValidation, zipCodeValidation,\r\n    organizationNameValidation, departmentNameValidation,\r\n    salutationValidation, nameValidation\r\n} from '../tools/inputValidations';\r\n\r\nexport class EditMeInfo extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            nick: { widget: 'text', label: '别名', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n        }\r\n    }\r\n    private data: any;\r\n\r\n    private webUserData: any;\r\n\r\n    private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        makeObservable<EditMeInfo, \"data\" | \"webUserData\" | \"webUserContactData\">(this, {\r\n            data: observable,\r\n            webUserData: observable,\r\n            webUserContactData: observable\r\n        });\r\n\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone\r\n            , mobile, email, fax, zipCode, address, addressString } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName,\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            address: address,\r\n            addressString: addressString,\r\n            zipCode: zipCode,\r\n        }\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        (nav.user as any)[name] = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        let { schema, uiSchema, data, onItemChanged, webUserData, onWebUserChanged, webUserContactData, onWebUserContactChanged, controller } = this;\r\n        return <Page header=\"个人信息\">\r\n            <Edit schema={schema} uiSchema={uiSchema}\r\n                data={data}\r\n                onItemChanged={onItemChanged} />\r\n            <Edit schema={webUserSchema} uiSchema={webUserUiSchema}\r\n                data={webUserData}\r\n                onItemChanged={onWebUserChanged} />\r\n            <Edit schema={webUserContactSchema} uiSchema={webUserContactUiSchema(controller.pickAddress)}\r\n                data={webUserContactData}\r\n                onItemChanged={onWebUserContactChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport const webUserSchema: ItemSchema[] = [\r\n    { name: 'firstName', type: 'string', required: true } as StringSchema,\r\n    { name: 'gender', type: 'string' } as StringSchema,\r\n    { name: 'salutation', type: 'string' } as StringSchema,\r\n    { name: 'organizationName', type: 'string', required: true } as StringSchema,\r\n    { name: 'departmentName', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport const webUserUiSchema: UiSchema = {\r\n    items: {\r\n        firstName: {\r\n            widget: 'text', label: '真实姓名',\r\n            placeholder: '真实姓名',\r\n            rules: nameValidation\r\n        } as UiTextItem,\r\n        gender: { widget: 'radio', label: '性别', list: [{ value: '1', title: '男' }, { value: '0', title: '女' }] } as UiRadio,\r\n        salutation: { widget: 'text', label: '称谓', rules: salutationValidation } as UiTextItem,\r\n        organizationName: { widget: 'text', label: '单位名称', placeholder: '单位名称', rules: organizationNameValidation } as UiTextItem,\r\n        departmentName: { widget: 'text', label: '部门名称', placeholder: '部门名称', rules: departmentNameValidation } as UiTextItem,\r\n    }\r\n}\r\n\r\n// 个人联系方式信息\r\nexport const webUserContactSchema: ItemSchema[] = [\r\n    { name: 'telephone', type: 'string' } as StringSchema,\r\n    { name: 'mobile', type: 'string', required: true } as StringSchema,\r\n    { name: 'email', type: 'string' } as StringSchema,\r\n    { name: 'fax', type: 'string', required: false } as StringSchema,\r\n    { name: 'address', type: 'id', required: false } as IdSchema,\r\n    { name: 'addressString', type: 'string', required: false } as StringSchema,\r\n    { name: 'zipCode', type: 'string', required: false } as StringSchema,\r\n];\r\n\r\nexport function webUserContactUiSchema(pickAddress: any) {\r\n    return {\r\n        items: {\r\n            telephone: { widget: 'text', label: '固定电话', placeholder: '固定电话', rules: telephoneValidation } as UiTextItem,\r\n            mobile: { widget: 'text', label: '手机号', placeholder: '手机号', rules: mobileValidation } as UiTextItem,\r\n            email: { widget: 'text', label: 'Email', rules: emailValidation, placeholder: 'Email' } as UiTextItem,\r\n            fax: { widget: 'text', label: '传真', placeholder: '传真', rules: faxValidation } as UiTextItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区', placeholder: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    if (!address) return <small className=\"text-muted\">(无)</small>;\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <>\r\n                            {country !== undefined && country.id !== undefined && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province !== undefined && province.id !== undefined && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city !== undefined && city.id !== undefined && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county !== undefined && county.id !== undefined && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', placeholder: '详细地址', rules: addressDetailValidation } as UiTextItem,\r\n            zipCode: { widget: 'text', label: '邮编', placeholder: '邮编', rules: zipCodeValidation } as UiTextItem,\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { ItemSchema, Page, VPage, FA, Form, Context } from \"tonva-react\";\r\nimport { CMe } from './CMe';\r\nimport { webUserSchema, webUserUiSchema, webUserContactSchema, webUserContactUiSchema } from './EditMeInfo';\r\nimport { observer } from 'mobx-react';\r\nimport { GLOABLE } from 'cartenv';\r\n\r\ninterface Options {\r\n    onlyRequired: boolean;\r\n    caption: string;\r\n    note: string;\r\n    actionButton: {\r\n        value: string;\r\n        action: any;\r\n    }\r\n}\r\n\r\nexport class EditMeInfoFirstOrder extends VPage<CMe>{\r\n    private options: Options;\r\n    tips: JSX.Element;\r\n    private form: Form;\r\n\r\n    async open(param: any) {\r\n        // this.onlyRequired = param;\r\n        this.options = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private webUserData: any;\r\n    private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        \r\n        makeObservable<EditMeInfoFirstOrder, \"webUserData\" | \"webUserContactData\">(this, {\r\n            tips: observable,\r\n            webUserData: observable,\r\n            webUserContactData: observable\r\n        });\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone\r\n            , mobile, email, fax, address, addressString, zipCode } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            address: address,\r\n            addressString: addressString,\r\n            zipCode: zipCode\r\n        }\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { data } = context.form;\r\n        _.merge(this.webUserData, data);\r\n        _.merge(this.webUserContactData, data);\r\n        await this.controller.changeWebUser(this.webUserData);\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n\r\n        let { currentUser } = this.controller.cApp;\r\n        if (currentUser.allowOrdering) {\r\n            this.closePage();\r\n            let webUserContacts = await currentUser.getContacts();\r\n            if (webUserContacts === undefined || webUserContacts.length === 0) {\r\n                await currentUser.addContactFromAccount();\r\n            }\r\n            await this.options.actionButton.action();\r\n        } else {\r\n            this.tips = <>以上带有 <span className='text-danger'>*</span> 的内容均须填写！</>;\r\n            setTimeout(() => {\r\n                this.tips = undefined;\r\n            }, GLOABLE.TIPDISPLAYTIME);\r\n        }\r\n    }\r\n\r\n\r\n    private onCompleted = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n\r\n        let { onlyRequired, caption, note, actionButton } = this.options;\r\n        let schemaFilter = (itemSchema: ItemSchema): boolean => {\r\n            return (onlyRequired === true && itemSchema.required === true)\r\n                || onlyRequired === undefined\r\n                || onlyRequired === false\r\n        }\r\n\r\n        let schemaArr = [];\r\n        for (let item of webUserSchema) {\r\n            if (item.required === true) schemaArr.push(item);\r\n        }\r\n        for (let item of webUserContactSchema) {\r\n            if (item.required === true) schemaArr.push(item);\r\n        }\r\n        if (onlyRequired !== true) {\r\n            for (let item of webUserSchema) {\r\n                if (item.required !== true) schemaArr.push(item);\r\n            }\r\n            for (let item of webUserContactSchema) {\r\n                if (item.required !== true) schemaArr.push(item);\r\n            }\r\n        }\r\n        let uiSchema = {};\r\n        _.merge(uiSchema, webUserUiSchema, webUserContactUiSchema(this.controller.pickAddress));\r\n\r\n        let data = _.merge(this.webUserData, this.webUserContactData);\r\n        let { value } = actionButton;\r\n        return <Page header={caption}>\r\n            <div className=\"alert alert-light my-3 py-4\" role=\"alert\">\r\n                <FA name=\"smile-o\" className=\"text-warning mr-4 my-1\" size=\"2x\" />\r\n                {note}\r\n            </div>\r\n\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schemaArr.filter(schemaFilter)}\r\n                    uiSchema={uiSchema}\r\n                    formData={data}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n\r\n            <div className=\"p-3 bg-white\">\r\n                {tipsUI}\r\n                <button type=\"button\" className=\"btn btn-primary w-100\" onClick={() => this.onCompleted()}>{value}</button>\r\n            </div>\r\n        </Page >;\r\n    });\r\n}\r\n/*\r\n<Edit schema={schemaArr.filter(schemaFilter)} uiSchema={uiSchema}\r\n    data={data}\r\n    onItemChanged={this.onMergeDataChanged} />\r\n\r\n    private onMergeDataChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n*/","import * as React from 'react';\r\nimport { VPage, Page, BoxId, List, Scroller } from \"tonva-react\";\r\nimport { CFavorites } from './CFavorites';\r\n\r\nexport class VFavorites extends VPage<CFavorites> {\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n    private onScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        let { productsFavorites } = this.controller;\r\n        productsFavorites.more();\r\n    }\r\n    private onProductClick = async (product: BoxId) => {\r\n        let { cProduct } = this.controller.cApp;\r\n        await cProduct.showProductDetail(product.id);\r\n    }\r\n\r\n    private renderProduct = (p: any) => {\r\n        // console.log(p);\r\n        return this.controller.cApp.cProduct.renderProduct(p);\r\n    }\r\n\r\n    private page = (param: any) => {\r\n        let { productsFavorites, cApp } = this.controller;\r\n        let { cProduct } = cApp;\r\n        let none = <div className=\"p-3 text-warning mt-4 d-flex justify-content-center\">『 无任何收藏产品 』</div>\r\n        return <Page header=\"商品收藏\" onScrollBottom={this.onScrollBottom}>\r\n            <List before={''} none={none} items={productsFavorites} item={{ render: this.renderProduct, onClick: this.onProductClick }} />\r\n        </Page>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, FA, BoxId, nav } from \"tonva-react\";\r\nimport { CProduct } from '../product/CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { makeObservable, observable } from 'mobx';\r\n\r\nexport class VProductFavorateLabel extends View<CProduct> {\r\n\r\n    isProductFarirates: boolean = false;\r\n    constructor(c: CProduct) {\r\n        super(c);\r\n        makeObservable<VProductFavorateLabel, \"isProductFarirates\">(this, {\r\n            isProductFarirates: observable,\r\n        });\r\n    }\r\n    \r\n    private favoriteOrCancel = async (product: number) => {\r\n        let { cApp } = this.controller;\r\n        let { cFavorites, currentUser, cMe } = cApp;\r\n        const { user } = nav;\r\n        if (user !== undefined) {\r\n            if (this.isProductFarirates)\r\n                await cFavorites.delProductFavorites(product);\r\n            else\r\n                await cFavorites.addProductFavorites(product);\r\n            await this.initInventoryAllocation(product);\r\n        } else {\r\n\r\n            cMe.showLogin();\r\n        }\r\n    }\r\n\r\n    private isMyFarirates = async (id: number) => {\r\n        let { cFavorites } = this.controller.cApp;\r\n        // let customerFavoritesProducts = await cFavorites.getMyFavorites();\r\n        // return customerFavoritesProducts.some((el: any) => el.product.id === id);\r\n        return await cFavorites.getProductIsFavorites(id);\r\n    }\r\n\r\n    private initInventoryAllocation = async (id: number) => {\r\n        let { currentUser } = this.controller.cApp;\r\n        if (currentUser)\r\n            this.isProductFarirates = await this.isMyFarirates(id);\r\n    }\r\n\r\n    render(param: BoxId): JSX.Element {\r\n        return <this.content productId={param} />;\r\n    }\r\n\r\n    private content = observer((param: any): any => {\r\n\r\n        let favirateLabelUI;\r\n        let { productId } = param;\r\n        let { currentUser } = this.controller.cApp;\r\n        if (currentUser)\r\n            this.initInventoryAllocation(productId);\r\n\r\n        favirateLabelUI = <div className=\"d-flex justify-content-end\">\r\n            <small onClick={(e) => { e.stopPropagation(); this.favoriteOrCancel(productId) }} style={{ zIndex: 9 }}>\r\n                <FA className=\"mr-3 text-danger\" name={`${this.isProductFarirates ? \"heart\" : 'heart-o'}`} size=\"lg\" />\r\n            </small>\r\n        </div>\r\n        return favirateLabelUI;\r\n    });\r\n}\r\n","import { VFavorites } from './VFavorites';\r\nimport { CUqBase } from '../CBase';\r\nimport { QueryPager, BoxId } from \"tonva-react\";\r\nimport moment from 'moment';\r\nimport { VProductFavorateLabel } from './VProductFavorateLabel';\r\n\r\nexport class CFavorites extends CUqBase {\r\n    productsFavorites: QueryPager<any>;\r\n    myFavorites: any[] = [];\r\n    protected async internalStart() {\r\n        await this.searchByFavorites();\r\n        this.openVPage(VFavorites);\r\n    }\r\n\r\n    async searchByFavorites() {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        this.productsFavorites = new QueryPager<any>(this.uqs.webuser.getMyFavirates, 10, 10);\r\n        await this.productsFavorites.first({ webUser: currentUser, salesRegion: currentSalesRegion });\r\n    }\r\n\r\n    /*\r\n    async getMyFavorites() {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        let myFavorites = await this.uqs.webuser.myFavorites.query({ webUser: currentUser, salesRegion: currentSalesRegion });\r\n        return myFavorites.ret;\r\n    }\r\n    */\r\n\r\n    async getProductIsFavorites(product: number) {\r\n        let { currentUser } = this.cApp;\r\n        let myFavorites = await this.uqs.webuser.myFavorites.obj({ webUser: currentUser, product: product });\r\n        return myFavorites !== undefined;\r\n    }\r\n\r\n    async addProductFavorites(productId: number) {\r\n        let { currentUser } = this.cApp;\r\n        let createDate = moment().format('YYYY-MM-DD HH:mm:ss');\r\n        await this.uqs.webuser.myFavorites.add({ webUser: currentUser, product: productId, arr1: [{ pack: 0, date: createDate }] });\r\n    }\r\n\r\n    async delProductFavorites(productId: number) {\r\n        let { currentUser } = this.cApp;\r\n        await this.uqs.webuser.myFavorites.del({ webUser: currentUser, product: productId, arr1: [{ pack: 0 }] });\r\n    }\r\n\r\n    renderFavoritesLabel = (productid: number) => {\r\n        let { currentUser } = this.cApp;\r\n        // let myFavorite = await this.uqs.webuser.myFavorites.obj({ webUser: currentUser, product: productid });\r\n        return this.renderView(VProductFavorateLabel, productid)\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav, LMR, Image, FA } from \"tonva-react\";\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\n\r\nexport class VLoginState extends View<CMe> {\r\n\r\n    render() {\r\n        let { user } = nav;\r\n        if (!user) {\r\n            return <div className=\"d-flex align-items-center justify-content-end small text-muted\">\r\n                <a className=\"px-2\" href=\"./shop?type=signUp\">注册</a>\r\n                <a className=\"px-2\" href=\"./shop?type=login\">登录</a>\r\n                {this.controller.renderCarLabel()}\r\n            </div>\r\n        }\r\n        let { id, name, nick, icon } = user;\r\n        return <div className=\"d-flex align-items-center justify-content-end\">\r\n            <div>\r\n                {<Image className=\"w-3c h-3c mr-3\" src={icon} />}\r\n            </div>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-muted\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </div >;\r\n    }\r\n}\r\n\r\nexport function userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav, LMR, Image, FA } from \"tonva-react\";\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\n\r\nexport class VLoginState_Web extends View<CMe> {\r\n\r\n    render() {\r\n        let { user } = nav;\r\n        if (!user) {\r\n            /*\r\n            return <>\r\n                <a className=\"nav-link header-login\">\r\n                    注册/登录\r\n                </a>\r\n                {this.controller.renderCarLabel_Web()}\r\n            </>\r\n            */\r\n            return <div className=\"d-flex align-items-center justify-content-end small text-muted\">\r\n                <a className=\"px-2\" href=\"./shop?type=signUp\" target=\"_self\">注册</a>\r\n                <a className=\"px-2\" href=\"./shop?type=login\" target=\"_self\">登录</a>\r\n                {this.controller.renderCarLabel_Web()}\r\n            </div>\r\n        }\r\n        let { id, name, nick, icon } = user;\r\n        return <div className=\"d-flex align-items-center justify-content-end small text-muted\">\r\n            <a className=\"px-2\" href=\"./shop?type=me\" target=\"_self\">{name}</a>\r\n            <a className=\"px-2\" href=\"./shop?type=loginOut\" target=\"_self\">退出</a>\r\n            {this.controller.renderCarLabel_Web()}\r\n        </div>;\r\n    }\r\n}\r\n\r\n","import * as React from 'react';\r\nimport { Page, VPage } from \"tonva-react\";\r\nimport marked from 'marked';\r\nimport { CMe } from './CMe';\r\nimport { makeObservable, observable } from 'mobx';\r\nconst legalC: any = `<div class=\"container\">\r\n    <p class=\"mt-lg-1\" style=\"line-height:1.8em; \"> 北京百灵威科技有限公司（以下简称“本公司”）提供本网站服务。用户在登录本网站后，请仔细阅读本协议，如您不 同意有关条款或本网站对其进行的修改，请停止使用本网站提供的服务。您一旦使用本网站提供的内容，包括但不限于浏览网站信息、下载网站内容、使用网站提供 的第三方网站链接等，即视为您已了解并完全同意本协议中的所有条款。</p>\r\n\t<h6><b>一、网站使用</b></h6>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \"> 除非相关法律法规许可或征得本公司同意，本网站的信息及其任何组成部分不得被重新编辑、复制、仿制、抄袭，或为任何未经本公司允许的商业目的所使用。如果本公司确定客户行为违法或有损本网站和本公司的合法利益，则本公司保留包括但不限于拒绝提供服务、冻结或删除会员帐户、采取相关法律措施的权利。</p>\r\n\t<h6><b>二、链接</b></h6>\r\n\t<h6>（一）本网站对第三方网站的链接</h6>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \"> 必要时，本网站将提供对第三方经营的其他网站的超级链接或指引服务，或者通过帧联及其他方式在本网站上提供第三方网站的内容，此“内容”包括但不限于本网站上包含或可获得的任何材料、文件、信息、图片、图表、标识、设计以及本网站上提供的任何其他信息。</p>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \">对第三方网站的链接仅为供您方便之用。本公司保留在任何时间终止对第三方网站链接的权利。所链接网站、网站上的内容及其描述或提供的产品与服务均不受本公司的控制，因此本公司不对任何该等网站及其上的内容、产品或服务（包括对第三方网站的进一步链接）负责。您一旦决定登录或使用任何所链接的网站，应当注意可能会受到适用于该网站的任何条款和条件的限制，同时自行采取预防措施以便在登录或使用该网站时避免病毒或其他破坏性因素。对于您登录或使用所链接网站所产生的任何损失，由您自行承担。</p>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \"> 本公司对于任何所链接网站或其上所显示的内容、描述或提供的任何产品或服务不作任何保证或陈述，并且不对其作出任何认可、建议、批准或介绍。除非本公司另行明确规定或同意，本公司将不是您与任何被链接网站的提供者之间达成的任何协议的当事方。本公司不对因任何被链接网站上提供的内容、产品、服务等存在的任 何中断、延迟、漏洞或疏忽所导致的任何损害或损失（无论该损害或损失是直接、间接、特别或是偶然的）负责。本网站上出现对第三方网站的链接并不表示本公司 或本网站与其相关联，或已获得合法授权使用被链接网站中显示的或可通过其链接到的任何商标、商号、标识或著作权。</p>\r\n\t<h6>（二）第三方网站对本网站的链接</h6>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \"> 第三方网站对本网站的链接，并不必然表示本公司对第三方作出了某种认可、授权、赞助，或表明其属于本公司的关联企业、合资企业、合作企业或业务伙伴。在多数情况下，本公司并未意识到第三方已提供对本网站的链接。</p>\r\n\t<h6><b>三、知识产权保护</b></h6>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \"> 本网站所载述的域名、商标、商号、信息、文字、图形、图像、声音、链接、软件及所有其它内容均由本公司、其内容提供商及第三方许可人提供。上述内容的知识产权依具体情况分别为本公司、其内容提供商及第三方许可人所拥有。除法律另有规定或双方另有约定外，未经本公司和/或其他权利人事先许可，任何人不得以任何形式通过任何方式（包括但不限于电子、机械复印或录制等方式）复制、展示、修改、转让、分发、重新发布、下载、张贴或传输本网站的内容。未经本公司或商标权人事先许可，任何单位及个人不得以任何方式或理由对本网站的商标、商号或标识的任何部分进行使用、复制、修改、传播或与其它产品捆绑使用。</p>\r\n\t<h6><b>四、免责声明</b></h6>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \"> 本网站所提供的信息，具备一定的准确性、有效性和完整性，但因数据庞大，且受数据来源的不确定性影响，不能保证绝对的准确性、有效性和完整性。本公司及其员工一概毋须以任何方式就任何信息传递或传送的失误、不准确或错误对用户或任何其他人士负任何直接或间接的责任。在法律允许的范围内，本公司不承担用户或任何人士就使用或未能使用本网站所提供的信息或任何链接或项目所引致的任何直接、间接、附带、从属、特殊、惩罚性的损害赔偿（包括但不限于收益、预期利润的损失或失去的业务、未实现预期的节减）。本公司保留自行决定更正本网站中任何部分的任何错误或遗漏的权利。本公司可以在任何时间对本网站、本网站上描述的内容和产品、项目、服务或价格作出任何其他修改而无需通知。</p>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \"> 本网站、本网站上的信息和内容以及在本网站上可获得的软件和材料均“依原样”提供而不包含明示或暗示的任何性质的陈述或保证。在法律许可的最大限度内，本公司声明不作出任何明示或暗示的陈述和保证，包括但不限于有关安全性、准确性、完整性、适销性、无侵权、适合任何特别目的或没有计算机病毒的保证。您应为使用本网站承担全部责任和风险。</p>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \"> 如发生以下情况，本网站不对用户的直接或间接损失承担法律责任：</p>\r\n\t<ol class=\"px-2 mx-2\" style=\"line-height:1.8em; \"> \r\n\t\t<li>营业中断。</li>\r\n\t\t<li>无法登录本网站，或登录本网站延迟或中断。</li>\r\n\t\t<li>数据无法传送、错误传送、毁损、灭失或其他修改。</li>\r\n\t\t<li>因处理本网站上对其它网站的链接或本网站上存在对其它网站的链接所遭受的任何种类的损失或损害。</li>\r\n\t\t<li>就客户使用本网站（包括链接到第三方网站或自第三方网站链接）而可能产生的计算机病毒、系统失灵或功能紊乱。</li>\r\n\t\t<li>本《隐私政策》第四条中规定的六种情形所引起的用户个人资料的披露或泄露。</li>\r\n\t\t<li>因不可抗力或本公司无法合理控制的其他原因所导致的用户损失。</li>\r\n\t</ol>\r\n\t<h6><b>五、服务变更、中断或终止</b></h6>\r\n\t<ol class=\"px-2 mx-2\" style=\"line-height:1.8em; \"> \r\n\t\t<li>如因系统维护或升级的需要而需暂停网络服务，百灵威将尽可能事先进行通告。</li>\r\n\t\t<li>如发生下列任何一种情形，百灵威有权随时中断或终止向用户提供本协议项下的网络服务而无需通知用户：（a）用户提供的资料不真实；（b）用户违反本协议中规定的使用规则。</li>\r\n\t\t<li>除前款所述情形外，百灵威同时保留在不事先通知用户的情况下随时中断或终止部分或全部网络服务的权利，对于所有服务的中断或终止而造成的任何损失，百灵威无需对用户或任何第三方承担任何责任。</li>\r\n\t\t<li>用户若反对任何服务条款的建议或对后来的条款修改有异议，或对网络服务不满，用户只有以下追索权：（a）不再使用百灵威提供的网络服务。（b）通告百灵威停止使用百灵威的网络服务，得到百灵威确认后，用户使用网络服务的权利马上中止。从即时起，百灵威不再对用户承担任何义务。</li>\r\n\t</ol>\r\n\t<h6><b>六、隐私</b></h6>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \"> 百灵威的<a class=\"text-primary\" href=\"https://www.jkchemical.com/privacy-cn\"><u>隐私政策</u></a>适用于本网站的使用。使用本网站，即表示您确认并同意百灵威可以根据此隐私政策使用此类信息。</p>\r\n\t<h6><b>七、条款修改</b></h6>\r\n\t<p class=\"mt-lg-1\" style=\"line-height:1.8em; \">本公司保留在任何时间自行修改、增删本协议中任何内容的权利。您每次登录或使用本网站时均视为同意受当时有效的条款的制约。因此，您每次登录或使用本网站时应查看本协议的日期，并检查与上一版本的修改之处。</p>\r\n</div>`;\r\nexport class VLegal extends VPage<CMe>{\r\n\r\n\tprivate legal: any;\r\n\r\n\tconstructor(cMe: CMe) {\r\n        super(cMe);\r\n\r\n        makeObservable<VLegal, \"legal\">(this, {\r\n            legal: observable\r\n        });\r\n\t}\r\n\r\n    async open(param?: any) {\r\n\r\n        this.legal = legalC;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"百灵威购物用户协议\">\r\n            <div className='bg-white p-3'>\r\n                <div className=\"mx-auto text-center\" style={{ width: 300 }}>\r\n                    <h4>用户协议</h4>\r\n                    <p>VS.20210225</p>\r\n                </div>\r\n                <div className=\"mt-4\" dangerouslySetInnerHTML={{ __html: marked(this.legal) }} />\r\n            </div>\r\n        </Page>;\r\n    }\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { Context, nav, VPage, User } from \"tonva-react\";\r\nimport { CUqBase } from '../CBase';\r\nimport { VMe } from './VMe';\r\nimport { CSelectShippingContact } from '../customer/CSelectContact';\r\nimport { EditMeInfoFirstOrder } from './EditMeInfoFirstOrder';\r\nimport { CInvoiceInfo } from '../customer/CInvoiceInfo';\r\nimport { CAddress } from '../customer/CAddress';\r\nimport { CFavorites } from '../customer/CFavorites';\r\nimport { VLoginState } from './VLoginState';\r\nimport { VLoginState_Web } from './VLoginState_Web';\r\nimport { VLegal } from './legal';\r\nimport { EditMeInfo } from './EditMeInfo';\r\n\r\nexport class CMe extends CUqBase {\r\n    //    cApp: CApp;\r\n    protected async internalStart(param?: any) {\r\n    }\r\n\r\n    async changeWebUser(webUser: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUser(webUser);\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUserContact(webUserContact);\r\n    }\r\n\r\n    tab = () => this.renderView(VMe);\r\n    tabPage: VMe = new VMe(this);\r\n\r\n    openMyOrders = async (state: string) => {\r\n        let { cOrder } = this.cApp;\r\n        await cOrder.openMyOrders(state);\r\n    }\r\n\r\n    openContactList = async () => {\r\n        let contactList = this.newC(CSelectShippingContact); // new CSelectShippingContact(this.cApp, undefined, false);\r\n        await contactList.start(false);\r\n    }\r\n\r\n    openInvoice = async () => {\r\n        let cInvoiceInfo = this.newC(CInvoiceInfo); // new CInvoiceInfo(this.cApp, undefined, false);\r\n        let { currentUser } = this.cApp;\r\n        let defaultSetting = await currentUser.getSetting();\r\n\r\n        let origInvoice = _.pick(defaultSetting, ['invoiceType', 'invoiceInfo']);\r\n        cInvoiceInfo.start(origInvoice);\r\n    }\r\n\r\n    openMyPoint = async () => {\r\n        /* let cPointProduct = this.newC(CPointProduct);// new CSelectShippingContact(this.cApp, undefined, false);\r\n        await cPointProduct.start(); */\r\n        await this.cApp.cPointProduct.openMyPoint();\r\n    }\r\n    /**\r\n     * 卡券管理\r\n     */\r\n    openCouponManage = async () => {\r\n        let { cCoupon } = this.cApp;\r\n        await cCoupon.openMyCouponManage();\r\n        // let cCouponManage = this.newC(CCouponManage);\r\n        // await cCouponManage.start();\r\n    }\r\n\r\n    /**\r\n     * 商品收藏\r\n     */\r\n    openFavorites = async () => {\r\n        let cMyFavorites = this.newC(CFavorites);\r\n        await cMyFavorites.start();\r\n    }\r\n\r\n    toPersonalAccountInfo = async (fn: Function, note: JSX.Element) => {\r\n        await this.openMeInfoFirstOrder({\r\n            onlyRequired: false,\r\n            caption: \"请补充账户信息\",\r\n            note: note,\r\n            actionButton: {\r\n                value: \"下一步\",\r\n                action: fn\r\n            }\r\n        });\r\n    }\r\n\r\n    openMeInfoFirstOrder = async (options?: any) => {\r\n        await this.openVPage(EditMeInfoFirstOrder, options);\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = this.newC(CAddress); // new CAddress(this.cApp, undefined);\r\n        return await cAddress.call<number>();\r\n    }\r\n\r\n    openPrivacy = () => {\r\n        // this.openVPage(Privacy);\r\n        nav.showPrivacyPage();\r\n    }\r\n\r\n    openEditMeInfo = () => {\r\n        this.openVPage(EditMeInfo);\r\n    }\r\n\r\n    openLegal = async () => {\r\n        this.openVPage(VLegal);\r\n    }\r\n\r\n    getCommonText = async (textId: number) => {\r\n        return await this.uqs.order.CommonText.load(textId);\r\n    }\r\n\r\n    renderLoginState() {\r\n        return this.renderView(VLoginState);\r\n    }\r\n\r\n    showLogin = (callback?: (user: User) => Promise<void>) => {\r\n        nav.showLogin(callback, true);\r\n    }\r\n\r\n    showLoginOut = (callback?: () => Promise<void>) => {\r\n        nav.showLogout(callback);\r\n    }\r\n\r\n    renderCarLabel = () => {\r\n        let { cCart } = this.cApp;\r\n        return cCart.renderCartLabel();\r\n    }\r\n\r\n    renderLoginState_Web() {\r\n        return this.renderView(VLoginState_Web);\r\n    }\r\n\r\n    renderCarLabel_Web() {\r\n        let { cCart } = this.cApp;\r\n        return cCart.renderCartLabel_Web();\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, TabCaptionComponent, Page, Tabs } from \"tonva-react\";\r\nimport { CApp } from '../CApp';\r\n// import { Switch, Route } from 'react-router-dom';\r\nimport { CUqBase } from 'CBase';\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\n\r\nexport class VMain extends VPage<CApp> {\r\n    async open(param?: any) {\r\n        this.openPage(this.render,{tabName:param});\r\n    }\r\n\r\n    render = (param?: any): JSX.Element => {\r\n        let { tabName } = param;\r\n        if (!tabName) tabName = 'home';\r\n        let { cHome, cCart, cMe, cart,cPointProduct } = this.controller;\r\n        let faceTabs = [\r\n            { name: 'home', label: '首页', icon: 'home', page: cHome.tab, notify: undefined/*store.homeCount*/ },\r\n            // { name: 'member', label: '会员', icon: 'vcard', content: cMember.tab },\r\n            {\r\n                name: 'cart',\r\n                label: '购物车',\r\n                icon: 'shopping-cart',\r\n                //content: cCart.tab, \r\n                page: cCart.tabPage,\r\n                notify: cart.count\r\n            },\r\n            {\r\n                name: 'pointMarket',\r\n                label: '积分商城',\r\n                icon: 'gift',\r\n                page: cPointProduct.tabPage,\r\n            },\r\n            {\r\n                name: 'me',\r\n                label: '我的',\r\n                icon: 'user',\r\n                //content: cMe.tab \r\n                page: cMe.tabPage\r\n            }\r\n        ].map(v => {\r\n            let { name, label, icon, page, notify } = v;\r\n            return {\r\n                name: name,\r\n                caption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n                page: page,\r\n                notify: notify,\r\n                isSelected: tabName === name ? true : false\r\n            }\r\n        });\r\n\r\n        return <Page tabsProps={{ tabs: faceTabs }} />\r\n    }\r\n}\r\n\r\n/* export class Main extends VPage<CApp> {\r\n    async open(param?: any) {\r\n        this.openPage(this.render, { param });\r\n    }\r\n\r\n    render = (param?: any): JSX.Element => {\r\n        return <Switch>\r\n            <Route path='/search1/:key' render={() => {\r\n                return <div>cProduct1.start</div>\r\n            }} />\r\n            <Route path='/search/:key' render={() => {\r\n                // this.controller.cProduct.start(param.param);\r\n                this.controller.cProduct.searchByKey(param.param);\r\n                return this.controller.cProduct.renderProductList2(param.param);\r\n            }} />\r\n            <Route path='/' render={() => {\r\n                this.openVPage(VMain);\r\n                return <></>\r\n            }} />\r\n        </Switch>\r\n    }\r\n} */","import * as React from 'react';\r\nimport { CCoupon, COUPONBASE } from './CCoupon';\r\nimport { View, FA, EasyDate, LMR, tv } from \"tonva-react\";\r\nimport { VIPCard, IsInActivePeriod, activityTime } from './Coupon';\r\nimport moment from 'moment';\r\n\r\nfunction getTips(result: number, types: string, code: string) {\r\n    let invalidTip = `${COUPONBASE[types]['name']}【${code}】无效，请与您的专属销售人员联系。`;\r\n    switch (result) {\r\n        case 0:\r\n            invalidTip = `${COUPONBASE[types]['name']}【${code}】不存在，请与您的专属销售人员联系。`;\r\n            break;\r\n        case 2:\r\n            invalidTip = `该${COUPONBASE[types]['name']}【${code}】已失效，请与您的专属销售人员联系。`;\r\n            break;\r\n        case 4:\r\n            invalidTip = `该${COUPONBASE[types]['name']}【${code}】已经使用过，不可重复领用。`;\r\n            break;\r\n        case 6:\r\n            invalidTip = `您不能领用自己发出的${COUPONBASE[types]['name']}【${code}】。`;\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    return invalidTip;\r\n}\r\n\r\nexport class VCoupon extends View<CCoupon> {\r\n\r\n    protected coupon: any;\r\n    protected renderRight = (): JSX.Element => {\r\n        return null;\r\n    }\r\n\r\n    private showDiscountSetting = (vipCardId: VIPCard, event: React.MouseEvent) => {\r\n        event.stopPropagation();\r\n        this.controller.showDiscountSetting(vipCardId);\r\n    }\r\n\r\n    protected renderCardDescription = (): JSX.Element => {\r\n        let { discount } = this.coupon;\r\n        let cardDescription: any;\r\n        if (typeof discount === 'number') {\r\n            if (discount !== 0) {\r\n                let discountShow: any;\r\n                discountShow = (1 - discount) * 10;\r\n                cardDescription = <div className=\"mr-3 font-weight-bold text-danger\"><big>{discountShow === 10 ? '无折扣' : <>{discountShow.toFixed(1)} 折</>}</big></div>\r\n            }\r\n        }\r\n        return cardDescription;\r\n    }\r\n\r\n    protected renderActivityDescription = (): JSX.Element => {\r\n        return null;\r\n    }\r\n\r\n    protected renderCardReveal = (param: any): JSX.Element => {\r\n        let { isOpenMyCouponManage } = this.controller;\r\n        let { result, types, code, validitydate, useddate, expireddate } = this.coupon;\r\n        let CardReveal: any;\r\n        if (!isOpenMyCouponManage) {\r\n            CardReveal = <div className=\"alert alert-primary my-1\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {getTips(result, types, code)}\r\n            </div>\r\n        } else {\r\n            let showDate = validitydate !== undefined ? validitydate : (useddate !== undefined ? useddate : expireddate);\r\n            let newDate = getEasyDate(showDate);\r\n            let content = <div className=\"float-right pr-2\">\r\n                <div className=\"pb-1\">\r\n                    <FA name='th-large' className='mr-1 text-secondary' />\r\n                    <small className=\"ml-3\">{useddate !== undefined ? '使用日期' : '有效期'}: {newDate}</small>\r\n                    {/* <small className=\"ml-3\">{useddate !== undefined ? '使用日期' : '有效期'}: <EasyDate date={showDate} /></small> */}\r\n                </div>\r\n            </div>;\r\n            let left = <div>\r\n                <span className=\"text-body\"><small>{COUPONBASE[types]['name']}</small></span>\r\n            </div>;\r\n            CardReveal = <div className=\"py-3 pl-3 pr-2 mb-1 alert\" style={{ backgroundColor: '#e8eaeb', color: \"text-secondary\" }}>\r\n                <LMR left={left}>\r\n                    {content}\r\n                </LMR>\r\n            </div>\r\n        }\r\n        return CardReveal;\r\n    }\r\n\r\n    protected getCodeShow = (code: number) => {\r\n        let codeShow = String(code);\r\n        let p1 = codeShow.substr(0, 4);\r\n        let p2 = codeShow.substr(4);\r\n        codeShow = p1 + ' ' + p2;\r\n        return codeShow;\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        this.coupon = param\r\n        let { result, code, discount, validitydate, isValid, types } = param;\r\n\r\n        let couponUi;\r\n        if (result !== 1 || !isValid) {\r\n            // this.controller.cApp.currentCouponCode = undefined;\r\n            // couponUi = <div className=\"alert alert-primary my-1\" role=\"alert\">\r\n            //     <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n            //     {getTips(result, types, code)}\r\n            // </div>\r\n            couponUi = this.renderCardReveal(param);\r\n        } else {\r\n            // this.controller.cApp.currentCouponCode = code;\r\n            /*\r\n            let bcenter: any;\r\n            if (preferential)\r\n                bcenter = <div className=\"text-muted\"><small>优惠：<span className=\"mx-3\">￥{preferential}</span></small></div>;\r\n            */\r\n            let tipUI = null;\r\n            if (types !== 'credits') {\r\n                if (discount)\r\n                    tipUI = <small className=\"text-success\">此{COUPONBASE[types]['name']}全场通用</small>\r\n                else\r\n                    tipUI = <small className=\"text-success\" onClick={(event) => this.showDiscountSetting(this.coupon, event)}>查看适用品牌及折扣</small>\r\n            }\r\n            let newDate = getEasyDate(validitydate);\r\n\r\n            let content = <div className=\"float-right pr-2\">\r\n                <div className=\"pb-1\">\r\n                    <FA name='th-large' className='mr-1 text-warning' />{this.getCodeShow(code)}\r\n                    <small className=\"ml-3\">有效期：{newDate}</small>\r\n                </div>\r\n                <div className=\"float-right\">\r\n                    {tipUI}\r\n                </div>\r\n            </div>;\r\n\r\n            let left = <div>\r\n                <span className=\"text-muted\"><small>{COUPONBASE[types]['name']}</small></span>\r\n                {this.renderCardDescription()}\r\n            </div>;\r\n\r\n            couponUi = <div className=\"bg-white py-3 px-2 mb-1\">\r\n                <LMR left={left} right={this.renderRight()}>\r\n                    {content}\r\n                </LMR>\r\n                {this.renderActivityDescription()}\r\n            </div>\r\n        }\r\n        return couponUi;\r\n    }\r\n}\r\n\r\nexport class VVIPCard extends VCoupon {\r\n\r\n    /*\r\n    private showDiscountSetting = (vipCardId: VIPCard, event: React.MouseEvent) => {\r\n        event.stopPropagation();\r\n        this.controller.showDiscountSetting(vipCardId);\r\n    }\r\n\r\n    protected renderRight = (): JSX.Element => {\r\n        return <span className=\"ml-3 my-3\" onClick={(event) => this.showDiscountSetting(this.coupon, event)}>\r\n            <FA name=\"chevron-right\" className=\"corsor-pointer\"></FA>\r\n        </span>;\r\n    }\r\n    */\r\n}\r\n\r\nexport class VCredits extends VCoupon {\r\n\r\n\r\n    protected renderCardDescription = (): JSX.Element => {\r\n        return <div className=\"font-weight-bold text-danger\">\r\n            <big>{\r\n                IsInActivePeriod() ? '限时四倍积分' : '双倍积分'\r\n            }</big>\r\n        </div>\r\n    }\r\n\r\n    protected renderActivityDescription = (): JSX.Element => {\r\n        let { startDate, endDate } = activityTime;\r\n        return IsInActivePeriod() ? <div className=\"text-danger mt-1\">\r\n            <small className=\"text-muted\">{startDate.replace(/\\-/g, '.')} 至 {endDate.replace(/\\-/g, '.')} 内下单可获四倍积分 </small>\r\n        </div> : null;\r\n    }\r\n\r\n    /*\r\n    render(param: any): JSX.Element {\r\n        let { coupon, onClick } = param;\r\n        this.coupon = coupon;\r\n        let { result, id, code, discount, preferential, validitydate, isValid, types } = param;\r\n\r\n        let couponUi;\r\n        if (result !== 1 || !isValid) {\r\n            // this.controller.cApp.currentCreditCode = undefined;\r\n            couponUi = <div className=\"alert alert-primary my-1\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {getTips(result, types, code)}\r\n            </div>\r\n        } else {\r\n            // this.controller.cApp.currentCreditCode = code;\r\n            let content = <div onClick={() => onClick(code)}>\r\n                <div className=\"pb-1\">\r\n                    <FA name='th-large' className='mr-1 text-warning' />{this.getCodeShow(code)}\r\n                    <small className=\"ml-3\">有效期：<EasyDate date={validitydate} /></small>\r\n                </div>\r\n                <div><small className=\"text-success\">此{cardTypeName[types]}全场通用</small></div>\r\n            </div>;\r\n\r\n            let left = <div onClick={() => onClick(code)}>\r\n                <span className=\"text-muted\"><small>{cardTypeName[types]}</small></span>\r\n                {this.renderCardDescription()}\r\n            </div>;\r\n\r\n            couponUi = <div className=\"bg-white p-3 mb-1\">\r\n                <LMR left={left}>\r\n                    {content}\r\n                </LMR>\r\n            </div>\r\n        }\r\n        return couponUi;\r\n    }\r\n    */\r\n}\r\n\r\nexport class VCouponUsed extends VCoupon {\r\n    protected renderCardReveal = (param: any): JSX.Element => {\r\n        let { validitydate, types, useddate, expireddate } = param;\r\n        let couponUi;\r\n        let showDate = validitydate !== undefined ? validitydate : (useddate !== undefined ? useddate : expireddate);\r\n        let newDate = getEasyDate(showDate);\r\n        let content = <div className=\"float-right pr-2\">\r\n            <div className=\"pb-1\">\r\n                <FA name='th-large' className='mr-1 text-secondary' />\r\n                <small className=\"ml-3\">{useddate !== undefined ? '使用日期' : '有效期'}: {newDate}</small>\r\n            </div>\r\n        </div>;\r\n        let left = <div>\r\n            <span className=\"text-body\"><small>{COUPONBASE[types]['name']}</small></span>\r\n        </div>;\r\n        couponUi = <div className=\"py-3 pl-3 pr-2 mb-1 alert\" style={{ backgroundColor: '#e8eaeb', color: \"text-secondary\" }}>\r\n            <LMR left={left}>\r\n                {content}\r\n            </LMR>\r\n        </div>\r\n        return couponUi;\r\n    }\r\n}\r\n\r\nexport function getEasyDate(validitydate: any) {\r\n    let date = moment(validitydate).format('YYYY-MM-DD').split('-');\r\n    // let date = new Date(validitydate).toLocaleDateString().split('/');\r\n    let year = new Date().getFullYear().toString();\r\n    return `${date[0] === year ? '' : (date[0] + '年')}${date[1]}月${date[2]}日`;\r\n}","import * as React from 'react';\r\nimport { CCoupon, COUPONBASE } from './CCoupon';\r\nimport { VPage, Page, List, FA } from \"tonva-react\";\r\nimport { observer } from 'mobx-react';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { VCoupon, VCredits, VVIPCard } from './VVIPCard';\r\n\r\nexport class VSharedCoupon extends VPage<CCoupon> {\r\n\r\n    tipsAfterDawed: string;\r\n    private products: any[] = [];\r\n    constructor(c: CCoupon) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            tipsAfterDawed: observable\r\n        });\r\n    }\r\n\r\n    async open(param: any) {\r\n        this.products = param.products || [];\r\n        if (this.products.length === 0) {\r\n            this.tipsAfterDawed = `3秒后将跳到首页，开始您的购物之旅。`\r\n        } else {\r\n            this.tipsAfterDawed = \"您可以点击以下产品开始您的购物之旅。\"\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private drawCouponUI = observer(() => {\r\n        let { sharedCouponValidationResult } = this.controller;\r\n        if (sharedCouponValidationResult.result !== 1)\r\n            return null;\r\n        let { couponDrawed, loginWhenDrawCoupon } = this.controller;\r\n        if (couponDrawed) {\r\n            if (this.products.length === 0) {\r\n                this.countDown();\r\n            }\r\n            return React.createElement(this.showTips)\r\n        }\r\n        else {\r\n            return <button className=\"btn btn-primary w-100\"\r\n                onClick={() => loginWhenDrawCoupon(sharedCouponValidationResult)}>领取</button>\r\n        }\r\n    })\r\n\r\n    private countDown = () => {\r\n        let waitingSeconds = 3;\r\n        setInterval(() => {\r\n            this.tipsAfterDawed = `${waitingSeconds}秒后将跳到首页，开始您的购物之旅。`\r\n            if (waitingSeconds === 0) {\r\n                this.backPage();\r\n            }\r\n            waitingSeconds--;\r\n        }, 1000)\r\n    }\r\n\r\n    private showTips = observer(() => {\r\n        return <div className=\"alert alert-info w-100 text-center\">\r\n            <div className=\"pb-3\">\r\n                <span className=\"text-danger\" style={{ fontSize: \"1.4rem\" }}>领取成功</span><br />\r\n                <small className=\"text-muted\">领取的卡券可在&Prime;卡券管理&Prime;中查看</small>\r\n            </div>\r\n            <small>{this.tipsAfterDawed}</small>\r\n        </div>\r\n    })\r\n\r\n    private renderCouponBase = (sharedCouponValidationResult: any) => {\r\n        let { types, discount } = sharedCouponValidationResult;\r\n        // return <>{this.renderVm(COUPONBASE[types]['view'], sharedCouponValidationResult)}</>;\r\n        switch (types) {\r\n            case 'coupon':\r\n                if (discount)\r\n                    return <>{this.renderVm(VCoupon, sharedCouponValidationResult)}</>;\r\n                else\r\n                    return <>{this.renderVm(VVIPCard, sharedCouponValidationResult)}</>;\r\n                break;\r\n            case 'credits':\r\n                return <>{this.renderVm(VCredits, sharedCouponValidationResult)}</>;\r\n                break;\r\n            case 'vipcard':\r\n                return <>{this.renderVm(VVIPCard, sharedCouponValidationResult)}</>;\r\n                break\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private onProductClick = async (product: any) => {\r\n        await this.controller.showProductDetail(product.id);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { renderProduct, cApp, sharedCouponValidationResult } = this.controller;\r\n\r\n        let { cCart } = cApp;\r\n        let cart = cCart.renderCartLabel();\r\n        return <Page header=\"与您分享\" right={cart}>\r\n            {this.renderCouponBase(sharedCouponValidationResult)}\r\n            {React.createElement(this.drawCouponUI)}\r\n            <List items={this.products} item={{ render: renderProduct, onClick: this.onProductClick, className: \"mb-1\" }} none={null} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, List, FA, LMR } from \"tonva-react\";\r\nimport { CCoupon, COUPONBASE } from './CCoupon';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { VVIPCard, VCoupon, VCredits } from './VVIPCard';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { observer } from 'mobx-react';\r\nimport { Credits } from './Coupon';\r\n\r\nexport class VCoupleAvailable extends VPage<CCoupon> {\r\n\r\n    private couponInput: HTMLInputElement;\r\n    private vipCardForWebUser: any;\r\n    private coupons: any[];\r\n\r\n    tips: string;\r\n    constructor(c: CCoupon) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            tips: observable\r\n        });\r\n    }\r\n    \r\n    async open(param: any) {\r\n        let { vipCardForWebUser, couponsForWebUser } = param;\r\n        this.vipCardForWebUser = vipCardForWebUser;\r\n        this.coupons = couponsForWebUser.map((v: any) => v.coupon).concat(param.creditsForWebUser.map((v: any) => v.coupon));\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private applyCoupon = async () => {\r\n        let coupon = this.couponInput.value;\r\n        await this.applySelectedCoupon(coupon);\r\n    }\r\n\r\n    /**\r\n     * 应用选择的vipcard等 \r\n     */\r\n    private applySelectedCoupon = async (coupon: string) => {\r\n        this.tips = await this.controller.applySelectedCoupon(coupon);\r\n        if (this.tips)\r\n            setTimeout(() => this.tips = undefined, GLOABLE.TIPDISPLAYTIME);\r\n    }\r\n\r\n    private renderCoupon = (coupon: any) => {\r\n        let { result, code, types, discount } = coupon;\r\n        if (result === 1) {\r\n            // let content = this.renderVm(COUPONBASE[types]['view'], coupon);\r\n            let content = null;\r\n            if (types === \"coupon\")\r\n                content = discount ? this.renderVm(VCoupon, coupon) : this.renderVm(VVIPCard, coupon);\r\n            else if (types === \"credits\")\r\n                content = this.renderVm(VCredits, coupon);\r\n            return <div className=\"d-block\">\r\n                <div className=\"px-2 bg-white\" onClick={() => this.applySelectedCoupon(code)}>\r\n                    {content}\r\n                </div>\r\n            </div>\r\n        } else\r\n            return null;\r\n    }\r\n\r\n    private tipsUI = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        return tipsUI;\r\n    })\r\n\r\n    private page = () => {\r\n        let vipCardUI;\r\n        if (this.vipCardForWebUser) {\r\n            let { coupon } = this.vipCardForWebUser;\r\n            vipCardUI = <div onClick={() => this.applySelectedCoupon(coupon.code)}>{this.renderVm(VVIPCard, coupon)}</div>\r\n        }\r\n\r\n        let left = <div className=\"d-flex align-items-center mr-3\"><div className=\"align-middle\">优惠卡/券:</div></div>\r\n        let right = <button className=\"btn btn-primary w-100\" onClick={this.applyCoupon}>使用</button>\r\n\r\n        return <Page header=\"可用优惠\">\r\n            <div className=\"px-2 py-3\">\r\n                <LMR left={left} right={right}>\r\n                    <input ref={v => this.couponInput = v} type=\"number\" className=\"form-control\"></input>\r\n                </LMR>\r\n                {React.createElement(this.tipsUI)}\r\n            </div >\r\n\r\n            <div className=\"px-2 bg-white\">\r\n                {vipCardUI}\r\n            </div>\r\n            <List items={this.coupons} item={{ render: this.renderCoupon }} none={null}></List>\r\n        </Page >\r\n    }\r\n}\r\n\r\n/*\r\n\r\n            <div className=\"px-2 py-3\">\r\n                <div className=\"row pr-3 my-1\">\r\n                    <div className=\"col-4 col-sm-2 d-flex align-items-center text-muted\"><span className=\"align-middle\">优惠卡券:</span></div>\r\n                    <div className=\"col-8 col-sm-10 d-flex\">\r\n                        <input ref={v => this.couponInput = v} type=\"number\" className=\"form-control\"></input>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row my-1\">\r\n                    <div className=\"col-12\">\r\n                        <button className=\"btn btn-primary w-100\" onClick={this.applyCoupon}>使用填写的卡券</button>\r\n                    </div>\r\n                </div>\r\n                {React.createElement(this.tipsUI)}\r\n            </div>\r\n*/","import * as React from 'react';\r\nimport { VPage, Page, List, tv } from \"tonva-react\";\r\nimport { CCoupon } from './CCoupon';\r\n\r\nexport class VVIPCardDiscount extends VPage<CCoupon>{\r\n\r\n    private vipCard: any;\r\n    async open(vipCard: any) {\r\n        this.vipCard = vipCard;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderVIPCardDiscountSetting(item: any) {\r\n        let { brand, discount } = item;\r\n        return <div className=\"row\">\r\n            <div className=\"col-7\">\r\n                {tv(brand, v => v.name)}\r\n            </div>\r\n            <div className=\"col-5\">\r\n                {100 - discount * 100}%\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"折扣明细\">\r\n            <List items={this.vipCard.discountSetting} item={{ render: this.renderVIPCardDiscountSetting, className: \"px-3 py-2\" }}></List>\r\n        </Page>\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, LMR, FA, List, TabProp, TabCaptionComponent, Tabs, Scroller, QueryPager } from \"tonva-react\";\r\nimport { observer } from 'mobx-react';\r\nimport { VCoupon, VCredits, VVIPCard, VCouponUsed } from './VVIPCard';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { color } from 'order/VMyOrders';\r\nimport { CCoupon } from './CCoupon';\r\n\r\nexport class VCouponManage extends VPage<CCoupon> {\r\n\r\n    private couponInput: HTMLInputElement;\r\n    private coupons: QueryPager<any>;\r\n    private currentStatus: string;\r\n    private tabs: TabProp[];\r\n    oss: any = [\r\n        { caption: '可使用', state: 'validCardForWebUser', icon: 'free-code-camp', toolTip: '亲，您现没有可用的优惠券呦！' },\r\n        { caption: '已使用', state: 'usageRecordForWebUser', icon: 'cc-amex', toolTip: '亲，您还未使用过任何优惠券,快去使用噢！' },\r\n        { caption: '已过期', state: 'expiredForWebUser', icon: 'ravelry', toolTip: '亲，您还没已过期的优惠券！' },\r\n    ];\r\n\r\n    tips: string;\r\n\r\n    constructor(c: CCoupon) {\r\n        super(c);\r\n        makeObservable<VCouponManage, \"coupons\">(this, {\r\n            coupons: observable,\r\n            tips: observable\r\n        });\r\n    }\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private getTabs = async () => {\r\n        let { getCoupons } = this.controller;\r\n        this.tabs = this.oss.map((v: any) => {\r\n            let { caption, state, icon, toolTip } = v;\r\n            let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">{`『 ${toolTip} 』`}</div>\r\n            return {\r\n                name: caption,\r\n                caption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n                content: () => {\r\n                    return <List items={this.coupons} item={{ render: this.renderCoupon }} none={none} />\r\n                },\r\n                isSelected: this.currentStatus === state,\r\n                load: async () => {\r\n                    this.currentStatus = state;\r\n                    this.coupons = await getCoupons(this.currentStatus);\r\n                }\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 领取优惠卡\r\n     */\r\n    private receiveCoupon = async () => {\r\n        let { drawCoupon, getCouponValidationResult, applyTip } = this.controller;\r\n        let coupon = this.couponInput.value;\r\n        if (!coupon)\r\n            this.tips = \"请输入您的优惠卡/券号\";\r\n        else {\r\n            this.couponInput.value = '';\r\n\r\n            let validationResult = await getCouponValidationResult(coupon);\r\n            let { result } = validationResult;\r\n            if (result === 1) {\r\n                await drawCoupon(validationResult);\r\n                this.tips = '领取成功！';\r\n            } else {\r\n                this.tips = applyTip(result);\r\n            }\r\n        }\r\n        if (this.tips) {\r\n            setTimeout(() => this.tips = undefined, GLOABLE.TIPDISPLAYTIME);\r\n        }\r\n        // setTimeout(() => this.controller.closePage(), 500);\r\n        // this.currentStatus = this.oss[0].state;\r\n        // this.coupons = await getCoupons(this.currentStatus);\r\n    }\r\n\r\n    /**\r\n     * 优惠卡展示\r\n     */\r\n    private renderCoupon = (coupon: any) => {\r\n        let { types, discount, conductReveal } = coupon;\r\n        let content = null;\r\n        if (types === \"coupon\")\r\n            content = discount ? this.renderVm(VCoupon, coupon) : this.renderVm(VVIPCard, coupon);\r\n        else if (types === \"credits\")\r\n            content = this.renderVm(VCredits, coupon);\r\n        else if (types === 'vipcard') {\r\n            content = this.renderVm(VVIPCard, coupon);\r\n        }\r\n        if (conductReveal) {\r\n            content = this.renderVm(VCouponUsed, coupon);\r\n        }\r\n        return <div className=\"d-block\">\r\n            <div className=\"px-2 bg-white mt-1\" onClick={() => { this.CouponViewOrUse(coupon) }}>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    /**\r\n     * 折扣明细或使用记录\r\n     */\r\n    private CouponViewOrUse = (coupon: any) => {\r\n        let { showDiscountSetting } = this.controller;\r\n        let { result, types } = coupon;\r\n        if (result === 1 && types !== 'credits')\r\n            showDiscountSetting(coupon);\r\n    }\r\n\r\n    private tipsUI = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-primary\" role=\"alert\">\r\n                <FA name=\"exclamation-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        return tipsUI;\r\n    })\r\n    private onScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        if (this.currentStatus !== \"validCardForWebUser\")\r\n            this.coupons.more();\r\n    }\r\n\r\n\r\n\r\n    private page = observer(() => {\r\n        this.getTabs();\r\n        let right = <button className=\"btn btn-primary w-100\" onClick={this.receiveCoupon}>领取</button>\r\n        return <Page header=\"卡券管理\">\r\n            <div className=\"px-2 py-3\">\r\n                <LMR right={right}>\r\n                    <input ref={v => this.couponInput = v} type=\"number\" placeholder=\"输入领取优惠卡券号码\" className=\"form-control\"></input>\r\n                </LMR>\r\n                {React.createElement(this.tipsUI)}\r\n                <div className=\"mt-2\">\r\n                    <Tabs tabs={this.tabs} tabPosition=\"top\" />\r\n                </div>\r\n            </div >\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { CUqBase } from '../CBase';\r\nimport { VSharedCoupon } from './VSharedCoupon';\r\nimport { BoxId, nav, User, QueryPager, Tuid } from \"tonva-react\";\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { VCoupleAvailable } from './VCouponAvailable';\r\nimport { VVIPCardDiscount } from './VVIPCardDiscount';\r\nimport { VCoupon, VCredits, VVIPCard } from './VVIPCard';\r\nimport { VCouponManage } from './VCouponManage';\r\nimport { CApp } from 'CApp';\r\n\r\nexport const COUPONBASE: any = {\r\n    'coupon': { 'name': '优惠券', 'view': VCoupon },\r\n    'credits': { 'name': '积分券', 'view': VCredits },\r\n    'vipcard': { 'name': 'VIP卡', 'view': VVIPCard }\r\n}\r\n\r\nexport class CCoupon extends CUqBase {\r\n    isOpenMyCouponManage: boolean = false;\r\n    couponDrawed: boolean;\r\n    sharedCouponValidationResult: any;\r\n    couponPager: QueryPager<any>;\r\n    \r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            couponDrawed: observable,\r\n            sharedCouponValidationResult: observable,\r\n        });\r\n    }\r\n\r\n    applyCoupon = async (coupon: string) => {\r\n        let validationResult = await this.getCouponValidationResult(coupon);\r\n        let { result: rtn, id, types } = validationResult;\r\n        if (rtn === 1) {\r\n            if (types === 'vipcard' || types === 'coupon') {\r\n                validationResult.discountSetting = await this.getCouponDiscountSetting(types, id);\r\n            }\r\n            this.returnCall(validationResult);\r\n            this.closePage();\r\n        }\r\n        return rtn;\r\n    }\r\n\r\n    getCouponValidationResult = async (coupon: string) => {\r\n        let { currentUser } = this.cApp;\r\n        return await this.uqs.salesTask.IsCanUseCoupon.submit({ code: coupon, webUser: currentUser && currentUser.id });\r\n    }\r\n\r\n    /**\r\n     * 优惠卡券管理界面\r\n     */\r\n    openMyCouponManage = async () => {\r\n        this.isOpenMyCouponManage = true;\r\n        this.openVPage(VCouponManage);\r\n    }\r\n\r\n    /**\r\n     * 获取不同状态下的优惠卡券\r\n     */\r\n    getCoupons = async (state: any) => {\r\n        let { webuser } = this.uqs;\r\n        let { currentUser } = this.cApp;\r\n        let result;\r\n        switch (state) {\r\n            case 'validCardForWebUser':\r\n                result = await this.getValidCardForWebUser();\r\n                return this.getValidMusterForWebUser(result);\r\n            case 'usageRecordForWebUser':\r\n                result = await currentUser.getUserdCoupon();\r\n                // result = new QueryPager<any>(webuser.getMyUsedCoupon, 10, 10);\r\n                // await result.first({ webUser: currentUser });\r\n                return result;\r\n            case 'expiredForWebUser':\r\n                result = await currentUser.getExpiredCoupon();\r\n                // result = new QueryPager<any>(webuser.getMyExpiredCoupon, 10, 10);\r\n                // await result.first({ webUser: currentUser });\r\n                return result;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 可使用的优惠卡\r\n     */\r\n    getValidMusterForWebUser = (params: any) => {\r\n        let { vipCardForWebUser, couponsForWebUser, creditsForWebUser } = params;\r\n        let shift = couponsForWebUser.map((v: any) => v.coupon).concat(creditsForWebUser.map((v: any) => v.coupon));\r\n        let validMuster = vipCardForWebUser ? [vipCardForWebUser.coupon].concat(shift) : shift;\r\n        let finalValidMuster = validMuster.filter((v: any) => v.result === 1);\r\n        return finalValidMuster;\r\n    }\r\n\r\n    /**\r\n     * 获取已过期的优惠卡\r\n     */\r\n    /* getExpiredMusterForWebUser = async () => {\r\n        let { webuser, 积分商城 } = this.uqs;\r\n        let { currentUser } = this.cApp;\r\n        let expiredMusterForWebUser: any[] = [];\r\n        let couponsMusterForWebUser: any = await webuser.WebUserCoupon.table({ webUser: currentUser });\r\n        let creditsMusterForWebUser: any = await 积分商城.WebUserCredits.table({ webUser: currentUser });\r\n        let vipCardMusterForWebUser: any = await webuser.WebUserVIPCard.obj({ webUser: currentUser });\r\n        if (vipCardMusterForWebUser) {\r\n            let { expiredDate } = vipCardMusterForWebUser;\r\n            if (expiredDate.getTime() < Date.now()) {\r\n                vipCardMusterForWebUser.coupon = await this.getCouponValidationResult(vipCardMusterForWebUser.vipCardCode);\r\n                expiredMusterForWebUser.push(vipCardMusterForWebUser.coupon);\r\n            }\r\n        }\r\n\r\n        if (couponsMusterForWebUser) {\r\n            let result = couponsMusterForWebUser.filter((v: any) => v.expiredDate.getTime() < Date.now());\r\n            if (result.length > 0) {\r\n                for (let i = 0; i < result.length; i++) {\r\n                    let e = result[i];\r\n                    e.coupon = await this.getCouponValidationResult(e.couponCode);\r\n                }\r\n                expiredMusterForWebUser.push(...result.map((v: any) => v.coupon));\r\n            }\r\n        }\r\n\r\n        if (creditsMusterForWebUser) {\r\n            let result = creditsMusterForWebUser.filter((v: any) => v.expiredDate.getTime() < Date.now());\r\n\r\n\r\n            if (result.length > 0) {\r\n                for (let i = 0; i < result.length; i++) {\r\n                    let e = result[i];\r\n                    e.coupon = await this.getCouponValidationResult(e.creditsCode);\r\n                }\r\n                expiredMusterForWebUser.push(...result.map((v: any) => v.coupon));\r\n            }\r\n        }\r\n        // expiredMusterForWebUser.forEach((el: any) => el.conductReveal = true);\r\n        return expiredMusterForWebUser;\r\n    }\r\n */\r\n\r\n    /**\r\n     * 获取用户有效的优惠券/vip卡\r\n     */\r\n    getValidCardForWebUser = async () => {\r\n        let { currentUser } = this.cApp;\r\n        let { id: currentUserId } = currentUser;\r\n\r\n        let validVIPCardForWebUser = await this.getValidVipCardForWebUser(currentUserId);\r\n        if (validVIPCardForWebUser) {\r\n            validVIPCardForWebUser.coupon = await this.getCouponValidationResult(validVIPCardForWebUser.vipCardCode)\r\n        }\r\n\r\n        let validCouponsForWebUser = await currentUser.getValidCoupons(); //this.getValidCouponsForWebUser(currentUserId);\r\n        if (validCouponsForWebUser.length > 0) {\r\n            for (let i = 0; i < validCouponsForWebUser.length; i++) {\r\n                let e = validCouponsForWebUser[i];\r\n                e.coupon = await this.getCouponValidationResult(e.couponCode);\r\n            }\r\n        }\r\n\r\n        let validCreditsForWebUser = await currentUser.getValidCredits();// this.getValidCreditsForWebUser(currentUserId);\r\n        if (validCreditsForWebUser.length > 0) {\r\n            for (let i = 0; i < validCreditsForWebUser.length; i++) {\r\n                let e = validCreditsForWebUser[i];\r\n                e.coupon = await this.getCouponValidationResult(e.creditsCode);\r\n            }\r\n        }\r\n\r\n        return {\r\n            'vipCardForWebUser': validVIPCardForWebUser,\r\n            'couponsForWebUser': validCouponsForWebUser,\r\n            'creditsForWebUser': validCreditsForWebUser\r\n        }\r\n    }\r\n\r\n    protected async internalStart(param: any) {\r\n        let result = await this.getValidCardForWebUser();\r\n\r\n        this.openVPage(VCoupleAvailable, result);\r\n    }\r\n\r\n    /**\r\n     * （在订单上）应用coupon\r\n     * @param coupon \r\n     */\r\n    applySelectedCoupon = async (coupon: string) => {\r\n        if (!coupon)\r\n            return \"请输入您的优惠卡/券号\";\r\n        else {\r\n            let ret = await this.applyCoupon(coupon);\r\n            return this.applyTip(ret);\r\n        }\r\n    }\r\n\r\n    applyTip = (ret: any) => {\r\n        switch (ret) {\r\n            case -1:\r\n                return '对不起，当前服务器繁忙，请稍后再试。';\r\n            case 1:\r\n                return '有效';\r\n            case 0:\r\n                return \"无此优惠券，请重新输入或与您的专属销售人员联系确认优惠码是否正确。\";\r\n            case 2:\r\n                return '优惠券已过期或作废，请重新输入或与您的专属销售人员联系。';\r\n            case 3:\r\n            case 5:\r\n                return '优惠券无效，请重新输入或与您的专属销售人员联系。';\r\n            case 6:\r\n                return '不允许使用本人优惠券！';\r\n            case 4:\r\n                return '该优惠券已经被使用过了，不允许重复使用。';\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param currentUserId \r\n     */\r\n    getValidVipCardForWebUser = async (currentUserId: number): Promise<any> => {\r\n        let { uqs } = this.cApp;\r\n        let { webuser } = uqs;\r\n        let { WebUserVIPCard } = webuser;\r\n        let vipCardForWebUser: any = await WebUserVIPCard.obj({ webUser: currentUserId });\r\n        if (vipCardForWebUser) {\r\n            let { expiredDate } = vipCardForWebUser\r\n            if (expiredDate.getTime() > Date.now()) {\r\n                return vipCardForWebUser;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param currentUserId \r\n     *  (更新至webuser--getValidCoupons)\r\n     * -- TODO : 废弃\r\n     */\r\n    getValidCouponsForWebUser = async (currentUserId: number): Promise<any[]> => {\r\n        let { uqs } = this.cApp;\r\n        let { webuser } = uqs;\r\n        let { WebUserCoupon } = webuser;\r\n        let couponsForWebUser: any[] = await WebUserCoupon.table({ webUser: currentUserId });\r\n        let validCouponsForWebUser: any[] = [];\r\n        if (couponsForWebUser) {\r\n            validCouponsForWebUser = couponsForWebUser.filter(v => v.expiredDate.getTime() > Date.now());\r\n        }\r\n        return validCouponsForWebUser;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param currentUserId \r\n     *  (更新至webuser--getValidCredits)\r\n     * -- TODO : 废弃\r\n     */\r\n    getValidCreditsForWebUser = async (currentUserId: number): Promise<any[]> => {\r\n        let { uqs } = this.cApp;\r\n        let { webuser  } = uqs;\r\n        let creditsForWebUser: any[] = await webuser.WebUserCredits.table({ webUser: currentUserId });\r\n        let validCreditsForWebUser: any[] = [];\r\n        if (creditsForWebUser) {\r\n            validCreditsForWebUser = creditsForWebUser.filter(v => v.expiredDate.getTime() > Date.now());\r\n        }\r\n        return validCreditsForWebUser;\r\n    }\r\n\r\n    /**\r\n     * 显示VIP卡的品牌折扣明细 \r\n     * @param coupon \r\n     */\r\n    showDiscountSetting = async (vipCard: any) => {\r\n        let { types, id } = vipCard;\r\n        vipCard.discountSetting = await this.getCouponDiscountSetting(types, id);\r\n        this.openVPage(VVIPCardDiscount, vipCard);\r\n    }\r\n    /**\r\n     * 获取卡券的有效折扣  \r\n     */\r\n    getValidDiscounts = async (types: string, id: number) => {\r\n        return await this.getCouponDiscountSetting(types, id);\r\n    }\r\n\r\n    private getCouponDiscountSetting = async (types: string, couponId: number) => {\r\n        if (types === 'vipcard' || types === 'coupon') {\r\n            return await this.uqs.salesTask.VIPCardDiscount.table({ coupon: couponId });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 领取VIP卡 \r\n     */\r\n    showSharedVIPCard = async (param: any) => {\r\n        let { vipcard: vipCardCode, productids } = param;\r\n        await this.autoDrawCouponBase(vipCardCode);\r\n        let products = this.getProducts(productids);\r\n        this.openVPage(VSharedCoupon, { products });\r\n    }\r\n\r\n    /**\r\n     * 领取优惠券 \r\n     */\r\n    showSharedCoupon = async (param: any) => {\r\n        let { coupon, productids } = param;\r\n        await this.autoDrawCouponBase(coupon);\r\n        let products = this.getProducts(productids);\r\n        this.openVPage(VSharedCoupon, { products });\r\n    }\r\n\r\n    /**\r\n     * 领取积分码 \r\n     */\r\n    showSharedCredits = async (param: any) => {\r\n        let { credits, productids } = param;\r\n        await this.autoDrawCouponBase(credits);\r\n        let products = this.getProducts(productids);\r\n        this.openVPage(VSharedCoupon, { products });\r\n    }\r\n\r\n    autoDrawCouponBase = async (couponBaseCode: string) => {\r\n\r\n        this.couponDrawed = false;\r\n        this.sharedCouponValidationResult = await this.getCouponValidationResult(couponBaseCode);\r\n        let { result } = this.sharedCouponValidationResult;\r\n\r\n        // 自动领取积分券\r\n        let { currentUser } = this.cApp;\r\n        let { id: currentUserId, allowOrdering } = currentUser;\r\n        if (result === 1 && currentUserId && allowOrdering)\r\n            await this.drawCoupon(this.sharedCouponValidationResult);\r\n    }\r\n\r\n    private getProducts = (productids: string) => {\r\n        let products: any;\r\n        if (productids) {\r\n            let { ProductX } = this.uqs.product;\r\n            let productidArray = productids.split('-').filter((v: any) => /^\\d{1,10}$/.test(v));\r\n            products = productidArray.map((v: any) => ProductX.boxId(v));\r\n        }\r\n        return products;\r\n    }\r\n\r\n    loginWhenDrawCoupon = async (credits: any) => {\r\n        let { cApp } = this;\r\n        let { cMe, currentUser } = cApp;\r\n        let { code } = credits;\r\n        this.sharedCouponValidationResult = await this.getCouponValidationResult(code);\r\n        let { result } = this.sharedCouponValidationResult;\r\n        let allowCurrentUser = async () => {\r\n            if (result === 1) {\r\n                if (!currentUser.allowOrdering) {\r\n                    let note = <>\r\n                        化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。\r\n                        为此，需要您重新提供非虚拟的、可核查的信息。这些信息包括下面所有带有 <span className=\"text-danger\">*</span> 的信息。\r\n                    </>;\r\n                    cMe.toPersonalAccountInfo(async () => await this.drawCoupon(this.sharedCouponValidationResult), note);\r\n                } else {\r\n                    await this.drawCoupon(this.sharedCouponValidationResult);\r\n                }\r\n            }\r\n        }\r\n\r\n        let loginCallback = async (user: User) => {\r\n            await cApp.currentUser.setUser(user);\r\n            await cApp.loginCallBack(user);\r\n            this.closePage(1);\r\n            await allowCurrentUser();\r\n        };\r\n        if (!this.isLogined)\r\n            nav.showLogin(loginCallback, true);\r\n        else {\r\n            await allowCurrentUser();\r\n        }\r\n    }\r\n\r\n    drawCoupon = async (credits: any) => {\r\n        let { uqs, cApp } = this;\r\n        let { currentUser } = cApp;\r\n        let { id: currentUserId } = currentUser;\r\n        let { webuser, customer } = uqs;\r\n        let { result, id: creditsId, code, validitydate, types } = credits;\r\n        if (result !== 1)\r\n            return;\r\n        switch (types) {\r\n            case 'credits':\r\n                let drawedResult: any;\r\n                if(currentUser.hasCustomer)\r\n                    drawedResult = await customer.CustomerCredits.obj({ customer: currentUser.currentCustomer, credits: creditsId });\r\n                else drawedResult = await webuser.WebUserCredits.obj({ webUser: currentUserId, credits: creditsId });\r\n                if (!drawedResult) {\r\n                    let now = new Date();\r\n                    let pramArr = [{\r\n                        credits: creditsId, creditsCode: code,\r\n                        createDate: `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`, expiredDate: validitydate\r\n                    }];\r\n                    if (currentUser.hasCustomer)\r\n                        await customer.CustomerCredits.add({ customer: currentUser.currentCustomer, arr1: pramArr });\r\n                    else\r\n                        await webuser.WebUserCredits.add({ webUser: currentUserId, arr1: pramArr });\r\n                }\r\n                break;\r\n            case 'coupon':\r\n                let drawedResult3: any;\r\n                if(currentUser.hasCustomer)\r\n                    drawedResult3 = await customer.CustomerCoupon.obj({ customer: currentUser.currentCustomer, coupon: creditsId });\r\n                else drawedResult3 = await webuser.WebUserCoupon.obj({ webUser: currentUserId, coupon: creditsId });\r\n                if (!drawedResult3) {\r\n                    let now = new Date();\r\n                    let pramArr = [{\r\n                        couponType: 1, couponCode: code,\r\n                        createDate: `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`, expiredDate: validitydate,\r\n                    }];\r\n                    if (currentUser.hasCustomer)\r\n                        await customer.CustomerCoupon.add({ customer: currentUser.currentCustomer, coupon: creditsId, arr1: pramArr });\r\n                    else\r\n                        await webuser.WebUserCoupon.add({ webUser: currentUserId, coupon: creditsId, arr1: pramArr });\r\n                }\r\n                break;\r\n            case 'vipcard':\r\n                let drawedResult2 = await webuser.WebUserVIPCard.obj({ webUser: currentUserId, vipCard: creditsId });\r\n                if (!drawedResult2) {\r\n                    let now = new Date();\r\n                    await this.uqs.webuser.WebUserVIPCard.add({\r\n                        webUser: currentUserId,\r\n                        vipCard: creditsId,\r\n                        arr1: [{\r\n                            vipCardType: 1,\r\n                            createDate: `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`,\r\n                            expiredDate: validitydate,\r\n                            vipCardCode: code\r\n                        }]\r\n                    })\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.couponDrawed = true;\r\n    }\r\n\r\n    async showProductDetail(product: number) {\r\n        let { cProduct } = this.cApp;\r\n        await cProduct.showProductDetail(product);\r\n    }\r\n\r\n    renderProduct = (product: any) => {\r\n        let { cProduct } = this.cApp;\r\n        return cProduct.renderProductWithPrice(product);\r\n    }\r\n}","export function randomColor() {\r\n    let arr = ['#ad2031', '#239ab7', '#80a040', '#811f63', '#1B12AC'];\r\n    let i = Math.floor(Math.random() * arr.length);\r\n    return arr[i];\r\n    // return '#' + Math.random().toString(16).substr(-6);\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Form, List, tv, ObjectSchema, NumSchema, UiSchema, UiCustom, FA, Tabs, TabProp, TabCaptionComponent, StringSchema } from \"tonva-react\";\r\nimport { CPointProduct, PointProductDetailLevel } from 'pointMarket/CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { MinusPlusWidget } from 'tools';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { color } from 'order/VMyOrders';\r\nimport { randomColor } from 'tools/randomColor';\r\nimport { pointIcon, triangleShadingO } from 'tools/images';\r\n\r\nexport const renderHr = (HRCL?: any, HRST?: any) => {\r\n    let styleObj = HRST ? HRST : { backgroundColor: '#007bff' };\r\n    return <div className={`flex-fill ${HRCL ? HRCL : 'px-2 text-primary'}`}><hr style={{ height: 1, border: 'none', ...styleObj }} /></div>\r\n};\r\n\r\nexport const TopicDivision = (topic: any, CL?: any, ST?: any, HRCL?: any, HRST?: any) => {\r\n    return <div className={`text-center w-100 py-2 ${CL ? CL : 'px-2 text-primary'} d-flex justify-content-between align-items-center`} style={ST}>\r\n        {renderHr(HRCL, HRST)}{topic}{renderHr(HRCL, HRST)}\r\n    </div>\r\n}\r\n\r\n\r\nexport const schema = [\r\n    { name: 'product', type: 'object' } as ObjectSchema,\r\n    // { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    // { name: 'point', type: 'number' } as NumSchema,\r\n    // { name: 'imageUrl', type: 'string' } as StringSchema,\r\n    { name: 'newStockRes', type: 'object' } as ObjectSchema,\r\n    { name: 'pointProductSource', type: 'object' } as ObjectSchema,\r\n];\r\n\r\nexport class VPointProduct extends VPage<CPointProduct> {\r\n    protected isShowSelectForm: boolean = false;\r\n    protected productIsNull: boolean = false;\r\n    protected pointIsEnough: boolean = false;\r\n    private currentInterval: string;\r\n    private tabs: TabProp[];\r\n    protected none: JSX.Element = <div className=\"my-4 text-secondary d-flex justify-content-center\">『 暂无可兑换产品 』</div>;\r\n    rankInterval: any = [\r\n        { caption: '1万以下', state: 'below', icon: 'superpowers', borderC: '#2c93ad' },\r\n        { caption: '1-5万', state: 'firstLevel', icon: 'superpowers', borderC: '#3CC43C' },\r\n        { caption: '5-15万', state: 'twoLevel', icon: 'superpowers', borderC: '#7c1e5e' },\r\n        { caption: '15万以上', state: 'above', icon: 'superpowers', borderC: '#0e2c8c' },\r\n    ];\r\n\r\n    constructor(c: CPointProduct) {\r\n        super(c);\r\n\r\n        makeObservable<VPointProduct, \"isShowSelectForm\" | \"productIsNull\" | \"pointIsEnough\">(this, {\r\n            isShowSelectForm: observable,\r\n            productIsNull: observable,\r\n            pointIsEnough: observable,\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n    private getTabs = async () => {\r\n        let { pointProducts, getPointsIntervalProducts } = this.controller;\r\n        this.tabs = this.rankInterval.map((v: any) => {\r\n            let { caption, state, icon, borderC } = v;\r\n            return {\r\n                name: caption,\r\n                // caption: (selected: boolean) => TabCaptionComponent(caption, icon, color(selected)),\r\n                caption: (selected: boolean) => this.TabCaptionComponent(caption, icon, borderC, (selected ? '#ffffff' : 'transparent')),\r\n                content: () => {\r\n                    return <>{this.renderList()}</>\r\n                },\r\n                isSelected: this.currentInterval === state,\r\n                load: async () => {\r\n                    this.currentInterval = state;\r\n                    pointProducts = await getPointsIntervalProducts(this.currentInterval);\r\n                }\r\n            };\r\n        });\r\n    }\r\n\r\n    private TabCaptionComponent = (label: string, icon: string, borderC: string, color: string) => <div\r\n        className={'py-2 d-flex justify-content-center align-items-center flex-column cursor-pointer '}>\r\n        <small className=\"w-4c text-center rounded-sm font-weight-bold\" style={{ color: borderC, border: `1px solid ${borderC}`, background: color }}>{label}</small>\r\n    </div>;\r\n\r\n    protected renderList = (isToDetail?: boolean) => {\r\n        let { pointProducts, openPointProductDetail } = this.controller;\r\n        return <div style={{ background: `url(${triangleShadingO}) no-repeat 99% 230px,url(${triangleShadingO}) no-repeat 1% 480px`, backgroundSize: '2.5%' }}>\r\n            <List items={pointProducts} item={{ render: this.renderPointProduct, onClick: (v)=>{openPointProductDetail(v,PointProductDetailLevel.INDIRECT)}, className: 'w-50 px-3 bg-transparent' }} none={this.none}\r\n                className={`${pointProducts.length !== 0 ? 'd-flex flex-wrap bg-transparent mt-2' : ''}`}\r\n            ></List>\r\n        </div>\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            product: { visible: false },\r\n            // pack: { visible: false },\r\n            quantity: {\r\n                widget: 'custom',\r\n                label: null,\r\n                className: 'text-center w-2c',\r\n                WidgetClass: MinusPlusWidget,\r\n                onChanged: this.controller.onQuantityChanged as any\r\n            } as UiCustom,\r\n            newStockRes: { visible: false },\r\n            pointProductSource: { visible: false },\r\n            // point: { visible: false },\r\n            // imageUrl: { visible: false },\r\n        }\r\n    }\r\n\r\n    protected renderPointProduct = (pointProduct: any) => {\r\n        let { product } = pointProduct;\r\n        return <>\r\n            {tv(product, (v) => {\r\n                return <div className=\"w-100 d-flex flex-column mb-4\">{/* height: 20vh  */}\r\n                    <div title={v.description} className=\"w-100\" style={{ height: '35vw' }} ><PointProductImage chemicalId={v.imageUrl} className=\"w-100 h-100\" style={{border:`2px solid ${randomColor()}`}} /></div>\r\n                    <div className=\"small w-100\">\r\n                        <div className=\"text-truncate w-100\">{v.descriptionC}</div>\r\n                        <>\r\n                            {\r\n                                this.isShowSelectForm\r\n                                    ? <div className=\"w-100 d-flex justify-content-between align-items-right mt-1\">{/* justify-content-end */}\r\n                                        <small className=\"align-self-center mb-3 text-primary\" ><FA name=\"shopping-bag\" size='2x' /></small>\r\n                                        <Form schema={schema} uiSchema={this.uiSchema} formData={pointProduct} className=\"mr-2\" />\r\n                                    </div>\r\n                                    : null\r\n                            }\r\n                            <div className='d-flex'>\r\n                                {/* <FA name='database' className=\"text-warning\" /> */}\r\n                                <img src={pointIcon} alt=\"\" style={{ height: 24 }} />\r\n                                <span className=\"text-danger h5 m-0 ml-1 align-self-end\"> {v.point}</span>{/* <small>分</small> */}\r\n                            </div>\r\n                        </>\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </>\r\n    }\r\n\r\n    protected openExchangeOrder = async () => {\r\n        // 未选择产品\r\n        let { pointToExchanging, myEffectivePoints } = this.controller;\r\n\r\n        if (pointToExchanging < 1) {\r\n            this.productIsNull = true;\r\n            this.pointIsEnough = false;\r\n            setTimeout(() => this.productIsNull = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n        // 积分不足\r\n        if (pointToExchanging > myEffectivePoints) {\r\n            this.productIsNull = false;\r\n            this.pointIsEnough = true;\r\n            setTimeout(() => this.pointIsEnough = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n\r\n        this.controller.openExchangeOrder();\r\n    }\r\n\r\n    protected getRelatedUI = () => {\r\n        let { pointToExchanging, myEffectivePoints } = this.controller;\r\n        let productIsNullTip = this.productIsNull ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" />未选择产品</div>\r\n            : null;\r\n        let pointIsEnoughTip = this.pointIsEnough ?\r\n            <div className=\"text-danger small m-0 p-0\"><FA name=\"exclamation-circle\" />积分不足<br />剩余{myEffectivePoints}分</div>\r\n            : null;\r\n\r\n        let footer = <div className=\"d-block\">\r\n            <div className=\"w-100 px-3 d-flex justify-content-between\">\r\n                <div>总计:<span className=\"text-danger ml-2 mr-1 h2\" >{pointToExchanging}</span>分</div>\r\n                <div>{productIsNullTip}{pointIsEnoughTip}</div>\r\n                <button type=\"button\" className=\"btn btn-danger m-1\" onClick={this.openExchangeOrder}>去兑换</button>\r\n            </div>\r\n        </div>;\r\n        return footer;\r\n    }\r\n\r\n    protected page = observer(() => {\r\n        this.getTabs();\r\n        let right = this.controller.renderSelectedLable(PointProductDetailLevel.DIRECT);\r\n        let {themeName: ThemeName } = this.controller;\r\n        let themeName = ThemeName === '积分商城' ? ThemeName : (ThemeName.name ? ThemeName.name : ThemeName);\r\n        return <Page header={themeName} right={right}>\r\n            {\r\n                themeName === '积分商城'\r\n                    ? <Tabs tabs={this.tabs} tabPosition=\"top\" size=\"lg\" />\r\n                    : <>\r\n                        {/* {TopicDivision(this.themeName)} */}\r\n                        {this.renderList()}\r\n                    </>\r\n            }\r\n        </Page >;\r\n    });\r\n}\r\n\r\n/**\r\n * 已选择的兑换产品列表\r\n */\r\nexport class VSelectedPointProduct extends VPointProduct {\r\n    isShowSelectForm: boolean = true;\r\n    protected none: JSX.Element = <div className=\"mt-4 text-secondary d-flex justify-content-center\">『 已清空您所选择的产品 』</div>;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    page = observer(() => {\r\n        let { pointProductsSelected, clearSelectedPointsProducts } = this.controller;\r\n        let footer = this.getRelatedUI();\r\n\r\n        // let right = <div className=\"mr-2\" onClick={clearSelectedPointsProducts}><FA name=\"trash-o\" className='text-light' /></div>;\r\n        // let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">『 已清空您所选择的产品 』</div>;\r\n        return <Page header='已选择兑换产品' right={<></>} footer={footer} >\r\n            <List\r\n                items={pointProductsSelected}\r\n                item={{ render: this.renderPointProduct, className: \"w-50 px-3\" }}\r\n                none={this.none}\r\n                className=\"d-flex flex-wrap bg-transparent mt-2\"\r\n            />\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, nav, Page, LMR, FA, tv, List, autoHideTips } from \"tonva-react\";\r\nimport { CPointProduct, OrderSource } from './CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { randomColor } from 'tools/randomColor';\r\nimport { pointIcon } from 'tools/images';\r\nimport noStock from 'images/noStock.png';\r\n\r\nexport class VExchangeOrder extends VPage<CPointProduct> {\r\n    protected shippingAddressIsBlank: boolean = false;\r\n    disBtn: boolean = false;\r\n    protected pageDesc: string = OrderSource.EXCHANGEORDER;\r\n    noStockTip = observable.box<string | boolean | JSX.Element>();\r\n\r\n    constructor(c: CPointProduct) {\r\n        super(c);\r\n        makeObservable<VExchangeOrder,\"shippingAddressIsBlank\">(this, {\r\n            shippingAddressIsBlank: observable,\r\n            disBtn: observable,\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private nullContact = () => {\r\n        return <span className=\"text-primary\">选择收货地址</span>;\r\n    }\r\n\r\n    protected renderPointProduct = (pointProduct: any) => {\r\n        let { product, point, quantity, newStockRes } = pointProduct;\r\n        let noStockUI: JSX.Element = undefined;\r\n        if (newStockRes) noStockUI = <div className=\"position-absolute w-100 h-100 d-flex\" style={{ top: 0, left: 0, background: \"rgba(0,0,0,.3)\" }}>\r\n            <img src={noStock} alt=\"\" className='w-50 m-auto' />\r\n        </div>;\r\n        if (quantity > 0) {\r\n            return <>\r\n                {tv(product, (v) => {\r\n                    return <div className=\"w-100 d-flex flex-column mb-4\">{/* 20vh  */}\r\n                        <div title={v.description} className=\"w-100 position-relative\" style={{ height: '35vw', border: `2px solid ${randomColor()}` }} >\r\n                            <PointProductImage chemicalId={v.imageUrl} className=\"w-100 h-100\" />\r\n                            {noStockUI}\r\n                        </div>\r\n                        <div className=\"small w-100\">\r\n                            <div className=\"text-truncate w-100 my-1\">{v.descriptionC}</div>\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                {/*  <div>\r\n                                    <FA name='database' className=\"text-warning\" />\r\n                                    <span className=\"text-danger h5\"> {point}</span>\r\n                                </div> */}\r\n                                <div className='d-flex'>\r\n                                    <img src={pointIcon} alt=\"\" style={{ height: 24 }} />\r\n                                    <span className=\"text-danger h5 m-0 ml-1 align-self-end\"> {v.point}</span>\r\n                                </div>\r\n                                <div>*{quantity}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                })}\r\n            </>\r\n        }\r\n    }\r\n\r\n    protected onSubmitOwn = async () => {\r\n        let { submitOrder } = this.controller;\r\n        await submitOrder();\r\n    }\r\n\r\n    protected onSubmit = async () => {\r\n        let { orderData, cApp, createOrderStocks } = this.controller;\r\n        let { cLottery } = cApp;\r\n        // 必填项验证\r\n        let { shippingContact } = this.pageDesc === OrderSource.EXCHANGEORDER ? orderData : cLottery.prizeOrderData;\r\n        if (!shippingContact) {\r\n            this.shippingAddressIsBlank = true;\r\n            setTimeout(() => this.shippingAddressIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        };\r\n        await createOrderStocks();\r\n        if (this.controller.noJDStock) {this.setNoStockTip(); return;};\r\n        await this.onSubmitOwn();\r\n        this.disBtn = true;\r\n    }\r\n\r\n    private setNoStockTip = () => {\r\n        this.noStockTip.set(<div className=\"text-center bg-light py-2 text-danger\">部分兑换商品已无货，不可兑换。</div>);\r\n    }\r\n\r\n    protected renderTipsUI = () => {\r\n        let chevronRight = <FA name=\"chevron-right\" className=\"cursor-pointer\" />\r\n        let shippingAddressBlankTip = this.shippingAddressIsBlank ?\r\n            <div className=\"text-danger small my-2\"><FA name=\"exclamation-circle\" /> 必须填写收货地址</div>\r\n            : null;\r\n        return {\r\n            chevronRight,\r\n            shippingAddressBlankTip\r\n        }\r\n    }\r\n\r\n    protected renderContact = () => {\r\n        let { chevronRight, shippingAddressBlankTip } = this.renderTipsUI();\r\n        let { orderData, onSelectShippingContact, cApp } = this.controller;\r\n        let data = this.pageDesc === OrderSource.EXCHANGEORDER ? orderData.shippingContact : cApp.cLottery.prizeOrderData.shippingContact;\r\n        return <div className=\"px-2\">\r\n            <div className=\"row py-3 bg-white mb-1\" onClick={() => onSelectShippingContact()}>\r\n                <div className=\"col-3 text-muted pr-0\">收货地址:</div>\r\n                <div className=\"col-9\">\r\n                    <LMR className=\"w-100 align-items-center\" right={chevronRight}>{tv(data, undefined, undefined, this.nullContact)}</LMR>\r\n                    {shippingAddressBlankTip}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    protected page = observer(() => {\r\n        let { pointProductsSelected, pointToExchanging: pointsSum, noJDStock } = this.controller;\r\n        let header = <div className=\"w-100 text-center\">兑换确认</div>;\r\n        let footer = <div className=\"d-block\">\r\n            {/* {autoHideTips(this.noStockTip)} */}\r\n            <div className=\"w-100 px-3 d-flex justify-content-between\">\r\n                <div>总计:<span className=\"text-danger ml-2 mr-1 h2\" >{pointsSum}</span>分</div>\r\n                <button disabled={this.disBtn} type=\"button\" className=\"btn btn-danger m-1\" onClick={this.onSubmit}>确认兑换</button>\r\n            </div>\r\n        </div>;\r\n        if (noJDStock) this.setNoStockTip();\r\n\r\n        return <Page header={header} right={<></>} footer={footer}>\r\n            {this.renderContact()}\r\n            <List items={pointProductsSelected} item={{ render: this.renderPointProduct, className: 'w-50 px-3' }}\r\n                className=\"d-flex flex-wrap bg-transparent mt-2\"\r\n            ></List>\r\n        </Page>\r\n    })\r\n}\r\n\r\n\r\n/**\r\n * 领取奖品页面\r\n */\r\nexport class VMyPrizeExchangeOrder extends VExchangeOrder {\r\n    shippingAddressIsBlank: boolean = false;\r\n    protected pageDesc: string = OrderSource.PRIZEORDER;\r\n    constructor(c: CPointProduct) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            shippingAddressIsBlank: observable\r\n        });\r\n    }\r\n\r\n    renderPointProduct = (pointProduct: any) => {\r\n        return <div>11111</div>\r\n    }\r\n\r\n    /*  protected onSubmitOwn = async () => {\r\n         let { cLottery } = this.controller.cApp;\r\n         await cLottery.submitOrder();\r\n     } */\r\n\r\n    protected page = observer(() => {\r\n        let { cApp } = this.controller;\r\n        let { cLottery } = cApp;\r\n        let footer = <div className=\"d-block\">\r\n            <div className=\"w-100 px-3 d-flex justify-content-end\">\r\n                <button type=\"button\" className=\"btn btn-danger m-1\" onClick={this.onSubmit}>确认领取</button>\r\n            </div>\r\n        </div>;\r\n\r\n        return <Page header=\"奖品领取预览\" footer={footer}>\r\n            {this.renderContact()}\r\n            <List items={cLottery.myPrizeLib} item={{ render: this.renderPointProduct }}\r\n\r\n            ></List>\r\n        </Page>\r\n    })\r\n}","export default \"data:image/png;base64,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\"","import * as React from 'react';\r\nimport { Page } from \"tonva-react\";\r\n\r\nexport class VPointRule extends React.Component {\r\n\r\n    render() {\r\n        return <Page header=\"积分规则\">\r\n            <div className='bg-white p-2'>\r\n                {/* <ol className=\"mb-3\">\r\n                    <li>订购产品满1元积1分（活动期间积分按活动规则执行），积分按消费额累计；付款后，积分变为有效积分，可以使用；</li>\r\n                    <li>特价产品、产业型产品等不产生积分；</li>\r\n                    <li>积分有效期为自然年三年，过期作废（示例：2010年1-12月份产生的积分在2012年12月31日作废清零，以此类推）；</li>\r\n                    <li>积分目前仅限兑换百灵威积分商城中的产品使用，不兑换现金；</li>\r\n                    <li>此积分政策只针对百灵威终端客户，经销商等不产生积分；</li>\r\n                </ol> */}\r\n                <div className=\" text-muted small\">\r\n                    <p className=\"m-0 pb-1\"><b>1，订购产品满1元积1分（活动期间积分按活动规则执行），积分按消费额累计；付款后，积分变为有效积分，可以使用；</b></p>\r\n                    <p className=\"m-0 pb-1\"><b>2，特价产品、产业型产品等不产生积分；</b></p>\r\n                    <p className=\"m-0 pb-1\"><b>3，积分有效期为自然年三年，过期作废（示例：2010年1-12月份产生的积分在2012年12月31日作废清零，以此类推）；</b></p>\r\n                    <p className=\"m-0 pb-1\"><b>4，积分目前仅限兑换百灵威积分商城中的产品使用，不兑换现金；</b></p>\r\n                    <p><b>5，此积分政策只针对百灵威终端客户，经销商等不产生积分；</b></p>\r\n                </div >\r\n                <div className=\"text-muted small py-2\">\r\n                    <p>百灵威保留本积分活动中条款的解释权利，并有根据需要取消本活动或增删、修订本规定的权利，并于百灵威官网、邮件、报纸或其他途径公告后生效。</p>\r\n                    <p>如有疑问，请致电百灵威客服中心：400-666-7788</p>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n","export const RevenueExpenditure = {\r\n    POINTHISTORY: '收支明细',\r\n    SIGNINHISTORY: '签到明细',\r\n}","import * as React from 'react';\r\nimport { VPage, Page, nav, List, FA, DropdownActions, DropdownAction, EasyDate, tv } from \"tonva-react\";\r\nimport { CPointProduct, PointProductDetailLevel, topicClump } from \"./CPointProduct\";\r\nimport { observer } from 'mobx-react-lite';\r\nimport { VPointRule } from './VPointRule';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport classNames from 'classnames';\r\nimport { logo_pointShop, signInIcon, exChangeIcon, homeTopicMap, triangleShadingO, triangleShadingT } from 'tools/images';\r\nimport { RevenueExpenditure } from './basicRefer';\r\nimport { randomColor } from 'tools/randomColor';\r\n\r\nexport class VMyPoint extends VPage<CPointProduct> {\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    content() {\r\n        return <this.page />;\r\n    }\r\n\r\n    header() {\r\n        return '';\r\n    }\r\n\r\n    /**\r\n     * 积分规则页面\r\n     */\r\n    private pointRules = () => nav.push(<VPointRule />);\r\n\r\n    /* 积分详情页面 \r\n    private getPointHistory = async () => {\r\n        this.controller.pointDetails();\r\n    }*/\r\n\r\n    private pointblock = (name: any, action: any, icon: any, width?: any) => {\r\n        return <div className={`text-center mx-2 mb-2 ${width}`} onClick={() => action()}>\r\n            <img src={icon} alt=\"\" className=\"w-2c h-2c\" />\r\n            <div className={`text-light small`}>{name}</div>\r\n        </div>\r\n    }\r\n\r\n    private recommendOrHot = (name: string, more: any, toWhere: any, theme?: string, imgArr?: any, action?: any) => {\r\n        let pointProductImage = (pointProduct: any, index: any) => {\r\n            let { product } = pointProduct;\r\n            let clm = index !== 0 ? (index === 1 ? 'justify-content-center' : 'justify-content-end') : '';\r\n            return <div className={`d-flex align-items-center ${clm}`}>{tv(product, (v) => {\r\n                return <PointProductImage chemicalId={v.imageUrl} className=\"bg-transparent p-0\" style={{ width: '91.6%', height: '23vw', border: `2px solid ${randomColor()}` }} />\r\n            })\r\n            }</div>\r\n        }\r\n        return <div className=\"mb-4\" style={{ zIndex: 9 }}>\r\n            <h6 className='d-flex justify-content-between align-content-end bg-transparent '>\r\n                <small className={classNames(theme ? theme : '', 'align-self-end')} style={{ color: theme ? theme : '' }}>{name}</small>\r\n                <span style={{ color: '#808080' }} className=\"pl-2\" onClick={() => more(name)} ><small >更多 </small><FA name='angle-right' /></span>\r\n            </h6>\r\n            <List className=\"d-flex w-100 bg-transparent justify-content-between\"\r\n                items={imgArr.slice(0, 3)}\r\n                item={{\r\n                    render: pointProductImage, //(v: any) => <PointProductImage chemicalId={v.imageUrl ? v.imageUrl : '1'} className=\"w-100 px-1 bg-transparent\" style={{border:`2px solid ${randomColor()}`}} />,\r\n                    onClick: (v) => toWhere(v, PointProductDetailLevel.DIRECT),\r\n                    className: \"col-4 p-0 bg-transparent\"\r\n                }}\r\n                none='暂无产品' />\r\n        </div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { myEffectivePoints, myPointTobeExpired, myTotalPoints, pointProductGenre, newPointProducts, hotPointProducts,isLogined,\r\n            openExchangeHistory, openRevenueExpenditure, openPointProduct, openPointProductDetail, cApp, showPointDoubt } = this.controller;\r\n        let { currentUser, cMe } = cApp;\r\n        let { openPointSign } = cApp.cSignIn;\r\n        var date = new Date();\r\n        let dateYear = date.getFullYear();\r\n\r\n        let nowPoint = myPointTobeExpired;\r\n        let nowPointTip = nowPoint > 0 ?\r\n            <div className=\"alert alert-warning py-1 w-100 small rounded-0 m-0\" role=\"alert\">\r\n                <span className=\"text-muted\">友情提示: 将有 {nowPoint} 积分于 {dateYear}-12-31 过期</span>\r\n            </div>\r\n            : null;\r\n\r\n        let actions: DropdownAction[] = [\r\n            {\r\n                icon: 'get-pocket',\r\n                caption: RevenueExpenditure.POINTHISTORY,\r\n                action: () => openRevenueExpenditure(RevenueExpenditure.POINTHISTORY)\r\n            },\r\n            {\r\n                icon: 'history',\r\n                caption: '兑换记录',\r\n                action: openExchangeHistory\r\n            },\r\n            {\r\n                icon: 'book',\r\n                caption: '积分规则',\r\n                action: this.pointRules\r\n            }\r\n        ];\r\n        let right = <DropdownActions className=\"align-self-center mr-1 bg-transparent border-0 text-light\" icon=\"navicon\" actions={actions} />;\r\n\r\n        let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">『 无任何类型 』</div>;\r\n        let UINoExchangeTip: JSX.Element;\r\n        if (!currentUser?.hasCustomer) UINoExchangeTip = <div className=\"alert alert-warning m-0\">\r\n            您的个人信息不完善，无法兑换礼品.<br />\r\n            请完善您的<span className=\"text-primary\" onClick={()=> {cMe.openEditMeInfo()}} > 账户信息 </span>.\r\n            <br />完善后需要一点审核时间,请您耐心等待.\r\n        </div>;\r\n        if (!isLogined) {\r\n            UINoExchangeTip = <div className=\"alert alert-warning m-0\">\r\n                请<b onClick={() => { cMe.showLogin() }} className=\"text-danger cursor-pointer\">登录</b>后进行礼品兑换.<br /></div>;\r\n        };\r\n        let pointShowUI: any;\r\n        if (!isLogined) pointShowUI = <div className=\"align-self-center\">您尚未登录</div>;\r\n        else pointShowUI = <div>\r\n                            <div><small>当前</small> <span className=\"h5\">{myEffectivePoints}</span> <small>分可用</small></div>\r\n                            <div className=\"mt-2\">\r\n                                {myTotalPoints > 0 ? <small className=\"mr-2\">总分: {myTotalPoints}</small> : null}\r\n                                <span className=\"small\" onClick={() => showPointDoubt()}><span className=\"small\">对积分有疑问?</span></span>\r\n                            </div>\r\n                        </div>\r\n\r\n        return <>\r\n            <div className=\"position-relative\">\r\n                <div className=\"position-absolute\" style={{top:12,right:0}}>{ right }</div>\r\n                <div className=\"d-flex flex-column pb-4 w-100\" style={{ background: `url(${homeTopicMap}) no-repeat`, backgroundSize: '100% 100%' }}>\r\n                    <img src={logo_pointShop} alt=\"img\" className=\"w-8c mt-4 ml-4 mb-3\" />\r\n                    <div className=\"d-flex mx-3 mt-2 ml-4 text-light justify-content-between\">\r\n                        {pointShowUI}\r\n                        <div className=\"d-flex justify-content-end mt-1\" style={{ flex: 1 }}>\r\n                            {this.pointblock(\"签到\", openPointSign, signInIcon)}\r\n                            {this.pointblock(\"兑换\", openPointProduct, exChangeIcon)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <>{nowPointTip}</>\r\n             {UINoExchangeTip && <div className=\"mt-2\">{UINoExchangeTip}</div>}\r\n            <div className=\"pt-3\">\r\n                {/* 产品类别 */}\r\n                {\r\n                    pointProductGenre.length\r\n                        ? <div>\r\n                            {/* style={{ background: `url(${triangleShadingO}) no-repeat scroll bottom right`, backgroundSize: '10%', }} */}\r\n                            <List className=\"d-flex flex-wrap pt-2 text-center px-2 bg-transparent justify-content-between\"\r\n                                items={pointProductGenre}\r\n                                item={{ render: this.renderGenreItem, onClick: (v) => openPointProduct(v), className: 'w-25 bg-transparent' }} none={none} />\r\n                            <p className=\"d-flex m-0 justify-content-end pr-1\"><img src={triangleShadingO} alt=\"\" className=\"h-3c\" /></p>\r\n                        </div>\r\n                        : null\r\n                }\r\n                {/* 新品推荐 热门产品 */}\r\n                <div className='mb-2 px-4 bg-transparent position-relative' style={{ background: `url(${triangleShadingT}) no-repeat 2% 50% `, backgroundSize: '38px' }}>\r\n                    {newPointProducts.length ? this.recommendOrHot(topicClump.newRecommend, openPointProduct, openPointProductDetail, undefined, newPointProducts) : null}\r\n                    {hotPointProducts.length ? this.recommendOrHot(topicClump.hotProduct, openPointProduct, openPointProductDetail, undefined, hotPointProducts) : null}\r\n                </div>\r\n            </div>\r\n        </>;\r\n    });\r\n\r\n    private renderGenreItem = (item: any) => {\r\n        let { name, imageUrl } = item;\r\n        return <div>\r\n            <label className=\"w-100 d-flex flex-column justify-content-center\">\r\n                {\r\n                    imageUrl\r\n                        ? <div className=\"m-auto\"><PointProductImage chemicalId={imageUrl ? imageUrl : ':0-0268.png'} className=\"w-2c\" /></div>\r\n                        // ? <div className=\"w-25 m-auto\"><PointProductImage chemicalId={imageUrl ? imageUrl : ':0-0268.png'} className=\"w-100\" /></div>\r\n                        : <FA name=\"leaf\" className='mt-2 text-success mb-2' size='lg' />\r\n                }\r\n                <div className='text-dark small'>{name}</div>\r\n            </label>\r\n        </div>\r\n    }\r\n}\r\n\r\nexport function renderPointRecord(item: any) {\r\n    let { comments, point, date, source, pointType } = item;\r\n    let sources: { [s: number]: string } = { 1: \"积分券下单\", 2: \"签到\", 3: \"兑换\", 5: \"下单\", 8: \"抽奖\", 9: \"退货\" };\r\n    let PointTypes: { [type: number]: string } = { 1: \"总积分\", 2: \"有效积分\", 3: \"用掉的积分\" };\r\n    let desc = `( ${sources[source]}--${PointTypes[pointType] || \"\"} )`;\r\n    return <div className=\"d-flex w-100 justify-content-between align-content-center small px-3 py-2\">\r\n        <div>\r\n            <div className=\"text-muted\">{comments}{desc}</div>\r\n            <div className=\"text-muted small\"><EasyDate date={date} /></div>\r\n        </div>\r\n        <div className=\"d-table h-100\">\r\n            <div className=\"font-weight-bolder h-100 d-table-cell align-middle text-danger\">{point >= 0 ? '+' : ''}{point}</div>\r\n        </div>\r\n    </div>\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from \"tonva-react\";\r\nimport { CPointProduct } from './CPointProduct';\r\n\r\nexport class OrderSuccess extends VPage<CPointProduct> {\r\n\r\n    async open(orderCreateResult: any) {\r\n        this.openPage(this.page, orderCreateResult);\r\n    }\r\n\r\n    private page = (orderCreateResult: any) => {\r\n        return <Page header=\"兑换成功\" back=\"close\">\r\n            <div className=\"p-3 bg-white mb-3\">\r\n                <div className=\"mb-3\">兑换成功，感谢您对百灵威的厚爱！</div>\r\n                <p className=\"\">\r\n                    订单: <span className=\"h5 text-info\">{orderCreateResult.no}</span><br /><br />\r\n                    我们将立刻处理您的订单，请注意查收到货短信。\r\n                </p>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import { BoxId } from \"tonva-react\";\r\nimport { observable, computed, makeObservable } from 'mobx';\r\n\r\nexport class pointOrder {\r\n\r\n    webUser: any;   // OK\r\n    organization: BoxId;\r\n    customer: any;  //OK\r\n    salesRegion: BoxId;   // OK\r\n\r\n    shippingContact: BoxId; //OK\r\n    exchangeItems: OrderItem[] = [];\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            shippingContact: observable,\r\n            exchangeItems: observable,\r\n            amount: computed\r\n        });\r\n    }\r\n\r\n    get amount() {\r\n        return this.exchangeItems.reduce((pv, cv) => (pv + cv.subAmount), 0);\r\n    };\r\n\r\n    getDataForSave() {\r\n        let exchangeItems: any[] = [];\r\n        this.exchangeItems.forEach(oi => {\r\n            exchangeItems.push({\r\n                product: oi.product, point: oi.point, quantity: oi.quantity //, pack: oi.pack,\r\n                , subAmount: oi.quantity * oi.point\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            amount: this.amount,\r\n            exchangeitems: exchangeItems, // 前面的必须是小写的\r\n            salesRegion: this.salesRegion\r\n        }\r\n    }\r\n}\r\n\r\nexport class OrderItem {\r\n    product: BoxId;\r\n    pack: BoxId;\r\n    quantity: any;\r\n    point: any;\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            pack: observable,\r\n            quantity: observable,\r\n            point: observable,\r\n            subAmount: computed\r\n        });\r\n    }\r\n\r\n    get subAmount() {\r\n        return this.quantity * this.point;\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, EasyDate } from \"tonva-react\";\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { tv, List } from \"tonva-react\";\r\nimport { OrderItem } from './pointOrder';\r\nimport { PointProductImage } from 'tools/productImage';\r\n\r\nconst OrderState: { [state: string]: string } = {\r\n    '$':'$',\r\n    'matching':'matching',\r\n    'shipping':'配送中',\r\n    'canceled':'此订单已取消',\r\n}\r\n\r\nexport class VExchangeHistoryDetail extends VPage<CPointProduct> {\r\n\r\n    async open(order: any) {\r\n\r\n        this.openPage(this.page, order);\r\n    }\r\n\r\n    private renderexchangeItem = (orderItem: OrderItem) => {\r\n        let { product, pack, quantity, point } = orderItem;\r\n        return <>\r\n            {tv(product, (v) => {\r\n                return <div className=\"row m-1 w-100\">\r\n                    <div title={v.description} className=\"col-4 m-0 p-0\"><PointProductImage chemicalId={v.imageUrl} className=\"w-100\" style={{maxHeight:\"23vw\"}} /></div>\r\n                    <div className=\"col-8 small\">\r\n                        <div><label>{v.descriptionC}</label></div>\r\n                        <div className=\"d-flex justify-content-between my-3\">\r\n                            <div className=\"mt-1\"><b>{pack ? <>{tv(pack, (c) => <>{c.radioy}{c.unit}</>)}</> : v.grade}</b></div>\r\n                            <div>\r\n                                <span className=\"text-danger h6\">{(point * quantity)}</span>\r\n                                <small className=\"text-muted\">分 ({point} × {quantity})</small>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </>;\r\n    }\r\n\r\n    private page = (order: any) => {\r\n        let { outWardOrderByJD, openExchangeOrderTrack } = this.controller;\r\n        let { brief, data } = order;\r\n        let { no, date,state } = brief;\r\n        let { exchangeItems, shippingContact, amount } = data;\r\n        let orderState: string = state === 'canceled' ? '此订单已取消' : ''; // OrderState[state || '$'];\r\n        let header = <>订单详情: {no}</>;\r\n        let OrderTrackBtn: any;\r\n        if (outWardOrderByJD)\r\n            OrderTrackBtn = <div className=\"bg-white p-3 my-1 d-flex justify-content-end\">\r\n                <button className=\"btn btn-primary\" onClick={openExchangeOrderTrack}>查看物流</button>\r\n            </div>;\r\n        return <Page header={header}>\r\n            <List items={exchangeItems} item={{ render: this.renderexchangeItem }} />\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">收货地址:</div>\r\n                <div className=\"col-9\">{tv(shippingContact)}</div>\r\n            </div>\r\n            <div className=\"bg-white row no-gutters p-3 my-1\">\r\n                <div className=\"col-3 text-muted\">下单时间:</div>\r\n                <div className=\"col-9 text-right\"><EasyDate date={date} /></div>\r\n            </div>\r\n            <div className=\"bg-white p-3 my-1 d-flex justify-content-between\">\r\n                <strong>{ orderState }</strong>\r\n                <span className=\"text-danger font-weight-bold\">总积分: {amount}</span>\r\n            </div>\r\n            {OrderTrackBtn}\r\n        </Page>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, EasyDate } from \"tonva-react\";\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { List } from \"tonva-react\";\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nexport class VExchangeHistory extends VPage<CPointProduct> {\r\n\r\n    private exchangeHistory: any[] = [];        /*积分产品列表 */\r\n    async open(param?: any) {\r\n        this.exchangeHistory = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderExchangeHistory = (pointProduct: any, index: number) => {\r\n        let { openOrderDetail } = this.controller;\r\n        let { id, no, date } = pointProduct;\r\n        return <div className=\"p-3 justify-content-between\">\r\n            <div className=\"mr-5\" onClick={() => openOrderDetail(id)}><span className=\"small text-muted\">兑换单号: </span><strong>{no}</strong></div>\r\n            <div className=\"small text-muted\"><EasyDate date={date} /></div>\r\n        </div>;\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return <Page header=\"兑换历史记录\">\r\n            <List items={this.exchangeHistory} item={{ render: this.renderExchangeHistory }} none=\"暂无记录\"></List>\r\n        </Page>;\r\n    });\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Scroller } from \"tonva-react\";\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { List } from \"tonva-react\";\r\nimport { observer } from 'mobx-react-lite';\r\n// import moment from 'moment';\r\nimport { renderPointRecord } from './VMyPoint';\r\nimport { RevenueExpenditure } from './basicRefer';\r\n\r\nexport class VRevenueExpenditure extends VPage<CPointProduct> {\r\n    private showList: any = [];\r\n    private tipNone: string = '『 无 』';\r\n    async open(param?: any) {\r\n        this.matchData(param);\r\n        this.openPage(this.page, { header: param });\r\n    }\r\n\r\n    /* private renderItem = (item: any) => {\r\n        let { date, comments, point } = item;\r\n        let generateDate = moment(date).format('YYYY-MM-DD HH:mm:ss');\r\n        return <div className=\"d-flex w-100 justify-content-between align-content-center px-3 py-2\">\r\n            <div>\r\n                <div className=\"text-muted\"><small><b>{comments}</b></small></div>\r\n                <div style={{ fontSize: \"40%\" }} className=\"text-muted\">{generateDate}</div>\r\n                <div style={{ fontSize: \"40%\" }} className=\"text-muted\"><EasyDate date={date}></EasyDate></div>\r\n            </div>\r\n            <div className=\"d-table h-100\">\r\n                <div className=\"font-weight-bolder h-100 d-table-cell align-middle\" style={{ color: \"#ff0000\" }}>{point >= 0 ? '+' : ''}{point}</div>\r\n            </div>\r\n        </div>\r\n    } */\r\n\r\n    private matchData = (header: string) => {\r\n        let { pagePointHistory, cApp } = this.controller;\r\n        let { POINTHISTORY, SIGNINHISTORY } = RevenueExpenditure;\r\n        switch (header) {\r\n            case POINTHISTORY:\r\n                this.showList = pagePointHistory;\r\n                this.tipNone = '『 未曾拥有过 不曾失去过 』';\r\n                return;\r\n            case SIGNINHISTORY:\r\n                this.showList = cApp.cSignIn.signinPageHistory;\r\n                this.tipNone = '『 从未得到过 开启首签之旅 』';\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    protected onScrollBottom = async (scroller: Scroller) => {\r\n        this.showList.more();\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { header } = param;\r\n        // this.matchData(header);\r\n        let none = <div className=\"mt-4 text-secondary d-flex justify-content-center\">{this.tipNone}</div>;\r\n\r\n        return <Page header={header} onScrollBottom={this.onScrollBottom}>\r\n            <List items={this.showList} item={{ render: renderPointRecord }} none={none} />\r\n        </Page>;\r\n    });\r\n}\r\n","export default __webpack_public_path__ + \"static/media/giftPlate.c5dd75b1.png\";","import * as React from 'react';\r\nimport { VPage, Page, FA, tv, Form, UiSchema, UiCustom } from \"tonva-react\";\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { MinusPlusWidget } from 'tools';\r\nimport { schema, TopicDivision } from './VPointProduct';\r\nimport giftPlate from 'images/giftPlate.png';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport 已下架 from 'images/已下架.png';\r\n\r\nexport class VPointProductDetail extends VPage<CPointProduct> {\r\n    DetailSource: number;\r\n    constructor(c: CPointProduct) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            DetailSource: observable,\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        this.DetailSource = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            product: { visible: false },\r\n            // pack: { visible: false },\r\n            quantity: {\r\n                widget: 'custom',\r\n                label: null,\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget,\r\n                onChanged: this.controller.onQuantityChanged as any\r\n            } as UiCustom,\r\n            newStockRes: { visible: false },\r\n            pointProductSource: { visible: false },\r\n            // point: { visible: false },\r\n            // imageUrl: { visible: false },\r\n        }\r\n    }\r\n\r\n    private renderVDefaultPost = () => {\r\n        return this.controller.renderVDefaultPost();\r\n    }\r\n\r\n    protected renderPointProduct = () => {\r\n\r\n        let { pointProductsDetail, cApp } = this.controller;\r\n        let { currentUser } = cApp;\r\n        let { product, OffShelf, newStockRes } = pointProductsDetail;\r\n        let OffShelfTip: any = undefined;\r\n        if (OffShelf) OffShelfTip = <div className=\"position-absolute\" style={{ top: 0, left: 0 }}>\r\n            <img src={已下架} alt=\"\" style={{ width: '18vw' }} />\r\n        </div>;\r\n        // let stockDesc: string = newStockRes ? newStockRes.stockStateDesc :'';\r\n        return <>\r\n            {tv(product, (v) => {\r\n                return <div className=\"w-100 px-4 position-relative\">\r\n                    {OffShelfTip}\r\n                    <div title={v.description}><PointProductImage chemicalId={v.imageUrl} className=\"w-100 h-min-12c\" style={{}} /></div>\r\n                    <div className=\"small\">\r\n                        <div className=\"mt-2\">{v.descriptionC}</div>\r\n                        <div className=\"my-2\">{v.grade}</div>\r\n                        {/* <div className=\"my-2\">{v.grade}<span className=\"float-right text-success font-weight-bolder\">{stockDesc}</span></div> */}\r\n                        <div className=\"row m-0 p-0\">\r\n                            <div className=\"col-5 m-0 p-0\">\r\n                                <span className=\"text-danger h5\">{v.point}</span>\r\n                                <small>分</small>\r\n                            </div>\r\n                            <div className=\"col-7 d-flex justify-content-end align-items-right m-0 p-0\">\r\n                                {\r\n                                    !OffShelf && currentUser?.hasCustomer\r\n                                    ? <Form schema={schema} uiSchema={this.uiSchema} formData={pointProductsDetail} className=\"mr-2\" />\r\n                                    : null\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </>\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { pointToExchanging, myEffectivePoints } = this.controller;\r\n        let availablePoints = (myEffectivePoints - pointToExchanging) >= 0 ? (myEffectivePoints - pointToExchanging) : 0;\r\n        let pointsInsuffTip = availablePoints === 0 ? <span className=\"text-danger small\">( <FA name=\"exclamation-circle\" />积分不足 )</span> : null;\r\n        let right = this.controller.renderSelectedLable(this.DetailSource);\r\n        let footer = <div className=\"d-flex justify-content-between m-2\">\r\n            <div className=\"align-self-center\">当前可用:<span className=\"text-danger h4\" >{availablePoints}</span>分 {pointsInsuffTip}</div>\r\n        </div>;\r\n        return <Page header='产品详情' right={right} footer={footer} className=\"bg-white\">\r\n            <div className=\"\">{this.renderPointProduct()}</div>{/* nav-tabs */}\r\n            <div className=\"d-flex mt-2\"><img src={giftPlate} alt=\"\" className=\"m-auto w-75\" /></div>\r\n            {/* {pointProductsDetail.htmlFragment\r\n                ? <div className=\"mx-2 mt-1\">\r\n                    {TopicDivision('产品介绍')}\r\n                    <div dangerouslySetInnerHTML={{ __html: pointProductsDetail.htmlFragment }} className=\"w-100\"></div>\r\n                </div>\r\n                : <>{this.renderVDefaultPost()}</>\r\n            } */}\r\n        </Page>;\r\n    });\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAdAUlEQVR4Xu2dB3gU1RaAz4Q0AgnZWSAJVRTsXZ+o6AMVFAtW1IfYUFBRn4oFK4JgeZanqOxGKaKiz4oNxYYFC/aCiEI2ilJCQk0ChFDnfWfChN3Zmdkp987OzJ7zfX6fJLeee/7cufeee64AJLY0EI5UXCwJwlRbmSmTPzQgwBjBHy31VivFaMUQAOEpb7WKWsNUAwKMWTO8x10EiEWtiuWxS0CCKRazUXI/aWAHHNhkAsTCwInR2FAAmGQhCyX1mwbi4CBALAyeGKkcBoI00UIWSuo3DajgIEBMDmAoWnmZANKTJpO7kuy03VrDm3+sd6WujKhEAw4CxMTIh8orLxck6QkTSV1LgnA8dXwpXPJBNUHCQus6cBAgKZQbKo8NFySIshgDVmUocCjlESQONWsABwFioNtQJHalIEDEofqZZlfDQZA4VG8KOAgQHf2Go7GrJIAJDtXPNLseHASJTTWbgIMA0dBtuLzyakmSHrepdi7ZUsFBkFhUu0k4CBCVXsMTKq6RsoRHLaqba3I9OF6NrYOZizbIi/V4oTVJiuGwAAcBEqdLMVJxLQjCeK7WbrFwPTheWFAPV3+yQi5NKw1BoqNoi3AQIDv0KEZj1wHAIxbtl2tyPTie/q0Obpi9MqFugsTEUNiAgwABALE8NgIkeNiEil1LogfH5F/r4ObPE+FQGkWQGAyPTTgyHhAxsvAGELIecs3yTVSkB0d0bi2MmrPKsASCREM9DuDIaEDESOWNIEgPmrBZ15LowfHoT2th7NerTbWDIIlTk0M4MhaQULTyJgGkB0xZnEuJ9OB46Ic1cN+3ayy1giCR/dTl+xyWFKc5ATktwWf5Q+WVIwVJut9LzTY657j/uzXwwPfmATmpWyt56zcnK/kmQ8bsbjGCI+NmkFAkdosgwH1eggPbkuog0Cwk/boUyHAU5GTpdjHwkDCEI6MACUdjt0oA93oNDqNdqPi2poKkd6cCmHp8KbTJS4QDXeIRQEUCDQhjODIGkHA0dpsEcI9X4XAKyRFlLeHpE0qhbcsWCV1EOBCIeRfsAh1aZxu6xyNE+B+m96VwgCMjAAlHK+6QQBjnxUHfI5QLC9duTmia1c+tg9vnw7P9S6GsVbYmHPjDf5Tky4DoXbCKr1OByov60m0TJzgCD4gYqRgFgjDWi4O9a5scmNa/DM5/dzksqt9iC5L92ubJcHQpzNGFI1XftYD0FSQc4Qg0IGI0dicAON7mS2Vgdn6PBo2GjQa+YM1m6Dt9CWzcKlmG5OzdCwFBixcrxu37+yWc4QgsIGJ5bDRIMMaO8fLOg59COHMc1D6vuSqEpNdLi5OqTvW5pc5AcLAfvcCF/RGjC+8CyMLZw3VJFUgBF9EIx2Gl+UltcwoJwcFnuAMFiBipGAuCMIqPqoxLTRVIAbdfEY5eHVrqFvTjikboN32p5ZmE4OA34oEBRIxWjgOQ7uCnKv2SUwVSwIO7af1LoU+nguZC8FzjvD2LoHNh4u7T+39vgPNmLjcNCcHBd8QDAUiovPJuQZJu56sq7dK11gmbtklw7jtV8PmyjbLLx7QTywBPuRVRDv1wi/alk8tAzE88v3hx4Tq46uMa05CYOfyjBbk96/A9IKFo7F4B4FZ73WeT64K9imB8n/YJhVWs3QxHvLhY/qxC/yg1HMq/j+lcAP87qQxyVb5TLCEhOOyPs68BCUVi9wkC3GK/++xyPty7PVy0d1FCgWo3Dz13ET0DfrliHQz/KPVMYjSD8IDjuoNC8PyCeli5cRs7BeqV5MJWrlEnfAtIOBr7jwRwM/8RMl/De2d2kk+ttSSVL9X5exXBo6pZCMsZ9/VqGP/TWt3PLTfhwD8AY45oC0W5WfDPlxfD/NWJXgDmNWUyZZrhwFb6EpBweeX9kiSNNKlmV5Ph59IJXXd+UmHlqeBQGnjF/sVwT6+2Se0d/O5yeO+vDZqQmHEfic9oZr2irgjBGLpvMewdzm3+1cC3q+CTJQ38dOsBOHwJiBipeBAE4UZ+I+OsZHQ3j/eexdLumLMKyufWmir4hkNEuO0wMSEtuqL0fnkJbNiyvfnnSj1aBs/is2q34hw4Y7dCOKN7a9hT3AmG0gD89MNPQC7iETh8B4gYiT0EAtzAZVAYFKoFh1Kslb/c5ceVwDm7Fya06MTXl8K31Y3yz9T1xJftFI7+u7SC07u3htN3a6156Upp1OivVsGEn81Bb0m1HoLDV4CI0dh/AeB6S8p2MbHaaPFkfNfinObdqar1W+H895bD3JWbUrZKy8hv/GwlTJ1fp3u5SnFTVweSw8qM4NwnnAuHlOTDvuE8wG3neBcYrYbibDZpXh08+Uvw4fANIGJ57GGQYERKy0pTAi040CgPLsmHCcfs3P79rqYR/vVOFdRu2vmppNXks3sUwhN9SxJ+df3sFfDMb/Xyz6z4aGE7Pl7SAB1aZUPH1tmy2zv+P7q7HNAuL+kMRk+F7yzaAC8srId3FyWvhZio3WMzh9Inzy/SxUjFeBCEa5kMAodC9OBQ7nngRaYBu+680YezAM4GRjJ9QIeEU3dMe+yrSxJmHyuQ2Ol2w5btMGd5I/xQ0wgz/lwPv6/huGPlUTg8P4OIkYpHQRCusTPAbuTp26UAJvbdec0VP6vwL3b8JSh0bX/n9I7yX24UXGjjglt9B0Rp76jDw4DnDPGi507CGpLPlm6Ez5Y1yGudH1Y0QqPKBZ+LTj0Mh6cBCUUrHxNA+jeXQbFZKC5cT1VdS0X39QeObiffy1DDoVRzyT5t4MF/tmuuVW/bFz+r8PMqXvCzrP9ryQ6MmAbbgjOY1mfAG3+sh7/qt0BBtgAts7OgZbYArXOyoDA3CxbXb4HF67bCkvVb5f9fsm4rLF6XeGnLpoqsZfM4HJ4FJFRe+bggSVdb0zbf1LjdOblfUyR1rb/oWtdnlRahYX52TmfoWtR0uUm9bduuZQvZ0I/U8PQNl1dqduzkHeF9sjXC+ygZpsfWwWWzkk/i+WrKZOk+gMOTgIQisYggwJUm1exKsjO7t4ZJO+BQKrTiRYt58GwDzzgUUXal8N+X7VcM9x2VeECIf9UPfO4vzf7hViwCldci9RJSz13FFcXpVeITODwHSDgai0oAw9M6eKrKB/YohCdVO0p6s4hRu7sX58qziGLUasDw93iKjuuaOVUbYcCbyzSLw1N6hCM/OxmOWO1m6FGcfKgX/1xC2nXrIzg8BUg4WlkugXRF2gcwrgFa26124FCKfK5/GZy4w7MXz0X2m5Y8QwzZp4183qElCA/C0UoVGE5xijz1zWWyV7H6njqWNe33erju06Y3RdImPoPDM4CI5ZVPgCRdnraB06gYT7LxRFstVj+t4vOP6hmG6w7euUNlxeHv2M5NcOAiO16wPegjhTMHAlK7aZvsYq+sd+LTar0t4prOfQiHJwARI7GJIMAw1wbKREU84MBq1eXGr0OMmoVRExGOYo2oibhztnp4dzk7AvJl1UbYv20ePHdimXwwqJYpv9bBSJ03Rkyoxl4Sn8KRdkDEaGwSAAy1p3U+uc7doxCix7KdOZSWHtguDz4a2Lm54WYW0Ed1bCnDEVbdOlRmMpw9Pj+nSwIg+A90GcFPulJVQDn8HbqJ3Pal8VsjzLTrYzjSCogYjU0GgEuZDQSDggbtWZTgGqIU6eSzKr5ZeBaxdNhuzT/6dGkDnDWjSrflGOAB4dALKYoZ4zcRlBlEKRDvpuBMos6Pv4/MrYU7UzzI41ilPocjbYCI0YqnAIQhjgeAYQEYQOHxOL8p1nBgeWpA8JXaC95LDtCAaQ8vy5fhKCnQDymK6eJP3tWA4O8xbu+0E0shlJd47x1/Z+VhHsuqDgAcaQFEjFRMBUG42LLCOWYYvGcRPMYZDmw+/iVfeHG35p68ElsHV2gc5KEj4ZR+pc3uKUawvnBSGRy/44JWn1eWwLxVyd7C+JmGC3e8CaiWh39YC/d8a+71KtNDEBA4XAdEjFY8DSBcZFrRLiTUu+rK6rMqvgvdinLg+8Fdm3+ktauEruc4c3RSLbD12vP7Rd2gfUHT7ND9qUWwdpP2PXEMOYShh7TeDsEHetD9hYkECA5XAQlFK58RQLqQySAwKuTCvYvgkd6J0UiwaB5wYLkYi/fTs3cu0tXrAFzEIxzqLVq99uxSlAM/7ABu/Zbt0HXyn4aawXOUZ/uXJZzAo7/WkA+q4RcT91RSqj1gcLgGSCgamyYAnJ9SwS4mwHvWGIlELbzgwHpwPXB0x8TIisrzavvvgANnmXgxag86T045vsk/TC90qbp/6KbyzAmlgD5ceC9l8LtV8PXyppuKjiSAcLgCSDgSe04SYLAj5TPOfPHebeC/vXd61yrF84TDqAt4mw9nDrwHbhYOTDfmiDD8+8Cmg8cPFzfIl7HMCDo64kzCLPBCQOHgDkg4GnteAjjPzKC5lQZdOR6Kcz1PNxx7ibkyHLuHEn2ozMD65qkdARfgKE/Nr4ObUlzEitdxqkDbpscjwHBwBUQsr/wfSNIg04p2IaH6Xka64cD6taKYmIEDDw5/PL+rfMcD5fYvV8ETPO6JG41LwOHgBogYjb0IAOe6YPOmq7h03zbyxSa1mDFG05XYTBgfD8tse9Rb0+oruTabYj5bBsDBBRAxEnsJBDjHvKb5pxy6bxu436NwKL3H7WZ0SDT7iGa8Z/Dqxm2w+9RF/BWp1JAhcDAHRIzGXgaAs90bqdQ1DduvDfznqPTOHHiKfVyXAsDF8dhvVsOiOmfXW/HuyDeDmvyvUDDSCIYUckUyCA6mgIjlsVdAgoGuDJLJSrRu6mFWfA1wyPvVcrQOHoLXb3uW5cMp3VrLYMSLlQByem275qAQjD483Pzru75eDY9pxO9l3rcMg4MZIGK0YjqAcCbzAXFQ4OX7F8O9GnFulSI3b5dkSLRi3lqpFhfL6FG7b9s8eYbAsw4jGf/jWhj3jTPXjplndIKecc+4nfT6UvhmR9RFK223lDYD4WACiBipeA0E4QxLyuacWC8ItLpajP104fvVloIwIwz7iHkyFH06F8h3L6zIrMUN8uM6dgXfE3n1lA7N2StrN0PPF5IfALVbvma+DIXDMSChaOx1AeB0poPhsLArDyiGcUcmR0jXK7Z+83b5rXK8aKQWdC7EQzwMz7lPOA8OLclPOsyz2twVDdtgr2fsL6jVoYEe/3ktjPnK2Yxk2IcMhsMRIKHy2BuCBKdZNRCe6a86oBjGasCBUQHxQE5PcBdo8MzlgDGoUO46om0zFIojoJN2123aDn/WbYGl67fA0nVb5WjvdkS9OMcyTn5jKRtXEa0GZTgctgEJR2JvSQIMsDPIvPJcfWCxbNhqQSe8yz+qAQzdc9Ohic8KxKetadgKg2Y2BZdWhws102aMQlhZtxn+rN0iw/BHHBDL1m8FfLfQqWD/sJ+KrNq4DfZ42v5sRDNH6hFJHVhJVUY4GpshAZySumj3UqA/EvolqeX7mkb5voUS5vPWw0S4MS42lTo9GvKgmVVwRvdCGBEXXEGrJ7hV+/XyjfBtTaMcqhOdBXkKxoerGNIt4eITt88rmjmah9ICIJIgRv+YASCdzNMQrJat3vJU8mNsqSs+qgE0+nhRB3BT14fu33g3Qh3RBGH7avlG+XPmu+pGwM8yN0V55alTYXbzxadeLy1mDybBkTCs5gAZI2WJJX/MAEk6yU2jSFUXBnnGK6dqmb20AS6fVaP7yOQdPcOGMwTOOPhK7VdVTVAgHF4SXBeVFmTDLxq3Bx21k+BIUl9qQF6WWogrK98GAfo7Uj7jzBhfCuNMqQXdvq+YVZ3yDQ51jCp1OT+t2ATDZlU7PvVm3G1+xREcmro1BuQTKVv8vfJtADiB38hYLxnXBzgLqAWDIOCCHM83zMidh4fhWtVTA/H5cOt32Ic1gAv4QAvBoTu8+oCMmZ8rts+dAQDHe8k4rj8kBLcflgzH65Xr5TfFt2y3tluELhu4jtGT9//eAJd9WAN4pTWQQnAYDqs2II/F8sQcmAES9POSUWjdncD2mQnAZtQP9fapOi3CN+zDatmHK1BCcKQcziRAdpm6KL++YcvbIAjHpcztYgLcnsVtWrU893s9XMsgKDMeMOJBo548v6AervkkzcGfWeqb4DClzQRAOj28pGVDfiOuOY41ldulRCMPFeHmfyTDYfWaaarm3n1kWxhuAMnEebVw6xf2TsFT1e3q7wkO0+puBqTkwbmtNrcqmCEAHGM6twsJ0XUc72yrH7PnFV8W3+hAZ0c9YeGN64La9KsgOCypXwakXWR+6+1ZuTMkCfpYyu1SYjUk3E6Qd/QHX3vCuyR6gpEIMSKh74TgsDxkQtspCwq3N7bAc45/Ws7tYgYFEtzKZR4qU6MfeAsRbyPqCUZHx1nMN0Jw2BoqQYxWfgYgHW0rt8uZjB7K5NEUDPKAwR70BF9swpebPC8Eh+0hEsRoLHC7l7a1oZExFSS4/ftaJZ+ru0z6QXA4UqNnAGEWyMyROrQzY6A5DDinJXhqP/TDGsADRc8JweF4SDwBCMKBO1UsAho41ohOARiqFEOWasnKjdvg0g+qNW8l8mpPynIJjpQqMpMg7YAocCiN9TIkGOwa3c61BN3kEZKfWURJNzNyRmkIDqcabM6fVkDUcPgBEnxm+YK9tCH5bfVmeRbE98rTJgQHU9WnDRA9OPwAyaN92gNGQtQSvNeOM4n6ohbTUdMrjOBgrua0AJIKDj9Agu8Z4ruGWoIXtnAmwfc3XBOCg4uqXQdEDw4M2oy/U4uX1yQTjmkP+DKuluCBJrbdqvu9rVEmOGypzUwmVwFJtebAnSy/QYJvquPb6lri1A3fzAACwWFKTXYTuQZIKjiUDvgREgzwcM7u2pBMnV8HN1p42MbSQBIcltRlJ7ErgJiFw8+QqCMexg/GhJ9rYfRXjN3kCQ479m45D3dArMLhZ0ie7FsCA3tozyQYSkh5sNPyKKkzEByOVWi2AK6A2IXDz5BM6lcqR3GMF4ydiy76TITgYKJGs4VwA8QpHH6GZHK/UjhjByQjP18JU36tMzsexukIDjZ6tFAKF0BYweFnSHCzAWN0vbCAkTs8wWHBrNklZQ4Iazj8DAmzYSI4mKnSakFMAeEFR0ZDQnBYtWmm6ZkBwhuO+O96LQ14+cTd9ogRHLZVxyojE0B4wzGxbwmcpbN9Gq+IVJCUFGRD47btgA/aeF4IDk8MkWNAeMOhdwCn9t3Cf+u9MY5g4D0O/A8DwN377RpPKF+3EQSHZ8bHESC84dBz4VBgUNxS9OCIB6O0Vbas9I1bJbhsVjWgM6EnheDw1LDYBoQ3HJFjS+BfGk6AahiUq7paWj2gXR58PLBz0q/wzY/B7y733qcWweEpOLAxtgDhDYeeG7nRZ5SeZvUe2Xnil1q4/UvG/lFOhpfgcKI9bnktA8IbjseOaQ+DNe5Y2IFD0dr0AR2gT6eCJCVe8N5yb3xqERzcDNxpwZYA4Q2H3n1vJ3Cggrq1yYFZZ3WG4rysBH3NW7UJTntrWXo/tQgOpzbMNb9pQHjDoRcxxCkcivYwZA+G7lFLWj+1CA6uxs2icFOA8IZDLzAbKzgURWkFW8DAbwc9/zfgm+OuCsHhqrrtVpYSEN5w6IX2ZA0HKqhtyxaA65F9w3kJ+mLqcWtmJAgOM1ryRBpDQHjDcf/R7WCoRnBoHnAo2sbDQvycixd8rPPUN5e5MyAEhzt6ZlSLLiC84dB7g4MnHIrOVg/vnh5ACA5GZuteMZqA8IZD7xUnN+BA1aYFEILDPatmWJPuDKKOLpLKEdBsm8Yd2Rau1HgH0C048DosXouNF3zFduiH1Wa7YD0dwWFdZx7JYbgGUSBhBYfec8tuwRHObwGvnZq8SB80czl8wOv5AoLDI6ZurxmmdrHQgPUEX6A1E61j9OFhuOagUFIxbsGBFT/Suz1cqIrOjtHYj3t1iT3tpcpFcKTSkOd/nxIQox4c37UVvHBSmfxWH77ZpyejDg8D+kSpxU048I11fGtdLX2nL4GfVmxiP1AEB3udpqFE24DsHc6F1wd0lM8WUF5cuA5GfLoCNm9PfNHtjp5hGHFweuHQA3Tg21XwyZIG9monONjrNE0l2gKkKDdLfhHqmM6JDoDvLtoA181e0XwqfdthItyg8VfbzZlDb92Dn4UYzI25EBzMVZrOAm0Bgg3Wi6GLh24jZq+As3sUwk2HJn/SuAnHvb3awuX7J793jm+cc3lKmuBIpy1zqds2IEaQ/Lp6U5I7B6Z3Ew49F5bxP62FcV+vZq9MgoO9Tj1QoiNAjCBJ54Jca7cK24PhPzEMKHMhOJir1CsFOgbEDCRuzhx6Lz9F59bCqDkcbhASHF6xZS7tYAKIESRuwqEX5GHivFq49QuCg4sFBbxQZoAYQeLGS0t6geUwcDS6szMXmjmYq9SLBTIFxAiSZ3+rl3e3eMgzJ5TCKbsmv2/I7XUngoPHMHqyTOaAGEEyaV4d3PIF27/mz59YBv13aZWk3Kd/q4MbZrOtS66E4PCkIfNqFBdAjCBhuZP00skdoG+X5GglT82vg5t4vAtIcPCyQ8+Wyw0QI0ge+mEN3Ocw/OdrAzpAb41QPpN/rYObac3hWYPzW8O4AmIEyd3frIZHfrT3LNlbp3WEXh1aJumadqv8Zn7eby93QIwguWPOKiifW2tJS3pwcAvfQ59VlsYnaIldAcQIEnxDHHebzIgeHHQIaEZ7lMaOBlwDxAiSqz6ukd3ljUQPDi5vkNNulR1bCmQeVwExguTSD6rhDZ2bi3pwPPrTWhhLjoeBNEyvdMp1QIwgGf/jWhj3zU5nwi6FOTDh2PaaC3J1WmYKpTUHM1UGoaC0AGIESe2m7fB3/RZonZMFnQqzIa+FkKRnus8RBNPzRx/SBogRJEaqY3GGolk+zRz+sFiXW5lWQLCveo/laOkBr8iaiaBiWYcEh2WVZUqGtAOCih60ZxGMPDQEuObQkgVrNsuL8fd5xK4iODLF1m310xOAYMsRjsv2awNHdmgJ+LYgytyVm2BO1UZ4/OdaqGnYaquDhpkIDvY6DViJngEkXq8dWje9SFu1ngMUSkUER8BMmU93PAkIn67GlUpwcFdxUCrIPEAIjqDYriv9yCxACA5XjCpIlWQOIARHkOzWtb5kBiAEh2sGFbSKgg8IwRE0m3W1P8EGhOBw1ZiCWFlwASE4gmivrvcpmIAQHK4bUlArDB4gBEdQbTUt/QoWIARHWowoyJUGBxCCI8h2mra+BQMQgiNtBhT0iv0PCMERdBtNa//8DQjBkVbjyYTK/QsIwZEJ9pn2PvoTEIIj7YaTKQ3wHyAER6bYpif66S9ACA5PGE0mNcI/gBAcmWSXnumrPwAhODxjMJnWEO8DQnBkmk16qr/eBoTg8JSxZGJjvAsIwZGJ9ui5PnsTEILDc4aSqQ3yHiAER6baoif77S1ACA5PGkkmN8o7gBAcmWyHnu27NwAhODxrIJnesPQDQnBkug16uv/pBYTg8LRxUOMA0gcIwUH25wMNpAcQgsMHpkFNRA24DwjBQZbnIw24CwjB4SPToKa6O4MQHGRxPtSAOzMIweFD06AmuzODEBxkaT7WAN8ZhODwsWlQ0/nOIAQHWVgANMBnBiE4AmAa1AU+MwjBQZYVIA2wnUEIjgCZBnWF7QxCcJBFBVADbGYQgiOApkFdYjODEBxkSQHWgLMZhOAIsGlQ15zNIAQHWVAGaMDeDEJwZIBpUBftzSAEB1lOBmnA2gxCcGSQaVBXrc0gBAdZTAZqwNwMQnBkoGlQl83NIAQHWUoGa8B4BiE4Mtg0qOvGMwjBQRZCGtAJ+0NwkGmQBmQNJH9iERxkGqSBZg0kAkJwkGmQBhI0sBMQgoNMgzSQpIEmQAgOMg3SgKYGBLE8NnrN8B53kX5IA6SBZA38H3D5Cp7TFBi2AAAAAElFTkSuQmCC\"","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from \"tonva-react\";\r\nimport { observer } from 'mobx-react';\r\nimport { CPointProduct } from './CPointProduct';\r\n\r\nexport class VSelectedLable extends View<CPointProduct> {\r\n\r\n    render(param?: any): JSX.Element { \r\n        return <this.content param={param} />\r\n    };\r\n\r\n    private content = observer((param?: any) => {\r\n        let { pointProductsSelected, openSelectedPointProduct } = this.controller;\r\n        let { length } = pointProductsSelected;\r\n        let count = 0\r\n        let badge, onClick:any, pointer;\r\n        if (length) {\r\n            for (let i of pointProductsSelected) {\r\n                count += i.quantity;\r\n            }\r\n        }\r\n        if (count > 0) {\r\n            onClick = openSelectedPointProduct;\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n        return <div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={()=>{if(onClick){onClick(param.param)}}}>\r\n            <div>\r\n                <span className=\"fa-stack\">\r\n                    <i className=\"fa fa-square fa-stack-2x text-white\"></i>\r\n                    <i className=\"fa fa-shopping-cart fa-stack-1x text-info\"></i>\r\n                </span>\r\n                {badge}\r\n            </div>\r\n        </div>\r\n    });\r\n}","export default __webpack_public_path__ + \"static/media/infb.a542e5de.jpg\";","import * as React from 'react';\r\nimport { View } from \"tonva-react\";\r\nimport { CPointProduct } from './CPointProduct';\r\nimport infb from 'images/infb.jpg'\r\n\r\nexport class VDefaultPost extends View<CPointProduct> {\r\n\r\n    render(): JSX.Element {\r\n        return <this.content />;\r\n    }\r\n\r\n    private content = (): any => {\r\n        return <div className=\"pt-2 px-2 bg-white\">\r\n            {/* <div className=\"border-bottom border-danger h5 py-1 mb-2\">公司概况</div> */}\r\n            <div style={{ textIndent: '2em' }}>\r\n                <p>百灵威科技有限公司是一家致力于研发和生产化学及相关产品，集敏捷制造、全球营销和现代物流为一体的高科技企业。百灵威在中国内地、香港，欧洲及北美等多个国家和地区设有物流中心，实行专业化、个性化的一站式服务，为全球超过200,000 名科技和工业领域的客户提供产品资源及配套技术服务。</p>\r\n                <p>百灵威现代化的研发制造基地拥有一支富有创造天赋的专业团队，新技术、新产品层出不穷，J&K®、Amethyst®、J&K Scientific® 产品已多达30,000 种以上，并呈几何级数增长。作为国际化的资源平台公司，百灵威致力于促进全球产业链的合作，不断推进集约式发展，集成资源600,000 余种，包括高纯有机试剂、无机试剂、生化试剂、分析试剂、标准品、金属有机催化剂、医药中间体、超精细材料、以及实验室仪器、耗材等众多产品。百灵威的柔性生产线能够快速提供小批量、多品种的原料，满足实验、中试以至规模化生产的需要。</p>\r\n                <p>百灵威秉承“诚实守信、开拓创新、合作共赢、实现卓越”的价值观，致力于与化学、生物医药、精细化工、食品工业、现代农业、电子、日化、石化、纺织、生命科学、环境保护、疾病控制、新能源、新材料、航空航天等领域的客户建立互信、长久的合作关系，为实现“促进科技与工业发展，造福人类”的使命而不懈努力！</p>\r\n                <img alt=\"\" src={infb} className=\"w-100\" />\r\n            </div>\r\n        </div >\r\n    };\r\n}\r\n","import React from 'react';\r\nimport { VPage, Page, FA, Form, ItemSchema, UiSchema, Context, StringSchema, UiTextAreaItem, ButtonSchema, UiButton } from \"tonva-react\";\r\nimport { CPointProduct } from \"./CPointProduct\";\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VPointDoubt extends VPage<CPointProduct> {\r\n\r\n    private form: Form;\r\n    tip: string;\r\n\r\n    constructor(c: CPointProduct) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            tip: observable\r\n        });\r\n    }\r\n\r\n    async open(params: any) {\r\n        this.openPage(this.page, params);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'question', type: 'string' } as StringSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            question: {\r\n                widget: 'textarea', label: '请在此描述您遇到的积分问题：', rules: (value: string) => {\r\n                    if (!value) return \"请填写您的问题描述！\";\r\n                }\r\n            } as UiTextAreaItem,\r\n            submit: { widget: 'button', label: '提交', className: \"btn btn-primary w-50\" } as UiButton\r\n        }\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        console.log(context.data);\r\n        this.tip = \"感谢您提交问题，我们将尽快为您处理！\";\r\n        setTimeout(() => { this.tip = undefined; this.closePage() }, GLOABLE.TIPDISPLAYTIME);\r\n    }\r\n\r\n    private saveMainAccount = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick('submit');\r\n    }\r\n\r\n    private applyAuditUser = async () => {\r\n        await this.controller.applyAuditUser();\r\n        this.tip = \"催促成功，我们将尽快为您处理！\";\r\n        setTimeout(() => { this.tip = undefined; this.closePage() }, GLOABLE.TIPDISPLAYTIME);\r\n    }\r\n\r\n    private tipsUI = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tip) {\r\n            tipsUI = <div className=\"small text-danger\">\r\n                {this.tip}\r\n            </div>\r\n        }\r\n        return tipsUI;\r\n    })\r\n\r\n    private page = (param: any) => {\r\n\r\n        let content = undefined;\r\n        let { currentUser, currentCustomer, webUsers } = param;\r\n        if (!currentCustomer) {\r\n            content = <>\r\n                <div className=\"alert alert-primary Card\" role=\"alert\">\r\n                    <h5><FA name=\"question-circle\" className=\"mr-3\"></FA>账户审核中</h5>\r\n                    <div className=\"card-body\">\r\n                        <p>您的账号正在审核中，审核通过后，积分方可正确显示，请您耐心等待！</p>\r\n                        <p>您也可以点击以下按钮催促审核：</p>\r\n                        <div className=\"d-flex flex-column align-items-center\">\r\n                            <button className=\"btn btn-primary w-50 mb-2\" onClick={this.applyAuditUser}>催促审核</button>\r\n                            {React.createElement(this.tipsUI)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        } else {\r\n            switch (webUsers.length) {\r\n                case 0:\r\n                    break;\r\n                case 1:\r\n                    content = <>\r\n                        <div className=\"alert alert-primary Card\" role=\"alert\">\r\n                            <h5><FA name=\"question-circle\" className=\"mr-3\"></FA>问题提交</h5>\r\n                            <div className=\"card-body\">\r\n                                <p>您可以在这里提交遇到的积分问题，我们将尽快为您解决！</p>\r\n                            </div>\r\n                        </div>\r\n                        <Form ref={v => this.form = v} schema={this.schema} uiSchema={this.uiSchema} formData={{}}\r\n                            onButtonClick={this.onFormButtonClick}></Form>\r\n                        <div className=\"d-flex flex-column align-items-center\">\r\n                            <button type=\"button\" className=\"btn btn-primary w-50 mb-2\" onClick={this.saveMainAccount}>提交</button>\r\n                            {React.createElement(this.tipsUI)}\r\n                        </div>\r\n                    </>\r\n                    break;\r\n                default:\r\n                    content = <>\r\n                        <div className=\"alert alert-primary Card\" role=\"alert\">\r\n                            <h5><FA name=\"question-circle\" className=\"mr-3\"></FA>多账户冲突</h5>\r\n                            <div className=\"card-body\">\r\n                                <p>系统检测到您可能在百灵威注册了以下多个账户，积分可能存在其他账户中，请登录其他账号查看积分是否正确: </p>\r\n                            </div>\r\n                            {React.createElement(this.tipsUI)}\r\n                        </div>\r\n                        <ul>\r\n                            {webUsers.filter((u: any) => u.id !== currentUser.id).map((u: any) => {\r\n                                let { id, name, firstName, lastName, organizationName } = u;\r\n                                let title = name || ((firstName || '') + (lastName || '')) || '';\r\n                                title += organizationName ? \"(\" + organizationName + ')' : '';\r\n                                return <li key={id}>\r\n                                    {title}\r\n                                </li>\r\n                            })}\r\n                        </ul>\r\n                    </>\r\n                    break;\r\n            }\r\n        }\r\n        return <Page header=\"积分问题解决\">\r\n            <div className=\"bg-white p-3\">\r\n                {content}\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n/*\r\n                    (this.uiSchema.items.main as UiRadio).list = webUsers.map((u: any) => {\r\n                        let { id, name, firstName, lastName, organizationName } = u;\r\n                        let title = name || ((firstName || '') + (lastName || '')) || '';\r\n                        title += organizationName ? \"(\" + organizationName + ')' : '';\r\n                        return { value: id, title: title }\r\n                    })\r\n                    content = <div className=\"bg-white p-3\">\r\n                        <div className=\"alert alert-primary Card\" role=\"alert\">\r\n                            <h5>\r\n                                <FA name=\"question-circle\" className=\"mr-3\"></FA>多账户冲突\r\n                        </h5>\r\n                            <div className=\"card-body\">\r\n                                <p>\r\n                                    系统检测到您在百灵威注册了以下多个账户，请选择其一作为您的常用账户，\r\n                                选定后，您的积分将在<span className=\"text-danger\">24小时内</span>同步在该常用账户中。\r\n                            </p>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <Form className=\"my-3\"\r\n                                ref={v => this.form = v}\r\n                                formData={{ main: 24 }} schema={this.schema} uiSchema={this.uiSchema}\r\n                                onButtonClick={this.onFormButtonClick} />\r\n                            <div className=\"d-flex justify-content-center\">\r\n                                <button className=\"btn btn-primary w-50\" onClick={this.saveMainAccount}>确认</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n*/","import * as React from 'react';\r\nimport { VPage, Page, List } from \"tonva-react\";\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport classNames from 'classnames';\r\nimport moment from 'moment';\r\n\r\nexport class VExchangeOrderTrack extends VPage<CPointProduct> {\r\n    orderTrack: any[] = [];\r\n    \r\n    constructor(c: CPointProduct) {\r\n        super(c);\r\n        makeObservable(this, {\r\n            orderTrack: observable\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        if (param) {\r\n            let { orderTrack } = param;\r\n            this.orderTrack = orderTrack;\r\n        };\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderOrderTrack = () => {\r\n        if (!this.orderTrack.length) return <div className=\"text-center my-5 py-4\">暂无物流信息</div>;\r\n        let rwOrderTrackContent = (content:string) => {\r\n            let res = content.match(/[1][3,4,5,6,7,8,9][0-9]{9}/);\r\n            let result = content;\r\n            if (res) result = `${content.slice(0,res['index'])}<span style=\"color:#fd7306\">${res[0]}</span>${content.slice(res['index'] + 11, content.length)}`;\r\n            return result;\r\n        };\r\n\r\n        let rwOrderTrackMsgTime = (msgTime: string, showCur: boolean) => {\r\n            return <><span className={classNames(showCur ? 'h6 font-weight-bolder' : '')}>{moment(msgTime).format('MM-DD')}</span><br /><span>{moment(msgTime).format('HH:mm')}</span></>;\r\n        };\r\n\r\n        return <div className=\"bg-light rounded-lg py-2 px-3\">\r\n            <ul className=\"status-list list-unstyled pl-5 pt-4\">\r\n                {   this.orderTrack.sort((a: any, b: any) => new Date(b.msgTime).valueOf() - new Date(a.msgTime).valueOf()).map((v: any, index: number) => {\r\n                    return <li className={classNames('position-relative pb-4 mt-1 mb-2', index === 0 ? 'text-dark font-weight-bolder' : 'text-muted small')}\r\n                        key={index} style={{ borderLeft: '1px solid #d9d9d9' }}>\r\n                        <div className=\"px-2 pb-1 position-absolute small text-right\" style={{ left: index === 0 ? -62 : -52, top: -18 }}>\r\n                            {rwOrderTrackMsgTime(v.msgTime, index === 0 ? true : false)}</div>\r\n                        <div className=\"px-2\" dangerouslySetInnerHTML={{ __html: `${rwOrderTrackContent(v.content)}` }}></div>\r\n                    </li>\r\n                })}\r\n            </ul>\r\n        </div>;\r\n    };\r\n\r\n    private page = observer(() => {\r\n        return <Page header='物流信息'>\r\n            <div className=\"p-2\">{this.renderOrderTrack()}</div>\r\n        </Page>\r\n    });\r\n};","export async function FetchPost(url: string, data: any) {\r\n    return await window.fetch(url, {\r\n        method: 'post',\r\n        body: data,\r\n        headers: {\r\n            'Accept': 'application/x-www-form-urlencoded',\r\n            'Content-Type': 'application/json',\r\n        }\r\n    });\r\n}","import * as React from 'react';\r\nimport { BoxId, RowContext, nav, User, QueryPager } from \"tonva-react\";\r\nimport { CUqBase } from 'CBase';\r\nimport { observable, makeObservable } from 'mobx';\r\nimport { VPointProduct, VSelectedPointProduct } from 'pointMarket/VPointProduct';\r\nimport { VExchangeOrder } from './VExchangeOrder';\r\nimport { VMyPoint } from './VMyPoint';\r\nimport { CSelectShippingContact } from 'customer/CSelectContact';\r\nimport { OrderSuccess } from './OrderSuccess';\r\nimport { pointOrder, OrderItem } from './pointOrder';\r\nimport { VExchangeHistoryDetail } from './VExchangeHistoryDetail';\r\nimport { VExchangeHistory } from './VExchangeHistory';\r\n// import { VPlatformOrderPoint } from './VPlatformOrderPoint';\r\nimport { VRevenueExpenditure } from './VRevenueExpenditure';\r\nimport { VPointProductDetail } from './VPointProductDetail';\r\nimport { VSelectedLable } from './VSelectedLable';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { VDefaultPost } from './VDefaultPost';\r\nimport moment from 'moment';\r\nimport { VPointDoubt } from './VPointDoubt';\r\nimport { VExchangeOrderTrack } from './VExchangeOrderTrack';\r\nimport { FetchPost } from 'tools/wFeatch';\r\nimport { CApp } from 'CApp';\r\n\r\nexport const topicClump = {\r\n    productGenre: '产品分类',\r\n    newRecommend: '新品推荐',\r\n    hotProduct: '热门产品',\r\n}\r\n\r\nexport const OrderSource = {\r\n    EXCHANGEORDER: '兑换订单',\r\n    PRIZEORDER: '奖品订单',\r\n}\r\n\r\nexport const PointIntervals: { [state: string]: any } = {\r\n    'below': { startPoint: 0, endPoint: 10000 },\r\n    'firstLevel': { startPoint: 10000, endPoint: 50000 },\r\n    'twoLevel': { startPoint: 50000, endPoint: 150000 },\r\n    'above': { startPoint: 150000, endPoint: Infinity },\r\n}\r\n\r\nexport const PointProductDetailLevel = {\r\n    DIRECT: 3,\r\n    INDIRECT: 4,\r\n}\r\n\r\nexport class CPointProduct extends CUqBase {\r\n\r\n    myPoints: any[] = [];                  /* 我的积分 */\r\n    myEffectivePoints: number = 0;         /* 我的积分(计算后) */\r\n    myTotalPoints: number = 0;             /* 我的积分(计算后) */\r\n    myPointTobeExpired: number = 0;        /* 我的快过期积分 */\r\n\r\n    navCloseByOrderSuccess: number = 0;    /* 兑换成功后关闭页面层数 */\r\n    themeName: any = '积分商城';\r\n    pointProducts: any[] = [];             /* 可兑产品列表 */\r\n    newPointProducts: any[] = [];          /* 新品推荐 */\r\n    hotPointProducts: any[] = [];          /* 热门产品 */\r\n    pointProductsSelected: any[] = [];     /* 已选择产品列表 */\r\n    pointProductsDetail: any;              /* 详情产品 */\r\n    pointToExchanging: number = 0;              /* 将要兑换的积分总计 */\r\n    orderData: pointOrder = new pointOrder();   /* 正在提交的产品列表*/\r\n    couponId: number;                      /* 积分码 */\r\n    platformOrderId: any;                  /* 平台合同号 */\r\n    platformOrder: any[] = [];             /* 平台合同 */\r\n    pagePointHistory: QueryPager<any>;     /* 积分详情 */\r\n    pointProductGenre: any[] = [];         /* 产品类型列表 */\r\n\r\n    outWardOrderByJD: any;                 /* 订单中存在京东商品的订单 */\r\n    noJDStock: boolean=false;            \r\n\r\n    pointInterval: any = { startPoint: 0, endPoint: 10000 };\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            myPoints: observable,\r\n            myEffectivePoints: observable,\r\n            myTotalPoints: observable,\r\n            myPointTobeExpired: observable,\r\n            pointProducts: observable,\r\n            newPointProducts: observable,\r\n            hotPointProducts: observable,\r\n            pointProductsSelected: observable,\r\n            pointProductsDetail: observable,\r\n            pointToExchanging: observable,\r\n            orderData: observable,\r\n            couponId: observable,\r\n            platformOrderId: observable,\r\n            platformOrder: observable,\r\n            pagePointHistory: observable,\r\n            pointProductGenre: observable,\r\n            navCloseByOrderSuccess: observable,\r\n            themeName: observable,\r\n            outWardOrderByJD: observable,\r\n            noJDStock: observable,\r\n        });\r\n    }\r\n\r\n    protected async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 刷新积分\r\n     */\r\n    refreshMypoint = async () => {\r\n        let { currentUser } = this.cApp;\r\n        this.myPoints = await currentUser.getPoints();\r\n        this.myEffectivePoints = this.myPoints.reduce((v, e) => { return v + e.effectiveLeftPoint }, 0);\r\n        this.myTotalPoints = this.myPoints.reduce((v, e) => { return v + e.totalLeftPoint }, 0)\r\n        let date = new Date();\r\n        let dateYear = date.getFullYear();\r\n        this.myPointTobeExpired = this.myPoints.reduce((v, e) => { return v + ((dateYear - e.pointYear) > 1 ? e.effectiveLeftPoint : 0) }, 0);\r\n    }\r\n\r\n    /**\r\n     * 初始化可兑换产品列表(暂时弃用)\r\n     */\r\n    initPointProducts = () => {\r\n        if (this.pointProductsSelected.length) {\r\n            for (let i of this.pointProductsSelected) {\r\n                this.pointProducts.forEach((el: any) => {\r\n                    if (i.product.id === el.product.id) el.quantity = i.quantity;\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 清空选择的积分产品  \r\n     */\r\n    clearSelectedPointsProducts = () => {\r\n        this.orderData.exchangeItems = undefined;\r\n        this.pointProductsSelected.length = 0;\r\n        this.pointToExchanging = 0;\r\n    }\r\n\r\n    loginMonitor = async (callBack?:any): Promise<void> => {\r\n        if (!this.isLogined) {\r\n            let loginCallback = async (user: User): Promise<void> => {\r\n                let { cApp } = this;\r\n                await cApp.currentUser.setUser(user);\r\n                await cApp.loginCallBack(user);\r\n                this.closePage(1);\r\n                if (callBack !== undefined) callBack();\r\n                else await this.showMainPoint();\r\n            };\r\n            nav.showLogin(loginCallback, true);\r\n        }\r\n    };\r\n\r\n    \r\n    tabPage: VMyPoint = new VMyPoint(this);\r\n\r\n    initPointAllData = async () => {\r\n        if(this.user !==undefined)\r\n            await this.refreshMypoint();        /* 刷新积分 */\r\n        await this.getPointProductGenre();  /* 获取产品类型 */\r\n        this.newPointProducts = await this.getNewPointProducts();    /* 获取新品推荐 */\r\n        this.hotPointProducts = await this.getHotPointProducts();    /* 获取热门产品 */\r\n    }\r\n\r\n    showMainPoint = async () => {\r\n        await this.refreshMypoint(); \r\n        this.cApp.showMain('pointMarket');\r\n    }\r\n\r\n    /**\r\n     * 积分管理页面\r\n     */\r\n    openMyPoint = async (param?: any) => {\r\n        await this.initPointAllData();\r\n        this.openVPage(VMyPoint);\r\n        // await this.refreshMypoint();        /* 刷新积分 */\r\n        // await this.getPointProductGenre();  /* 获取产品类型 */\r\n        // this.newPointProducts = await this.getNewPointProducts();    /* 获取新品推荐 */\r\n        // this.hotPointProducts = await this.getHotPointProducts();    /* 获取热门产品 */\r\n        // this.openVPage(VMyPoint);\r\n    }\r\n\r\n    /**\r\n     * 可兑换产品页面\r\n     */\r\n    openPointProduct = async (name?: any) => {\r\n        if (name) {\r\n            this.themeName = name;\r\n            await this.getPointProductByDifferentPlot(this.themeName);\r\n        } else this.themeName = '积分商城';\r\n        // this.initPointProducts();\r\n        this.openVPage(VPointProduct);\r\n    }\r\n\r\n    /**\r\n     * 可兑换产品的详情(可生成浏览量)\r\n     */\r\n    openPointProductDetail = async (pointProduct: any, DetailLevel: number) => { \r\n        this.navCloseByOrderSuccess = DetailLevel;\r\n        let { product } = pointProduct;\r\n        let findP = this.pointProductsSelected.find((v: any) => pointProduct.product.id === v.product.id);\r\n        let subVar: any;\r\n        if (findP) {//找到当前\r\n            pointProduct.quantity = findP.quantity;\r\n            subVar = findP;\r\n        } else {//未找到当前\r\n            pointProduct.quantity = 0;\r\n            subVar = pointProduct;\r\n        };\r\n        if (!subVar.pointProductSource) {//无来源 获取来源\r\n            pointProduct.pointProductSource = await this.getProductSources(product);\r\n        } else {\r\n            pointProduct.pointProductSource = subVar.pointProductSource;\r\n        };\r\n        /* if (pointProduct.pointProductSource) {//存在来源\r\n            if (!subVar.newStockRes) {\r\n                let StockRes = await this.getStockBySource({ data: [pointProduct], sourceType: pointProduct.pointProductSource.type });\r\n                pointProduct.newStockRes = StockRes.find((v: any) => v && v.skuId === Number(pointProduct.pointProductSource.sourceId));\r\n            } else {\r\n                pointProduct.newStockRes = subVar.newStockRes;\r\n            };\r\n        } else {//不存在来源\r\n            pointProduct.newStockRes = undefined;\r\n        }; */\r\n        this.pointProductsDetail = pointProduct;\r\n        let fm = 'YYYY-MM-DD HH:mm:ss';\r\n        this.pointProductsDetail.OffShelf = false;\r\n        let findProduct = await this.getPointProductLibLoad(pointProduct.product.id);\r\n        if (findProduct !== undefined && moment(undefined, fm) >= moment(findProduct.endDate, fm))\r\n            this.pointProductsDetail.OffShelf = true;\r\n        // this.pointProductsDetail.htmlFragment = await this.getPointProductDetailFragment(this.pointProductsDetail);\r\n        await this.setPointProductVisits(pointProduct.product.obj);//生成浏览量\r\n        this.openVPage(VPointProductDetail, DetailLevel);\r\n    }\r\n\r\n    /* 获取(检测)积分商品库存 据商品数据源数据 */\r\n    getStockBySource = async (param: any) => {\r\n        let { data, sourceType } = param;\r\n        if (!sourceType) return;\r\n        if (sourceType === 'jd.com') {\r\n            let area = await this.getAddressById();\r\n            if (!area) return;\r\n            let mapData = data.map((v: any) => {\r\n                let { pointProductSource, quantity } = v;\r\n                let { sourceId } = pointProductSource;\r\n                return { skuId: Number(sourceId), num: quantity === 0 ? 1 : quantity };\r\n            });\r\n            let jdSkuNums = JSON.stringify(mapData);\r\n            let newStockRes = await this.getPointProductStockByJD({ skuNums: jdSkuNums, area: area });\r\n            return newStockRes;\r\n        };\r\n\r\n        if (sourceType === 'self') {\r\n            return;\r\n            // let a = await this.cApp.cProduct.getInventoryAllocation(Number(product.id), Number(sourceId), 1);\r\n        };\r\n    };\r\n\r\n    /* 获取(检测)JD商品是否有库存 */\r\n    getPointProductStockByJD = async (param: any) => {\r\n        let res = await FetchPost(GLOABLE.JD + '/getNewStockById', JSON.stringify(param));\r\n        if (!res.ok) return;\r\n        let newStockRes = await res.json();\r\n        return JSON.parse(newStockRes);\r\n    };\r\n\r\n    /* 获取本司地址 */\r\n    getAddressById = async () => {\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        };\r\n        if (!this.orderData.shippingContact) return;\r\n        let { obj } = this.orderData.shippingContact;\r\n        let { address, addressString } = obj;\r\n        let { obj: addressObj } = address;\r\n        let { city, country, county, province } = addressObj;\r\n        let myAddress = { city: city.id, country: country.id, county: county.id, province: province.id };\r\n        return { myAddress, addressString };\r\n    };\r\n\r\n    /**\r\n     * 据商品id 获取对应的商品所有信息\r\n     */\r\n    getPointProductLibLoad = async (id: number) => {\r\n        return await this.uqs.积分商城.PointProductLib.load(id);\r\n    }\r\n\r\n    /**\r\n     * 获取积分商品详情的html片段(编译后)\r\n     */\r\n    getPointProductDetailFragment = async (pointProduct: any) => {\r\n        // this.pointProductsDetail.htmlFragment = '<div style=\"color:red;text-align:center;margin-top:2rem;\">帖文 待开发</div>';\r\n        let result = await window.fetch(GLOABLE.CONTENTSITE + '/partial/pointproductdetail/' + pointProduct.product.id);\r\n        if (result.ok) {\r\n            let content = await result.text();\r\n            return content;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 积分收支明细页面\r\n     */\r\n    openRevenueExpenditure = async (topic?: any) => {\r\n        if (!this.isLogined)\r\n            await this.cApp.cPointProduct.loginMonitor();\r\n        else { \r\n            await this.getPointHistory();\r\n            this.openVPage(VRevenueExpenditure, topic)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 积分兑换记录页面\r\n     */\r\n    openExchangeHistory = async () => {\r\n        if (!this.isLogined)\r\n            await this.cApp.cPointProduct.loginMonitor();\r\n        else {\r\n            let promises: PromiseLike<any>[] = [];\r\n            promises.push(this.uqs.积分商城.PointExchangeSheet.mySheets(undefined, 1, -10));\r\n            promises.push(this.uqs.积分商城.PointExchangeSheet.mySheets(\"#\", 1, -100));\r\n            let presult = await Promise.all(promises);\r\n            let exchangeHistory = presult[0].concat(presult[1]);\r\n            this.openVPage(VExchangeHistory, exchangeHistory);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 历史兑换单详情页面\r\n     */\r\n    openOrderDetail = async (orderId: number) => {\r\n        await this.getOutWardOrderByJD(orderId);\r\n        let order = await this.uqs.积分商城.PointExchangeSheet.getSheet(orderId);\r\n        this.openVPage(VExchangeHistoryDetail, order);\r\n    };\r\n\r\n    /* 订单是否是含有JD商品的订单 */\r\n    getOutWardOrderByJD = async (orderId: number) => {\r\n        // orderId = nav.testing ? 485 : 96; //96  485\r\n        this.outWardOrderByJD = await this.uqs.platFormJoint.OutWardOrderMapping.obj({ platform: 1, myOrderId: orderId });\r\n    };\r\n\r\n    /** 获取物流信息 */\r\n    getOrderTrack = async () => {\r\n        let param = { jdOrderId: this.outWardOrderByJD.platformOrderId };\r\n        let res = await FetchPost(GLOABLE.JD + '/orderTrack', JSON.stringify(param));\r\n        let orderTrackObj: any;\r\n        if (res.ok) orderTrackObj = await res.json();\r\n        return orderTrackObj;\r\n    };\r\n\r\n    /**\r\n     * 历史兑换单物流信息页面\r\n     */\r\n    openExchangeOrderTrack = async () => {\r\n        let OrderTrack = await this.getOrderTrack();\r\n        this.openVPage(VExchangeOrderTrack, OrderTrack);\r\n    };\r\n\r\n    /**\r\n     * 已选择的可兑换产品页面\r\n     */\r\n    openSelectedPointProduct = async (DetailLevel: number) => {\r\n        this.navCloseByOrderSuccess = DetailLevel;\r\n        this.pointProductsSelected = this.pointProductsSelected.filter(v => v.quantity !== 0);\r\n        this.openVPage(VSelectedPointProduct);\r\n    }\r\n\r\n    /**\r\n     * 确认兑换订单预览页面\r\n     */\r\n    openExchangeOrder = async () => {\r\n        if (this.orderData.shippingContact === undefined) {\r\n            this.orderData.shippingContact = await this.getDefaultShippingContact();\r\n        }\r\n        this.pointProductsSelected = this.pointProductsSelected.filter(v => v.quantity !== 0);\r\n        /* 优化 '京东商品有无货' 时需要调整此处 */\r\n        this.noJDStock=false;\r\n        this.openVPage(VExchangeOrder);\r\n    }\r\n\r\n    /**\r\n     * 已选择的可兑换产品图标\r\n     */\r\n    renderSelectedLable(DetailLevel: number) {\r\n        return this.renderView(VSelectedLable, DetailLevel);\r\n    }\r\n\r\n    /**\r\n     * 默认帖文\r\n     */\r\n    renderVDefaultPost() {\r\n        return this.renderView(VDefaultPost);\r\n    }\r\n\r\n    // /*领取积分 */\r\n    // openPointDrawing = async (credits?: string) => {\r\n    //     /* \r\n    //     let lastPlatformId = await this.getLastPlatformOrder();\r\n    //     if (lastPlatformId)\r\n    //         this.platformOrder = await this.getPlatFormOrder(this.platformOrderId);\r\n    //     */\r\n    //     this.openVPage(VPlatformOrderPoint, credits);\r\n    // }\r\n\r\n    /* 展示 积分详情*/\r\n    /* pointDetails = async () => {\r\n        this.getPointHistory();\r\n        this.openVPage(VPointDetails);\r\n    } */\r\n\r\n    /**\r\n     * 浏览商品(数据埋点,生产浏览量PV)\r\n     */\r\n    setPointProductVisits = async (pointProduct: any) => {\r\n        return this.uqs.积分商城.SetPointProductVisits.submit({ pointProduct });\r\n    }\r\n\r\n    /**\r\n     * 获取产品类型\r\n     */\r\n    getPointProductGenre = async () => {\r\n        let { Genre } = this.uqs.积分商城;\r\n        this.pointProductGenre = await Genre.all();\r\n    }\r\n\r\n    /**\r\n     * 获取积分详情的数据\r\n     */\r\n    getPointHistory = () => {\r\n        let { currentUser } = this.cApp;\r\n        this.pagePointHistory = new QueryPager(this.uqs.积分商城.GetPointHistory, 15, 30);\r\n        this.pagePointHistory.first({ customer: currentUser?.currentCustomer, key: \"\" });\r\n    }\r\n\r\n    /**\r\n     * 获取可兑换产品(据 分类、新品推荐、热门产品)\r\n     */\r\n    getPointProductByDifferentPlot = async (plot: any) => {\r\n        let { productGenre, newRecommend, hotProduct } = topicClump;\r\n        let state = typeof plot === 'object' && this.pointProductGenre.some((v) => v.name === plot.name) ? productGenre : plot;\r\n        switch (state) {\r\n            case productGenre:\r\n                this.pointProducts = await this.filterByProductGenre(plot);\r\n                break;\r\n            case newRecommend:\r\n                this.pointProducts = await this.getNewPointProducts();\r\n                break;\r\n            case hotProduct:\r\n                this.pointProducts = await this.getHotPointProducts();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        // this.initPointProducts();\r\n    }\r\n\r\n    /**\r\n     * 据类型筛选商品\r\n     */\r\n    filterByProductGenre = async (currentGenre: any) => {\r\n        // let pointProductFromGenre = await this.getProductsFromGenre(currentGenre);\r\n        let pointProductFromGenre = await this.uqs.积分商城.GetPointProductByGenre.table({ genre: currentGenre });\r\n        return pointProductFromGenre.map((v) => { return { genre: v.genre, product: v.pointProduct } });\r\n    }\r\n\r\n    /**\r\n     * 获取指定分类所属的商品\r\n     */\r\n    getProductsFromGenre = async (genre: any) => {\r\n        return await this.uqs.积分商城.PointProductGenre.table({ genre, pointproduct: undefined });\r\n    }\r\n\r\n    /**\r\n     * 获取新品推荐的产品\r\n     */\r\n    getNewPointProducts = async () => {\r\n        let result = await this.uqs.积分商城.GetNewPointProducts.table({});\r\n        return result.sort((a, b) => a.point - b.point).map((v) => { return { product: v.id } });\r\n    }\r\n\r\n    /**\r\n     * 获取热门产品\r\n     */\r\n    getHotPointProducts = async () => {\r\n        let result = await this.uqs.积分商城.GetHotPointProducts.table({});\r\n        return result.sort((a, b) => a.point - b.point).map((v) => { return { product: v.id } });\r\n    }\r\n\r\n    /**\r\n     * 获取积分区间的积分产品\r\n     */\r\n    getPointsIntervalProducts = async (state: any) => {\r\n        this.pointInterval = PointIntervals[state];\r\n        this.pointProducts = await this.getPointsProducts();\r\n        // this.initPointProducts();\r\n        return this.pointProducts;\r\n    }\r\n\r\n    /**\r\n     * 获取积分商城产品(积分划分)\r\n     */\r\n    getPointsProducts = async () => {\r\n        return await this.uqs.积分商城.GetPointProduct.table(this.pointInterval);\r\n    }\r\n\r\n    /**\r\n     * 获取商品源（兑换下单可用）\r\n     */\r\n    getProductSources = async (pointProduct: any) => {\r\n        return await this.uqs.积分商城.PointProductSource.obj({ pointProduct, sourceId: undefined });\r\n    }\r\n\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        if (!this.isLogined) {\r\n            let callBack = async () => {\r\n                await this.showMainPoint();\r\n                if (this.navCloseByOrderSuccess === 4) await this.openPointProduct(this.themeName);\r\n                this.openPointProductDetail(data, this.navCloseByOrderSuccess);\r\n            };\r\n            await this.cApp.cPointProduct.loginMonitor(callBack);\r\n        } else {\r\n            if (data.product.id === this.pointProductsDetail.product.id) this.pointProductsDetail.quantity = value;\r\n            if (!data.pointProductSource) data.pointProductSource = await this.getProductSources(data.product);\r\n            /* data.newStockRes = undefined;\r\n            if (data.pointProductSource) {\r\n                let newStockRes = await this.getStockBySource({ data: [data], sourceType: data.pointProductSource.type });\r\n                data.newStockRes = newStockRes.find((v: any) => v.skuId === Number(data.pointProductSource.sourceId));\r\n            }; */\r\n            let findCurIndex = this.pointProductsSelected.findIndex((v: any) => v.product.id === data.product.id);\r\n            if (findCurIndex === -1) {\r\n                data.point = data.product.obj.point;\r\n                this.pointProductsSelected.push(data);\r\n            } else {\r\n                let nowData = {\r\n                    quantity: value,\r\n                    pointProductSource: data.pointProductSource\r\n                };\r\n                this.pointProductsSelected[findCurIndex] = { ...this.pointProductsSelected[findCurIndex], ...nowData };\r\n            };\r\n            let pointTotal: number = 0;\r\n            this.pointProductsSelected.forEach((v: any) => { if (v && v.quantity > 0) pointTotal += v.point * v.quantity; });\r\n            this.pointToExchanging = pointTotal;\r\n        };\r\n    };\r\n\r\n    private createOrderFromCart = async () => {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        this.orderData.webUser = currentUser.id;\r\n        this.orderData.salesRegion = currentSalesRegion.id;\r\n        if (currentUser.currentCustomer !== undefined) {\r\n            this.orderData.customer = currentUser.currentCustomer.id;\r\n        }\r\n        if (this.pointProductsSelected !== undefined && this.pointProductsSelected.length > 0) {\r\n            this.orderData.exchangeItems = this.pointProductsSelected.map((e: any) => {\r\n                if (e.quantity > 0) {\r\n                    var item = new OrderItem();\r\n                    item.product = e.product;\r\n                    // item.pack = e.pack;\r\n                    item.quantity = e.quantity;\r\n                    item.point = e.point;\r\n                    return item;\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    createOrderStocks = async () => {\r\n        let noSourceList = this.pointProductsSelected.filter((v: any) => v.quantity > 0 && !v.pointProductSource);\r\n        if (noSourceList.length) {\r\n            let promises1: PromiseLike<any>[] = [];\r\n            noSourceList.forEach((v: any) => promises1.push(this.getProductSources(v.product)));\r\n            let result = await Promise.all(promises1);\r\n            this.pointProductsSelected.forEach((v: any) => {\r\n                let findCoincideById = result.find((o: any) => o && v.product.id === o.pointProduct.id);\r\n                if (findCoincideById) v.pointProductSource = findCoincideById;\r\n            });\r\n        };\r\n\r\n        let jdProducts = this.pointProductsSelected.filter((v: any) => v.quantity > 0 && v.pointProductSource && v.pointProductSource.type === 'jd.com');\r\n        this.noJDStock = false;\r\n        if (!jdProducts.length) return;\r\n        let newStockRes = await this.getStockBySource({ data: jdProducts, sourceType: 'jd.com' });\r\n        let noStockList = newStockRes.filter((v: any) => v.stockStateId === 34 || v.stockStateDesc === \"无货\");\r\n        if (!noStockList.length) return;\r\n        this.pointProductsSelected.forEach((v: any) => {\r\n            let pSource = v.pointProductSource;\r\n            if (pSource?.type === 'jd.com') {\r\n                v.newStockRes = noStockList.find((e: any) => e.skuId === Number(pSource.sourceId));\r\n            };\r\n        });\r\n        this.noJDStock = true;\r\n    };\r\n\r\n    /**\r\n     * 生成兑换单兑换积分\r\n     */\r\n    submitOrder = async () => {\r\n        this.createOrderFromCart();\r\n\r\n        let PointExchangeSheet = this.uqs.积分商城.PointExchangeSheet;\r\n        let getDataForSave = this.orderData.getDataForSave();\r\n        let result: any = await PointExchangeSheet.save(\"PointExchangeSheet\", getDataForSave);\r\n        let { id, flow, state } = result;\r\n        await PointExchangeSheet.action(id, flow, state, \"submit\");\r\n\r\n        //暂时扣除已经兑换的积分;\r\n        this.myEffectivePoints = this.myEffectivePoints - this.pointToExchanging;\r\n        this.myTotalPoints = this.myTotalPoints - this.pointToExchanging;\r\n        if (this.pointToExchanging > this.myPointTobeExpired) {\r\n            this.myPointTobeExpired = 0;\r\n        } else {\r\n            this.myPointTobeExpired = this.myPointTobeExpired - this.pointToExchanging;\r\n        }\r\n\r\n        //兑换后清空选择的积分产品\r\n        this.clearSelectedPointsProducts();\r\n\r\n        // 打开下单成功显示界面\r\n        // nav.popTo(this.cApp.topKey);\r\n        this.closePage(this.navCloseByOrderSuccess);\r\n        this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    /**\r\n     * 获取当前webuser对应customer的最近一个订单 TODO:delete\r\n     */\r\n    getLastPlatformOrder = async () => {\r\n\r\n        let { currentCustomer } = this.cApp.currentUser;\r\n        let validationResult = await this.uqs.积分商城.GetLastPlatFormOrder.submit({ customer: currentCustomer && currentCustomer.id });\r\n        let { platformOrderId } = validationResult;\r\n        this.platformOrderId = validationResult.platformOrderId;\r\n        return platformOrderId;\r\n    }\r\n\r\n    getPlatFormOrder = async (platformOrderId: string) => {\r\n        return await this.uqs.积分商城.GetPlatFormOrder.table({ platformOrderId: platformOrderId });\r\n    }\r\n\r\n    IsCouponCanUse = async (couponCode: string) => {\r\n        this.couponId = 0;\r\n        let { currentUser } = this.cApp;\r\n        let { salesTask } = this.uqs;\r\n        let validationResult = await salesTask.IsCanUseCoupon.submit({ code: couponCode, webUser: currentUser && currentUser.id });\r\n\r\n        let { result, id, types } = validationResult;\r\n        if (result === 1) {\r\n            this.couponId = id;\r\n            if (types !== 'credits')\r\n                result = 0;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 领取积分码 TODO:delete\r\n     */\r\n    receivePoint = async (orderId: string) => {\r\n        let { currentCustomer } = this.cApp.currentUser;\r\n        let { AddPlatformOrderPoint } = this.uqs.积分商城;\r\n        let result = await AddPlatformOrderPoint.submit({ orderId: orderId, couponId: this.couponId, customer: currentCustomer && currentCustomer.id });\r\n        let rtn = result.result;\r\n\r\n        return rtn;\r\n    }\r\n\r\n    private openMeInfoOptions: any;\r\n    /**\r\n     * 检查客户信息是否完善（不完善需补充完善后方可领取积分）\r\n     */\r\n    userInfoCompletedChecking = (options: any): boolean => {\r\n\r\n        if (!this.isLogined) {\r\n            this.openMeInfoOptions = options;\r\n            nav.showLogin(this.loginCallback, true);\r\n            return false;\r\n        } else {\r\n            let { cMe, currentUser } = this.cApp;\r\n            if (!currentUser.allowOrdering) {\r\n                cMe.openMeInfoFirstOrder(options);\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\n    private loginCallback = async (user: User): Promise<void> => {\r\n        let { cApp } = this;\r\n        await cApp.currentUser.setUser(user);\r\n        await cApp.loginCallBack(user);\r\n        this.closePage(1);\r\n\r\n        let { cMe, currentUser } = this.cApp;\r\n        if (!currentUser.allowOrdering) {\r\n            cMe.openMeInfoFirstOrder(this.openMeInfoOptions);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * TODO: delete\r\n     */\r\n    addUsedCoupon = async () => {\r\n        /* let { AddUsedCoupon } = this.uqs.积分商城;\r\n        let result = await AddUsedCoupon.submit({ couponId: this.couponId });\r\n        let rtn = result.result;\r\n        return rtn; */\r\n        return;\r\n    }\r\n\r\n    private defaultSetting: any;\r\n    private async getDefaultSetting() {\r\n        if (this.defaultSetting) return this.defaultSetting;\r\n        let { currentUser } = this.cApp;\r\n        return this.defaultSetting = await currentUser.getSetting() || {};\r\n    }\r\n    private contact0: BoxId;\r\n    private async getContact(): Promise<BoxId> {\r\n        if (this.contact0 === null) return;\r\n        if (this.contact0 !== undefined) return this.contact0;\r\n        let { currentUser } = this.cApp;\r\n        let contactArr = await currentUser.getContacts();\r\n        if (contactArr === undefined || contactArr.length === 0) {\r\n            this.contact0 = null;\r\n            return;\r\n        }\r\n        return this.contact0 = contactArr[0].contact;\r\n    }\r\n    async getDefaultShippingContact() {\r\n        let defaultSetting = await this.getDefaultSetting();\r\n        return defaultSetting.shippingContact || await this.getContact();\r\n    }\r\n\r\n    selectContact = async () => {\r\n        let cSelect = this.newC(CSelectShippingContact);\r\n        let contactBox = await cSelect.call<BoxId>(true);\r\n        return contactBox;\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        this.orderData.shippingContact = await this.selectContact();\r\n        await this.createOrderStocks();\r\n    }\r\n\r\n    showPointDoubt = async () => {\r\n        if (!this.isLogined)\r\n            await this.cApp.cPointProduct.loginMonitor();\r\n        else {\r\n            let { cMe, currentUser } = this.cApp;\r\n            let param: any = { currentUser, webUsers: [] };\r\n            if (currentUser.hasCustomer) {\r\n                let { currentCustomer } = currentUser;\r\n                param.currentCustomer = currentCustomer;\r\n                let otherWebUsers = await currentCustomer.getRelatedWebUser();\r\n                param.webUsers = otherWebUsers;\r\n                this.openVPage(VPointDoubt, param);\r\n            } else {\r\n                if (!currentUser.allowOrdering) {\r\n                    let note = <>\r\n                        我们需要审核您的账号信息。账号审核是为了将您的账号和您之前的积分关联起来。\r\n                        为此，需要您提供以下信息（带有 <span className=\"text-danger\">*</span> 的信息为必填项），感谢您的配合。\r\n                    </>;\r\n                    cMe.toPersonalAccountInfo(async () => { this.openVPage(VPointDoubt) }, note);\r\n                } else {\r\n                    this.openVPage(VPointDoubt, param);\r\n                }\r\n            }\r\n        } \r\n    }\r\n\r\n    applyAuditUser = async () => {\r\n        let { cApp, uqs } = this;\r\n        let { currentUser } = cApp;\r\n        await uqs.webuser.applyAuditUser.submit({ webUser: currentUser });\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, List, LMR, SearchBox, FA } from \"tonva-react\";\r\nimport { observer } from 'mobx-react';\r\nimport { CYncProjects } from './CYncProjects';\r\n\r\nexport class VYncProjects extends VPage<CYncProjects> {\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { YncProjectsItems } = this.controller;\r\n\r\n        let header = <header>\r\n            <div>选择项目</div>\r\n        </header>;\r\n        return <Page header={header} headerClassName=\"py-1 bg-primary\" >\r\n            <List items={YncProjectsItems} item={{ render: this.renderItem, onClick: this.onClick }} />\r\n        </Page>;\r\n    });\r\n\r\n\r\n    private onClick = async (model: any) => {\r\n        await this.controller.returnYncProject(model);\r\n        this.closePage();\r\n    }\r\n\r\n    private renderItem = (item: any, index: number) => {\r\n        let { ProjectName } = item;\r\n        return <LMR className=\"py-2 border\">\r\n            <div><FA name=\"circle\" className=\"px-2 text-primary\"></FA>{ProjectName}</div>\r\n        </LMR >;\r\n    }\r\n\r\n}\r\n","import * as React from 'react';\r\nimport { CUqBase } from 'CBase';\r\nimport { VYncProjects } from './VYncProjects';\r\nimport { YncProjectsResponse, YncProjectsItem } from './YncProductItem';\r\n\r\nexport class CYncProjects extends CUqBase {\r\n\r\n    private OrganCode: string;\r\n    private UserId: number;\r\n    YncProjectsItems: YncProjectsItem[] = [];\r\n    private YncProjectsResponse: YncProjectsResponse;\r\n\r\n    async internalStart(OrganCode: string, UserId: number) {\r\n        this.OrganCode = OrganCode;\r\n        this.UserId = UserId;\r\n        await this.getYncProjects();\r\n        this.openVPage(VYncProjects);\r\n    }\r\n\r\n    getYncProjects = async () => {\r\n        let formData = new FormData();\r\n        formData.append(\"OrganCode\", this.OrganCode);\r\n        formData.append(\"UserId\", this.UserId.toString());\r\n\r\n        let res = await window.fetch('http://apitest.sinopec.ad/api/ynk/projects', {\r\n            method: 'post',\r\n            body: formData,\r\n            headers: {\r\n                'Accept': 'application/x-www-form-urlencoded',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        if (res.ok) {\r\n            let content = await res.json();\r\n            if (content.ok) {\r\n                this.YncProjectsResponse = JSON.parse(content);\r\n                if (this.YncProjectsResponse.code === 200) {\r\n                    this.YncProjectsItems = this.YncProjectsResponse.response;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    returnYncProject = (model: any) => {\r\n        this.returnCall(model);\r\n    }\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, FA } from \"tonva-react\";\r\nimport { CLottery } from './CLottery';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport classNames from 'classnames';\r\n\r\n\r\nexport class VLottery extends VPage<CLottery> {\r\n    currIndex: number;\r\n    winning: any;   /* 中奖的商品 */\r\n    isLottery: boolean = false;\r\n    lotterySuccess: boolean = false;\r\n    aDeg: any = 0;/* 轮盘转到度数 */\r\n    prize = [0, 1, 2, 5, 8, 7, 6, 3];//抽奖轮转顺序  九宫格\r\n    // prize = [0, 1, 2, 3, 4, 5, 6, 7];//抽奖轮转顺序     轮盘\r\n\r\n    constructor(c: CLottery) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            currIndex: observable,\r\n            winning: observable,\r\n            isLottery: observable,\r\n            lotterySuccess: observable,\r\n            aDeg: observable\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        // console.log(await this.controller.cApp.uqs.积分商城);\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private lottery = async () => {\r\n        let { lotteryProducts, productsLib, decreasingNumberOfDraws, winningProduct } = this.controller;\r\n        await decreasingNumberOfDraws();\r\n        let i = 0;//转到哪个位置\r\n        let count = 0;//转圈初始值\r\n        let totalCount = 9;//转动的总圈数\r\n        let speed = 500;//转圈速度，越大越慢\r\n        let timer: any;\r\n        /* ---------------- 轮盘转动 ---------------- */\r\n        // let aaaaa = Math.floor(Math.random() * (3600 - 1000) + 1000);\r\n        // let roll = () => {\r\n        //     this.aDeg += 10;\r\n        //     if (this.aDeg >= aaaaa) {\r\n        //         clearTimeout(timer);\r\n        //         this.isLottery = false; this.lotterySuccess = true;\r\n        //     } else\r\n        //         timer = setTimeout(roll, 50);\r\n        // }\r\n        // roll();\r\n        /* ---------------- 轮盘转动 ---------------- */\r\n        this.currIndex = undefined;\r\n        this.isLottery = true;\r\n        let indexMR = this.mR();//随机取值\r\n        let roll = async () => {\r\n            speed -= 50;//速度衰减\r\n            if (speed <= 10) speed = 10;\r\n            this.currIndex = this.prize[i];\r\n            i++;\r\n            if (i > this.prize.length - 1) {//计算转圈次数\r\n                i = 0; count++;\r\n            }\r\n            if (count >= totalCount && productsLib[indexMR].productId === lotteryProducts[this.currIndex].id) {//满足转圈数和指定位置就停止\r\n                clearTimeout(timer); speed = 500; this.isLottery = false; this.lotterySuccess = true; this.winning = lotteryProducts[this.currIndex];\r\n                await winningProduct(this.winning);\r\n            } else {\r\n                timer = setTimeout(roll, speed);//不满足条件时调用定时器\r\n                if (count >= totalCount - 1 || speed <= 50) speed += 100;//最后一圈减速\r\n            }\r\n        }\r\n        roll();\r\n    }\r\n\r\n    private mR = () => {\r\n        let { productsLib } = this.controller;\r\n        return Math.floor(Math.random() * (productsLib.length - 0) + 0);\r\n    }\r\n\r\n    private renderLotteryBtn = () => {\r\n        let { remainingNumOfDraws } = this.controller;\r\n        return <button className={classNames('btn btn-primary  align-self-center ', this.isLottery ? 'disabled pr-4' : '')} onClick={() => {\r\n            if (remainingNumOfDraws === 0) { this.lotterySuccess = true; return; }\r\n            if (!this.isLottery) { this.lottery() }\r\n        }}>{this.isLottery ? '抽奖中' : '开始抽奖'}\r\n            <span className=\" position-relative\" style={{ display: this.isLottery ? '' : 'none' }}>\r\n                <i className=\"fa-li fa fa-spinner fa-spin position-absolute\" style={{ left: -7 }}></i>\r\n            </span>\r\n        </button>\r\n    }\r\n\r\n    private renderPrizesBlock = (v: any, index: any) => {\r\n        let color = [0, 2, 4, 6].includes(index) ? '#A52A2A' : '#7EC0EE';\r\n        // Math.cos((45 / 2) * (Math.PI / 180)) * 160 / 2 可大约计算border的带宽,存在误差 (------思路错误，需修正)\r\n        // console.log(Math.sin((45) * (Math.PI / 180)) * 160 / 2);\r\n        return <div key={index}\r\n            style={{\r\n                transform: `rotate(${index * 45 - 90}deg) translateY(-50%)`, top: '50%', left: '50%', width: 0, height: 0, border: \"68px solid transparent\",\r\n                borderRight: `160px solid ${this.currIndex === index ? 'rgb(255,203,63)' : color}`, borderLeft: 0, transformOrigin: '0% 0%'\r\n            }}\r\n            className=\"position-absolute\">\r\n            <span className=\"position-absolute\" style={{ top: -10, left: 130, transform: 'rotate(90deg)' }}>{v.content}</span>\r\n        </div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { lotteryProducts, remainingNumOfDraws, openMyLotteryPrize } = this.controller;\r\n        let header = <div className=\"w-100 text-center\">幸运抽奖</div>;\r\n\r\n        return <Page header={header} right={<></>} className=\"w-100\">\r\n\r\n            <div className=\"position-relative\" style={{ background: `url(http://bpic.588ku.com/back_pic/04/70/62/26589975a47d9d0.jpg) no-repeat`, backgroundSize: 'cover', }}>\r\n                {/* <img style={{ visibility: 'hidden' }} width=\"100%\" src={timg1_test} alt=\"\" /> */}\r\n                <div className=\"w-100 pb-5\" >\r\n                    {/* 抽奖机会 */}\r\n                    <div className=\"d-flex justify-content-center text-light pt-5 mb-3\" >\r\n                        <span className=\"border border-light rounded px-2 bg-transparent\" style={{ padding: '2px 0' }}>\r\n                            剩余 <b className=\"bg-white p-1 text-danger\">{remainingNumOfDraws}</b> 次抽奖机会\r\n                        </span>\r\n                    </div>\r\n\r\n                    {/* 抽奖区域 */}\r\n                    <div className=\" pb-5 mx-2 rounded-lg w-auto\"\r\n                        style={{ background: \"url(https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1104137880,798719686&fm=26&gp=0.jpg) no-repeat\", backgroundSize: \"100% 100%\" }}>\r\n                        {/* 抽奖标题 */}\r\n                        <div className=\"d-flex justify-content-center p-2 pt-3 h3 text-center text-monospace font-weight-bolder\">\r\n                            <div className=\" position-relative\" style={{ color: \"#cc0000\" }}>\r\n                                <span style={{ top: 3, left: -30, transform: 'rotate(-12deg)' }} className=\"position-absolute\">福</span>\r\n                                利放\r\n                                <span style={{ top: 3, right: -30, transform: 'rotate(12deg)' }} className=\"position-absolute\">送</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 抽奖内容 */}\r\n                        {/* 轮盘--------------界面适配bug */} {/* overflow-hidden */}\r\n                        {/* <div className=\"border rounded-circle m-auto w-20c h-20c position-relative overflow-hidden\"\r\n                            style={{ transform: `rotate(${this.aDeg}deg)` }}>\r\n                            {lotteryProducts.map((v: any, index: number) => {\r\n                                return this.renderPrizesBlock(v, index);\r\n                            })}\r\n                            <div className=\"border rounded-circle position-absolute w-75 h-75 d-flex justify-content-center align-items-center\"\r\n                                style={{ top: '50%', left: '50%', transform: 'translate(-50%, -50%)', }}>\r\n                                {this.renderLotteryBtn()}\r\n                            </div>\r\n                        </div> */}\r\n                        {/* 九宫格 */}\r\n                        <div className='d-flex flex-wrap px-2 m-auto'>\r\n                            {lotteryProducts.map((v: any, index: number) => {\r\n                                if (index === 4) {\r\n                                    return <div className=\"d-flex justify-content-center\" key={index} style={{ width: '33.3%' }} >\r\n                                        {this.renderLotteryBtn()}\r\n                                    </div>\r\n                                }\r\n                                return <PointProductImage className={classNames('border', this.currIndex === index ? 'border-success' : '')} key={index} style={{ width: \"33.3%\" }} chemicalId={'1'} />\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                    {/* 我的奖品 */}\r\n                    <div className=\"mx-2 d-flex justify-content-center mt-2\" onClick={() => { if (!this.isLottery) openMyLotteryPrize() }}>\r\n                        <span style={{ borderRadius: \"22px\", color: '#F7C709' }} className=\"text-center py-1 px-3 bg-white\">\r\n                            <FA name='gift' /> <span style={{ color: 'rgb(152,42,7)' }} className=\"small\">我的奖品</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n\r\n            {/* 抽奖成功提示 */}\r\n            {\r\n                this.lotterySuccess ?\r\n                    <div className=\"position-fixed d-flex justify-content-center\"\r\n                        style={{ top: 0, left: 0, right: 0, bottom: 0, zIndex: 99999, backgroundColor: 'hsla(120,0%,50%,.7)' }}>\r\n                        <div className=\"align-self-center bg-white rounded-lg px-4 py-3 pb-4 text-center position-relative\">\r\n                            <div className=\"position-absolute\" style={{ top: 5, right: 10, }} onClick={() => { this.lotterySuccess = false; this.winning = undefined; }}><FA name=\"times-circle-o\" /></div>\r\n                            {\r\n                                remainingNumOfDraws === 0 && this.winning === undefined\r\n                                    ? <div className=\"pt-2\">\r\n                                        <div className=\"text-warning\"><FA name='frown-o' size='2x' /></div>\r\n                                        您的抽奖机会用完了！\r\n                                    </div>\r\n                                    : <div className=\"align-self-center bg-white rounded-lg  pt-3 text-center\">\r\n                                        <div>恭喜您</div>\r\n                                        <div>获得-----</div>\r\n                                        <div className=\"py-5\">展示</div>\r\n                                        <div className='small mt-2'>可以到我的奖品中去查看</div>\r\n                                    </div>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    : null\r\n            }\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, FA, List } from \"tonva-react\";\r\nimport { CLottery } from './CLottery';\r\n\r\nexport class VMyLotteryPrize extends VPage<CLottery> {\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderMyPrize = (myPrize: any) => {\r\n        return <div>1111</div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { myPrizeLib, openMyPrizeOrder } = this.controller;\r\n        let footer = <div className=\"w-100 px-3 d-flex justify-content-end\">\r\n            <button type=\"button\" className=\"btn btn-danger m-1\" onClick={openMyPrizeOrder}>领取奖品</button>\r\n        </div>\r\n\r\n        return <Page header='我的奖品' footer={footer}>\r\n            <List items={myPrizeLib} item={{ render: this.renderMyPrize }} none='无' />\r\n        </Page >\r\n    })\r\n}","import { BoxId } from \"tonva-react\";\r\nimport { observable, computed, makeObservable } from 'mobx';\r\n\r\nexport class prizeOrder {\r\n\r\n    webUser: any;   // OK\r\n    organization: BoxId;\r\n    customer: any;  //OK\r\n    salesRegion: BoxId;   // OK\r\n\r\n    shippingContact: BoxId; //OK\r\n    exchangeItems: prizeOrderItem[] = [];\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            shippingContact: observable,\r\n            exchangeItems: observable,\r\n            amount: computed\r\n        });\r\n    }\r\n\r\n    get amount() {\r\n        return this.exchangeItems.reduce((pv, cv) => (pv + cv.subAmount), 0);\r\n    };\r\n\r\n    getDataForSave() {\r\n        let exchangeItems: any[] = [];\r\n        this.exchangeItems.forEach(oi => {\r\n            exchangeItems.push({\r\n                product: oi.product, pack: oi.pack, point: oi.point, quantity: oi.quantity\r\n                , subAmount: oi.quantity * oi.point\r\n            })\r\n        });\r\n        return {\r\n            webUser: this.webUser,\r\n            organization: this.organization,\r\n            customer: this.customer,\r\n            shippingContact: this.shippingContact,\r\n            amount: this.amount,\r\n            exchangeitems: exchangeItems, // 前面的必须是小写的\r\n            salesRegion: this.salesRegion\r\n        }\r\n    }\r\n}\r\n\r\nexport class prizeOrderItem {\r\n    product: BoxId;\r\n    pack: BoxId;\r\n    quantity: any;\r\n    point: any;\r\n    imageUrl: any;\r\n    description: any;\r\n    descriptionC: any;\r\n    grade: any;\r\n\r\n    constructor() {\r\n        makeObservable(this, {\r\n            pack: observable,\r\n            quantity: observable,\r\n            point: observable,\r\n            imageUrl: observable,\r\n            description: observable,\r\n            descriptionC: observable,\r\n            grade: observable,\r\n            subAmount: computed\r\n        });\r\n    }\r\n\r\n    get subAmount() {\r\n        return this.quantity * this.point;\r\n    }\r\n}","import { CUqBase } from 'CBase';\r\nimport { VLottery } from './VLottery';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { VMyLotteryPrize } from './VMyLotteryPrize';\r\nimport { VMyPrizeExchangeOrder } from './VExchangeOrder';\r\nimport { prizeOrder, prizeOrderItem } from './prizeOrder';\r\nimport { CApp } from 'CApp';\r\n\r\nexport class CLottery extends CUqBase {\r\n    lotteryProducts: any[] = [];        /* 抽奖产品列表 */\r\n    remainingNumOfDraws: number = 1;    /* 剩余抽奖次数 */\r\n    productsLib: any[] = [];            /* 抽奖产品集合（加概率） */\r\n    myPrizeLib: any[] = [];             /* 我的奖品 */\r\n    totalNumPrizes: number = 10000;      /* 奖品总量 */\r\n    prizeOrderData: prizeOrder = new prizeOrder();\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            lotteryProducts: observable,\r\n            remainingNumOfDraws: observable,\r\n            productsLib: observable,\r\n            myPrizeLib: observable,\r\n            totalNumPrizes: observable,\r\n            prizeOrderData: observable\r\n        });\r\n    }\r\n\r\n    async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 抽奖界面\r\n     */\r\n    openLotteryProduct = async () => {\r\n        await this.getLotteryProducts();\r\n        await this.getLotteryNumOfDraws();\r\n        this.basedChanceHandlePrizes();\r\n        this.openVPage(VLottery);\r\n    }\r\n\r\n    /**\r\n     * 我的奖品界面\r\n     */\r\n    openMyLotteryPrize = async () => {\r\n        await this.getMyPrizes();\r\n        this.openVPage(VMyLotteryPrize);\r\n    }\r\n\r\n    /**\r\n    * 奖品领取预览界面\r\n    */\r\n    openMyPrizeOrder = async () => {\r\n        let { cPointProduct } = this.cApp;\r\n        if (this.prizeOrderData.shippingContact === undefined) {\r\n            this.prizeOrderData.shippingContact = await cPointProduct.getDefaultShippingContact();\r\n        }\r\n        this.openVPage(VMyPrizeExchangeOrder);\r\n    }\r\n\r\n    /**\r\n     * 中奖获得的产品\r\n     */\r\n    winningProduct = async (winning: any) => {\r\n        console.log('winning', winning);\r\n        await this.addMyPrize(winning);\r\n    }\r\n\r\n    /**\r\n     * 抽奖次数递减\r\n     */\r\n    decreasingNumberOfDraws = async () => {\r\n        this.remainingNumOfDraws -= 1;\r\n        // await this.uqs.积分商城.\r\n    }\r\n\r\n    /**\r\n     * 获取可抽奖次数\r\n     */\r\n    getLotteryNumOfDraws = async () => {\r\n        // this.remainingNumOfDraws = await this.uqs.积分商城.\r\n    }\r\n\r\n    /**\r\n     * 获取抽奖产品列表\r\n     */\r\n    getLotteryProducts = async () => {//PR\r\n        // this.lotteryProducts = await this.uqs.积分商城.\r\n        this.lotteryProducts = [\r\n            { id: 1, content: '111', p: '1', PR: 15 },\r\n            { id: 2, content: '222', p: '4', PR: 20 },\r\n            { id: 3, content: '333', p: '5', PR: 5 },\r\n            { id: 4, content: '444', p: '1', PR: 10 },\r\n            { id: 5, content: '555', p: '1', PR: 10 },\r\n            { id: 6, content: '666', p: '8', PR: 20 },\r\n            { id: 7, content: '777', p: '2', PR: 5 },\r\n            { id: 8, content: '888', p: '7', PR: 15 },\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * 据概率处理抽奖商品\r\n     */\r\n    basedChanceHandlePrizes = () => {\r\n        let arr = [], minPrice = this.lotteryProducts[0];\r\n        for (let key of this.lotteryProducts) {\r\n            if (minPrice.p >= key.p && minPrice.PR > key.PR) minPrice = key;\r\n            let base = key.PR * this.totalNumPrizes / 100;\r\n            arr.push(Array.from(Array(base), (v, k) => { return { productId: key.id, content: key.content } }));\r\n        }\r\n        let shift = arr.flat();\r\n        this.productsLib = shift;\r\n        let total = this.productsLib.length;\r\n\r\n        if (total !== this.totalNumPrizes) {\r\n            for (let i = 0; i < (this.totalNumPrizes - total); i++)  //找8个商品中价值最小的\r\n                this.productsLib.push({ productId: minPrice.id, content: minPrice.content });//productId 暂未定\r\n        }\r\n\r\n        //乱序\r\n        let { length } = this.productsLib, i;\r\n        while (length) {\r\n            i = (Math.random() * length--) >>> 0;\r\n            [this.productsLib[length], this.productsLib[i]] = [this.productsLib[i], this.productsLib[length]]\r\n        }\r\n\r\n        this.lotteryProducts.splice(this.lotteryProducts.length / 2, 0, {}); // 九宫格 使用\r\n    }\r\n\r\n    /**\r\n     * 抽中的产品添加至我的奖品列表   ------------------ 需uq \r\n     */\r\n    addMyPrize = async (prize: any) => {\r\n        // await this.uqs.积分商城\r\n    }\r\n\r\n    /**\r\n     * 获取我的奖品\r\n     */\r\n    getMyPrizes = async () => {\r\n        this.myPrizeLib = [];\r\n        // await this.uqs.积分商城\r\n    }\r\n\r\n    private createOrderFromCart = async () => {\r\n        let { currentUser, currentSalesRegion } = this.cApp;\r\n        this.prizeOrderData.webUser = currentUser.id;\r\n        this.prizeOrderData.salesRegion = currentSalesRegion.id;\r\n        if (currentUser.currentCustomer !== undefined) {\r\n            this.prizeOrderData.customer = currentUser.currentCustomer.id;\r\n        }\r\n\r\n        /* if (this.myPrizeLib !== undefined && this.myPrizeLib.length > 0) {\r\n            this.prizeOrderData.exchangeItems = this.myPrizeLib.map((e: any) => {\r\n                if (e.quantity > 0) {\r\n                    var item = new prizeOrderItem();\r\n                    item.product = e.id;\r\n                    item.pack = e.pack;\r\n                    item.quantity = e.quantity;\r\n                    item.point = e.point;\r\n                    return item;\r\n                }\r\n            });\r\n        } */\r\n    }\r\n\r\n    /**\r\n     * 确认领取(成功 VMyPrizeExchangeOrder 确认使用此函数)\r\n     */\r\n    submitOrder = async () => {\r\n        this.createOrderFromCart();\r\n        console.log(this.prizeOrderData);\r\n\r\n        // let PointExchangeSheet = this.uqs.积分商城.PointExchangeSheet;\r\n        // let getDataForSave = this.orderData.getDataForSave();\r\n        // let result: any = await PointExchangeSheet.save(\"PointExchangeSheet\", getDataForSave);\r\n        // let { id, flow, state } = result;\r\n        // await PointExchangeSheet.action(id, flow, state, \"submit\");\r\n\r\n\r\n        // 打开下单成功显示界面\r\n        // nav.popTo(this.cApp.topKey);\r\n        // this.openVPage(OrderSuccess, result);\r\n    }\r\n\r\n    onSelectShippingContact = async () => {\r\n        let { cPointProduct } = this.cApp;\r\n        this.prizeOrderData.shippingContact = await cPointProduct.selectContact()\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/已签到.552dc80d.png\";","import * as React from 'react';\r\nimport { VPage, Page, DropdownAction, DropdownActions, FA, nav } from \"tonva-react\";\r\nimport { observer } from 'mobx-react-lite';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { GLOABLE } from 'cartenv';\r\nimport { signViceMap, signTopicMap, Homemadelogo, logo } from 'tools/images';\r\nimport { CSignIn } from './CSignIn';\r\nimport { RevenueExpenditure } from './basicRefer';\r\nimport classNames from 'classnames';\r\nimport moment from 'moment';\r\nimport 积分图标P from 'images/积分图标P.png'\r\nimport 已签到 from 'images/已签到.png'\r\n\r\nexport const daysAndMultipleByWelfare = [\r\n    { id: 1, days: 7, multiple: 2 },\r\n    { id: 2, days: 15, multiple: 3 },\r\n    { id: 3, days: 30, multiple: 4 },\r\n    { id: 4, days: 180, multiple: 5 },\r\n    { id: 5, days: 365, multiple: 6 }\r\n];\r\n\r\nexport class VPointSign extends VPage<CSignIn> {\r\n    showTips: any = \"none\";\r\n    rulesNum: number = 0;\r\n    constructor(c: CSignIn) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            showTips: observable\r\n        });\r\n    }\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderRule = (rulesNum: any, ruleContent: any) => {\r\n        return <div key={rulesNum} className=\" mb-3 d-flex\" style={{ boxShadow: \"0px 1px 3px #333333\", borderRadius: \"8px\" }}>\r\n            <span className=\"h4 m-0 p-2  align-self-center\" style={{ borderRight: '1px dashed #cccccc' }}>\r\n                {String(rulesNum).padStart(2, '0')}\r\n            </span>\r\n            <div className=\"initialism modal-title flex-fill p-2  align-self-center\">{ruleContent}</div>\r\n        </div>\r\n    }\r\n\r\n    private demandBlock = (name: string, icon: string, color: string, action: any) => {\r\n        return <div onClick={action} className=\"w-25 text-center p-2\" style={{ color }}>\r\n            <FA name={icon} size=\"2x\" />\r\n            <div className=\"small\">{name}</div>\r\n        </div>\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { IsSignin, signinval, signinConsecutiveDays, openRevenueExpenditure, cApp } = this.controller;\r\n        let { cLottery } = cApp;\r\n        let date = moment().format('YYYY-MM-DD').split('-');\r\n        let timer = `${date[0]} 年 ${date[1]} 月 ${date[2]} 日 `;\r\n\r\n        // if (IsSignin) this.handleChange();\r\n        let actions: DropdownAction[] = [\r\n            {\r\n                icon: 'get-pocket',\r\n                caption: RevenueExpenditure.SIGNINHISTORY,\r\n                action: () => openRevenueExpenditure(RevenueExpenditure.SIGNINHISTORY)\r\n            }\r\n        ];\r\n        let right = <DropdownActions className=\"align-self-center mr-1 bg-transparent border-0 text-light\" icon=\"navicon\" actions={actions} />;\r\n\r\n        return <Page header='签到' right={right}>\r\n            <div className=\"text-center text-light px-5 pt-5\"\r\n                style={{ background: `url(${signTopicMap}) no-repeat`, backgroundSize: \"100% 100%\" }}>\r\n                {/* <div className=\"rounded-circle mx-auto\"\r\n                    style={{ background: 'linear-gradient(#FCF4F3 15%, #EFDCD4, #CC9287, #C17162, #A93338, #A52230)', padding: '.8rem', width: '10rem', height: '10rem' }}>\r\n                    <div className=\"w-100 h-100 rounded-circle pt-3\" style={{ background: \"#A52230\" }}>\r\n                        <div className=\"small pt-2\">已连续签到</div>\r\n                        <div className=\"d-flex align-items-end justify-content-center\">\r\n                            <span className=\"font-weight-bolder display-4\">{signinConsecutiveDays} </span>\r\n                            <span className=\"mb-1 pb-2 ml-1\"> 天</span>\r\n                        </div>\r\n                    </div>\r\n                </div> */}\r\n                <div className=\"pb-5\">\r\n                    <div className=\"h4\">{timer}</div>\r\n                    {\r\n                        IsSignin ? <>\r\n                            <img src={积分图标P} alt=\"\" className=\"h-5c\" />\r\n                            <div className=\"pt-3\">\r\n                                <span className=\"bg-white px-3 py-1 font-weight-bolder\" style={{ borderRadius: \"25px\", color: 'rgb(165,34,48)' }}>本次签到获取{signinval}分</span>\r\n                            </div>\r\n                        </>\r\n                            : <>\r\n                                <img src={已签到} alt=\"\" className=\"h-4c mb-3 mt-2\" />\r\n                                <div className=\"mb-2 h5\">今日已签到</div> \r\n                            </>\r\n                    }\r\n                    {/* <div className=\"my-4 h5\">今日已签到</div> */}\r\n                </div>\r\n                {/* <div className=\"rounded-circle mx-auto w-12c h-12c\"\r\n                    style={{ background: 'linear-gradient(#FCF4F3 15%, #EFDCD4, #CC9287, #C17162, #A93338, #A52230)', padding: '.8rem' }}>\r\n                    <div className=\"w-100 h-100 rounded-circle pt-3\" style={{ background: \"#A52230\" }}>\r\n                        <div className=\"pt-4\">已连续签到</div>\r\n                        <div className=\"d-flex align-items-end justify-content-center\">\r\n                            <span className=\"font-weight-bolder display-4\">{signinConsecutiveDays} </span>\r\n                            <span className=\"mb-1 pb-2 ml-1\"> 天</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"small\" style={{ transform: 'translateY(-30px)' }}>\r\n                    <span className=\"bg-white px-3 py-1 font-weight-bolder\" style={{ borderRadius: \"25px\", color: 'rgb(165,34,48)' }}>本次签到获取{signinval}分</span>\r\n                    <div className=\"small mt-2\">连续签到30天，可获得1次抽奖机会</div>\r\n                </div> */}\r\n            </div>\r\n            <div className=\"w-100 p-5 mt-4 d-flex justify-content-center flex-column\" >\r\n                <img src={Homemadelogo} alt=\"\" className=\"w-100 mx-auto\" style={{ opacity: .1, transform: 'skew(-10deg, 0deg)' }} />\r\n            </div>\r\n\r\n            {/* 抽奖 */}\r\n            {/* <div style={{ background: `url(${signViceMap})`, backgroundSize: \"100%\" }} className=\"h-20c\">\r\n                <div className=\"mx-5 mt-2 py-1 d-flex justify-content-center flex-wrap\" style={{ boxShadow: \"0px 1px 3px #333333\", borderRadius: \"8px\" }}>\r\n                    {this.demandBlock('抽奖', 'life-ring', '#CD6600', cLottery.openLotteryProduct)}\r\n                </div>\r\n            </div> */}\r\n\r\n            {/* 签到规则 */}\r\n            {/* <div className=\"pt-4 px-4 mt-4\">\r\n                <p className=\"text-center mb-4\"><span style={{ borderRadius: \"22px\", background: \"#D56F2B\" }} className=\"text-center py-2 px-3 text-white\">签到规则</span></p>\r\n                {this.renderRule(1, '连续签到30天，可获得1次抽奖机会')}\r\n                {this.renderRule(2, '若累计签到中断,则重新计算签到天数。')}\r\n            </div> */}\r\n\r\n            {/* <small style={{ color: 'rgb(255,192,120)' }} >连续签到{welfare.days}天，可获得{welfare.multiple}倍的积分奖励</small> */}\r\n            {/* 签到获取提示 */}\r\n            {/* <div className=\"text-left small w-100 pt-1 pl-2 position-absolute text-body\"\r\n                style={{ top: 0, left: 0, display: this.showTips }}>本次签到获取{signinval}分</div> */}\r\n        </Page >;\r\n\r\n        /* return <Page header='签到领积分' right={right}>\r\n            <div className=\"text-center \" style={{ position: \"relative\", background: \"linear-gradient(rgb(253, 98, 52), rgb(250, 51, 82))\", padding: '3rem' }}>\r\n                <div className=\"d-flex justify-content-center\" style={{ flexDirection: 'column', margin: '0 4rem' }}>\r\n                    <h2 style={{ color: 'rgb(255,192,120)' }} className=\"mb-3\">\r\n                        <FA name='diamond' /> <span className=\"text-light\"><small>x</small> {this.signinval}</span>\r\n                    </h2>\r\n                    {getSignpoint}\r\n                </div>\r\n                <div className=\"text-center text-white small w-100 p-1 alert alert-warning text-muted\" style={{\r\n                    position: \"absolute\", top: 0, left: 0, display: this.showTips\r\n                }}>本次签到获取{this.signinval}分</div>\r\n            </div>\r\n            // <div className=\"text-center my-1 p-1  bg-white\" style={{ borderBottom: \".5px solid #ccc\" }}>签到积分详情</div>\r\n            // <List items={signinPageHistory} item={{ render: renderPointRecord }} none={none} />\r\n        </Page >; */\r\n    })\r\n\r\n\r\n    protected handleChange = async () => {\r\n        this.showTips = \"\";\r\n        if (!this.showTips)\r\n            setTimeout(() => { this.showTips = \"none\"; this.controller.IsSignin = false }, GLOABLE.TIPDISPLAYTIME);\r\n    }\r\n}\r\n","export default \"data:image/png;base64,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\"","import { CApp } from 'CApp';\r\nimport { CUqBase } from 'CBase';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { QueryPager } from \"tonva-react\";\r\nimport { VPointSign, daysAndMultipleByWelfare } from './VPointSign';\r\nimport { VRevenueExpenditure } from './VRevenueExpenditure';\r\n\r\nconst pointBase: number = 3; /* 积分基数 */\r\n\r\nexport class CSignIn extends CUqBase {\r\n    signinval: number = pointBase;         /* 签到可领积分 */\r\n    signinConsecutiveDays: number = 0;     /* 连续签到天数 */\r\n    IsSignin: boolean = false;             /* 是否签到 */\r\n    signinPageHistory: QueryPager<any>;    /* 签到记录 */\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            signinval: observable,\r\n            signinConsecutiveDays: observable,\r\n            IsSignin: observable,\r\n            signinPageHistory: observable\r\n        });\r\n    }\r\n    \r\n    async internalStart(param?: any) { }\r\n\r\n    /**\r\n     * 签到   ------------------ 需调用连续签到天数 uq:this.getSigninConsecutiveDays --------------------\r\n     */\r\n    openPointSign = async () => {\r\n        if (!this.isLogined)\r\n            await this.cApp.cPointProduct.loginMonitor();\r\n        else {\r\n            await this.isSignined();\r\n            if (this.IsSignin)\r\n                await this.addSigninSheet(47, this.signinval);\r\n            await this.getSigninConsecutiveDays();\r\n            this.openVPage(VPointSign);\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 签到明细页面\r\n    */\r\n    openRevenueExpenditure = async (topic?: any) => {\r\n        await this.getSigninHistory();\r\n        this.openVPage(VRevenueExpenditure, topic)\r\n    }\r\n\r\n    /**\r\n     * 是否签到\r\n     */\r\n    isSignined = async () => {\r\n        let { currentUser } = this.cApp;\r\n        let { checkIsSignin } = this.uqs.积分商城;\r\n        let res = await checkIsSignin.obj({ customer: currentUser?.currentCustomer });\r\n        this.IsSignin = res.result === 0 ? true : false;\r\n    }\r\n\r\n    /**\r\n     * 签到添加积分到\r\n     */\r\n    addSigninSheet = async (customer: any, amount: any) => {\r\n        let { cPointProduct } = this.cApp;\r\n        let { Signin } = this.uqs.积分商城;\r\n        customer = this.cApp.currentUser?.currentCustomer;\r\n        // customer = customer ? customer : this.user.id;\r\n        await Signin.submit({ webuser: this.user.id, customer: customer, amount: amount });\r\n        await cPointProduct.refreshMypoint();\r\n        // await this.getSigninConsecutiveDays();\r\n        // await this.getSigninHistory();\r\n        // await this.getPointHistory();\r\n\r\n        /**\r\n        let result: any = await SigninSheet.save(\"SigninSheet\", { customer: customer, amount: amount });\r\n        console.log(this.cApp.currentUser);\r\n        let { id, flow, state } = result;\r\n        await SigninSheet.action(id, flow, state, \"submit\");\r\n        await Signin.submit({ webbuser: 47, customer: 47, amount: 3 });\r\n        **/\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取签到记录\r\n     */\r\n    getSigninHistory = async () => {\r\n        let { currentUser } = this.cApp;\r\n        this.signinPageHistory = new QueryPager(this.uqs.积分商城.GetPointSigninHistory, 15, 30);\r\n        this.signinPageHistory.first({ customer: currentUser?.currentCustomer });\r\n    }\r\n\r\n    /**\r\n     * 连续签到天数  webUser  ----------------------------需uq --------------------------------\r\n     */\r\n    getSigninConsecutiveDays = async () => {\r\n        // this.signinConsecutiveDays \r\n        await this.getSigninHistory();\r\n\r\n    }\r\n\r\n    /**\r\n     * 福利：连续签到 数倍积分（弃用）\r\n     */\r\n    /* multiplePointsWelfare = () => {\r\n        let arr = daysAndMultipleByWelfare;\r\n        if (this.IsSignin) this.signinConsecutiveDays += 1;\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (this.signinConsecutiveDays < arr[i].days) {\r\n                if (i === 0) this.signinval = pointBase;\r\n                else this.signinval = pointBase * arr[i - 1].multiple;\r\n                return arr[i];\r\n            } else if (this.signinConsecutiveDays >= arr[i].days && i === (arr.length - 1)) {\r\n                this.signinval = pointBase * arr[i].multiple;\r\n                return arr[i];\r\n            }\r\n        }\r\n    } */\r\n\r\n}\r\n","import * as React from 'react';\r\nimport { View } from \"tonva-react\";\r\nimport { observer } from 'mobx-react';\r\nimport { makeObservable, observable } from 'mobx';\r\nimport { COrderMaker } from './COrderMaker';\r\nexport class VOrderMaker extends View<COrderMaker> {\r\n\r\n    ordermaker: any;\r\n    constructor(c: COrderMaker) {\r\n        super(c);\r\n\r\n        makeObservable(this, {\r\n            ordermaker: observable\r\n        });\r\n    }\r\n\r\n    render(param: any): JSX.Element {\r\n        return <this.content id={param} />;\r\n    }\r\n\r\n    private initPostCount = async (param: any) => {\r\n        if (this.ordermaker === undefined)\r\n            this.ordermaker = await this.controller.getOrderMakerName(param.id);\r\n    }\r\n\r\n    private content = observer((param: any): any => {\r\n        this.initPostCount(param);\r\n        if (!this.ordermaker)\r\n            return null;\r\n        return this.ordermaker.firstName;\r\n    })\r\n\r\n}","import { CUqBase } from '../CBase';\r\nimport { VOrderMaker } from './VOrderMaker';\r\n\r\nexport class COrderMaker extends CUqBase {\r\n\r\n    protected async internalStart(param: any) {\r\n    }\r\n\r\n    getOrderMakerName = async (webuser: any) => {\r\n        let user = await this.uqs.webuser.WebUser.load(webuser);\r\n        return user;\r\n    }\r\n\r\n    renderOrderMaker = (param: any) => {\r\n        return this.renderView(VOrderMaker, param);\r\n    }\r\n}","import * as React from 'react';\r\nimport { COrderDraft } from './COrderDraft';\r\nimport { VPage, Page, FA } from \"tonva-react\";\r\n\r\nexport class VNotYOrder extends VPage<COrderDraft> {\r\n\r\n    async open(brief?: any) {\r\n        this.openPage(this.page, brief);\r\n    }\r\n\r\n    private page = (brief: any) => {\r\n\r\n        return <Page header=\"为您下单\" back=\"close\">\r\n            <div className='alert alert-primary'>\r\n                <p>\r\n                    <FA name=\"info-circle\" size=\"2x\" className=\"pr-3\"></FA>\r\n                    百灵威可按照客户要求制作订单（订单制作后需客户确认方可生效），<span className=\"text-danger\">若您并未要求百灵威提供此服务，则可安全忽略此信息。</span>\r\n                </p>\r\n            </div>\r\n        </Page>\r\n    }\r\n}","import { makeObservable, observable } from 'mobx';\r\nimport { CUqBase } from '../CBase';\r\nimport { VNotYOrder } from './VNotYOrder';\r\nimport { groupByProduct } from 'tools/groupByProduct';\r\nimport { Order, OrderItem } from 'order/Order';\r\nimport { LoaderProductChemicalWithPrices } from 'product/itemLoader';\r\nimport { CApp } from 'CApp';\r\nconst FREIGHTFEEFIXED = 12;\r\nconst FREIGHTFEEREMITTEDSTARTPOINT = 100;\r\nexport class COrderDraft extends CUqBase {\r\n    orderData: Order = new Order();\r\n    buyerAccounts: any[] = [];\r\n    hasAnyCoupon: boolean;\r\n    orderDraft: any;\r\n\r\n    constructor(cApp: CApp) {\r\n        super(cApp);\r\n\r\n        makeObservable(this, {\r\n            orderData: observable,\r\n            hasAnyCoupon: observable,\r\n            orderDraft: observable,\r\n            buyerAccounts: observable\r\n        });\r\n    }\r\n\r\n    protected async internalStart() { }\r\n\r\n    showSharedOrder = async (param: any) => {\r\n        let orderdraftid = param;\r\n        let { uqs, cMe } = this.cApp;\r\n        this.orderDraft = await uqs.orderDraft.OrderDraft.getSheet(orderdraftid);\r\n        if (!this.isLogined) {\r\n            cMe.showLogin();\r\n            if (this.isLogined)\r\n                this.renderOrderDraft()\r\n        } else {\r\n            this.renderOrderDraft()\r\n        }\r\n    }\r\n\r\n    renderOrderDraft = async () => {\r\n        let { brief, data } = this.orderDraft;\r\n        let { currentUser, uqs, cCoupon, currentSalesRegion } = this.cApp;\r\n        if (data.webUser.id === currentUser.id) {\r\n            let { coupon } = data;\r\n            let { id: couponId } = coupon;\r\n            let result = await uqs.salesTask.Coupon.load(couponId);\r\n            let { code: couponCode } = result;\r\n            // 自动领取积分券\r\n            cCoupon.autoDrawCouponBase(couponCode)\r\n            let { orderItems } = data;\r\n            let orderItemsGrouped = groupByProduct(orderItems);\r\n            data.orderItems = orderItemsGrouped;\r\n\r\n            this.orderData.webUser = currentUser.id;\r\n            this.orderData.salesRegion = currentSalesRegion.id;\r\n            this.orderData.comments = data.comments;\r\n            this.orderData.orderMaker = data.orderMaker;\r\n            this.orderData.currency = data.currency;\r\n\r\n            let buyerAccountQResult = await uqs.webuser.WebUserBuyerAccount.query({ webUser: currentUser.id })\r\n            if (buyerAccountQResult) {\r\n                this.buyerAccounts = buyerAccountQResult.ret;\r\n                if (this.buyerAccounts && this.buyerAccounts.length === 1) {\r\n                    this.orderData.customer = this.buyerAccounts[0].buyerAccount;\r\n                }\r\n            }\r\n\r\n            if (this.orderData.shippingContact === undefined) {\r\n                this.orderData.shippingContact = data.shippingContact;\r\n            }\r\n\r\n            if (this.orderData.invoiceContact === undefined) {\r\n                this.orderData.invoiceContact = data.invoiceContact;\r\n            }\r\n\r\n            if (this.orderData.invoiceType === undefined) {\r\n                this.orderData.invoiceType = data.invoiceType;\r\n            }\r\n\r\n            if (this.orderData.invoiceInfo === undefined) {\r\n                this.orderData.invoiceInfo = data.invoiceInfo;\r\n            }\r\n\r\n            if (data.orderItems !== undefined && data.orderItems.length > 0) {\r\n                this.orderData.currency = data.orderItems[0].packs[0].currency;\r\n                let promises: PromiseLike<any>[] = [];\r\n                let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n                data.orderItems.forEach((e: any) => promises.push(loader.load(e.product.id)));\r\n                let productData: any = await Promise.all(promises);\r\n\r\n                let newProductData: any = [];\r\n                productData.forEach((val: any) => {\r\n                    newProductData.push(...val.subs)\r\n                });\r\n\r\n                this.orderData.orderItems = data.orderItems.map((e: any) => {\r\n                    var item = new OrderItem();\r\n                    item.product = e.product;\r\n                    item.packs = e.packs.map((v: any) => {\r\n                        let newretail = newProductData.find((e: any) => {\r\n                            return v.pack.id === e.pack.id;\r\n                        });\r\n                        return { ...v, retail: newretail ? newretail.retail : undefined, currency: data.currency }\r\n                    }).filter((v: any) => v.quantity > 0 && v.price && v.retail);\r\n                    item.packs.forEach((pk) => {\r\n                        pk.priceInit = pk.price;\r\n                    });\r\n                    return item\r\n                });\r\n                //     // 运费和运费减免\r\n                this.orderData.freightFee = FREIGHTFEEFIXED;\r\n                if (this.orderData.productAmount > FREIGHTFEEREMITTEDSTARTPOINT)\r\n                    this.orderData.freightFeeRemitted = FREIGHTFEEFIXED * -1;\r\n                else\r\n                    this.orderData.freightFeeRemitted = 0;\r\n            }\r\n\r\n            let orderData = this.orderData;\r\n            this.cApp.cOrder.renderOrderDraft({ orderData, orderDraftBrief: brief });\r\n\r\n            // this.openVPage(VCreateOrder, { orderDraft: 1 });\r\n        }\r\n        else\r\n            this.openVPage(VNotYOrder, brief)\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { CAppBase, IConstructor, User, nav, Elements, Query } from \"tonva-react\";\r\n//import { UQs } from \"./uqs\";\r\nimport { Cart } from \"./cart/Cart\";\r\nimport { WebUser } from \"./CurrentUser\";\r\nimport { CHome } from \"./home\";\r\nimport { CCart } from \"./cart\";\r\nimport { CProduct } from \"./product\";\r\nimport { COrder } from \"./order/COrder\";\r\nimport { CProductCategory } from \"./productCategory/CProductCategory\";\r\nimport { CMember } from \"./member\";\r\nimport { CMe } from \"./me/CMe\";\r\nimport { CUqApp } from \"./CBase\";\r\nimport { VMain } from 'ui/main';\r\nimport * as qs from 'querystringify';\r\nimport { CCoupon } from \"coupon/CCoupon\";\r\nimport { CPointProduct } from \"pointMarket/CPointProduct\";\r\nimport { GLOABLE } from \"cartenv\";\r\nimport { CYncProjects } from \"ync/CYncProjects\";\r\nimport { CFavorites } from 'customer/CFavorites';\r\nimport { CLottery } from 'pointMarket/CLottery';\r\nimport { CSignIn } from 'pointMarket/CSignIn';\r\nimport { COrderMaker } from 'ordermakeruser/COrderMaker';\r\nimport { COrderDraft } from 'orderdraft/COrderDraft';\r\n\r\nexport class CApp extends CUqApp {\r\n    //get uqs(): UQs { return this._uqs as UQs };\r\n\r\n    cart: Cart;\r\n    topKey: any;\r\n\r\n    currentSalesRegion: any;\r\n    currentLanguage: any;\r\n    currentUser: WebUser;\r\n    // currentCouponCode: string;\r\n    // currentCreditCode: string;\r\n\r\n    cHome: CHome;\r\n    cCart: CCart;\r\n    cProduct: CProduct;\r\n    cOrder: COrder;\r\n    cCoupon: CCoupon;\r\n    cProductCategory: CProductCategory;\r\n    cMember: CMember;\r\n    cMe: CMe;\r\n    cPointProduct: CPointProduct;\r\n    cFavorites: CFavorites;\r\n    cYncProjects: CYncProjects;\r\n    cLottery: CLottery;\r\n    cSignIn: CSignIn;\r\n    cOrderMaker: COrderMaker;\r\n    cOrderDraft: COrderDraft;\r\n\r\n    /*\r\n    protected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n        return new type(this);\r\n    }\r\n    */\r\n\r\n    private async setUser() {\r\n        this.currentUser = new WebUser(this.uqs); //this.cUqWebUser, this.cUqCustomer);\r\n        if (this.isLogined) {\r\n            await this.currentUser.setUser(this.user);\r\n        }\r\n    }\r\n\r\n    protected async internalStart() {\r\n        let { uqs } = this;\r\n        let { common } = uqs;\r\n        let { SalesRegion, Language } = common;\r\n        let [currentSalesRegion, currentLanguage] = await Promise.all([\r\n            SalesRegion.load(GLOABLE.SALESREGION_CN),\r\n            Language.load(GLOABLE.CHINESE),\r\n        ]);\r\n        await this.setUser();\r\n        //this.currentSalesRegion = await this.uqs.common.SalesRegion.load(GLOABLE.SALESREGION_CN);\r\n        //this.currentLanguage = await this.uqs.common.Language.load(GLOABLE.CHINESE);\r\n        this.currentSalesRegion = currentSalesRegion;\r\n        this.currentLanguage = currentLanguage;\r\n\r\n        this.cart = new Cart(this);\r\n        await this.cart.init();\r\n\r\n        this.cProductCategory = this.newC<CProductCategory>(CProductCategory);\r\n        this.cCart = this.newC(CCart);\r\n        this.cHome = this.newC(CHome);\r\n        this.cProduct = this.newC(CProduct);\r\n        this.cOrder = this.newC(COrder);\r\n        this.cCoupon = this.newC(CCoupon);\r\n        this.cMember = this.newC(CMember);\r\n        this.cMe = this.newC(CMe);\r\n        this.cPointProduct = this.newC(CPointProduct);\r\n        this.cFavorites = this.newC(CFavorites);\r\n        this.cYncProjects = this.newC(CYncProjects);\r\n        this.cLottery = this.newC(CLottery);\r\n        this.cSignIn = this.newC(CSignIn);\r\n        this.cOrderMaker = this.newC(COrderMaker);\r\n        this.cOrderDraft = this.newC(COrderDraft);\r\n\r\n        await this.cHome.getSlideShow();\r\n        await this.cPointProduct.initPointAllData();\r\n        let promises: PromiseLike<void>[] = [];\r\n        promises.push(this.cProductCategory.start());\r\n        await Promise.all(promises);\r\n        // this.cMe.openMyPoint();\r\n        // this.cLottery.openLotteryProduct();\r\n        // this.cSignIn.openPointSign();\r\n\r\n        let { location } = document;\r\n        let { search, pathname } = location;\r\n        if (search) {\r\n            let query: any = qs.parse(search.toLowerCase());\r\n            switch (query.type) {\r\n                case \"privacy\":\r\n                    this.showMain();\r\n                    this.cMe.openPrivacy();\r\n                    break;\r\n                case \"product\":\r\n                    this.showMain();\r\n                    let prouductBoxId = await this.uqs.product.ProductX.boxId(query.product).assure();\r\n                    await this.cProduct.showProductDetail(prouductBoxId);\r\n                    break;\r\n                case \"coupon\":\r\n                    this.showMain();\r\n                    if (query.coupon)\r\n                        await this.cCoupon.showSharedCoupon(query);\r\n                    break;\r\n                case \"credits\":\r\n                    this.showMain();\r\n                    if (query.credits) {\r\n                        await this.cCoupon.showSharedCredits(query);\r\n                        /*\r\n                        if (query.platform === \"1\")\r\n                            await this.cPointProduct.openPointDrawing(query.credits);\r\n                        else\r\n                            await this.cCoupon.showSharedCredits(query);\r\n                        */\r\n                    }\r\n                    break;\r\n                case \"vipcard\":\r\n                    this.showMain();\r\n                    if (query.vipcard)\r\n                        await this.cCoupon.showSharedVIPCard(query);\r\n                    break;\r\n\r\n                /* 分享过来的订单 */\r\n                case 'orderdraft':\r\n                    this.showMain();\r\n                    this.cOrderDraft.showSharedOrder(query.orderdraftid)\r\n                    break;\r\n                case \"login\":\r\n                    if (!this.isLogined)\r\n                        this.cMe.showLogin(async (user: User) => {\r\n                            window.location.href = window.location.origin;\r\n                        });\r\n                    break;\r\n                case \"loginout\":\r\n                    if (this.isLogined)\r\n                        this.cMe.showLoginOut(async () => {\r\n                            window.location.href = window.location.origin;\r\n                        });\r\n                    break;\r\n                case \"cart\":\r\n                    this.cCart.start();\r\n                    break;\r\n                case \"productlist\":\r\n                    this.cProduct.start(query.key);\r\n                    break;\r\n                case \"me\":\r\n                    this.cMe.openMyOrders('all');\r\n                    break;\r\n                default:\r\n                    this.showMain();\r\n                    break;\r\n            }\r\n        } else {\r\n            this.showMain();\r\n        }\r\n        this.topKey = nav.topKey();\r\n    }\r\n\r\n    showMain(initTabName?: string) {\r\n        this.openVPage(VMain, initTabName);\r\n        let divLogin = document.getElementById('login');\r\n        if (divLogin) {\r\n            // this.openPage(this.cCart.renderCartLabel());\r\n            this.openPage(this.cMe.renderLoginState());\r\n        }\r\n    }\r\n\r\n    protected afterStart = async () => {\r\n\r\n        // elements定义div元素id与一个函数的对应关系，定义之后，\r\n        // 当在页面上存在相应id的div元素时，则执行其对应的函数，并将函数执行的结果(UI)挂载在该div上 \r\n        let elements: Elements = {\r\n            login: this.showLogin,\r\n            productlist: this.productList,\r\n            productdetail: this.productDetail,\r\n            carts: this.carts,\r\n        }\r\n\r\n        /*\r\n        this.hookElements(elements);\r\n\r\n        window.onfocus = () => {\r\n            this.hookElements(elements);\r\n        }\r\n        */\r\n        return;\r\n    }\r\n\r\n    private showLogin = (element: HTMLElement) => {\r\n        ReactDOM.render(this.cMe.renderLoginState_Web(), element);\r\n    }\r\n\r\n    private productList = (element: HTMLElement) => {\r\n        // console.log(\"productlist\");\r\n\r\n        let { location } = document;\r\n        let { search } = location;\r\n        if (search) {\r\n            let query: any = qs.parse(search.toLowerCase());\r\n            let { type, key } = query;\r\n            if (type === \"search\") {\r\n                ReactDOM.render(this.cProduct.renderProductList(key), element);\r\n            }\r\n        }\r\n    }\r\n\r\n    private productDetail = async (element: HTMLElement) => {\r\n        // console.log(\"productDetail\");\r\n\r\n        let { location } = document;\r\n        let { pathname } = location;\r\n        if (pathname) {\r\n            // console.log(pathname);\r\n            let productid = pathname.split('/')[2];\r\n            // console.log(productid);\r\n            if (productid) {\r\n                ReactDOM.render(await this.cProduct.renderProductWeb(productid), element);\r\n            }\r\n        }\r\n    }\r\n\r\n    private carts = (element: HTMLElement) => {\r\n        console.log(\"carts\");\r\n        //element.innerText = \"hello\";\r\n        let { location } = document;\r\n        let { pathname } = location;\r\n        if (pathname) {\r\n            console.log(pathname);\r\n            ReactDOM.render(this.cCart.tab(), element);\r\n        }\r\n    }\r\n\r\n\r\n    async loginCallBack(user: User) {\r\n        /*\r\n        if (this.cartService.isLocal) {\r\n            let cartLocal = { ...this.cartViewModel } as CartViewModel;\r\n            // this.cartService.clear(this.cartViewModel);\r\n            this.cartService = CartServiceFactory.getCartService(this);\r\n            this.cartViewModel = await this.cartService.load();\r\n            // this.cartViewModel = await this.cartService.merge(cartLocal);\r\n        }\r\n        */\r\n    }\r\n\r\n    protected onDispose() {\r\n        this.cart.dispose();\r\n    }\r\n}","import * as React from 'react';\r\nimport './App.css';\r\nimport { NavView, nav, start } from \"tonva-react\";\r\nimport { CApp } from 'CApp';\r\nimport { appConfig } from 'uq-app/appConfig';\r\n\r\n//const tonvaApp = \"bruce/TestApp\";\r\nnav.setSettings(appConfig);\r\n\r\nclass App extends React.Component {\r\n\r\n  private onLogined = async () => {\r\n    await start(CApp, appConfig);\r\n  }\r\n  public render() {\r\n    return <NavView onLogined={this.onLogined} notLogined={this.onLogined} />\r\n  }\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if ('serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport './index.css';\r\n\r\nlet elRoot = document.getElementById('root');\r\nif (!elRoot) {\r\n\telRoot = document.createElement('div');\r\n\telRoot.style.display = 'none';\r\n\tdocument.body.append(elRoot);\r\n}\r\nReactDOM.render(<App />, elRoot);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}